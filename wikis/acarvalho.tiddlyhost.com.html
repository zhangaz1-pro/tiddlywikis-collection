<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 6, revision: 5, date: new Date("October 6, 2011"), extensions: {}};
//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2011

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
">
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel="alternate" type="application/rss+xml" title="RSS" href="index.xml">
<!--}}}-->

<!--PRE-HEAD-END-->
<title>  André de Carvalho - Software development thoughts and more... </title>
<style id="styleArea" type="text/css">
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}
</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright © 2004-2007 Jeremy Ruston, Copyright © 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br><br>If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>
</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;</pre>
</div>
<div modifier="TiddlyHost" title="TiddlyHost"><pre>[[Tiddlyhost|https://tiddlyhost.com]] is a hosting service for ~TiddlyWiki.</pre></div>
</div>
<!--POST-SHADOWAREA-->

<!--TIDDLYSPOT_INJECT-->
<div style="display:none"><img src="http://tiddlyspot.com/_ts/stats/acarvalho"></div>
<!--TCEJNI_TOPSYLDDIT-->

<!--TIDDLYSPOT_INJECT-->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct="UA-96965-3";urchinTracker();</script>

<!--TCEJNI_TOPSYLDDIT-->
<div id="storeArea">
<div title="2012 Mozambique and South Africa" modifier="acarvalho" created="201210211334" modified="201304121433" tags="Content Travel" server.title="2012 Mozambique and South Africa" server.page.revision="201304121433" server.etag='"acarvalho_public/2012%20Mozambique%20and%20South%20Africa/1182980:7a43d1694de3c07f267ed9b14739fb990699f2dd"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1b1875ee0e160bcad5b353edd78b1b18b246c9dc">
<pre>&lt;&lt;Image "FR" "125" "250px-Mozambique_(orthographic_projection).svg.png" "http://upload.wikimedia.org/" "wikipedia/commons/thumb/8/84/Mozambique_(orthographic_projection).svg/" "" "Mozambique"&gt;&gt;
[[Mozambique|http://en.wikipedia.org/wiki/Mozambique]] is a beautiful country with very nice people and great food. 

&lt;&lt;Image "FL" "300" "Dao.jpg" "https://dl.dropbox.com/" "s/5ohjd1mw0c2kpa0/" "?dl=1" "Dao - Maputo"&gt;&gt;
&lt;&lt;Image "FL" "300" "Fishing.jpg" "https://dl.dropbox.com/" "s/pniyd8l8emo1cm1/" "?dl=1" "Fishing - Maputo"&gt;&gt;













[[South Africa|http://en.wikipedia.org/wiki/South_Africa]] Seems also nice but I've only had the chance to know a little of the fabulous [[Kruger Park|http://www.krugerpark.co.za/]]. 
&lt;&lt;Image "FR" "125" "250px-South_Africa_%28orthographic_projection%29.svg.png" "http://upload.wikimedia.org/" "wikipedia/commons/thumb/6/6e/South_Africa_%28orthographic_projection%29.svg/" "" "South Africa"&gt;&gt;
This is wild life as it is meant to be. Free, happy and alive animals in all their glory.
&lt;&lt;Image "FL" "300" "Gazele.jpg" "https://dl.dropbox.com/" "s/8b5ntg4y5f8b3ga/" "?dl=1" "Gazele - Kruger Park"&gt;&gt; &lt;&lt;Image "FR" "125" "kruger-nav-map_r10_c1_s1.gif" "http://www.krugerpark.co.za/" "images/" "" "Kruger Park"&gt;&gt;












----
@@color:#c4d6ed; ^^
Description: Two great weeks in Mozambique and South Africa
^^@@</pre>
</div>
<div title="2018 Morroco" creator="YourName" modifier="YourName" created="201904122157" modified="201904122235" tags="Content Travel" changecount="4" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com">
<pre>!One life, live it

&lt;&lt;Image "FR" "125" "Morocco_%28orthographic_projection%2C_WS_claimed%29.svg
" "http://upload.wikimedia.org/" "wikipedia/commons/7/78/" "" "Morroco"&gt;&gt;
[[Morroco|http://en.wikipedia.org/wiki/Morroco]] very nice people and great place for off-road. 

&lt;&lt;Image "FL" "480" "2018-Morroco-01.JPG" "https://dl.dropbox.com/" "s/drn0tjuoffvb7y2/" "?dl=1" "Camping"&gt;&gt;
&lt;&lt;Image "FR" "480" "2018-Morroco-02.JPG" "https://dl.dropbox.com/" "s/wiu45pqmu282pa0/" "?dl=1" ""&gt;&gt;
&lt;&lt;Image "FL" "480" "2018-Morroco-03.JPG" "https://dl.dropbox.com/" "s/k7n73nfz113qi20/" "?dl=1" ""&gt;&gt;
&lt;&lt;Image "FR" "480" "2018-Morroco-04.JPG" "https://dl.dropbox.com/" "s/ud1lpgyxxpwoljz/" "?dl=1" ""&gt;&gt;
&lt;&lt;Image "FL" "480" "2018-Morroco-05.JPG" "https://dl.dropbox.com/" "s/n1zdpypavdlxfnd/" "?dl=1" ""&gt;&gt;
&lt;&lt;Image "FR" "480" "2018-Morroco-06.JPG" "https://dl.dropbox.com/" "s/ejgov6ladjdbxgc/" "?dl=1" "400000Km, enough to reach the Moon...it's a Land Rover."&gt;&gt;

----
/%
@@color:#c4d6ed; ^^
Description: Morroco April 2018 photos ^^@@
%/</pre>
</div>
<div title="API" modifier="acarvalho" created="201206230131" modified="201304122132" tags="Acronym Content" server.title="API" server.page.revision="201304122132" server.etag='"acarvalho_public/API/1183976:cc7436e653a494cc6ccf36afb425b042a98285e7"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6f10e439636371207c5bd6f24a576c513e2fa9d0">
<pre>Application Programming Interface
The interface that an application, module or sub-system exposes to be used from its outside.
----
@@color:#c4d6ed; ^^
Description: Application Programming Interface
^^@@</pre>
</div>
<div title="ASPerfBench" modifier="acarvalho" created="201206131802" modified="201510141532" tags=".Net Content Development Tool" server.title="ASPerfBench" server.page.revision="201510141532" server.etag='"acarvalho_public/ASPerfBench/2372039:0fe9645fe25c994691486b2512dbc4c4763576f3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="306f3a30a3be0dfac6668675af485c7b3563984a">
<pre>Performance doesn't seem to be a fashionable theme anymore. It is, however, one of the major Customer satisfaction problems we face in projects and it is, for sure, an essential step towards excelence.

Don't be naive, performance will not "just happen". You will have to design for it, experiment and take every opportunity to optimize.

__​To address performance you first have to be able to measure it!__

This is a small tool to allow for quick assessement of .Net code relative performance.

* [[ASPerfBench-1.0.02.13.zip|https://www.dropbox.com/s/sgxvuv9pbejkpr9/ASPerfBench-1.0.02.13.zip?dl=1]]

&lt;&lt;Image "" "456" "ASPerfBench01.png" "https://dl.dropbox.com/" "s/smrackn9v91f1ff/" "?dl=1" ""&gt;&gt;

&lt;&lt;Image "" "456" "ASPerfBench02.png" "https://dl.dropbox.com/" "s/k1v2tilye8i5bh0/" "?dl=1" ""&gt;&gt;
----
</pre>
</div>
<div title="Abstraction" modifier="AndreCarvalho" created="201206161505" modified="202007091046" tags="Concept Content" server.title="Abstraction" server.page.revision="201304121410" server.etag='"acarvalho_public/Abstraction/1182912:f8e8e8b22d8c338afdb4c46209f63f1267bd223a"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="14b3aa9b9a41cd844c7e1c014eeed464e0954ed6" changecount="2">
<pre>//One point of confusion regarding abstraction is its use as both a process and an entity. Abstraction, as a process, denotes the extracting of the essential details about an item, or a group of items, while ignoring the inessential details. Abstraction, as an entity, denotes a model, a view, or some other focused representation for an actual item. Abstraction is most often used as a complexity mastering technique. For example, we often hear people say such things as: "just give me the highlights" or "just the facts, please." What these people are asking for are abstractions.//
 Edward V. Berard - Abstraction, Encapsulation and Information Hiding	[[[Berard]|BibliographyPage##Berard]]

Abstractions are an essential tool for effective communication as they can condense in a single concept a fairly complex system or sub-system. In a properly structured model they are also the entry points from where the reader can drill-down to the details.

Abstraction gears towards comprehension
[[Encapsulation]] gears towards protection from outside interference
[[Information Hiding]] gears towards containment of design changes

----
@@color:#c4d6ed; ^^
Description: Abstraction concept and references.
^^@@</pre>
</div>
<div title="AdministrationPage" creator="AndreCarvalho" modifier="YourName" created="201206131959" modified="202110211053" tags="System excludeLists" _hash="e1ebb210726c3b146ffdcd2bb68ef6449c55f179" changecount="17">
<pre>|SiteIcon SiteTitle SiteSubtitle||||StyleSheet|
|MainMenu|SiteUrl||PageTemplate|StyleSheetColors|
|~|DefaultTiddlers||EditTemplate|StyleSheetLayout|
|~|~||ViewTemplate|StyleSheetPrint|
|~|~|OptionsPanel||ColorPalette|
|~|~|AdvancedOptions|||
|~|~|SideBarTabs|||
|~|~|SideBarOptions|||
|HtmlJavascript|||||
|SystemSettings|||TiddlyHost||
|~|~|~|ThostUploadPlugin||

* Save local [[backup|https://acarvalho.tiddlyhost.com/download]]
* Comment moderation : [[Disqus|https://acarvalho-tiddlyspace.disqus.com/admin/moderate/#/pending]]

&lt;&lt;paletteView [[ColorPalette]]&gt;&gt;

* GettingStarted
* [[TiddlyHost|https://tiddlyhost.com]]
* OLD : [[TiddlySpot tweeks|TiddlySpotTweeks]]
* OLD : [[TiddlySpace Documentation|http://docs.tiddlyspace.com/]]

----
!Installed plugins
* TagCloudPlugin : present a 'cloud' of tags (or links) using proportional font display
* ImageSizePlugin : adds support for resizing images
* SectionLinksPlugin : allow tiddler sections in TiddlyLinks to be used as anchor points
* FullScreenPlugin : Toggle between viewing tiddlers fullscreen and normally. Very handy for when you need more viewing space.
* HoverMenuPlugin : Provides a hovering menu on the edge of the screen for commonly used commands, that scrolls with the page. Configured at HoverMenu .
* InlineJavascriptPlugin : Insert Javascript executable code directly into your tiddler content. With more information at InlineJavascriptPluginInfo .
* GotoPlugin : view any tiddler by entering it's title - displays list of possible matches.
* GATrackerPlugin : Google Analytics tracker
* TiddlerToCPlugin : Tiddler Table of Contents generator
* BreadcrumbsPlugin : list/jump to tiddlers viewed during this session plus "back" button/macro. With more information at BreadcrumbsPluginInfo
* QuotePlugin : Create a direct link to a tiddler using a normal button and a button that expands the specified tiddler inside the current tiddler.
* TiddlersBarPluginMP : A bar to switch between tiddlers through tabs (like browser tabs bar).
** StyleSheetTiddlersBar
** DisplayOptions
* SinglePageModePlugin - Show tiddlers one at a time with automatic permalink, or always open tiddlers at top/bottom of page.
** SinglePageModePluginInfo
* [[E.A.S.E]] - this framework allows you to easily create commands that work on the current tiddler text selection in edit mode.
** [[easyFormat]] - the format command format selection according to your choice.
** [[easyInsert]] - insert text template at caret position.
* [[TiddlyTagMindMap2Plugin]] - Create mind-maps from tags
** [[jit-yc]]
** [[MapNodeTemplate]]
** [[MindMapContent]]
* [[DisqusTiddlyWikiExtension]] - from the [[disqus space|http://disqus.tiddlyspace.com/#DisqusTiddlyWikiExtension]] - Enable comments on TiddlyWiki in your TiddlySpace with htmljs and this.
** [[HtmlJavascript]] - Add {{{/bags/common/tiddlers/jquery.js
http://htmljs.tiddlyspace.com/htmljs-disqus}}}
** [[ViewTemplate]] - Add {{{&lt;div macro="disqus"&gt;&lt;/div&gt;}}}

!Installed Macros
* BibRefMacro - A TiddlyWiki Macro to create links to anchors in a bibliography tiddler.
* ImageMacro - A TiddlyWiki Macro to create configurable links to images.
* ContentTimelineMacro - A TiddlyWiki Macro to show timelines (modified, created) for tiddlers tagged 'Content'
* PaletteViewMacro - Displays color palettes.
* UnsavedChangesPlugin - show droplist of tiddlers that have changed since the last time the document was saved.

!Installed Tweaks
* CoreTweaks - generic tweaks
** DefaultTiddlerText - Configure default new tiddler text
* HTML serialization - produces bag, receip
** HtmlJavascript - Call external javascript code on serializing

!!~TiddlyWiki tools
* [[tiddlypocketbook|http://tiddlypocketbook.tiddlyspace.com/#]] - A guide to ~TiddlyWiki syntax
* [[TiddlyVault|http://tiddlyvault.tiddlyspot.com/]] - An index of ~TiddlyWiki extensions
* [[Tiddly Tools|http://www.tiddlytools.com]] 
* [[abegoExtensions|http://tiddlywiki.abego-software.de]] - UdoBorkowski's Extensions for TiddlyWiki

* [[Martin's wiki|http://www.martinswiki.com/]] - Martin Budden's plugins and extensions for TiddlyWiki 
----
@@color:#c4d6ed; ^^
Description: Administration functionality for this wiki. 
^^@@



</pre>
</div>
<div title="Agile Methodologies" modifier="acarvalho" created="201208121458" modified="201304192111" tags="Concept Content" server.title="Agile Methodologies" server.page.revision="201304192111" server.etag='"acarvalho_public/Agile%20Methodologies/1190616:6d9260d0640eede342f100aade90b58a930625ed"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="693c789107ec59f5d858260c22a139edb5e1fdd3">
<pre>''You do not became an Agile Developer just by not doing things! You became an Agile Developer by (through study, experience and reasoning) being able to define and [[tailor|Tailoring]] processes and methods to achieve the goals with the minimum effort possible.''

Agility in software development was a good trend to clarify over engineering and too formal and rather useless practices that were being blindly imported from high maturity and criticality scenarios to other situations were they were little more than an useless overhead. Worst, as many of the practitioners did not knew how to perform those practices, they slowly degenerated in "pretend-to-be" activities that consumed resources without producing anything useful.

//''"A programmer who refuses to design is a person who refuses to think."''//
''Practices of an Agile Developer'' by Venkat Subramaniam and Andy Hunt, pag. 153 &lt;&lt;BibRef "Venkat 2006"&gt;&gt;

Unfortunately, many times today, agility is used as an excuse for ignorance, immaturity and irresponsibility. Oddly, I became aware that some universities use agile methodologies to teach Software Engineering to people that does not know anything about Object Oriented Principles or software modelling or structured analysis, and that think they, alone by themselves, can "infer" all the Software Engineering knowledge ever produced just by knowing the syntax of a programming language and how to use Google. This will only produce, as we say in Portuguese, "meat for the cannons", low value programmers with very serious handicaps for evolving, but cheap and easy to replace...
Think of a would be painter that wants to start his learning by abstract art, it does not make much sense does it?

Beware of agility without solid knowledge and experience as it will be, most of the times, simplistic. Also start by considering that ''if you do not have an agile specification and an agile architecture you will, for sure, not have an agile development but just a sloppy one''.

This being said, agile methodologies are a great contribution to Software Engineering. To know more about them you may want to start with the [[Manifesto for Agile Software Development|http://agilemanifesto.org/]] and then probably head for [[Martin Fowler|http://martinfowler.com/intro.html]]'s [[Agile Software Development|http://martinfowler.com/agile.html]].

----
/%
@@color:#c4d6ed; ^^
Description: Agile Methodologies concept, discussion and references.
^^@@
%/</pre>
</div>
<div title="AndroidPage" creator="acarvalho" modifier="AndreCarvalho" created="201610201426" modified="201701191011" tags="Content" changecount="5">
<pre>!Android

This page is the start point for Android OS subjects in this site.

!! Best Android software
|Area|Name|Description|Type|h
|App store|F-Droid||Free|
|Firewall|[[NetGuard|http://www.netguard.me/]]|~NetGuard provides a simple way to block access to the internet - no root required. Applications can individually be allowed or denied access to your ~WiFi and/or mobile connection.||
|~|[[AFWall+|https://github.com/ukanth/afwall]]|Android Firewall+ is an advanced iptables editor (GUI) for Android. It provides fine-grained control over which Android apps are allowed to access the network.|Free/Open-source|
|Sound|[[Neutron|http://www.neutronmp.com/]]|The best, by far, sound player for Android||

----
/%
@@color:#c4d6ed; ^^
Description: main page for Android OS matters
^^@@
%/</pre>
</div>
<div title="Application Archetype" modifier="AndreCarvalho" created="201206212126" modified="202006102216" tags="Concept Content" changecount="2" server.title="Application Archetype" server.page.revision="201304121426" server.etag='"acarvalho_public/Application%20Archetype/1182953:2ad0ed780aeb98042d19a9f0d607bf6f4b790064"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e512b319b50c3eaebd809d33b23f7ad6839bdb33">
<pre>&lt;&lt;Image "FR" "350" "archetype-rca.png" "https://www.dropbox.com/s/" "syn2rlge5xb1hls/" "?dl=1" "Rich Client Application MS archetype"&gt;&gt;
//"This section of the guide contains a series of topics that will help you to understand the capabilities, features, benefits, and liabilities of each of the common application types that you may decide to create. The first topic contains an overview of the basic application types such as Web, mobile, rich client, services, and RIA. "//

In [[Application Archetypes|http://msdn.microsoft.com/en-us/library/ee658107.aspx]]
Microsoft Application Architecture Guide 2.0 &lt;&lt;BibRef "AppArch 2.0"&gt;&gt;

The application archetype is an essential step towards a proper [[Modularization]] of your system that, in turn, will be crucial for [[Encapsulation]] and [[Coupling]] and [[Cohesion]] control. 





----
@@color:#c4d6ed; ^^
Description: Application Archetype concept and references.
^^@@</pre>
</div>
<div title="Availability (KM)" creator="AndreCarvalho" modifier="YourName" created="201707142046" modified="202006231140" tags="Content Concept KM" changecount="6">
<pre>On the [[Knowledge Management|KnowledgeManagement]] domain we consider ''availability'' the degree to which information and knowledge in an organization are accessible and accessed when someone needs them.
----
See also [[Knowledge Management|KnowledgeManagement]]
----
/%
@@color:#c4d6ed; ^^
Description: Availability concept on Knowledge Management
^^@@
%/</pre>
</div>
<div title="BibRefMacro" modifier="acarvalho" created="201206171745" modified="201206281318" tags="systemConfig" server.title="BibRefMacro" server.page.revision="201206281318" server.etag='"acarvalho_public/BibRefMacro/763880:4d282e7c6945f5088f50c5c162e25c7e84adc3ca"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="03f1f56a3183f1093d0270cd8ed121c63d284d07">
<pre>/***
|Name|BibRefMacro|
|Created by|Andre' de Carvalho|
|Location|http://acarvalho.tiddlyspace.com/#BibRefMacro|
|Version|1.0.0|
|Type|Macro|
|Description|A TiddlyWiki Macro to create links to anchors in a bibliography tiddler.|

!!Example
{{{&lt;&lt;BibRef "Parnas 1972"&gt;&gt;}}}
&lt;&lt;BibRef "Parnas 1972"&gt;&gt;
or
{{{&lt;&lt;BibRef Berard&gt;&gt;}}}
&lt;&lt;BibRef Berard&gt;&gt;

!!Installation
Import (or copy/paste) this tiddler into your document and tag it with "systemConfig". Change the wikify path to suit your bibliography page and anchor style ( I use SectionLinksPlugin ).

!!Code
***/
//{{{
version.extensions.BibRef= {major: 1, minor: 0 , revision: 0, date: new Date(2012,6,17)};
//Created by André de Carvalho
//}}}
//{{{
config.macros.BibRef = {};
config.macros.BibRef.handler= function(place,macroName,params) {
   var bref=params[0];
   wikify("[[["+bref+"]|BibliographyPage##"+bref+"]]",place)
};
//}}}
 </pre>
</div>
<div title="BibliographyPage" modifier="YourName" created="201206161230" modified="202109291831" tags="Content References" changecount="10" server.title="BibliographyPage" server.page.revision="201401172125" server.etag='"acarvalho_public/BibliographyPage/1627136:e53b4811f879296e2c7fdb05cf86a49d98c07cc8"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="2dade89e0881d4e5410bcd7393494a90e3f1c22c">
<pre>|Area|Author|Title|Year|Abstract/Ref.|Archive|h
|Architecture|D.L. Parnas|&lt;html&gt;&lt;a name="Parnas 1972" /&gt;&lt;/html&gt;[[On the Criteria To Be Used in Decomposing Systems Into Modules|https://web.archive.org/web/20180108050207/http://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf]]|1972|This paper discusses modularization as a mechanism for improving the flexibility and comprehensibility of a system while allowing the shortening of its development time. The effectiveness of a "modularization" is dependent upon the criteria used in dividing the system into modules. A system design problem is presented and both a conventional and unconventional decomposition are described. It is shown that the unconventional decompositions have distinct advantages for the goals outlined. The criteria used in arriving at the decompositions are discussed. The unconventional decomposition, if implemented with the conventional assumption that a module consists of one or more subroutines, will be less efficient in most cases. An alternative approach to implementation which does not have this effect is sketched.|
|~|~|~|~|{{{&lt;&lt;BibRef "Parnas 1972"&gt;&gt;}}}|
|~|J.D. Meier, Alex Homer, David Hill, Jason Taylor, Prashant Bansode, Lonnie Wall, Rob Boucher Jr, Akshay Bogawat|&lt;html&gt;&lt;a name="AppArch 2.0" /&gt;&lt;/html&gt;[[Microsoft Application Architecture Guide 2.0 |http://apparchguide.codeplex.com/]]|2008|This guide provides design-level guidance for the architecture and design of applications built on the .NET Framework. It focuses on the most common types of applications, partitioning application functionality into layers, components, and services, and walks through their key design characteristics. This guide is a collaborative effort between patterns &amp; practices, product teams, and industry experts.|
|~|~|~|~|{{{&lt;&lt;BibRef "AppArch 2.0"&gt;&gt;}}}|
|Coding|Steven C. ~McConnell|&lt;html&gt;&lt;a name="McConnell 2004" /&gt;&lt;/html&gt;[[Code Complete 2nd Ed.|http://www.cc2e.com/Default.aspx]]|2004|Widely considered one of the best practical guides to programming, Steve ~McConnell’s original CODE COMPLETE has been helping developers write better software for more than a decade. Now this classic book has been fully updated and revised with leading-edge practices—and hundreds of new code samples—illustrating the art and science of software construction. Capturing the body of knowledge available from research, academia, and everyday commercial practice, ~McConnell synthesizes the most effective techniques and must-know principles into clear, pragmatic guidance. No matter what your experience level, development environment, or project size, this book will inform and stimulate your thinking—and help you build the highest quality code.|
|~|~|~|~|{{{&lt;&lt;BibRef "McConnell 2004"&gt;&gt;}}}|
|~|Venkat Subramaniam and Andy Hunt|&lt;html&gt;&lt;a name="Venkat 2006" /&gt;&lt;/html&gt;[[Practices of an Agile Developer|http://pragprog.com/book/pad/practices-of-an-agile-developer]]|2006|Want to be a better developer? This book collects the personal habits, ideas, and approaches of successful agile software developers and presents them in a series of short, easy-to-digest tips. You’ll learn how to improve your software development process, see what real agile practices feel like, avoid the common temptations that kill projects, and keep agile practices in balance.|
|~|~|~|~|{{{&lt;&lt;BibRef "Venkat 2006"&gt;&gt;}}}|
|Concepts|Edward V. Berard|&lt;html&gt;&lt;a name="Berard" /&gt;&lt;/html&gt;[[Abstraction, Encapsulation and Information Hiding|http://www.tonymarston.co.uk/php-mysql/abstraction.txt]]||The fundamental reference on these concepts|[[Archive|https://web.archive.org/web/20161121160856/http://www.tonymarston.co.uk/php-mysql/abstraction.txt]]|
|~|~|~|~|{{{&lt;&lt;BibRef Berard&gt;&gt;}}}||
|~|~|&lt;html&gt;&lt;a name="Berard 1996" /&gt;&lt;/html&gt;[[Be Careful With "Use Cases"|https://www.cs.unc.edu/~stotts/COMP204/usecases/careful.html]]|1996|Use Cases and Software Engineering|[[Archive|https://web.archive.org/web/20210929110545/https://www.cs.unc.edu/~stotts/COMP204/usecases/careful.html]]|
|~|~|~|~|{{{&lt;&lt;BibRef "Berard 1996"&gt;&gt;}}}|
|~|[[Frederick P. Brooks, Jr.|https://en.wikipedia.org/wiki/Fred_Brooks]]|&lt;html&gt;&lt;a name="Brooks 1986" /&gt;&lt;/html&gt;[[No Silver Bullet—Essence and accident in software engineering|https://web.archive.org/web/20190712082507/http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]]|1986|A foundational article on Software Engineering and its inherent complexity|
|~|~|~|~|{{{&lt;&lt;BibRef "Brooks 1986"&gt;&gt;}}}|
|~|Mike Mannion and Barry Keepence|&lt;html&gt;&lt;a name="Mannion,Keepence 1995" /&gt;&lt;/html&gt;[[SMART requirements|http://www.win.tue.nl/~wstomv/edu/2ip30/references/smart-requirements.pdf]]|1995|Systems Analysis, or as it is increasingly known as today, Requirements Engineering, is a time consuming, expensive but critical phase in software (and system) development. The "perfect" Requirements Specification should exhibit a number of qualities including correctness, completeness and consistency. Within a Requirements Specification individual requirements at the microscopic level should be justified, clear, unambiguous and verifiable. However, in many cases Systems Analysts or Requirements Engineers describe requirements which fall short of these demands. In addition, outside reviewers faced with presenting an independent qualitative assessment of a Requirements Specification have few guidelines to assist them. In this paper we present a simple technique, borrowed from objective setting in Management Psychology, to assist the construction and evaluation of individual requirements.|
|~|~|~|~|{{{&lt;&lt;BibRef "Mannion,Keepence 1995"&gt;&gt;}}}|
|Processes|[[International Institute of Business Analysis (IIBA)|http://www.iiba.org]]|&lt;html&gt;&lt;a name="BABOK 2008" /&gt;&lt;/html&gt;[[A Guide to the Business Analysis Body of Knowledge® (BABOK® Guide) v.2 draft|http://www.iiba.org/imis15/IIBA/Professional_Development/Business_Analysis_Body_of_Knowledge/IIBA_Website/Professional_Development/Business_Analysis_Body_of_Knowledge_pages/Business_Analysis_Body_of_Knowledge.aspx]]|2008|A Guide to the Business Analysis Body of Knowledge® (BABOK® Guide) is the collection of knowledge within the profession of business analysis and reflects current generally accepted practices. As with other professions, the body of knowledge is defined and enhanced by the business analysis professionals who apply it in their daily work role.|
|~|~|~|~|{{{&lt;&lt;BibRef "BABOK 2008"&gt;&gt;}}}|
|Systems Engineering|Alexander Kossiakoff, et al.|&lt;html&gt;&lt;a name="Kossiakoff 2011" /&gt;&lt;/html&gt;Systems engineering principles and practice 2ed.|2011|Learning how to be a successful systems engineer is entirely different from learning how to excel at a traditional engineering discipline. It requires developing the ability to think in a special way, to acquire the “ systems engineering viewpoint, ” and to make the central objective the system as a whole and the success of its mission. The systems engineer faces three directions: the system user ’ s needs and concerns, the project manager’ s financial and schedule constraints, and the capabilities and ambitions of the engineering specialists who have to develop and build the elements of the system.|
|~|~|~|~|{{{&lt;&lt;BibRef "Kossiakoff 2011"&gt;&gt;}}}|
|~|~|~|~||
----
@@color:#c4d6ed; ^^
Description: Bibliographical references for all articles. 
^^@@
</pre>
</div>
<div title="Brad Appleton on patterns and communication" modifier="acarvalho" created="201306071517" modified="201306071517" tags="Content Quote" server.title="Brad Appleton on patterns and communication" server.page.revision="201306071517" server.etag='"acarvalho_public/Brad%20Appleton%20on%20patterns%20and%20communication/1250716:61da9f79e7c5c2aef9b6e4bb118be2be8e70bf77"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6319fa39b723190d5e750c3983a6ca72a9728b12">
<pre>"//Fundamental to any science or engineering discipline is a common vocabulary for expressing its concepts, and a language for relating them together. The goal of patterns within the software community is to create a body of literature to help software developers resolve recurring problems encountered throughout all of software development. Patterns help create a shared language for communicating insight and experience about these problems and their solutions.//"

Brad Appleton on [[The Hillside Group|http://hillside.net/patterns/]]

----
/%
@@color:#c4d6ed; ^^
Description: Brad Appleton on patterns and communication
^^@@
%/</pre>
</div>
<div title="BreadcrumbsPlugin" modifier="acarvalho" created="201206231901" modified="201206231901" tags="NavigationPackage systemConfig" server.title="BreadcrumbsPlugin" server.page.revision="201206231901" server.etag='"acarvalho_public/BreadcrumbsPlugin/756445:afc5b0cf37e845f211990775d6c6dd0183154499"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7d40a5c449d58caa266233189684bfe1766f4b65">
<pre>/***
|Name|BreadcrumbsPlugin|
|Author|Eric Shulman|
|Source|http://www.TiddlyTools.com/#BreadcrumbsPlugin|
|Documentation|http://www.TiddlyTools.com/#BreadcrumbsPluginInfo|
|Version|2.1.5|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|list/jump to tiddlers viewed during this session plus "back" button/macro|
This plugin provides a list of links to all tiddlers opened during the session, creating a "trail of breadcrumbs" from one tiddler to the next, allowing you to quickly navigate to any previously viewed tiddler, or select 'home' to reset the display to the initial set of tiddlers that were open at the start of the session (i.e., when the document was loaded into the browser).
!!!!!Documentation
&lt;&lt;&lt;
see [[BreadcrumbsPluginInfo]]
&lt;&lt;&lt;
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkCreateDefaultBreadcrumbs&gt;&gt; automatically create breadcrumbs display (if needed)
&lt;&lt;option chkShowBreadcrumbs&gt;&gt; show/hide breadcrumbs display
&lt;&lt;option chkReorderBreadcrumbs&gt;&gt; re-order breadcrumbs when visiting a previously viewed tiddler
&lt;&lt;option chkBreadcrumbsHideHomeLink&gt;&gt; omit 'Home' link from breadcrumbs display
&lt;&lt;option chkBreadcrumbsSave&gt;&gt; prompt to save breadcrumbs when 'Home' link is pressed
&lt;&lt;option chkShowStartupBreadcrumbs&gt;&gt; show breadcrumbs for 'startup' tiddlers
&lt;&lt;option chkBreadcrumbsReverse&gt;&gt; show breadcrumbs in reverse order (most recent first)
&lt;&lt;option chkBreadcrumbsLimit&gt;&gt; limit breadcrumbs display to {{twochar{&lt;&lt;option txtBreadcrumbsLimit&gt;&gt;}}} items
&lt;&lt;option chkBreadcrumbsLimitOpenTiddlers&gt;&gt; limit open tiddlers to {{twochar{&lt;&lt;option txtBreadcrumbsLimitOpenTiddlers&gt;&gt;}}} items

&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2012.06.10 2.1.5 refactored default options to eliminate global variable and use init() handling
| Please see [[BreadcrumbsPluginInfo]] for previous revision details |
2006.02.01 1.0.0 initial release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.BreadcrumbsPlugin = { major: 2, minor: 1, revision: 5, date: new Date(2012,6,10) };
config.macros.breadcrumbs = {
	crumbs: [], // the list of current breadcrumbs
	askMsg: "Save current breadcrumbs before clearing?\n"
		+"Press OK to save, or CANCEL to continue without saving.",
	saveMsg: 'Enter the name of a tiddler in which to save the current breadcrumbs',
	saveTitle: 'SavedBreadcrumbs',
	options: {
		chkShowBreadcrumbs:		true,
		chkReorderBreadcrumbs:		true,
		chkCreateDefaultBreadcrumbs:	true,
		chkShowStartupBreadcrumbs:	false,
		chkBreadcrumbsReverse:		false,
		chkBreadcrumbsLimit:		false,
		txtBreadcrumbsLimit:		5,
		chkBreadcrumbsLimitOpenTiddlers:false,
		txtBreadcrumbsLimitOpenTiddlers:5,
		chkBreadcrumbsHideHomeLink:	false,
		chkBreadcrumbsSave:		false,
		txtBreadcrumbsHomeSeparator:	' | ',
		txtBreadcrumbsCrumbSeparator:	' &gt; '
	},
	init: function() {
		merge(config.options,this.options,true);
	},
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		var area=createTiddlyElement(place,"span",null,"breadCrumbs",null);
		area.setAttribute("homeSep",params[0]||config.options.txtBreadcrumbsHomeSeparator);
		area.setAttribute("crumbSep",params[1]||config.options.txtBreadcrumbsCrumbSeparator);
		this.render(area);
	},
	add: function (title) {
		var thisCrumb = title;
		var ind = this.crumbs.indexOf(thisCrumb);
		if(ind === -1)
			this.crumbs.push(thisCrumb);
		else if (config.options.chkReorderBreadcrumbs)
			this.crumbs.push(this.crumbs.splice(ind,1)[0]); // reorder crumbs
		else
			this.crumbs=this.crumbs.slice(0,ind+1); // trim crumbs
		if (config.options.chkBreadcrumbsLimitOpenTiddlers)
			this.limitOpenTiddlers();
		this.refresh();
		return false;
	},
	getAreas: function() {
		var crumbAreas=[];
		// find all DIVs with classname=="breadCrumbs"
		var all=document.getElementsByTagName("*");
		for (var i=0; i&lt;all.length; i++)
			try{ if (hasClass(all[i],"breadCrumbs")) crumbAreas.push(all[i]); } catch(e) {;}
		// or, find single DIV w/fixed ID (backward compatibility)
		var byID=document.getElementById("breadCrumbs")
		if (byID &amp;&amp; !hasClass(byID,"breadCrumbs")) crumbAreas.push(byID);
		if (!crumbAreas.length &amp;&amp; config.options.chkCreateDefaultBreadcrumbs) {
			// no crumbs display... create one
			var defaultArea = createTiddlyElement(null,"span",null,"breadCrumbs",null);
		 	defaultArea.style.display= "none";
			var targetArea= document.getElementById("tiddlerDisplay");
		 	targetArea.parentNode.insertBefore(defaultArea,targetArea);
			crumbAreas.push(defaultArea);
		}
		return crumbAreas;
	},
	refresh: function() {
		var crumbAreas=this.getAreas();
		for (var i=0; i&lt;crumbAreas.length; i++) {
			crumbAreas[i].style.display = config.options.chkShowBreadcrumbs?"inline":"none";
			removeChildren(crumbAreas[i]);
			this.render(crumbAreas[i]);
		}
	},
	render: function(here) {
		var co=config.options; var out=""
		if (!co.chkBreadcrumbsHideHomeLink) {
			createTiddlyButton(here,"Home",null,this.home,"tiddlyLink tiddlyLinkExisting");
			out+=here.getAttribute("homeSep")||config.options.txtBreadcrumbsHomeSeparator;
		}
		for (c=0; c&lt;this.crumbs.length; c++) // remove non-existing tiddlers from crumbs
			if (!store.tiddlerExists(this.crumbs[c]) &amp;&amp; !store.isShadowTiddler(this.crumbs[c]))
				this.crumbs.splice(c,1);
		var count=this.crumbs.length;
		if (co.chkBreadcrumbsLimit &amp;&amp; co.txtBreadcrumbsLimit&lt;count) count=co.txtBreadcrumbsLimit;
		var list=[];
		for (c=this.crumbs.length-count; c&lt;this.crumbs.length; c++) list.push('[['+this.crumbs[c]+']]');
		if (co.chkBreadcrumbsReverse) list.reverse();
		out+=list.join(here.getAttribute("crumbSep")||config.options.txtBreadcrumbsCrumbSeparator);
		wikify(out,here);
	},
	home: function() {
		var cmb=config.macros.breadcrumbs;
		if (config.options.chkBreadcrumbsSave &amp;&amp; confirm(cmb.askMsg)) cmb.saveCrumbs();
		story.closeAllTiddlers(); restart();
		cmb.crumbs = []; var crumbAreas=cmb.getAreas();
		for (var i=0; i&lt;crumbAreas.length; i++) crumbAreas[i].style.display = "none";
		return false;
	},
	saveCrumbs: function() {
		var tid=prompt(this.saveMsg,this.saveTitle); if (!tid||!tid.length) return; // cancelled by user
		var t=store.getTiddler(tid);
		if(t &amp;&amp; !confirm(config.messages.overwriteWarning.format([tid]))) return;
		var who=config.options.txtUserName;
		var when=new Date();
		var text='[['+this.crumbs.join(']]\n[[')+']]';
		var tags=t?t.tags:[]; tags.pushUnique('story');
		var fields=t?t.fields:{};
		store.saveTiddler(tid,tid,text,who,when,tags,fields);
		story.displayTiddler(null,tid);
		story.refreshTiddler(tid,null,true);
		displayMessage(tid+' has been '+(t?'updated':'created'));
	},
	limitOpenTiddlers: function() {
		var limit=config.options.txtBreadcrumbsLimitOpenTiddlers; if (limit&lt;1) limit=1;
		for (c=this.crumbs.length-1; c&gt;=0; c--) {
			var tid=this.crumbs[c];
			var elem=story.getTiddler(tid);
			if (elem) { // tiddler is displayed
				if (limit &lt;=0) { // display limit has been reached
					if (elem.getAttribute("dirty")=="true") { // tiddler is being edited
						var msg= "'"+tid+"' is currently being edited.\n\n"
							+"Press OK to save and close this tiddler\n"
							+"or press Cancel to leave it opened";
						if (confirm(msg)) {
							story.saveTiddler(tid);
							story.closeTiddler(tid);
						}
					}
					else story.closeTiddler(this.crumbs[c]);
				}
				limit--;
			}
		}
	}
};
//}}}
// // PreviousTiddler ('back') command and macro
//{{{
config.commands.previousTiddler = {
	text: 'back',
	tooltip: 'view the previous tiddler',
	handler: function(event,src,title) {
		var crumbs=config.macros.breadcrumbs.crumbs;
		if (crumbs.length&lt;2) config.macros.breadcrumbs.home();
		else story.displayTiddler(story.findContainingTiddler(src),crumbs[crumbs.length-2]);
		return false;
	}
};
config.macros.previousTiddler= {
	label: 'back',
	prompt: 'view the previous tiddler',
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		var label=params.shift(); if (!label) label=this.label;
		var prompt=params.shift(); if (!prompt) prompt=this.prompt;
		createTiddlyButton(place,label,prompt,function(ev){
			return config.commands.previousTiddler.handler(ev,this)
		});
	}
}
//}}}
// // HIJACKS
//{{{
// update crumbs when a tiddler is displayed
if (Story.prototype.breadCrumbs_coreDisplayTiddler==undefined)
	Story.prototype.breadCrumbs_coreDisplayTiddler=Story.prototype.displayTiddler;
Story.prototype.displayTiddler = function(srcElement,tiddler) {
	var title=(tiddler instanceof Tiddler)?tiddler.title:tiddler;
	this.breadCrumbs_coreDisplayTiddler.apply(this,arguments);
	if (!startingUp || config.options.chkShowStartupBreadcrumbs)
		config.macros.breadcrumbs.add(title);
}

// update crumbs when a tiddler is deleted
if (TiddlyWiki.prototype.breadCrumbs_coreRemoveTiddler==undefined)
	TiddlyWiki.prototype.breadCrumbs_coreRemoveTiddler=TiddlyWiki.prototype.removeTiddler;
TiddlyWiki.prototype.removeTiddler= function() {
	this.breadCrumbs_coreRemoveTiddler.apply(this,arguments);
	config.macros.breadcrumbs.refresh();
}
//}}}</pre>
</div>
<div title="BreadcrumbsPluginInfo" modifier="acarvalho" created="201206231902" modified="201304211254" tags="System pluginInfo" server.title="BreadcrumbsPluginInfo" server.page.revision="201304211254" server.etag='"acarvalho_public/BreadcrumbsPluginInfo/1192030:f2615918ed8f4ffe111e16382b339130b18faf48"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6a8cdb1eb56ce9d0d0b10079fd82277a6495c692">
<pre>/***
|Name|BreadcrumbsPluginInfo|
|Author|Eric Shulman|
|Source|http://www.TiddlyTools.com/#BreadcrumbsPlugin|
|Documentation|http://www.TiddlyTools.com/#BreadcrumbsPluginInfo|
|Version|2.1.5|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|documentation|
|Description|Documentation for BreadcrumbsPlugin|
This plugin provides a list of links to all tiddlers opened during the session, creating a "trail of breadcrumbs" from one tiddler to the next, allowing you to quickly navigate to any previously viewed tiddler, or select 'home' to reset the display to the initial set of tiddlers that were open at the start of the session (i.e., when the document was loaded into the browser).
!!!!!Usage
&lt;&lt;&lt;
{{{
&lt;&lt;breadcrumbs homeSeparator crumbSeparator&gt;&gt;
}}}
By default, the breadcrumbs are displayed as a continuous, //horizontal// word-wrapped line of text, using default character sequences for ''homeSeparator'' (" | ") and ''crumbSeparator'' (" &gt; ").  The //optional// ''homeSeparator'' and ''crumbSeparator'' macro parameters allow you to specify alternative separators.  For example, to display the breadcrumbs //vertically// (in a stack, rather than a row), set the separator values to use {{{[[&lt;br&gt;]]}}}... and, to display a horizontal line as the home separator, use {{{[[&lt;html&gt;&lt;hr&gt;&lt;/html&gt;]]}}}.
{{{
&lt;&lt;previousTiddler&gt;&gt;
}}}
This macro embeds a 'back' button in your content.  Clicking the button opens/scrolls to the most recent previously viewed tiddler.  You can also add the {{{previousTiddler}}} keyword to the ~ViewToolbar slice definition in ToolbarCommands.  This adds a 'back' button directly to the toolbar of each tiddler that is displayed.
&lt;&lt;&lt;
!!!!!Examples:
&lt;&lt;&lt;
{{{
&lt;&lt;breadcrumbs&gt;&gt;
}}}
&lt;&lt;breadcrumbs&gt;&gt;
{{{
&lt;&lt;breadcrumbs [[&lt;html&gt;&lt;hr&gt;&lt;/html&gt;]] [[&lt;br&gt;]]&gt;&gt;
}}}
&lt;&lt;breadcrumbs [[&lt;html&gt;&lt;hr&gt;&lt;/html&gt;]] [[&lt;br&gt;]]&gt;&gt;
&lt;&lt;&lt;
!!!!!Customization
&lt;&lt;&lt;
Using CSS and a few of the plugin configuration options (see below), you can make the breadcrumbs display resemble browser tabs by adding the following to your [[StyleSheet]]:
{{{
.breadCrumbs { border-bottom:1px solid; }
.breadCrumbs a {
	border: 1px solid; padding: 0px 1em;
	-moz-border-radius-topleft:.5em; -moz-border-radius-topright:.5em;
	-webkit-border-top-left-radius:.5em; -webkit-border-top-right-radius:.5em;
}
}}}
and this in [[ConfigTweaks]] (tagged with systemConfig, of course):
{{{
config.options.chkShowStartupBreadcrumbs=true;
config.options.chkBreadcrumbsLimitOpenTiddlers=true;
config.options.txtBreadcrumbsLimitOpenTiddlers=1;
config.macros.breadcrumbs.homeSeparator=" ";
config.macros.breadcrumbs.crumbSeparator=" ";
}}}
&lt;&lt;&lt;
!!!!!Configuration
&lt;&lt;&lt;
__''display placement:''__
&lt;&lt;option chkCreateDefaultBreadcrumbs&gt;&gt; automatically create breadcrumbs display (if needed)
{{{&lt;&lt;option chkCreateDefaultBreadcrumbs&gt;&gt;}}}
&gt;By default, the plugin automatically creates the "breadCrumbs" display element at the top of the story column, just above the tiddlerDisplay area.  To manually control the display and placement of the breadcrumbs display, you can define a DIV with class="breadCrumbs" in a custom [[PageTemplate]] or embed the {{{&lt;&lt;breadcrumbs&gt;&gt;}}} macro in specific tiddler content.
&gt;
&gt;For example, to add the breadcrumbs below the mainMenu, change this:
{{{
&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
}}}
&gt;to:
{{{
&lt;div id='mainMenu'&gt;
	&lt;div refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
	&lt;div id='breadCrumbs' class='breadCrumbs'&gt;&lt;/div&gt;
&lt;/div&gt;
}}}
&gt;You can also block automatic creation of the breadcrumbs display by setting
{{{
config.options.chkCreateDefaultBreadcrumbs=false;
}}}
&gt;in a [[CookieJar]]/[[ConfigTweaks]] plugin tiddler.

__''other settings:''__
&lt;&lt;option chkShowBreadcrumbs&gt;&gt; show/hide breadcrumbs display
{{{&lt;&lt;option chkShowBreadcrumbs&gt;&gt;}}}
&gt;This checkbox toggles the visibility of the breadcrumbs display.  However, the display is not updated until the next crumb is added (or a previous crumb is clicked on).  For immediate effect, you can use [[ToggleBreadcrumbs]] to synchronize the checkbox setting and the breadcrumbs display.
&lt;&lt;option chkReorderBreadcrumbs&gt;&gt; re-order breadcrumbs when visiting a previously viewed tiddler
{{{&lt;&lt;option chkReorderBreadcrumbs&gt;&gt;}}}
&gt;When visiting a previously viewed tiddler, the title of the most-recently displayed tiddler is simply moved to the end of the list and individual breadcrumbs are not removed from the list unless the underlying tiddler is deleted.  When ''re-ordering'' is disabled, the breadcrumbs list is ''trimmed'' so that all crumbs following that tiddler are removed from the list.
&lt;&lt;option chkBreadcrumbsHideHomeLink&gt;&gt; omit 'Home' link from breadcrumbs display
{{{&lt;&lt;option chkBreadcrumbsHideHomeLink&gt;&gt;}}}
&gt;Enabling this option suppresses the automatic display of the "Home" link (and home separator).  To manually add the home link elsewhere in your document, use the following HTML:
{{{
&lt;html&gt;&lt;a href="javascript:;" onclick="config.macros.breadcrumbs.home()"&gt;home&lt;/a&gt;&lt;/html&gt;
}}}
&lt;&lt;option chkBreadcrumbsSave&gt;&gt; prompt to save breadcrumbs when 'Home' link is pressed
{{{&lt;&lt;option chkBreadcrumbsSave&gt;&gt;}}}
&gt;Whenever you press the 'home' button, you can be prompted to save the current breadcrumbs in a tiddler as a space-separated list of tiddler links (default title="SavedBreadcrumbs").  
&lt;&lt;option chkShowStartupBreadcrumbs&gt;&gt; show breadcrumbs for 'startup' tiddlers
{{{&lt;&lt;option chkShowStartupBreadcrumbs&gt;&gt;}}}
&gt;Breadcrumbs are usually only added for tiddlers that are opened after the document has been loaded, and not for tiddlers displayed during initial startup (e.g., [[DefaultTiddlers]]).  Enabling this option displays breadcrumbs for all viewed tiddlers, regardless of when they are opened.
&lt;&lt;option chkBreadcrumbsReverse&gt;&gt; show breadcrumbs in reverse order
{{{&lt;&lt;option chkBreadcrumbsReverse&gt;&gt;}}}
&gt;As tiddlers are displayed, breadcrumbs are usually added to the //end// of the list.  Enabling this option displays breadcrumbs in reverse order, so that the most recently visited tiddlers are listed first.
&lt;&lt;option chkBreadcrumbsLimit&gt;&gt; limit breadcrumbs display to {{twochar{&lt;&lt;option txtBreadcrumbsLimit&gt;&gt;}}} items
{{{&lt;&lt;option chkBreadcrumbsLimit&gt;&gt;}}} and {{{&lt;&lt;option txtBreadcrumbsLimit&gt;&gt;}}}
&gt;By default, breadcrumbs are displayed for all tiddlers that have been visited (unless the list is being 'trimmed' by disabling the chkReorderBreadcrumbs option above).  Enabling this option limits the display of the list to a maximum specified number of breadcrumbs.
&lt;&lt;option chkBreadcrumbsLimitOpenTiddlers&gt;&gt; limit open tiddlers to {{twochar{&lt;&lt;option txtBreadcrumbsLimitOpenTiddlers&gt;&gt;}}} items
{{{&lt;&lt;option chkBreadcrumbsLimitOpenTiddlers&gt;&gt;}}} and {{{&lt;&lt;option txtBreadcrumbsLimitOpenTiddlers&gt;&gt;}}}
&gt;By default, tiddlers remain open (e.g., displayed in the story column) until you explicitly close them.  When this option is enabled, only the most recently opened tiddlers will remain open: ''any tiddlers in excess of the specified limit are automatically closed.''  //Note: for 'data safety', if a tiddler is being edited, you will be asked for permission to "save-and-close" that tiddler or leave it open (even if that would exceed the specified limit).//
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2012.06.10 2.1.5 refactored default options to eliminate global variable and use init() handling
2011.02.16 2.1.4 in refresh(), use 'inline' instead of 'block' style (avoids unwanted linebreak).  In previousTiddler(), allow handling even if not in a tiddler so that back button can be placed in ~MainMenu or ~SidebarOptions.
2010.11.30 2.1.3 use story.getTiddler()
2009.10.19 2.1.2 code reduction
2009.03.22 2.1.0 added 'save breadcrumbs to tiddler' feature
2008.05.01 2.0.0 added 'limit open tiddlers' feature (with safety check for tiddler in edit mode)
2008.04.06 1.9.1 corrected 'limit' logic so that //last// N crumbs are shown instead of //first// N crumbs.  Also, added chkBreadcrumbsHideHomeLink
2008.04.04 1.9.0 added chkBreadcrumbsReverse and chk/txtBreadcrumbsLimit
2008.03.29 1.8.4 in displayTiddler(), get title from tiddler object (if needed).  Fixes errors caused when calling function passes a tiddler *object* instead of a tiddler *title*
2008.03.24 1.8.3 include shadow tiddlers in breadcrumbs list.  Also changed settings so that "reordering" breadcrumbs is the default, instead of "trimming" the list
2007.12.04 [*.*.*] update for TW2.3.0: replaced deprecated core functions, regexps, and macros
2007.10.26 1.8.2 documentation cleanup
2007.10.18 1.8.1 in GetAreas(), use try/catch to avoid "Bad NPObject as private data" fatal error caused when embedded QuickTime player element is accessed by hasClass() function.
2007.10.02 1.8.0 major documentation and code cleanup.  Moved config.breadCrumbs.* to config.macros.breadcrumbs.* to consolidate objects.  Also, fixed homeSeparator and crumbSeparator default handling.
2007.10.02 1.7.0 added config.options.chkShowStartupBreadcrumbs option
2007.09.16 1.6.1 in getAreas(), removed errant use of 'place' (was causing fatal error when creating default breadcrumbs display element).  Also, added chkCreateDefaultBreadcrumbs configuration setting to enable/disable automatic creation of a default breadcrumbs display.
2007.09.16 1.6.0 re-wrote refresh() to enable multiple display instances, by finding elements with "breadCrumbs" classname.  Fallback to fixed ID (="breadCrumbs") is still used for backward-compatibility.  move rendering code from refresh() to separate render() function, and added definition for {{{&lt;&lt;breadCrumbs&gt;&gt;}}} macro to support embedding breadcrumbs displays in tiddler content.
2007.09.15 [1.5.9.1] updated documentation
2007.09.15 1.5.9 defined homeSeparator (" | ") and crumbSeparator (" &gt; ") as object properties so that they can be redefined as desired for different layouts (e.g., using 'newline' for the crumbSeparator will arrange crumbs in a column rather than a row.
2007.06.21 [1.5.8.1] in home(), return false to prevent IE from attempting to navigate away...
2007.05.26 1.5.8 added support for {{{&lt;&lt;option chkReorderBreadcrumbs&gt;&gt;}}} to toggle trim vs. re-order behavior when visiting previously viewed tiddlers
2007.05.25 1.5.7 added support for {{{&lt;&lt;option chkShowBreadcrumbs&gt;&gt;}}} to toggle //display// of breadcrumbs
2007.05.24 1.5.6 in refresh(), remove non-existing tiddler titles from crumb list.  Also, hijack removeTiddler() so crumbs can be updated after tiddler is deleted.
2007.04.11 1.5.5 added optional params to previousTiddler macro handler() to allow alternative label and tooltip text (instead of default "back")
2007.03.02 1.5.4 in refresh(), for TW2.2, look for "storyDisplay" instead of "tiddlerDisplay" but keep fallback to "tiddlerDisplay" for TW2.1 or earlier
2007.02.24 1.5.3 changed from hijack of onClickTiddlerLink to hijack of displayTiddler() so that ALL displayed tiddlers are recorded in the crumbs, including programmatically displayed tiddlers opened by macros, scripts, etc., (such as [[GotoPlugin]], among many others) in addition to those opened by clicks on links.
2007.02.24 [1.5.2.0] eliminated global space clutter by moving function and data declarations so they are contained inside config.breadCrumbs object.
2007.02.06 1.5.1 added "previousTiddler" macro (for use in sidebar)
2007.02.05 1.5.0 added "previousTiddler" toolbar command (aka, "back")
2006.08.04 [1.4.0.1] change spaces to tabs
2006.08.04 1.4.0 modified from 1.4.0 distro: in refresh(), set {{{display:none/block}}} instead of {{{visibility:hidden/visible}}}.  In home(), check for valid crumbArea before setting style.
2006.08.02 1.4.0 Fixed bug, the redefined onClickTiddlerLink_orig_breadCrumbs works incorrectly on IE
2006.07.20 1.3.0 Runs compatibly with TW 2.1.0 (rev #403+)
2006.02.07 1.2.0 change global array breadCrumbs to config.breadCrumbs by Eric's suggestion
2006.02.04 1.1.0 JSLint checked
2006.02.01 1.0.0 initial release
&lt;&lt;&lt;</pre>
</div>
<div title="Brook´s Law" modifier="YourName" created="201306050940" modified="202006102111" tags="Content Quote" server.title="Brook´s Law" server.page.revision="201412101539" server.etag='"acarvalho_public/Brook%C2%B4s%20Law/1993683:ffe3c6db0c97cacc732fbb02edfdfe18904ecd2e"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="f39e72bf76b592fedfa29fc5fa7798bdc0d5307b" changecount="2">
<pre>"//''Adding manpower to a late software project makes it later.''//"

[[The mythical man-month - essays on software engineering, 1975|https://is.muni.cz/www/jirqa/The.Mythical.Man.Month.F.Brooks.pdf]] ([[on WayBack Machine|https://web.archive.org/web/*/https://is.muni.cz/www/jirqa/The.Mythical.Man.Month.F.Brooks.pdf]])
[[Frederick P. Brooks|http://en.wikipedia.org/wiki/Fred_Brooks]]
page 25

----
/%
@@color:#c4d6ed; ^^
Description: Quote of Frederick P. Brooks Brook's Law
^^@@
%/</pre>
</div>
<div title="Business Analysis" modifier="AndreCarvalho" created="201206180946" modified="202007090934" tags="Content Development" server.title="Business Analysis" server.page.revision="201306062039" server.etag='"acarvalho_public/Business%20Analysis/1250211:fed8de948ce4c8553a66607336223996edd25125"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d651c5304dc07d0a0cd7cdf62732386bc2790a00" changecount="1">
<pre>!First things first

// __''@@color(red):If you do not know or understand the problem how can you expect to give it a solution?@@''__//

From the perspective of a software development company, the initial phase of a software project is the ''Inception'' and comprises Pre-sales, Request for Proposal (or Statement of Work) Analysis and Technical Proposal Production.
&lt;&lt;Image "FR" "" "RUP-Inception.PNG" "https://dl.dropbox.com/" "s/diywxcpbvpp0f3d/" "?dl=1" "This is the RUP vision of the Development Process."&gt;&gt;

One important aspect to notice is that many high maturity software development companies do not include the Inception phase on their Software Development Processes ( [[SDP]] ) but start them at Software Requirements Specification. This might be explained by the fact that such [[SDP]]s were developed taking into consideration very formal and mature scenarios, like aero-space, where this phase is fully performed by the Customer and to an high maturity level. The problem is that, in "less critical" scenarios, this crucial phase is detached from the development process and its results may not be the best to properly feed it. In these scenarios you risk to engage in a "garbage in, garbage out" spiral if proper measures are not taken.

We are not "process and formalism fanatics", and are aware of agility needs on nowadays development, but experience has taught us that "//''you may build a bad solution over a good specification but you will never build a good solution over a bad specification''//". To engage in a legally bounding contract, like the Proposal, that is ambiguous, superficial, incomplete and poorly estimated is, at least, childish and is, for sure, to ask for trouble.

The role of business and software analyst is more and more important nowadays to the success of any software project. This as been acknowledged by top thinkers in the domain from quite some time now.
&lt;&lt;quote 'Frederick P. Brooks on analysis relevance' 'Frederick P. Brooks on analysis relevance'&gt;&gt;
&lt;&lt;quote 'Tom DeMarco on the Software Analyst role' 'Tom DeMarco on the Software Analyst role'&gt;&gt;

!!Pre-sales
''Pre-sales'' is a very important step in a project and encompasses all the initial steps of a (would be) software project. Identification of the business needs is initiated at this stage, see &lt;&lt;BibRef "BABOK 2008"&gt;&gt; //Chapter 4: Enterprise Analysis//.
At this stage a lot of information is produced and vision starts to be established. This is, typically, a Customer internal phase, but, often, involves some participation of the software development partners. The important note here is that software development personnel involved preserve information and do not "close doors" by jumping to superficial restrictive solutions before more detailed information is gathered and organized. These "initial" solutions often, artificially (because they do not correspond to Customer needs nor they are solid technical choices), create technical and architectural "requirements" that may impair the pursue of the "best possible" software solution later.
The paradigmatic example is "//it must be a web browser application//" when an automated deployment, n-tier [[ClickOnce|http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx]] application would do the job much better for the Customer.

!!Request for Proposal Analysis
Imagine a "not so good scenario".
Pre-sales information will be, mostly, "talk", maybe a ~PowerPoint if you are lucky. [[RFP]], if you have one, will have lots of requirements but they will not be [[SMART|SMART Requirements]] and will be spread all along a one hundred pages document.

As with any other problem analysis you should consider [[Rene Descartes' |http://www.marxists.org/reference/archive/descartes/1635/discourse-method.htm]] second principle "//''The second, to divide each of the difficulties under examination into as many parts as possible, and as might be necessary for its adequate solution.''//" and not forget the fourth "//''And the last, in every case to make enumerations so complete, and reviews so general, that I might be assured that nothing was omitted.''//"

You need tools! You need to break down, normalize, make specific, structure and [[trace|Traceability]] __ALL__ the Customer requirements. You also need to understand the business needs and the goals of the requested solution. You need to identify the data flows and the integration environment and to understand the business processes. You need tools, a check list and method, that's what will make you [[agile|Agile Methodologies]] and no, the proper tool is not MS Word nor even MS Excel.

&lt;&lt;Image "FR" "" "RFP-Analysis-Structure.PNG" "https://dl.dropbox.com/" "s/dwefsm068yfz2w0/" "?dl=1" "RFP Analysis Structure"&gt;&gt;
[[RFP]]s came in a variety of formats and structures, your first consideration shall be how to make the information [[traceable|Traceability]] and not redundant. How? Using a relational database, you are talking about Software Engineering aren't you? The first task is, then, to input all the information in a software tool with a known structure that works as a completeness check list, a normalization structure and a road map for analysis. [[Sparx Enterprise Architect]] is a very good tool. But don't forget "''known structure''", that is, you will not take the full potential if you do not have a known, tested and proved structure template.

The image on the right gives an idea of what that structure can be in [[EA|Sparx Enterprise Architect]].
Details about it can be seen at [[RFP Analysis Guidelines]].

Notice that this is a fall-back approach, that is, what you can not get from RFP you must produce on Technical Proposal, what you can't produce on Technical Proposal you will have to do on Requirements Specification and so on. The later you do it the greater the risk...

!!Technical Proposal Production
&lt;&lt;Image "FR" "" "Technical-Proposal-Structure.PNG" "https://dl.dropbox.com/" "s/1ao4mpykaidyynt/" "?dl=1" "Technical Proposal Structure"&gt;&gt;
If you structured and normalized the Customer request you have gain a lot of insight on his needs and goals. Also very important you have established the basis for a true [[traceability|Traceability]]. You will see this is essential to keep focus and [[scope|Scope]] and to assure [[coverage|Coverage]].
Now it is time to propose him a solution that is solid, competitive and adequate.

Again you shall use a known structure if you want to take all the tool potential.
The image on the right gives an idea of what that structure can be in [[EA|Sparx Enterprise Architect]].
Details about it can be seen at [[Technical Proposal Production Guidelines]].


----
See also [[Development Links|Development Links##BusinessAnalysis]]
Back to [[Software Development Pattern]]
----
</pre>
</div>
<div title="CASE" modifier="acarvalho" created="201206212219" modified="201308041613" tags="Acronym Content" server.title="CASE" server.page.revision="201308041613" server.etag='"acarvalho_public/CASE/1332615:214d994bda06ded57c26873145e04027e79051f1"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="14b583096e3cc5050b1487592dfb49a3a0596470">
<pre>Computer Aided Software Engineering
[[Wikipedia|http://en.wikipedia.org/wiki/Computer-aided_software_engineering]]
----
See also : [[CASE tools]]
----
@@color:#c4d6ed; ^^
Description: Computer Aided Software Engineering
^^@@</pre>
</div>
<div title="CASE tools" modifier="acarvalho" created="201308041636" modified="201601181636" tags="Content Development Tool" server.title="CASE tools" server.page.revision="201601181636" server.etag='"acarvalho_public/CASE%20tools/2450061:91bef070525ce09e72cd4c3f112c03f280c944bd"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="f8c2fc0a13a228a9f9fdd9c3faa83163fbb3344a">
<pre>Developing professional software needs tools, [[CASE]] software tools, but beware, a tool is just as good as the usage you make of it. Software development challenges are not solved by tools but tools may be useful in implementing the solutions you define for those challenges. The bottom line here is that you must have a method and then choose tools to help implementing it not the opposite. 

!!Concurrent Version Management
* [[CVS]] - This is the first area any professional software development must address. CVS and WinCVS are still my choice.
!!Modelling
*[[Sparx Enterprise Architect]] - is my primary tool and I try to make it the //[[Single Version of the Truth|https://en.wikipedia.org/wiki/Single_version_of_the_truth]]// in my specifications.
!!Prototyping
* [[Pencil]] - is an excellent [[GUI]] prototyping tool.
!!Information gathering
* Microsoft OneNote - is a tool I'm learning to like. It is quite useful for note-taking in meetings and interviews. It is also nice to be able to share it through DropBox.
----
/%
@@color:#c4d6ed; ^^
Description: A list of essential CASE software tools.
^^@@
%/</pre>
</div>
<div title="CI" modifier="acarvalho" created="201512101347" modified="201512101347" tags="Acronym Content" server.title="CI" server.page.revision="201512101347" server.etag='"acarvalho_public/CI/2421817:6cf489a0deb0046f96a6e00c4389d85f74c2ed68"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e565f3a25e702a4202fd7c9698387cc31c74003e">
<pre>Continuous Integration

See [[Continuous Integration]]
----
/%
@@color:#c4d6ed; ^^
Description: Continuous Integration
^^@@
%/</pre>
</div>
<div title="CM" modifier="acarvalho" created="201512101343" modified="201512101343" tags="Acronym Content" server.title="CM" server.page.revision="201512101343" server.etag='"acarvalho_public/CM/2421812:d32d55c86a0cdff1b0d21f585587624e9b9d624e"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6a2c4df2d693cf3626d9a555f4c8d6c1258a57ed">
<pre>Configuration Management

See : [[Configuration Management]]
----
/%
@@color:#c4d6ed; ^^
Description: Configuration Management
^^@@
%/</pre>
</div>
<div title="CVS" modifier="acarvalho" created="201206210932" modified="201401242218" tags="Acronym Content" server.title="CVS" server.page.revision="201401242218" server.etag='"acarvalho_public/CVS/1636288:f1eab3f1526b88ff612163c0aa40d58c441c4b15"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="cdc08971ebd424e12d238da79dcff3087f7820ce">
<pre>Concurrent Versioning System

See : [[Concurrent Versioning System]]
----
@@color:#c4d6ed; ^^
Description: Concurrent Versioning System.
^^@@</pre>
</div>
<div title="Charlton Ogburn on reorganising" modifier="acarvalho" created="201412181610" modified="201412181611" tags="Content Quote" server.title="Charlton Ogburn on reorganising" server.page.revision="201412181611" server.etag='"acarvalho_public/Charlton%20Ogburn%20on%20reorganising/1999757:8fc5adf866facf05ba86f6649e5fc647fef24009"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="518e1b79e1c241cf2de16b2fffa511d07fafd572">
<pre>"//I was to learn later in life that, perhaps because we are so good at organising, we tend as a nation to meet any new situation by reorganising; and a wonderful method it can be for creating the illusion of progress while producing confusion, inefficiency and demoralization.//"
[[Charlton Ogburn|http://en.wikipedia.org/wiki/Charlton_Ogburn,_Jr.]] (1911-1998)
----
/%
@@color:#c4d6ed; ^^
Description: Charlton Ogburn quote on reorganising
^^@@
%/</pre>
</div>
<div title="Cohesion" modifier="acarvalho" created="201206210919" modified="201304121426" tags="Concept Content TODO" server.title="Cohesion" server.page.revision="201304121426" server.etag='"acarvalho_public/Cohesion/1182954:21828b6fb009f6ee3b6ec54ff7e19bc91c881ce9"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="077354e027ae07dc006a46860876120726b2ec04">
<pre>Strong cohesion and loose [[coupling|Coupling]] are a good thing in software design.
Functional cohesion (see &lt;&lt;BibRef "McConnell 2004"&gt;&gt;) be it at routine, class or module level plays an essential role in reusability, maintainability and testability. If a module does a dozen different things, chances are that, in a different scenario, one of them is not done the way you need and, in that case, you will not reuse the entire module.

Cohesion is some times relegated in favour of automatizaton, that is, you extend your module responsibilities because that way you can provide more automatism to the programmers using the module. The trade-offs shall be carefully considered and segregation measures taken. See [[Namespace Code Placement Guidelines]].

TODO: check reference
"//the functional relatedness of the elements of a module//"
Structured Analysis and System Specification, Tom DeMarco, Yourdon Press Computing Series, 1979
The Practical Guide to Structured Systems Design, 2d. ed., Meilir Page-Jones, Yourdon Press Computing Series, 1988

Modern :
"//The Single Responsibility Principle
A class should have only one reason to change.//"
Agile Principles, Patterns, and Practices in C#
By Martin C. Robert, Martin Micah

----
See also : [[Application Archetype]] [[Modularization]] [[Coupling]]
@@color:#c4d6ed; ^^
Description: Cohesion concept explanation and references.
^^@@</pre>
</div>
<div title="ColorPalette" modifier="YourName" created="201206131956" modified="201701301859" tags="excludeLists excludeSearch" changecount="1" _hash="7de5b9d0551e992afaa975972ae73252541a7850">
<pre>/*{{{*/
Background: #dce8f8
Foreground: #061222
PrimaryPale: #fafcfe
PrimaryLight: #c4d6ed
PrimaryMid: #4878b6
PrimaryDark: #014
SecondaryPale: #fefdfa
SecondaryLight: #ede3c4
SecondaryMid: #b69c48
SecondaryDark: #53514a
TertiaryPale: #fefbfa
TertiaryLight: #edd3c4
TertiaryMid: #b67048
TertiaryDark: #534d4a
Error: #f88
ColorPaletteParameters: HSL([214|12], [0.67|0.53|0.43|0.06],[0.31|0.5|0.85|0.99])
/*}}}*/</pre>
</div>
<div title="ConceptsPage" modifier="acarvalho" created="201206161509" modified="201306050855" tags="Content" server.title="ConceptsPage" server.page.revision="201306050855" server.etag='"acarvalho_public/ConceptsPage/1248328:6b2343894a7e42864f5941fa5a68e21048024279"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="becdb8db215eb3bad2f8d1eab54abc07f59e9533">
<pre>|Concepts|Acronyms|h
|&lt;&lt;list filter [tag[Concept]]&gt;&gt;|&lt;&lt;list filter [tag[Acronym]]&gt;&gt;|
----
@@color:#c4d6ed; ^^
Description: A glossary of concepts and acronyms. 
^^@@
</pre>
</div>
<div title="Concurrent Versioning System" modifier="AndreCarvalho" created="201401242221" modified="201707142226" tags="Content Development" changecount="10" _hash="5f7df4bacd410a619f67bc2e3371d7ea4f6ada4d">
<pre>Concurrent Versioning System methods and tools play a fundamental role in [[Configuration Management]] and may be decisive in your efforts to achieve [[Systematic Reuse]]. In fact, choosing the wrong method may be one of the major [[Reuse Obstacles]].

No professional software development may be carried on without a Concurrent Versioning System (CVS) and CVS is a major part of Configuration Management.

A CVS is a centralized repository (software and hardware) that holds the digital artefacts  used and produced during development (source code, documents, designs, etc.). In this perspective it may be seen as a filesystem. 
The ''Versioning'' part, however, introduces a new requirement that most filesystems do not provide : version management, that is, the preservation and identification of the several versions that changes to an artefact produce along its lifecycle and also the versioning of a sub-system or the system as a whole in order to present a coherent set of its artefacts in a given moment. This introduces us to __tag__ and __revision__ concepts.
Formal and mature processes require unequivocal identification of all work products and even if that level of formality is not required you should be aware of the risks of not doing so. 
The ''Concurrent'' part introduces the needs of team development in concurrent access to the artefacts and points us to __reserved editing or lock__, __branch__, __compare__ and __merge__ functionalities.
The concurrent part of [[CVS]] is very important and you have two approaches to deal with it:
* push the problem forward and deal with conflicts after they are created
* prevent conflicts as much as possible by coordinating and communicating effectively among your team
The first approach is unavoidable when you are in an open source project with a wide and probably uncontrollable team. It implies some wasted effort but is necessary as you are in a reactive model.
The second approach implies a defined team and planning and management but is much more efficient and controllable. 

As seen there are several methodological approaches to use such a system. They are determined, mainly, by the exploration environment intended. An open source, widely participated and with loose governance project shall not be dealt with in the same manner as a professional team development project, also, a professional project, in a [[Systematic Reuse]] environment, presents challenges and needs that are not the same as the ones of a pure "project oriented" project.

Many people will say that you can do everything you need with any modern [[CVS]] system. Maybe that's true, but some systems are more suitable for some scenarios and, here (at professional team development), suitability means efficiency, time and money. Choosing the right methodological approach for concurrent versioning for your scenario means that you will save a lot in unnecessary effort, avoid shortcuts, hacks or "//solutions//" that impair your Company's strategic goals, like [[Systematic Reuse]], and also prevent frustration in your team. Version management shall not add effort to your projects, it shall reduce it. See also [[Reuse oriented CVS]].

In my opinion, nowadays, many people is choosing the wrong approaches and tools for [[CVS]] just because the more recent major products in the area emerged from wide open-source environments and, naturally, target those environments primarily, although they "//can also be used//" in professional, team based, environments. The older ones, team and project oriented, are so old (CVS launched in 1990, [[CVSNT|http://www.march-hare.com/cvsnt/]] in 1998) that they might even not have bugs any more… but also they are not so glamorous any more...

The first thing to take into account is that, in professional development, not all versioned artefacts are code, some projects may even not have code artefacts at all. You should also consider that, even in code files, not all environments are equal and in many mergeability is not assured or easy (think of [[IDE]] auto generated files or visual forms editors for instance). This puts aside all methodologies based on the assumed automatic mergeability of versioned artefacts. Modern project's artefacts are code, generated code, [[CASE]] tool's files, documents, binaries, images and anything else you can think of.

A professional team [[CVS]] shall :
# Be ''fully understandable'' by every team member. [[CVS]] is a major, constantly used, tool, if your team members are not proficient with it that will cause expensive, and some times irreparable, errors. Choose the simplest tool that fulfills your requirements.
# Allow ''reserved edit'' working mode. Not so much to forbid concurrent editing, but to notify us that someone else is editing the artefact __before__ we do change it. Merges are, many times, impossible and, most of the times, difficult.
# Allow ''checkout read-only'' files to prevent environments, like MS Visual Studio, from inadvertently change files without the user knowledge. This produces merge nightmares.
# Be ''file oriented''. Although project and repository oriented functionality is needed (and covered by tag/branch mechanisms), a file oriented view and management is essential in a team professional scenario. Hierarchical filesystem is, still, the best structuring and managing approach. Projects are different and with different artefacts and needs but, in digital form, their common denominator is always a filesystem. 
# Use a ''sequential, predictable, revision identifier per file''. This is very important if you want, for instance, that your documents refer their [[CVS]] revision on their content (and yes, this is quite useful, and mandatory on most mature [[Configuration Management]] processes).
# Have a ''tag system'' that can work in a single branch or across branches. This is essential to promote [[Systematic Reuse]] with real code sharing and collaborative improvement. Tags must be overwrite able in order to allow to update a tag in a single file to another revision of that file. This is very important for the process agility in controlled environments. Imagine a test release with a simple, self-contained show stopper bug, do you want to repeat the entire release process? Imagine a self-contained correction or improvement ([[Refactoring|Refactor]]) in a reused module, do you want to make all dependent projects to perform merges or revalidation of your entire reuse framework? Of course in high formality environments projects shall depend on tags under their exclusive control even in shared modules.
# Have ''branching capability'' and also the ability to transform a tag into a branch. This is important for reuse in order to allow projects to start by reusing "as-is" and then, when needed and if needed, to adapt to the project's needs.
# Allow ''artefact renaming and moving'' as it is also an important feature. [[Refactoring|Refactor]], [[Continuous Improvement]] and [[Emergent Reuse]] are enough to ask for it.
# Have a ''stand-alone client'' is essential, as said, you are not working with code only, nor the project's context is the [[IDE]] context only.
# Have a clear and complete ''graphical display'' of a file's history (revisions, tags, branches and merges on the repository). You cannot manage any really reused code effectively without it.
# Provide the ability to mix ''different repository folders'' under a common development folder and to perform seamless hierarchical, recursive operations like tagging, commit, etc.
# Handle ''[[Sticky tags|http://cvsnt.org/manual2/html/Sticky-tags.html]]''. They are essential to work with reusable shared modules.
# Provide a full ''command line'' control. Essential for efficient scripting and [[Continuous Integration]]
# Provide hierarchical ''by folder permissions''. They are a must in any professional environment.
# Respect ''repository file date-time'' on checkout and update to local filesystem. It's unbelievable that some versioning systems change the files timestamp on the local filesystem (SVN or GIT for instance). It is just plain stupid and confusing : a file timestamp is the most valuable information you have in your filesystem for version management.
# Be properly ''supported in all operating systems used'' in your development environment. Have you tried to use Git on Windows? With its pity excuse of a command line? In professional development the "also works on" tools are never a good choice.  

See also [[Reuse oriented CVS]] and [[Promoting Reuse by Reference]] to better understand some of these requirements. A proper, professional and mature [[CVS]] is an essential tool to support and promote reuse and to make your version management truly agile. Poor choices here are to be paid in full for many time.

----
Back to [[Configuration Management]] [[High Maturity Practices]]
----
/%
@@color:#c4d6ed; ^^
Description: Concurrent Versioning Systems discussion
^^@@
%/</pre>
</div>
<div title="Configuration Management" modifier="AndreCarvalho" created="201401270953" modified="201702141215" tags="Concept Content Development" changecount="3" _hash="f0e69ce90706b53720864567cc2f1e88463681bb">
<pre>Configuration Management is a broad and important topic in [[Software Development]] 

"//Configuration management ([[CM]]) is a systems engineering process for establishing and maintaining consistency of a product's performance, functional and physical attributes with its requirements, design and operational information throughout its life.//"
[[Wikipedia|https://en.wikipedia.org/wiki/Configuration_management]]

Managing a Software Project is complex. The information volume is huge and the only constant is change. Large teams, lots of actors and stakeholders, long time-frames and complex business scenarios demand strong planning and accurate and reliable information sources. One can not afford to not know exactly what was agreed and what was delivered. One can not, also, afford to loose the [[traceability|Traceability]] that shall sustain and help to understand each and every decision made.
This is the challenge of Configuration Management and it can only be conquered with method, discipline and proper tools and practice. 

#[[Concurrent Versioning System]] is, probably, your first concern in regard to [[CM]].
## [[Reuse oriented CVS]] is a major factor to promote [[Systematic Reuse]]
#[[Digital Artefact Identification]] is essential for accuracy and reliability of the information. In a software project we have, at least, two kinds of identifiable artefacts:
## Filesystem artefacts - are the ones that are identified by their placement in the filesystem together with their [[CVS]] revision. This is the case, for instance, of source code files.
## Numbered artefacts - are the ones that posses and exhibit an unique identifier. They shall also have their [[CVS]] revision as explicit content (note that these artefacts may exist as physical and not only digital form). This is the case, for instance, of specification documents.

----
/%
@@color:#c4d6ed; ^^
Description: Configuration Management topics, discussions and guidelines.
^^@@
%/</pre>
</div>
<div title="ContentTimelineMacro" modifier="acarvalho" created="201304121305" modified="201304122228" tags="System systemConfig" server.title="ContentTimelineMacro" server.page.revision="201304122228" server.etag='"acarvalho_public/ContentTimelineMacro/1184047:160e3003c07fbb2bfc1bf485850557a4f4b23027"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="95dda8efa5fa70e3057b662592bb5ef971ddaffd">
<pre>/***
|Name|ContentTimelineMacro|
|Created by|Andre' de Carvalho|
|Date|12/04/2013|
|Location|http://acarvalho.tiddlyspace.com/#ContentTimelineMacro|
|Version|1.0.1|
|Type|Macro|
|Description|A TiddlyWiki Macro to show timelines (modified, created) for tiddlers tagged 'Content'|

!!Code
***/
{{{
version.extensions.ContentTimeline= {major: 1, minor: 0 , revision: 1, date: new Date(2013,4,12)};
}}}
{{{
config.macros.ContentTimeline={};
config.macros.ContentTimeline.dateFormat=config.macros.timeline.dateFormat;
config.macros.ContentTimeline.handler = function(place,macroName,params)
{
var field = params[0] ? params[0] : "modified";
var tiddlers = store.reverseLookup("tags","excludeLists",false,field);
var lastDay = "";
//var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1])) : 0;
var count = params[1];
for(var t=tiddlers.length-1; t&gt;=0; t--)
{
 var tiddler = tiddlers[t];
 if (!tiddler.isTagged("Content")) continue;
 
 count=count-1;
 if (count &lt; 0) 
  {
   break;
  }
 var theDay = tiddler[field].convertToLocalYYYYMMDDHHMM().substr(0,8);
 if(theDay != lastDay)
  {
   var theDateList = document.createElement("ul");
   place.appendChild(theDateList);
   createTiddlyElement(theDateList,"li",null,"listTitle",tiddler[field].formatString(this.dateFormat));
   lastDay = theDay;
  }
 var theDateListItem = createTiddlyElement(theDateList,"li",null,"listLink");
 theDateListItem.appendChild(createTiddlyLink(place,tiddler.title,true));
 }
};
}}}
</pre>
</div>
<div title="Continuity (KM)" creator="AndreCarvalho" modifier="YourName" created="201707142100" modified="202006231139" tags="Content Concept KM" changecount="2">
<pre>On the [[Knowledge Management|KnowledgeManagement]] domain we consider ''continuity'' the degree to which information and knowledge in an organization are persisted and do not fade and disappear over time.
----
See also [[Knowledge Management|KnowledgeManagement]]
----
/%
@@color:#c4d6ed; ^^
Description: Continuity concept on Knowledge Management
^^@@
%/</pre>
</div>
<div title="Continuous Improvement" modifier="acarvalho" created="201206231345" modified="201304121426" tags="Concept Content TODO" server.title="Continuous Improvement" server.page.revision="201304121426" server.etag='"acarvalho_public/Continuous%20Improvement/1182955:82f4f01b6b7979ac09cfc8817759625e8e8d929f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="5c46a68aa522d834e41a9e07625500bb0b99ce87">
<pre>----
@@color:#c4d6ed; ^^
Description: Continuous Improvement concept explanation and discussion.
^^@@</pre>
</div>
<div title="Continuous Improvement (KM)" creator="YourName" modifier="YourName" created="202006041415" modified="202006231138" tags="Content Concept KM" changecount="3">
<pre>On the [[Knowledge Management|KnowledgeManagement]] domain we consider ''Continuous Improvement'' the degree to which knowledge and information in the system  is able to be, and effectively is, continuously reviewed, refined, expanded and updated. 
----
See also [[Knowledge Management|KnowledgeManagement]]
----
/%
@@color:#c4d6ed; ^^
Description:  Continuous Improvement concept on Knowledge Management
^^@@
%/</pre>
</div>
<div title="Continuous Integration" modifier="acarvalho" created="201208281416" modified="201512101346" tags="Concept Content" server.title="Continuous Integration" server.page.revision="201512101346" server.etag='"acarvalho_public/Continuous%20Integration/2421815:c9c472f7ecce6daef641a23a1df6905ead901f12"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="40191c59342edf2b5e78042bcc2bf44276773212">
<pre>“//Continuous Integration is a software development practice where members of a team integrate their work frequently, usually each person integrates at least daily - leading to multiple integrations per day. Each integration is verified by an automated build (including test) to detect integration errors as quickly as possible.//”
[[Martin Fowler - Continuous Integration|http://martinfowler.com/articles/continuousIntegration.html]]

Continuous Integration ([[CI]]) is a major factor in team work and can prevent “snowball” integration errors and is also a major factor in preventing “broken” builds that affect everybody's work on a team. It is also used to integrate and automate other practices like [[Static Analysis]] or [[Unit Testing]].

Continuous Integration is one of the [[High Maturity Practices]] in [[Software Development]].
----
@@color:#c4d6ed; ^^
Description: Continuous Integration concept and references
^^@@</pre>
</div>
<div title="Conway´s law" modifier="acarvalho" created="201412101233" modified="201412101536" tags="Content Quote" server.title="Conway´s law" server.page.revision="201412101536" server.etag='"acarvalho_public/Conway%C2%B4s%20law/1993659:c438d97c029abfb38b297fba251ea0afd79cd0a2"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="792341b7c706b4ac7befe9496a0c84d77cfc85af">
<pre>''//"Any organization that designs a system (defined more broadly here than just information systems) will inevitably produce a design whose structure is a copy of the organization's communication structure."//''
Melvin E. Conway, [[How Do Committees Invent?|http://www.melconway.com/Home/Committees_Paper.html]], 1968

//"Although sometimes construed as humorous, Conway's law was intended as a valid sociological observation. It is based on the reasoning that in order for two separate software modules to interface correctly, the designers and implementers of each module must communicate with each other. Therefore, the interface structure of a software system will reflect the social structure of the organization(s) that produced it."//
[[Wikipedia|http://en.wikipedia.org/wiki/Conway%27s_Law]]
----
/%
@@color:#c4d6ed; ^^
Description: About organization's communication.
^^@@
%/</pre>
</div>
<div title="CoreTweaks" modifier="acarvalho" created="201206191425" modified="201207190907" tags="systemConfig" server.title="CoreTweaks" server.page.revision="201207190907" server.etag='"acarvalho_public/CoreTweaks/795213:58c7150dd66c7b434a04b2e2afeb7c835c4d7472"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="12bc8a0a2915622a999dd25e59fa695d49b1c466">
<pre>/***
http://trac.tiddlywiki.org/ticket/637 - CLOSED: WON'T FIX
This tweak modifies the tooltip format that appears when you mouseover a link to a tiddler.  It adds an option to control the date format, as well as displaying the size of the tiddler (in bytes)

Tiddler link tooltip format:
{{stretch{&lt;&lt;option txtTiddlerLinkTootip&gt;&gt;}}}
^^where: %0=title, %1=username, %2=modification date, %3=size in bytes, %4=description slice, %5=first N characters of tiddler content^^
Tiddler link tooltip date format:
{{stretch{&lt;&lt;option txtTiddlerLinkTooltipDate&gt;&gt;}}}
Tiddler excerpt limit (chars):
{{stretch{&lt;&lt;option txtTiddlerLinkTooltipLimit&gt;&gt;}}}
***/

config.messages.tiddlerLinkTooltip='%4';
config.messages.tiddlerLinkTooltipDate='DDD, MMM DDth YYYY 0hh12:0mm AM';
config.messages.tiddlerLinkTooltipLimit=50;

config.options.txtTiddlerLinkTootip=
	config.options.txtTiddlerLinkTootip||config.messages.tiddlerLinkTooltip;
config.options.txtTiddlerLinkTooltipDate=
	config.options.txtTiddlerLinkTooltipDate||config.messages.tiddlerLinkTooltipDate;
config.options.txtTiddlerLinkTooltipLimit=
	config.options.txtTiddlerLinkTooltipLimit||config.messages.tiddlerLinkTooltipLimit;

Tiddler.prototype.getSubtitle = function() {
	var modifier = this.modifier;
	if(!modifier) modifier = config.messages.subtitleUnknown;
	var modified = this.modified;
	if(modified) modified = modified.formatString(config.options.txtTiddlerLinkTooltipDate);
	else modified = config.messages.subtitleUnknown;
	var descr=store.getTiddlerSlice(this.title,'Description')||'';
	var txt=this.text.substr(0,config.options.txtTiddlerLinkTooltipLimit);
	if (this.text.length&gt;config.options.txtTiddlerLinkTooltipLimit) txt+="...";
	return config.options.txtTiddlerLinkTootip.format([this.title,modifier,modified,this.text.length,descr,txt]);
};
/***
Set default text for new tiddlers
***/
config.views.wikified.defaultText=store.getTiddlerText("DefaultTiddlerText");
config.views.editor.defaultText=store.getTiddlerText("DefaultTiddlerText"); 
</pre>
</div>
<div title="Coupling" modifier="YourName" created="201206210917" modified="202007121103" tags="Concept Content TODO" changecount="1" server.title="Coupling" server.page.revision="201501271218" server.etag='"acarvalho_public/Coupling/2063864:9ba77d69b81b0ce50ea707d2695b0eb616b9d361"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="ef92f8e01bb9f62a305ce0f74887d97d4e483083">
<pre>Strong [[cohesion|Cohesion]] and loose coupling are a good thing in software design.
Coupling (or dependency) control is one of the most important tasks in a large, complex and evolving system. It also has even more importance in an n-tier system.

See [[Namespace and Filesystem Guidelines]], [[Namespace Coupling Guidelines]] and [[Namespace Code Placement Guidelines]] as the first measure to fight //spaghetti coupling//. 
See also [[OOP principles|ObjectOrientedProgramming]] for guidelines on packaging and change impact contention.

Improper coupling is a [[major obstacle to reusability|Reuse Obstacles]], maintainability and testability
----
See also : [[Application Archetype]] [[Modularization]] [[Cohesion]]
@@color:#c4d6ed; ^^
Description: Coupling concept explanation.
^^@@</pre>
</div>
<div title="Coverage" creator="AndreCarvalho" modifier="YourName" created="202007090954" modified="202007121043" tags="Content Concept" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" changecount="6">
<pre>When working on software specifications we are dealing with a fairly large information set and, as we have the right to refuse requests out of the agreed [[scope|Scope Management]] so the Customer has the right to expect us to fully address that same scope.

That's the concept of coverage : ''we need to assure that everything in scope is properly addressed in each step of the process and produces its necessary effects''. 

Coverage is an important quality attribute for any specification and, in fact, for many other aspects like when scientifically discussing alternatives (we need to assure that the proposed alternatives cover the intended scope, if they don't, they are not alternatives for the problem under discussion).

The concept was put as requirement for the scientific method by XVII century philosopher [[Rene Descartes' |http://www.marxists.org/reference/archive/descartes/1635/discourse-method.htm]] fourth principle "//''And the last, in every case to make enumerations so complete, and reviews so general, that I might be assured that nothing was omitted.''//"

Many of the modeling techniques and tools we use are also oriented to coverage assurance and rest assured that it is very hard to achieve it without proper techniques and tools.
Proper [[CASE]] tools usually use a combination of [[status attributes|EA Usage - Attribute Status]] and [[traceability|Traceability]] information to assess and assure coverage.

----
See also [[Traceability]]
----
/%
@@color:#c4d6ed; ^^
Description: Coverage concept explanation
^^@@
%/</pre>
</div>
<div title="DFD" modifier="acarvalho" created="201512101348" modified="201512101348" tags="Acronym Content" server.title="DFD" server.page.revision="201512101348" server.etag='"acarvalho_public/DFD/2421819:a6e8581938a848056c4107758fa88c4d2e697d03"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="3ef6e77fb7f982d4b6e42cc4f567f1bb1a8d4696">
<pre>Data Flow Diagram

See [[Data Flow Diagram]]
----
/%
@@color:#c4d6ed; ^^
Description: Data Flow Diagram
^^@@
%/</pre>
</div>
<div title="Data Flow Diagram" modifier="AndreCarvalho" created="201206232339" modified="202007090928" tags="Concept Content TODO" server.title="Data Flow Diagram" server.page.revision="201512101348" server.etag='"acarvalho_public/Data%20Flow%20Diagram/2421818:30262d5537b52aab0fb912431813af0aad64563d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="3c89587e31c892bc7473af5f218aff1c5f09fcb0" changecount="3">
<pre>Data Flow Diagrams ([[DFD]]) were proposed as __the essential view__ in the historical ''Structured Analysis and System Specification'' by Tom ~DeMarco, Yourdon Press, New York, 1978. 
In his enlightened words "//(...) ''I conclude that it is a natural characteristic of the tool: When a Data Flow Diagram is wrong, it is glaringly, demonstrably, indefensibly wrong. This seems to me to be an enormous advantage of using Data Flow Diagrams.''//" chapter 3.2

Although he corrected his statement to "//Dataflow is one of the essential views, not the only one//" in //Structured Analysis, Tom ~DeMarco, sd&amp;m Conference 2001, Software Pioneers//, we strongly agree that ''DFD view is essential'' for the analysis of software solutions especially as a __''[[validation|Validation]], [[scope|Scope]] definition and [[coverage|Coverage]] assurance tool''__ on the inception stages. No wonder DFD(0) are also known as ''System Context Diagram'', this name alone should give you the idea of its importance.

A DFD(0) diagram allows to answer many questions like:
*are we considering all external systems we need to interact with?
*are we considering all externally required (in and out) data items?
*is the request for integrating system X in scope of our Proposal?
these, and some other, are examples of DFD(0) usefulness as it clearly establishes an integration [[scope|Scope]], provides a [[coverage|Coverage]] check-list for external systems and, last but not least, is extremely readable by Customer personnel without the need to understand complex notations thus providing very good  [[validation|Validation]] ability.

&lt;&lt;Image "FR" "250" "DFD%280%29.png" "https://dl.dropbox.com/" "s/9xa5jbcjemrd9j9/" "?dl=1" "DFD(0) or Context Diagram"&gt;&gt;
//"Another useful model in system design is the context diagram, which represents all external entities that may interact with a system, either directly or indirectly. (...) Such a diagram pictures the system at the center, with no details of its interior structure, surrounded by all its interacting systems, environments, and activities. The objective of a system context diagram is to focus attention on external factors and events that should be considered in developing a complete set of system requirements and constraints."//
&lt;&lt;BibRef "Kossiakoff 2011"&gt;&gt; pg. 266

No software specification is complete without, at least, one Context Diagram describing the system data flows to and from all external entities. Not doing so is to risk to face a lot of Access databases and obscure legacy systems that nobody heard about before, popping like mushrooms after a rainy day, on the Requirements Specification phase and, of course, they must be integrated in the new system.

&lt;&lt;Image "FR" "350" "DFD%281%29.png" "https://dl.dropbox.com/" "s/wgm8wh10cihcn37/" "?dl=1" "DFD level 1"&gt;&gt;
DFDs may be detailed in further levels to describe the inner flows of the system and they are very useful to help define modularization.





!!Additional references
* Just Enough Structured Analysis, Edward Yourdon - [[Wiki version|http://yourdon.com/strucanalysis/wiki/index.php/Chapter_9]] - [[On Wayback Machine|https://web.archive.org/web/20151204163430/http://www.yourdon.com:80/strucanalysis/wiki/index.php/Table_of_Contents]]
** Specially : [[Chapter 18.|http://yourdon.com/strucanalysis/wiki/index.php/Chapter_18]] The Environmental Model [[On Wayback Machine|https://web.archive.org/web/20150821014818/http://www.yourdon.com:80/strucanalysis/wiki/index.php/Chapter_18]]

TODO: add example, describe usage
----
See also : [[Use Case Diagram]]
----
@@color:#c4d6ed; ^^
Description: DFD concept, usage and references
^^@@</pre>
</div>
<div title="DefaultTiddlerText" modifier="acarvalho" created="201206192041" modified="201304152104" tags="Administration excludeLists excludeMissing excludeSearch" server.title="DefaultTiddlerText" server.page.revision="201304152104" server.etag='"acarvalho_public/DefaultTiddlerText/1187832:cc174b0d9d02d0a21738716c5e3ab7d14d29d9da"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="ab22eaa5434819149be125394d4cb90fe7b6accf">
<pre>----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="DefaultTiddlers" creator="AndreCarvalho" modifier="acarvalho" created="201206131944" modified="201206131944" server.title="DefaultTiddlers" server.page.revision="201206131944" server.etag='"acarvalho_public/DefaultTiddlers/745361:d00cc90e5c0ae8530ae74a3c8165e85d768fd8cb"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="0061846b54afdd97b349a2c33e904b37500e5347">
<pre>[[HomePage]]</pre>
</div>
<div title="Design Patterns" modifier="acarvalho" created="201306071518" modified="201306071538" tags="Concept Content" server.title="Design Patterns" server.page.revision="201306071538" server.etag='"acarvalho_public/Design%20Patterns/1250747:990432f8c99fd84e353a6308f8159c02c90b534c"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="db768e524c70a14fcbb414802f729aa3bd16bcda">
<pre>"//In software engineering, a design pattern is a general reusable solution to a commonly occurring problem within a given context in software design. A design pattern is not a finished design that can be transformed directly into source or machine code. It is a description or template for how to solve a problem that can be used in many different situations. Patterns are formalized best practices that the programmer must implement themselves in the application.[1] Object-oriented design patterns typically show relationships and interactions between classes or objects, without specifying the final application classes or objects that are involved.//"
Pasted from &lt;http://en.wikipedia.org/wiki/Software_design_pattern&gt; 

One of the best resources for pattern related information is [[The Hillside Group|http://hillside.net/]] site.

----
/%
@@color:#c4d6ed; ^^
Description: Software Design Patterns concept and references
^^@@
%/</pre>
</div>
<div title="Development Links" modifier="YourName" created="201206132155" modified="201909031414" tags="Content Development Links References" changecount="2" server.title="Development Links" server.page.revision="201501221102" server.etag='"acarvalho_public/Development%20Links/2057173:2a78706741a7c51779db79c19764a058cc2f9034"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c736bac9b45c15ebd66d023a3d0d370b58a9b4c7">
<pre>!! &lt;html&gt;&lt;a name="Architecture" /&gt;&lt;/html&gt; Architecture
* [[Bredemeyer Consulting - Software Architecture, Architects and Architecting|http://www.bredemeyer.com/]] - This site organizes a variety of resources to help enterprise architects and software architects deepen and expand their understanding of architecture and the role of the architect.
* [[MS The Architecture Journal|http://www.architecturejournal.net]] - Microsoft's Architecture Journal.
* [[The Open Group|http://www.opengroup.org/]] - The Open Group’s member organizations work to establish open, vendor-neutral IT standards and certifications in a variety of subject areas critical to the enterprise.
* [[Martin Fowler wiki|http://martinfowler.com/]] - An excellent source of information and advice from a known guru. 

!! &lt;html&gt;&lt;a name="OOP" /&gt;&lt;/html&gt; OOP (Object Oriented Programming)
* [[JOT|http://www.jot.fm]] - Journal of Object Technology (JOT) is an on-line peer-reviewed publication, published six times per year by the ETH Swiss Federal Institute of Technology, aimed at intermediate to advanced practitioners, educators and researchers in the field of object technology.
* [[Object Mentor|http://www.objectmentor.com/index.html]] - Founded in 1991 by Robert C. Martin, Object Mentor is a team of highly experienced software professionals specializing in object-oriented technologies and [[Agile|Agile Methodologies]]/XP development methodologies. 

!! &lt;html&gt;&lt;a name="Reuse" /&gt;&lt;/html&gt; Reuse
* [[Art of Software Reuse|http://artofsoftwarereuse.com/]] - by Vijay Narayanan, a site dedicated to developers, designers, and architects aspiring to create better software.

!! &lt;html&gt;&lt;a name="BusinessAnalysis" /&gt;&lt;/html&gt; Business Analysis
* [[A Guide to the Business Analysis Body of Knowledge® (BABOK® Guide)|http://www.iiba.org/imis15/IIBA/Professional_Development/Business_Analysis_Body_of_Knowledge/IIBA_Website/Professional_Development/Business_Analysis_Body_of_Knowledge_pages/Business_Analysis_Body_of_Knowledge.aspx?hkey=d0891e0a-996a-431f-a6f5-a7d644e23a5c]] - is the collection of knowledge within the profession of business analysis and reflects current generally accepted practices. As with other professions, the body of knowledge is defined and enhanced by the business analysis professionals who apply it in their daily work role. 
* [[Ed Yourdon's Structured Analysis Wiki|http://yourdon.com/strucanalysis/wiki/index.php/Introduction]] - [[On Wayback machine|https://web.archive.org/web/20151221060312/http://yourdon.com/strucanalysis/wiki/index.php/Introduction]] - This project represents the ongoing evolution of Ed Yourdon's 1989 tome, Modern Structured Analysis. Until very recently, a revised and updated version was available on Ed's website under the title Just Enough Structured Analysis (...).

----
@@color:#c4d6ed; ^^
Description: Links about Software Development worth visiting. 
^^@@</pre>
</div>
<div title="DiffFormatter" modifier="FND" created="201309241804" modified="201309241804" tags="excludeLists excludeSearch systemConfig" server.title="DiffFormatter" server.page.revision="201309241804" server.etag='"system/DiffFormatter/1521854:28e8444e41bdf57dfe9f6a1c19c178bb3e693803"' server.workspace="bags/system" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="system" server.permissions="read" server.content-type="text/javascript" _hash="2232cd0549946d29c475cec846de3378177301ae">
<pre>/***
|''Name''|DiffFormatter|
|''Description''|highlighting of text comparisons|
|''Author''|FND|
|''Version''|0.9.0|
|''Status''|beta|
|''Source''|http://svn.tiddlywiki.org/Trunk/contributors/FND/formatters/DiffFormatter.js|
|''CodeRepository''|http://svn.tiddlywiki.org/Trunk/contributors/FND/|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''Keywords''|formatting|
!Description
Highlights changes in a unified [[diff|http://en.wikipedia.org/wiki/Diff#Unified_format]].
!Notes
Based on Martin Budden's [[DiffFormatterPlugin|http://svn.tiddlywiki.org/Trunk/contributors/MartinBudden/formatters/DiffFormatterPlugin.js]].
!Usage
The formatter is applied to blocks wrapped in &lt;html&gt;&lt;code&gt;{{{diff{..}}}&lt;/code&gt;&lt;/html&gt; within tiddlers tagged with "diff".
!Revision History
!!v0.9 (2010-04-07)
* initial release; fork of DiffFormatterPlugin
!StyleSheet
.diff { white-space: pre; font-family: monospace; }
.diff ins, .diff del { display: block; text-decoration: none; }
.diff ins { background-color: #dfd; }
.diff del { background-color: #fdd; }
.diff .highlight { background-color: [[ColorPalette::SecondaryPale]]; }
!Code
***/
//{{{
(function() {

config.shadowTiddlers.StyleSheetDiffFormatter = store.getTiddlerText(tiddler.title + "##StyleSheet");
store.addNotification("StyleSheetDiffFormatter", refreshStyles);

var formatters = [{
		name: "diffWrapper",
		match: "^\\{\\{diff\\{\n", // XXX: suboptimal
		termRegExp: /(.*\}\}\})$/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "div", null, "diff");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}, {
		name: "diffRange",
		match: "^(?:@@|[+\\-]{3}) ",
		lookaheadRegExp: /^(?:@@|[+\-]{3}) .*\n/mg,
		handler: function(w) {
			createTiddlyElement(w.output, "div", null, "highlight").
				innerHTML = "&amp;#8230;";
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	}, {
		name: "diffAdded",
		match: "^\\+",
		termRegExp: /(\n)/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "ins", null, "added");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}, {
		name: "diffRemoved",
		match: "^-",
		termRegExp: /(\n)/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "del", null, "removed");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}
];

config.parsers.diffFormatter = new Formatter(formatters);
config.parsers.diffFormatter.format = "diff";
config.parsers.diffFormatter.formatTag = "diff";

})();
//}}}</pre>
</div>
<div title="Digital Artefact Identification" creator="YourName" modifier="AndreCarvalho" created="201701301133" modified="201702141337" tags="Content Concept Guideline TODO" changecount="9">
<pre>As said, in a software project we have, at least, two kinds of identifiable digital artefacts:
## ''Filesystem artefacts'' - are the ones that are identified by their placement in the filesystem together with their [[CVS]] revision. This is the case, for instance, of source code files or binaries or Customer provided information. Typically we do not want or can change these artefacts (content or name) to include an identifier.
## ''Numbered artefacts'' - are the ones that posses and exhibit an unique identifier (in their name and/or content). They shall also have their [[CVS]] revision as explicit content. Note that these artefacts may exist as physical and not only digital form, this is the case, for instance, of specification documents.

All digital artefacts shall be placed in a versioned ([[CVS]]) filesystem but that is not enough to make them unequivocal as they are copied, printed and transmitted among project's actors and stakeholders. To be sure that all participants can access and confirm that they are using the same variant of a given artefact is crucial for reliability.

One must define an identification schema for the artefacts that allows for unequivocal reference. Pay attention that __this identifier ''shall not'' include version information__ as this will be managed by the versioning system. Versioning systems are file based so you shall never put variable information on a file's name : ''the file's name may include an unique identifier but must be constant and never be changed.''
The ''Digital Artefact Identification'' is then composed of:
#''An unique identifier'' that shall be present in file's name and may/shall be also present in file's content
#''A revision identifier'' that is provided by [[CVS]] and __must__ be present in file's content (CVS can automatically fill this revision on checkout) and __shall not__ be present in its name. The filename and revision identifier shall be enough for the exact file's instance to be retrieved from the versioning system.

TODO:
----
Back to [[Configuration Management]] [[High Maturity Practices]]
----
/%
@@color:#c4d6ed; ^^
Description: Digital Artefact Identification discussion and guideline
^^@@
%/</pre>
</div>
<div title="DisplayOptions" modifier="acarvalho" created="201304241626" modified="201304242233" tags="System" server.title="DisplayOptions" server.page.revision="201304242233" server.etag='"acarvalho_public/DisplayOptions/1195815:dea5b164c9ac0a3e6ea31ab64ce42b00f905c96b"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="9a56b5d1e89d3dad73e90bcb0a33ecaa20789f8b">
<pre>! Display and Navigation Options

//Display and navigation options for this space//

&lt;&lt;option chkEnableTabsBar&gt;&gt; Tabbed navigation
&lt;&lt;option chkShowBreadcrumbs&gt;&gt; Show Breadcrumbs
&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time
&gt;&lt;&lt;option chkSinglePagePermalink&gt;&gt; Automatically permalink current tiddler
&gt;&lt;&lt;option chkSinglePageKeepFoldedTiddlers&gt;&gt; Don't close tiddlers that are folded
&gt;&lt;&lt;option chkSinglePageKeepEditedTiddlers&gt;&gt; Don't close tiddlers that are being edited
&lt;&lt;option chkTopOfPageMode&gt;&gt; Open tiddlers at the top of the page
&lt;&lt;option chkBottomOfPageMode&gt;&gt; Open tiddlers at the bottom of the page
&lt;&lt;option chkSinglePageAutoScroll&gt;&gt; Automatically scroll tiddler into view (if needed)

----
@@color:#c4d6ed; ^^
Description: Display and navigation options for this space
^^@@</pre>
</div>
<div title="Dwight D. Eisenhower on plans" creator="AndreCarvalho" modifier="AndreCarvalho" created="202105021850" tags="Content Quote" changecount="1">
<pre>“//In preparing for battle, I have always found that plans are useless, but planning is indispensable.//” 

General Dwight D. Eisenhower
----
/%
@@color:#c4d6ed; ^^
Description: A quote from General Dwight D. Eisenhower about plans
^^@@
%/</pre>
</div>
<div title="E.A.S.E" modifier="acarvalho" created="201401171122" modified="201401171122" tags="systemConfig" _hash="2136ff061b7da357aee81266af174d26de4b6d70">
<pre>/***
|!''Name:''|!''E''asily ''A''daptable ''S''ource ''E''ditor|
|''Description:''|this framework allows you to easily create commands that work on the current tiddler text selection in edit mode|
|''Version:''|0.1.0|
|''Date:''|13/01/2007|
|''Source:''|http://yann.perrin.googlepages.com/twkd.html#E.A.S.E|
|''Author:''|[[Yann Perrin|YannPerrin]]|
|''License:''|[[BSD open source license]]|
|''~CoreVersion:''|2.x|
|''Browser:''|Firefox 1.0.4+; Firefox 1.5; InternetExplorer 6.0|

See [[easyFormat]] and [[easyInsert]] for menu building examples. You must add the menu to [[EditTemplate]] as
{{{&lt;div macro='toolbar format insert'&gt;&lt;/div&gt;}}}

***/
////Messages Definition
//{{{
config.messages.Ease = {
noselection:"nothing selected",
asktitle:"enter the new tiddler title",
exists:" already exists, please enter another title",
askForTagsLabel:"enter the new tiddler tags",
tiddlercreated:" tiddler created"
}
//}}}
////
//{{{
if (!window.TWkd) window.TWkd={context:{}};
if (!TWkd.Ease)
 TWkd.Ease = function (text,tooltip){
 this.text = text;
 this.tooltip = tooltip;
 this.modes = [];
 this.addMode = function(modeDefinition) {this.modes.push(modeDefinition);};
 this.handler = function(event,src,title) {
 TWkd.context.command = this;
 TWkd.context.selection=this.getSelection(title);
 if (this.modes.length==1) {
 this.modes[0].operation();
 }
 else {
 var popup = Popup.create(src);
 if(popup) {
 for (var i=0; i&lt;this.modes.length; i++) {
 createTiddlyButton(createTiddlyElement(popup,"li"), this.modes[i].name, this.modes[i].tooltip, this.OperateFromButton, null, 'id'+i, null);
 }
 Popup.show(popup,false);
 event.cancelBubble = true;
 if (event.stopPropagation) event.stopPropagation();
 return false;
 }
 }
 };
 };

TWkd.Ease.prototype.OperateFromButton = function(e){
 var commandMode=this.getAttribute('Id').replace('id','');
 TWkd.context.command.modes[commandMode].operation();
};

TWkd.Ease.prototype.getTiddlerEditField = function(title,field){
 var tiddler = document.getElementById(story.idPrefix + title);
 if(tiddler != null){
 var children = tiddler.getElementsByTagName("*")
 var e = null;
 for (var t=0; t&lt;children.length; t++){
 var c = children[t];
 if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea"){
 if(!e) {e = c;}
 if(c.getAttribute("edit") == field){e = c;}
 }
 }
 if(e){return e;}
 }
} // closes getTiddlerEditField function definition
 
TWkd.Ease.prototype.getSelection = function(title,quiet) {
 var tiddlerTextArea = this.getTiddlerEditField(title,"text");
 var result = {};
 if (document.selection != null &amp;&amp; tiddlerTextArea.selectionStart == null) {
 tiddlerTextArea.focus();
 var range = document.selection.createRange();
 var bookmark = range.getBookmark();
 var contents = tiddlerTextArea.value;
 var originalContents = contents;
 var marker = "##SELECTION_MARKER_" + Math.random() + "##";
 while(contents.indexOf(marker) != -1) {
 marker = "##SELECTION_MARKER_" + Math.random() + "##";
 }
 var selection = range.text;
 range.text = marker + range.text + marker;
 contents = tiddlerTextArea.value;
 result.start = contents.indexOf(marker);
 contents = contents.replace(marker, "");
 result.end = contents.indexOf(marker);
 tiddlerTextArea.value = originalContents;
 range.moveToBookmark(bookmark);
 range.select();
 }
 else {
 result.start=tiddlerTextArea.selectionStart;
 result.end=tiddlerTextArea.selectionEnd;
 }
 result.content=tiddlerTextArea.value.substring(result.start,result.end);
 result.source=title;
 if (!result.content&amp;&amp;!quiet) displayMessage(config.messages.Ease.noselection);
 return(result);
}//closes getSelection function definition

// replace selection or insert new content
TWkd.Ease.prototype.putInPlace=function(content,workplace) {
 var tiddlerText = this.getTiddlerEditField(workplace.source,"text");
 tiddlerText.value = tiddlerText.value.substring(0,workplace.start)+content+tiddlerText.value.substring(workplace.end);
}

// asking for title
TWkd.Ease.prototype.askForTitle = function(suggestion) {
 if (!suggestion)
 suggestion = "";
 var newtitle;
 while (!newtitle||store.tiddlerExists(newtitle))
 {
 if (store.tiddlerExists(newtitle))
 displayMessage(newtitle+config.messages.Ease.exists);
 newtitle = prompt(config.messages.Ease.asktitle,suggestion);
 if (newtitle==null)
 {
 displayMessage(config.messages.Ease.titlecancel);
 return(false);
 }
 }
 return(newtitle);
}//closes askForTitle function definition

// creation of a new tiddler
TWkd.Ease.prototype.newTWkdLibTiddler = function(title,content,from,askForTags){
 var tiddler = new Tiddler();
 tiddler.title = title;
 tiddler.modifier = config.options.txtUserName;
 tiddler.text = content;
 (from) ? tiddler.tags = [from] : tiddler.tags=[];
 if (askForTags)
 tiddler.tags = prompt(config.messages.Ease.askForTagsLabel,'[['+from+']]').readBracketedList();
 store.addTiddler(tiddler);
 //store.notifyAll();
 displayMessage(title+config.messages.Ease.tiddlercreated);
}

if (!TWkd.Mode)
 TWkd.Mode = function (name,tooltip,ask,operation) {
 this.name = name;
 this.tooltip = tooltip;
 this.ask = ask;
 this.operation = operation;
 };
//}}}</pre>
</div>
<div title="EA Tips &amp; Tricks" modifier="YourName" created="201312111026" modified="202106231719" tags="Content EA" _hash="a33b78e865c809a8aecf88a27abf85bd0782ad30" changecount="21">
<pre>This is a list of various tips and tricks that may be useful when using [[EA|Sparx Enterprise Architect]].

{{tw_ttoc{}}}

!Connectors
!! Connecting to element's internal features
You can target a connector to an element's attribute or operation instead of the element as a whole. &lt;&lt;Image "FR" "300" "EATT_ConnIntFeat.PNG" "https://dl.dropbox.com/" "s/xlekxxy3e6rrghj/" "?dl=1" "Connecting to internal features."&gt;&gt;
# In a diagram
## Create a connector between two elements
## Invoke contextual menu on the connector
## Select "Link to Element Feature"
### Choose the type of Feature
### Choose the Feature
!! Highlight Connectors from/to Element
You can highlight the connectors targeting and originating from an Element
# In a diagram
## Select an Element
## Press 'L'
### Green connectors are outgoing
### Red connectors are incoming
!Import &amp; Export
!! Creating elements by dragging text onto a diagram
You can create an element just by dragging some text from a document onto an EA diagram. The text is parsed to split title and content of the element. 
//Tip: you can open a PDF in MS Word (just use file\open) and do this from Word.//
!! Exporting to CSV through document generation
&lt;&lt;Image "FR" "300" "EA-CSV-export-tpl.PNG" "https://dl.dropbox.com/" "s/lsz5qgskshsbszj/" "?dl=1" "EA CSV export template"&gt;&gt;
A good alternative and very flexible way of exporting selected elements to CSV is to create a document generation template for it.
Just pay attention to the line-breaks in the template : they are a record separator on CSV.
!! Embedding files in EA
You may drag a file to a diagram and choose {{{Artifact Internal}}} This will create an artefact with the file embedded. You can "execute" the file by double clicking the artefact element. Notice that if you edit the file EA will ask if you want to update it in its database.
!Project Browser
!!Element Hierarchy
*You may drag elements outside a Region by dragging and holding Alt.
!Search
!!Search command
&lt;&lt;Image "FR" "200" "EA-command-search1.PNG" "https://dl.dropbox.com/" "s/ffcv24cx3yrgekd/" "?dl=1" "EA command search"&gt;&gt;
One of the interesting new features of EA 13 is the search command functionality. It allows you to input some words and then it presents a menu with relevant direct functionality access. 
&lt;&lt;Image "FR" "300" "EA-command-search.PNG" "https://dl.dropbox.com/" "s/4rv1k984ckg5qvh/" "?dl=1" "EA command search configuration"&gt;&gt;
The issue is that it will only be available if you use //Visual Style// Microsoft Office 2016.

!Shortcuts
!! Auto generate timestamp
You can generate the current date &amp; time in the text of an Element's note
# In the notes textbox
## Press F5
!! Invoke code window
You can invoke a syntax highlighted code viewer upon reverse engineered classes
# Select the class on diagram or project browser tree
## press F12
!Errors
!! Project transfer
When transferring a project from file to DB you get an error:
{{{Microsoft OLE DB Provider for SQL Server [-2147217865]

Invalid object name 't_secpolicies'}}}
# Database is not initialized, you have to execute EA's scripts on it prior to import, see http://www.sparxsystems.com/resources/corporate/#update-dbms
----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: Tips &amp; tricks for EA usage
^^@@
%/</pre>
</div>
<div title="EA Usage - Alternate Image" modifier="acarvalho" created="201501160951" modified="201501271039" tags="Content EA Guideline" server.title="EA Usage - Alternate Image" server.page.revision="201501271039" server.etag='"acarvalho_public/EA%20Usage%20-%20Alternate%20Image/2063798:17edb6c92485c48ffd8d8fab556996dc68082b03"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="2f32b043ebe23e613dc5a7d146055b3fcd7e516d">
<pre>[[EA|Sparx Enterprise Architect]] allows for elements and other items (e.g. boundry) to have an Alternate Image. This image replaces the element standard representation in diagrams.

&lt;&lt;Image "FR" "250" "EA-Usage-Alternate-Image01.png" "https://dl.dropbox.com/" "s/xyt9r91l83u7dd0/" "?dl=1" "Alternate Image"&gt;&gt;
Select an element in diagram (you may also use a boundry) and invoke contextual menu, choose //''Appearance\Select alternate image''//





&lt;&lt;Image "FR" "250" "EA-Usage-Alternate-Image02.png" "https://dl.dropbox.com/" "s/45p13bxt8rzo85r/" "?dl=1" "Select Alternate Image"&gt;&gt;
The Image Manager dialogue allows to select an existing image or to add a new image to the image library. Notice that you can import and export the image library in //''Project\Model Import/Export/Reference Data''//



&lt;&lt;Image "FR" "250" "UserInterface04.JPG" "https://dl.dropbox.com/" "s/4za96k497jj465a/" "?dl=1" "Pencil Alternate Image"&gt;&gt;
Select the [[Pencil]] image as the alternate image and you have an embedded mockup in your specification. It makes a very good addition to the generated documentation as you can see in  [[EA Usage - User Interface diagram]].



&lt;&lt;Image "FR" "250" "EA-Usage-Alternate-Image03.png" "https://dl.dropbox.com/" "s/ebbxwc0j4uzjpgw/" "?dl=1" "A Deployment diagram with alternate images"&gt;&gt;
This is a quite useful feature for overview and less technical diagrams like Deployment Overview.



----
See also : [[EA Usage - User Interface diagram]]
----
/%
@@color:#c4d6ed; ^^
Description: Enterprise Architect usage guideline - Alternate images for elements
^^@@
%/</pre>
</div>
<div title="EA Usage - Attribute Difficulty" modifier="acarvalho" created="201307051551" modified="201307172111" tags="Content EA Guideline" server.title="EA Usage - Attribute Difficulty" server.page.revision="201307172111" server.etag='"acarvalho_public/EA%20Usage%20-%20Attribute%20Difficulty/1311474:ada5e26d7e965743246fda414ecfc096e3434bc3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="624a6488d88cfaa107727aaca7bda0123738ae19">
<pre>Scope : Elements, Packages
Values : Low | Medium | High
&lt;&lt;Image "FR" "350" "EA-Element-Properties-Difficulty.png" "https://dl.dropbox.com/" "s/al3olln0c4xkpuh/" "?dl=1" "EA element properties dialog."&gt;&gt;
The difficulty attribute shall be used to identify areas (features, requirements, modules) that present major challenges to the project.
This is very important for estimation, planning, know-how gathering, testing and risk management.

We propose the use of a very simple three level scale :
|Level|Description|h
|Low|Below normal complexity. Well known domain with available experience and proved implementations. Formal reusable module available as-is. Low, stable and known business complexity.|
|Medium|Normal implementation problem where we do not expect major issues. No new technologies. Medium business complexity|
|High|Domain novelty (technical or business). Complex, not stable business definition. Severe performance, security or availability constraints. Criticality.|

The difficulty determination shall start at [[RFP analysis|RFP Analysis Guidelines]] and be a major concern at [[Technical Proposal|Technical Proposal Production Guidelines]] specially in the Major Challenges chapter. It is also very important on [[Specification|Software Specification]] to help selecting the main targets for testing and the modules that present more risk and need more attention.
On Estimation, specially if you use a [[PERT]] three point estimate, this identification will be very useful to establish, and justify, the pessimistic and optimistic offset of each task.
----
See also : [[Sparx Enterprise Architect]]
/%
@@color:#c4d6ed; ^^
Description: Enterprise Architect attribute usage guideline - Difficulty
^^@@
%/</pre>
</div>
<div title="EA Usage - Attribute Status" modifier="AndreCarvalho" created="201309291221" modified="202103122023" tags="Content EA Guideline TODO" server.title="EA Usage - Attribute Status" server.page.revision="201309291736" server.etag='"acarvalho_public/EA%20Usage%20-%20Attribute%20Status/1431068:84dfe28cfc8f6c0f49e020ae50022a0f8631b1ba"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7744d8903e4519a2f4c3ed2ead3df852430f9114" changecount="1">
<pre>Scope : Elements, Packages
&lt;&lt;Image "FR" "350" "EA%20Element%20Properties%20-%20Status%20and%20Version.jpg" "https://dl.dropbox.com/" "s/tjoknyicii3ssm9/" "?dl=1" "EA element properties dialog."&gt;&gt;
The following topics establish the state flow for elements of the model in their ''Status'' attribute.
The Status attribute is a main filtering factor and shall be used to clearly state the development status of each element and to identify what is already done and what needs to be done towards them.

Status is a major reporting and management item as it allows to filter the different completion state of the elements therefore providing good situational awareness and even quantitative assessments.
Unfortunately in EA the state's list is shared for all element types so you must have different states and state flows for different elements but the dropbox of each element will show them all. A clear state chart for each type is, therefore, essential to allow for a coherent and useful usage of the attribute. 

Take notice that not all of the states shall be used in each concretization phase.
Status is closely related with [[Version|EA Usage - Attribute Version]] and, typically, it is a status transition that triggers version changes.
!!Requirements and Features
In Requirements and Features the status attribute is used, primarily, to convey information about what is done and what is to be done. It is also used to mark baselined elements, that is, elements that can not be changed without proper cautions.
&lt;&lt;Image "FR" "350" "EA%20Element%20Properties%20-%20Status%20%28FT-SR%29.jpg" "https://dl.dropbox.com/" "s/ejokdrbg24bxoa6/" "?dl=1" "Features and Requirements"&gt;&gt;
*DRAFT
**Scope : all elements.
**The element has been sketched by Customer or team member It is in an initial state and needs further work and validation. 
*REVIEWED
**Scope : all elements.
**The DRAFT element has been reviewed and approved by team leadership.
**It may be presented to Customer for Validation. 
*VALIDATED
**Scope : Requirement or Feature.
**The Requirement or Feature has been informally validated by Stakeholders.
**Further changes shall change minor version and regress to DRAFT. 
*APPROVED
**Scope : Requirement or Feature.
**The element is formally approved by the Customer.
**From this point on formal Change Management procedures apply.
**Major version is set to 1. On change it shall increment. 
*SPECIFIED
**Scope : Requirement.
**The requirement has been assigned to a Component and Acceptance Tests defined. 
*IMPLEMENTED
**Scope : Requirement or Feature.
**The element has been implemented. 
*UPDATED
**Scope : Requirement or Feature.
**The element has been updated to reflect implementation changes/improvements.
**Minor version is incremented. 
*TESTED
**Scope : Requirement or Feature.
**Implementation of the element has been Verified and Validated. 

TODO: review state chart (Tested -&gt; Updated, Deployed)

----
See also : [[Sparx Enterprise Architect]]
/%
@@color:#c4d6ed; ^^
Description: Enterprise Architect attribute usage guideline - Status
^^@@
%/</pre>
</div>
<div title="EA Usage - Attribute Version" modifier="acarvalho" created="201309301732" modified="201310051752" tags="Content EA Guideline TODO" server.title="EA Usage - Attribute Version" server.page.revision="201310051752" server.etag='"acarvalho_public/EA%20Usage%20-%20Attribute%20Version/1441894:7c283e1b7adef8d98769413f43bc6bb6c97b962b"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="74c3020bddcdd98994d1d821fcb7cf0669d3e90b">
<pre>Scope : Requirements and Features
&lt;&lt;Image "FR" "350" "EA%20Element%20Properties%20-%20Status%20and%20Version.jpg" "https://dl.dropbox.com/" "s/tjoknyicii3ssm9/" "?dl=1" "EA element properties dialog."&gt;&gt;
The following topics establish the versioning schema for Requirements and Features (and their included additional diagrams).
Notice that Version is, in this scope, closely related to [[Status|EA Usage - Attribute Status]].

Versioning of the Requirements and Features is not intended to provide baseline identification, that's the generated documents job. These versions are working versions and their purpose is to mark changes in specification against Customer or stakeholder formal or informal interactions, that is, if you informally validate a set of requirements with one stakeholder and then you make changes to some of them you want to be able to quickly list them in the next interaction with that stakeholder. Also if you have a set of requirements formally approved and after you update them to reflect implementation findings you also want to be able to build a list of changed requirements. In this last case the baseline is established by the generated document that the Customer approves and that is placed under Change Management and Version Control not by each requirement's version but you surly understand the utility of being able to tell what changed after that, think about revision and validation effort.

We propose that a major and minor version scheme be used like 1.2. The major version shall be incremented when a change occurs after any formal interaction with the Customer, that is, over any baselined item. The minor version shall be incremented when a change happens after an informal stakeholder validation.

----
See also : [[Sparx Enterprise Architect]]
/%
@@color:#c4d6ed; ^^
Description: Enterprise Architect attribute usage guideline - Version
^^@@
%/</pre>
</div>
<div title="EA Usage - Requirements Diagram" modifier="acarvalho" created="201307081621" modified="201409151622" tags="Content EA Guideline" server.title="EA Usage - Requirements Diagram" server.page.revision="201409151622" server.etag='"acarvalho_public/EA%20Usage%20-%20Requirements%20Diagram/1890941:425681c1ec1b9d27acce12335fb5e4d517d2f594"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1988b9d63c3bccf323c6f3f85819f94cd74eecea">
<pre>&lt;&lt;Image "FR" "350" "EA-Usage-Requirements-Diagram.png" "https://dl.dropbox.com/" "s/qltfyj1odu0elud/" "?dl=1" "EA requirements diagram."&gt;&gt;
The Requirements Diagram is an Extended (non UML) diagram used in Inception and Specification stages.
Its main usage is to capture statements that define scope, behaviour and requirements of the system to be developed. It is also used to relate [[Features|Feature]] and [[Requirements|Software Requirement]] with Issues, Assumptions and Ideas.

Features and Requirements (and Ideas, Issues and Assumptions) have some common characteristics :
*they are univocal elements, that is, they are numbered in a way that makes them unique in the model scope.
*their information is normalized, that is, they should not have redundant or duplicated statements
*they are atomic, that is, their statement and status (and other attributes) shall not depend on each other but be contained in a single element. This clearly excludes approaches with requirements inside other requirements or dependency relationships between requirements. Of course __Package inclusion provides a common context and an implicit relationship for contained requirements but no stronger ties shall be established between elements at the same concretisation level.__

The requirements are the most concrete expression and they must follow a strict [[SMART Requirements]] guideline, on the other hand, Proposed Features and, specially, Requested Features are allowed a more relaxed expression guideline. Never forget, however, that Proposed Features are what establishes scope and support estimation.

Requirement type elements (Requirement, Feature, Issue, etc.) shall be as atomic as possible in order to allow to control state (an element shall always have a defined, unambiguous state) and contain change impact. Atomicity is also an essential characteristic if we want to extract quantitative volume metrics of these elements in any meaningful way, and these are essential for objective management and planing.
__For requirement elements of the same kind, in the same life-cycle phase (or concretisation stage), shared context and conceptual or logical grouping shall be provided by package inclusion and not by any other kind of relationship. That is, you shall not compose Proposed Features with other Proposed Features or make them dependent from each other. Even association relationships are not advisable in this scenario.__ Of course this is not the case of relationships of different kind. A Proposed Feature may depend on an Assumption, a Requested Feature may depend on an Issue, a Proposed Feature shall Abstraction trace to a Requested Feature, etc. Also a Proposed Feature or Software Requirement may be made composite to include a State Machine or other diagram if it helps to explain it.

&lt;&lt;Image "FR" "350" "EA-Usage-Requirements-Diagram-elements.png" "https://dl.dropbox.com/" "s/gdgy4qju10mby8u/" "?dl=1" "EA requirements diagram, other elements."&gt;&gt;
Requested Features, Proposed Features and Software Requirements may ''Depend'' on ''Issues'' and ''Assumptions'' and they also may be ''Associated'' from ''Ideas''.
''Issues'' are questions or doubts or pending matters that are essential to understand, specify or implement the dependent elements.
''Assumptions'' are choices or scenarios that we assume as true and that are a condition to dependent elements.
''Ideas'' are ideas, that is, opportunities, improvements, further business that we identify along the project and that we preserve this way for future reference when and if the opportunity emerges.

----
See also : [[Sparx Enterprise Architect]] [[Writing Good Requirements]]
/%
@@color:#c4d6ed; ^^
Description: Enterprise Architect diagram usage guideline - Requirements
^^@@
%/</pre>
</div>
<div title="EA Usage - User Interface diagram" modifier="acarvalho" created="201501191101" modified="201501271059" tags="Content EA Guideline" server.title="EA Usage - User Interface diagram" server.page.revision="201501271059" server.etag='"acarvalho_public/EA%20Usage%20-%20User%20Interface%20diagram/2063803:2883ca303c6b19f227851a0b1429ac327917298d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1953aed3aa95623b6e1c7d740eaae97671e73dbe">
<pre>[[EA|Sparx Enterprise Architect]] has an extended User Interface diagram that allows to build [[GUI mockup]]s that can be extremely useful to illustrate user interaction requirements. 

&lt;&lt;Image "FR" "350" "UserInterface01.JPG" "https://dl.dropbox.com/" "s/dideg231pdy3i8v/" "?dl=1" "EA User Interface diagram"&gt;&gt;
These diagrams are interesting as each element of the interface is an autonomous EA element and, as such, can be related with other elements like table fields for instance.











&lt;&lt;Image "FR" "500" "UserInterface02.JPG" "https://dl.dropbox.com/" "s/rbg99m6r4gyjzjm/" "?dl=1" "EA User Interface diagram embedded"&gt;&gt;
The user interface mockup may be embedded in a software requirement becoming part of its statement.

&lt;&lt;Image "FR" "500" "UserInterface03.JPG" "https://dl.dropbox.com/" "s/ef577rlmgpxn3et/" "?dl=1" "EA User Interface diagram in documentation"&gt;&gt;
Notice that this kind of embedding makes it much easier to understand requirements in the generated documentation as the image provides a good interpretation context to textual requirements and these also provide context for image interpretation.

In the example you would notice that database selection at login is not referred in any requirement and thus [[validate|Validation]] if it is something not needed on the mockup or something that is needed but missing in the requirements.

If you do not need to individually link each of the UI elements these mockups are much easier to do and maintain in [[Pencil]] tool. See [[GUI mockup]] and [[EA Usage - Alternate Image]] topics for guidelines on how to use them.

Other references : [[Sparx Enterprise Architect 12: Wireframing|https://imprestige.biz/sparx-enterprise-architect-12-wireframing/]]

----
See also : [[GUI mockup]] [[EA Usage - Alternate Image]]
----
/%
@@color:#c4d6ed; ^^
Description: EA usage guideline for User Interface diagrams
^^@@
%/</pre>
</div>
<div title="Ed Yourdon on Systems Analysis" creator="YourName" modifier="YourName" created="202109290838" modified="202109290842" tags="Content Quote" changecount="4">
<pre>“//Long books are often dull; fortunately, the subject matter of this book -- systems analysis -- is interesting. In fact, systems analysis is more interesting than anything I know, with the possible exception of sex and some rare vintages of Australian wine. Without a doubt, it is more interesting than computer programming (not that programming is dull) because it involves studying the interactions of people, and disparate groups of people, and computers and organizations.//”

[[Edward Yourdon|https://en.wikipedia.org/wiki/Edward_Yourdon]] (1944-2016)
[[Structured Analysis Wiki|https://web.archive.org/web/20150821014753/http://www.yourdon.com/strucanalysis/wiki/index.php/Chapter_1]], Chapter 1

----
/%
@@color:#c4d6ed; ^^
Description: Very good quote on how interesting Systems Analysis is
^^@@
%/</pre>
</div>
<div title="EditTemplate" modifier="acarvalho" created="201206181930" modified="201305191951" tags="System" server.title="EditTemplate" server.page.revision="201305191951" server.etag='"acarvalho_public/EditTemplate/1220322:c91012ae12b49a775383d2f3e0837b0f7e95c293"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="5e28d6f07c8c71e48a561945a8b56746c8700ce6">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;
&lt;span class='toolbar' macro='gotoTiddler insert'"&gt;&lt;/span&gt; 
&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div macro='toolbar format insert'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="Emergent Reuse" modifier="acarvalho" created="201304012126" modified="201304122134" tags="Concept Content Reuse" server.title="Emergent Reuse" server.page.revision="201304122134" server.etag='"acarvalho_public/Emergent%20Reuse/1183987:153df4f53861b64e0bd59c911af1e5527f2ae1e6"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="5b01b8915284f8d5c6cb8b95b71df89dfc2bc6a0">
<pre>Emergent reuse concept is proposed by Adam Sroka, in a [[very interesting thread|http://tech.groups.yahoo.com/group/extremeprogramming/message/149980]], as a way to avoid effort waste on making reusable modules that are never reused. He says :
"//This last part isn't exactly "design for reuse." It is more like "emergent reuse" which seems to be the one sort of reuse that is rarely wasteful.//"

In the same thread a participant called timander37 added an [[interesting point|http://tech.groups.yahoo.com/group/extremeprogramming/message/150005]] :
//We tell our business people "The first time you have to pay for it to be coded, the second time you have to pay for it to be reusable, the third time it's free"//.

Vijay Narayanan also seems to point in the same direction on his interesting article [[Build for Use, then Refactor to Reuse|http://artofsoftwarereuse.com/2010/07/11/build-for-use-then-refactor-to-reuse/]].

Emergent reuse is seen as an agile alternative to "design for reuse" where you do not make an investment upfront to produce reusable assets but, instead, when the reuse opportunity emerges, and only then, you do invest towards reusability through refactoring and generalization.
This is indeed a quite good approach to reuse in a "project centric" organization. In fact, design for reuse in these kind of environments involves the risk of investing in a reusable module that, by one reason or another, will never be reused again.
We do propose that, at least part of the reuse effort, be performed in a way similar to our proposed [[Opportunistic Productization]]. The obstacles to this approach are, mainly, in the Reusable Software Asset Discovery area, that is, how do you assure that reuse opportunities are not wasted due to ignorance and lack of access to reusable assets? 

On the other hand one must consider how to produce reusable assets that feed the emergent reuse and that is also not an easy task. Emergent reuse can not start from the scratch, it needs some systematic reuse planning and some infrastructural conditions and reuse methodologies to be put in place.

One important consideration is that Emergent Reuse is discussed against "Design for Reuse" it does not mean that it is not a way of performing [[Systematic Reuse]], on the contrary, it is one of the management strategies that may be used to perform it.

In [[Implementing Systematic Reuse]] we point out some guidelines that may be useful in this endeavour.

----
@@color:#c4d6ed; ^^
Description: Emergent reuse vs. design for reuse concept discussion
^^@@</pre>
</div>
<div title="Encapsulation" modifier="AndreCarvalho" created="201206161506" modified="202007091047" tags="Concept Content" server.title="Encapsulation" server.page.revision="201304121427" server.etag='"acarvalho_public/Encapsulation/1182959:953e55532372e0310f914adae843f7aac4ca4c22"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="bf7b0bbafb3ee5d8e1d4437914bc6dfdb0ea53f7" changecount="1">
<pre>//Like [[abstraction|Abstraction]], the word "encapsulation" can be used to describe either a process or an entity. As a process, encapsulation means the act of enclosing one or more items within a (physical or logical) container. Encapsulation, as an entity, refers to a package or an enclosure that holds (contains, encloses) one or more items. It is extremely important to note that nothing is said about "the walls of the enclosure." Specifically, they may be "transparent," "translucent," or even "opaque." //

* Edward V. Berard - Abstraction, Encapsulation and Information Hiding	[[[Berard]|BibliographyPage##Berard]]

[[Abstraction]] gears towards comprehension
Encapsulation gears towards protection from outside interference
[[Information Hiding]] gears towards containment of design changes

----
@@color:#c4d6ed; ^^
Description: Encapsulation concept and references.
^^@@</pre>
</div>
<div title="Essence of software" creator="AndreCarvalho" modifier="YourName" created="202103121959" modified="202103311912" tags="Content Quote" changecount="3">
<pre>"//''The  essence  of  a  software  entity  is  a  construct  of  interlocking  concepts:  data  sets,  relationships among data items, algorithms, and invocations of functions.  This essence is abstract,   in   that   the   conceptual   construct   is   the   same   under   many   different   representations.  It is nonetheless highly precise and richly detailed. I believe the hard part of building software to be the specification, design, and testing of this conceptual construct, not the labor of representing it and testing the fidelity of the representation.  We still make syntax errors, to be sure; but they are fuzz compared to the conceptual errors in most systems.''//"

[[No Silver Bullet - Essence and Accident in Software Engineering |http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]] ([[on WayBack Machine|https://web.archive.org/web/*/http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]])
[[Frederick P. Brooks|http://en.wikipedia.org/wiki/Fred_Brooks]]
Also on [[Wikipedia|https://en.wikipedia.org/wiki/No_Silver_Bullet]]

----
/%
@@color:#c4d6ed; ^^
Description: Quote of Frederick P. Brooks Essence of software
^^@@
%/</pre>
</div>
<div title="Feature" modifier="acarvalho" created="201206161627" modified="201304212131" tags="Concept Content" server.title="Feature" server.page.revision="201304212131" server.etag='"acarvalho_public/Feature/1192302:40393b2980feadab4671108671c80eaff8765b02"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d7572764ef4f540496f87dea4517260949401636">
<pre>Features are a "relaxed" form of Requirements, namely they are not required to be, necessarily, [[SMART|SMART Requirements]]. We propose them as a preferred form to express requirements in [[RFP]] and [[Technical Proposal|Technical Proposal Production Guidelines]] at Inception phases.
&lt;&lt;Image "FR" "250" "Requirements-Elements.png" "https://dl.dropbox.com/" "s/o4ewv8nlr4vfb7w/" "?dl=1" "Feature element in EA."&gt;&gt;
Feature is an extended element in [[Sparx Enterprise Architect]] [[CASE]] tool Requirements diagram.
Features are split in ''Requested Features'', the ones that originate at Customer and describe the needs in the Customer perspective and ''Proposed Features'', the ones that constitute the software developer response at Proposal. The first ones use ''RFT'' prefix, the later ''FT''. 

Quoting The Standish Group, The CHAOS Report, 1994, Scott ~McEwen in his very interesting article [[Requirements: An introduction|http://www.ibm.com/developerworks/rational/library/4166.html]] defines: "//''A feature is a service that the system provides to fulfill one or more stakeholder needs.''//"

For a distinction against [[Software Requirement]] see [[Software Requirement vs. Feature]]
----
@@color:#c4d6ed; ^^
Description: Feature concept and references.
^^@@
</pre>
</div>
<div title="Frederick P. Brooks on Complexity" creator="YourName" modifier="YourName" created="202103312005" modified="202103312007" tags="Content Quote" changecount="2">
<pre>//''Complexity.    Software  entities  are  more  complex  for  their  size  than  perhaps  any  other  human  construct,  because  no  two  parts  are  alike  (at  least  above  the  statement  level).    If  they  are,  we  make  the  two  similar  parts  into  one,  a  subroutine,  open  or  closed.    In  this  respect  software  systems  differ  profoundly  from  computers,  buildings,  or  automobiles,  where repeated elements abound.''//

[[No Silver Bullet - Essence and Accident in Software Engineering |http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]] ([[on WayBack Machine|https://web.archive.org/web/*/http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]])
[[Frederick P. Brooks|http://en.wikipedia.org/wiki/Fred_Brooks]]
Also on [[Wikipedia|https://en.wikipedia.org/wiki/No_Silver_Bullet]]

----
/%
@@color:#c4d6ed; ^^
Description: Frederick P. Brooks on Software Complexity
^^@@
%/</pre>
</div>
<div title="Frederick P. Brooks on analysis relevance" modifier="acarvalho" created="201306050934" modified="201306051715" tags="Content Quote" server.title="Frederick P. Brooks on analysis relevance" server.page.revision="201306051715" server.etag='"acarvalho_public/Frederick%20P.%20Brooks%20on%20analysis%20relevance/1248952:aad411295b4260e99dae53338ca5f8213c0039ce"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7b19d8c2a2aeb39593264aa3e6cf24b56c7ac502">
<pre>"//''The hardest single part of building a software system is deciding precisely what to build. No other part of the conceptual work is so difficult as establishing the detailed technical requirements, including all the interfaces to people, to machines, and to other software systems. No other part of the work so cripples the resulting system if done wrong. No other part is more difficult to rectify later.''//"

[[The mythical man-month - essays on software engineering, 1975|http://ultra.pr.erau.edu/~jaffem/classes/se300/Supplemental%20materials/The_Mythical_Man-Month_Essays_on_Software_Engineering_Anniversary_Edition.pdf]]
[[Frederick P. Brooks|http://en.wikipedia.org/wiki/Fred_Brooks]]
page 199
----
/%
@@color:#c4d6ed; ^^
Description: Quote of Frederick P. Brooks on requirements relevance
^^@@
%/</pre>
</div>
<div title="FullScreenPlugin" modifier="acarvalho" created="201206141003" modified="201206141006" tags="systemConfig" server.title="FullScreenPlugin" server.page.revision="201206141006" server.etag='"acarvalho_public/FullScreenPlugin/745732:85aad6cb4b6e188a35be3637fbf286cd7968f6e1"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7155b84e30f17373c8e615b581d51c113e19dbe1">
<pre>/***
|Name|FullScreenPlugin|
|Created by|SaqImtiaz|
|Location|http://tw.lewcid.org/#FullScreenPlugin|
|Version|1.1|
|Requires|~TW2.x|
!Description:
Toggle between viewing tiddlers fullscreen and normally. Very handy for when you need more viewing space.

!Demo:
Click the ↕ button in the toolbar for this tiddler. Click it again to turn off fullscreen.

!Installation:
Copy the contents of this tiddler to your TW, tag with systemConfig, save and reload your TW.
Edit the ViewTemplate to add the fullscreen command to the toolbar.

!History:
*25-07-06: ver 1.1
*20-07-06: ver 1.0

!Code
***/
//{{{
var lewcidFullScreen = false;

config.commands.fullscreen =
{
            text:" ↕ ",
            tooltip:"Fullscreen mode"
};

config.commands.fullscreen.handler = function (event,src,title)
{
            if (lewcidFullScreen == false)
               {
                lewcidFullScreen = true;
                setStylesheet('#sidebar, .header, #mainMenu{display:none;} #displayArea{margin:0em 0 0 0 !important;}',"lewcidFullScreenStyle");
               }
            else
               {
                lewcidFullScreen = false;
                setStylesheet(' ',"lewcidFullScreenStyle");
               }
}

config.macros.fullscreen={};
config.macros.fullscreen.handler =  function(place,macroName,params,wikifier,paramString,tiddler)
{
        var label = params[0]||" ↕ ";
        var tooltip = params[1]||"Fullscreen mode";
        createTiddlyButton(place,label,tooltip,config.commands.fullscreen.handler);
}

var lewcid_fullscreen_closeTiddler = Story.prototype.closeTiddler;
Story.prototype.closeTiddler =function(title,animate,slowly)
{
           lewcid_fullscreen_closeTiddler.apply(this,arguments);
           if (story.isEmpty() &amp;&amp; lewcidFullScreen == true)
              config.commands.fullscreen.handler();
}


Slider.prototype.lewcidStop = Slider.prototype.stop;
Slider.prototype.stop = function()
{
           this.lewcidStop();
           if (story.isEmpty() &amp;&amp; lewcidFullScreen == true)
              config.commands.fullscreen.handler();
}
//}}}</pre>
</div>
<div title="GATrackerPlugin" modifier="acarvalho" created="201206221112" modified="201206221112" tags="systemConfig" server.title="GATrackerPlugin" server.page.revision="201206221112" server.etag='"acarvalho_public/GATrackerPlugin/754678:cfca471cfb2f021048f68542468f9d1c05826293"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c5298a18c292b52f512dd6306a64f78c7999e0ba">
<pre>/***
|Name|GATrackerPlugin|
|Description|Google Analytics tracker|
|Author|Julien Coloos|
|Version|1.2.0|
|Date|2011-05-18|
|Status|stable|
|Source|http://julien.coloos.free.fr/TiddlyWiki-dev/#GATrackerPlugin|
|License|[img[CC BY-SA 3.0|http://i.creativecommons.org/l/by-sa/3.0/80x15.png][http://creativecommons.org/licenses/by-sa/3.0/]]|
|CoreVersion|2.6.2|
|Documentation|http://julien.coloos.free.fr/TiddlyWiki-dev/#GATrackerPlugin|

!Description
This plugin enables Google Analytics tracking inside TiddlyWiki.

The version used is the asynchronous one ({{{ga.js}}}).
The plugin comes with its own configuration, which is stored persistently inside the (hidden) [[SystemSettings]] tiddler.
The configuration has to be set before being effective: it can be done in the plugin tiddler (see below) if TiddlyWiki is not in read-only mode. Tracking works if an account ID has been set, tracking has been enabled, and TiddlyWiki access is non-local.

Tracking can be reported as either:
* page views
** pages are named {{{/#Tiddler name}}}
* events
** Category: {{{Tiddlers}}}
** Action: {{{Open}}}, {{{Refresh}}}, {{{Edit}}}, {{{Search}}}, {{{Close}}} or {{{CloseAll}}}
** Label
*** for {{{CloseAll}}} action: excluded tiddler
*** for {{{Search}}} action: searched text
*** otherwise, tiddler name on which action is performed
** Value: for the {{{CloseAll}}} action, the number of closed tiddlers
** Note: Google Analytics script limits the number of events (1 every 5 seconds, with a burst limit of 10)
Tracking can be globally disabled, or enabled per action on each tiddler:
* //Open//: when tiddler was not yet displayed
** Note: default tiddlers do not trigger this action when accessing TiddlyWiki
* //Refresh//: when tiddler was already displayed
** Note: this action is automatically triggered after editing a tiddler
* //Edit//: when editing (or viewing in read-only mode) the tiddler
* //Close//: when tiddler was displayed
** this action is never tracked in //pages views// tracking
** the //CloseAll// action is triggered by the TiddyWiki links //close all// and //close others// if at least one tiddler was closed; individual tiddlers closed are not tracked as //Close// actions
* //Search//: when searching in tiddlers
** this action is never tracked in //pages views// tracking
** {{{CloseAll}}} and {{{Open}}} actions are not taken into account while search is performed: TiddlyWiki automically closes opened tiddlers before searching and opens tiddler that match the searched text


!Configuration
&lt;&lt;GATrackerConfig&gt;&gt;


!Revision History
!!v1.2.0 (2011-05-18)
Enhancements:
* do not trigger {{{CloseAll}}} and {{{Open}}} actions when search is performed
* added the {{{Search}}} action

!!v1.1.0 (2011-05-17)
Enhancements:
* do not trigger {{{Open}}} action when displaying default tiddlers
* added the {{{CloseAll}}} action

!!v1.0.0 (2011-05-14)
Initial release.


!Code
***/
//{{{
/* Google Analytics queue object. Needs to be global. */
var _gaq = _gaq || [];

if (!config.extensions.GATracker) {(function($) {

version.extensions.GATrackerPlugin = {major: 1, minor: 2, revision: 0, date: new Date(2011, 5, 18)};

/* Prepare overridden TiddlyWiki displaying */
var trackOptions = {};
var displayDefault = 0, closingAll = 0, searching = 0;
var pl = config.extensions.GATracker = {
getOption: function(optKey) {
	return (config.optionsSource &amp;&amp; (config.optionsSource[optKey] == "setting")) ? config.options[optKey] : null;
},
setOption: function(optKey, value) {
	config.options[optKey] = value;
	config.optionsSource[optKey] = "setting";
	saveOption(optKey);
},
loadOptions: function() {
	var gaTrack = (pl.getOption("txt_GATracker_track") || "1,0,1,1,1,0,0").split(",");
	trackOptions = {
		id: pl.getOption("txt_GATracker_id"),
		enabled: parseInt(gaTrack[0] || "1"),
		type: parseInt(gaTrack[1] || "0"),
		events: {
			open: parseInt(gaTrack[2] || "1"),
			refresh: parseInt(gaTrack[3]) || "1",
			edit: parseInt(gaTrack[4] || "1"),
			close: parseInt(gaTrack[5] || "0"),
			search: parseInt(gaTrack[6] || "0")
		}
	};
	if (trackOptions.id &amp;&amp; !trackOptions.id.length) {
		trackOptions.id = null;
	}
},
saveOptions: function() {
	var opts = trackOptions.enabled &amp;&amp; "1" || "0";
	opts += "," + trackOptions.type;
	for (var ev in trackOptions.events) {
		opts += "," + (trackOptions.events[ev] &amp;&amp; "1" || "0");
	}
	pl.setOption("txt_GATracker_id", trackOptions.id || "");
	pl.setOption("txt_GATracker_track", opts);
},
track: function() {
	_gaq.push.apply(_gaq, arguments);
},
trackAndDisplayDefaultTiddlers: function() {
	displayDefault = 1;
	try { pl.displayDefaultTiddlers.apply(this, arguments) } catch(e){};
	displayDefault = 0;
},
trackAndDisplayTiddler: function(srcElement, tiddler, template, animate, unused, customFields, toggle, animationSrc) {
	if (!displayDefault) {
		var trackEvent, title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
		if (story.getTiddler(title)) {
			/* Tiddler is already displayed */
			if (toggle === true) {
				/* Closing tiddler: tracked in separate function */
			}
			else if (template === DEFAULT_EDIT_TEMPLATE) {
				if (trackOptions.events.edit) trackEvent = "Edit";
			}
			else if (trackOptions.events.refresh) trackEvent = "Refresh";
		}
		else if (trackOptions.events.open &amp;&amp; !searching) trackEvent = "Open";

		if (trackEvent) pl.track(trackOptions.type ? ["_trackPageview", "/#" + title] : ["_trackEvent", "Tiddlers", trackEvent, title]);
	}
	pl.displayTiddler.apply(this, arguments);
},
trackAndCloseTiddler: function(title, animate, unused) {
	if (closingAll) closingAll++;
	else pl.track(["_trackEvent", "Tiddlers", "Close", title]);
	pl.closeTiddler.apply(this, arguments);
},
trackAndCloseAllTiddlers: function(excluded) {
	closingAll = 1;
	try { pl.closeAllTiddlers.apply(this, arguments) } catch(e){};
	if ((closingAll &gt; 1) &amp;&amp; !searching) pl.track(["_trackEvent", "Tiddlers", "CloseAll", excluded, closingAll - 1]);
	closingAll = 0;
},
trackAndSearch: function(text, useCaseSensitive, useRegExp) {
	if (!trackOptions.type &amp;&amp; trackOptions.events.search) pl.track(["_trackEvent", "Tiddlers", "Search", text]);
	searching = 1;
	try { pl.search.apply(this, arguments) } catch(e){};
	searching = 0;
}
};

pl.loadOptions();

/* Only track in non-local mode */
var local = "file:" == document.location.protocol;
if (!local &amp;&amp; trackOptions.id &amp;&amp; trackOptions.enabled) {
	/* Insert script tag to load GA */
	$("head").eq(0).prepend($("&lt;script/&gt;").attr({type: "text/javascript", async: "true", src: ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js"}));

	/* Override TiddlyWiki display */
	pl.displayTiddler = story.displayTiddler;
	story.displayTiddler = pl.trackAndDisplayTiddler;
	pl.displayDefaultTiddlers = story.displayDefaultTiddlers;
	story.displayDefaultTiddlers = pl.trackAndDisplayDefaultTiddlers;
	if (!trackOptions.type &amp;&amp; trackOptions.events.close) {
		pl.closeTiddler = story.closeTiddler;
		story.closeTiddler = pl.trackAndCloseTiddler;
		pl.closeAllTiddlers = story.closeAllTiddlers;
		story.closeAllTiddlers = pl.trackAndCloseAllTiddlers;
	}
	pl.search = story.search;
	story.search = pl.trackAndSearch;

	/* Initialize tracking */
	pl.track(["_setAccount", trackOptions.id], ["_trackPageview"]);
}

config.macros.GATrackerConfig = {
handler: function(place, macroName, params, wikifier, paramString, tiddler) {
	$(createTiddlyElement(place, "div")).html("Tracking status: &lt;span style='color:" + (trackOptions.id &amp;&amp; trackOptions.enabled ? "green'&gt;enabled" : "red'&gt;disabled") + "&lt;/span&gt; and &lt;span style='color:" + (local ? "red'&gt;" : "green'&gt;non-") + "local&lt;/span&gt;");
	if (readOnly) {
		$(createTiddlyElement(place, "div")).html("Configuration is not available in read-only mode");
		return;
	}
	var formNode = $(createTiddlyElement(place, "div")).html("&lt;div&gt;Google Analytics plugin configuration:&lt;/div&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;Account ID:&lt;/td&gt;&lt;td&gt;&lt;input id='ga_id' type='text'/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Tracking:&lt;/td&gt;&lt;td&gt;&lt;input id='ga_enabled' type='checkbox'/&gt;Enabled&lt;br/&gt;&lt;br/&gt;How: &lt;select id='ga_track'&gt;&lt;option value='0'&gt;Events&lt;/option&gt;&lt;option value='1'&gt;Pages&lt;/option&gt;&lt;/select&gt;&lt;br/&gt;&lt;br/&gt;What:&lt;br/&gt;&lt;input id='ga_track_open' type='checkbox'/&gt;Open&lt;br/&gt;&lt;input id='ga_track_refresh' type='checkbox'/&gt;Refresh&lt;br/&gt;&lt;input id='ga_track_edit' type='checkbox'/&gt;Edit&lt;br/&gt;&lt;input id='ga_track_close' type='checkbox'/&gt;Close&lt;br/&gt;&lt;input id='ga_track_search' type='checkbox'/&gt;Search&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;input id='ga_action_submit' type='submit' value='Apply'/&gt;");
	$("#ga_id", formNode).val(trackOptions.id);
	$("#ga_enabled", formNode)[0].checked = trackOptions.enabled;
	$("#ga_track option", formNode).eq(trackOptions.type)[0].selected = true;
	for (var ev in trackOptions.events) {
		$("#ga_track_" + ev, formNode)[0].checked = trackOptions.events[ev];
	}
	$("#ga_action_submit", formNode).click(function() {
		trackOptions.id = $("#ga_id", formNode).val();
		if (!trackOptions.id.length) trackOptions.id = null;
		trackOptions.enabled = $("#ga_enabled", formNode)[0].checked;
		trackOptions.type = parseInt($("#ga_track", formNode).val());
		for (var ev in trackOptions.events) {
			trackOptions.events[ev] = $("#ga_track_" + ev, formNode)[0].checked;
		}
		pl.saveOptions();

		var nodeDisplay = story.findContainingTiddler(place);
		var tiddlerDisplay;
		if (nodeDisplay) tiddlerDisplay = store.getTiddler(nodeDisplay.getAttribute("tiddler"));
		story.refreshTiddler(tiddlerDisplay ? tiddlerDisplay.title : tiddler.title, null, true);
	});
}
};

})(jQuery);}
//}}}</pre>
</div>
<div title="GUI" modifier="acarvalho" created="201308041637" modified="201308041637" tags="Acronym Content" server.title="GUI" server.page.revision="201308041637" server.etag='"acarvalho_public/GUI/1332627:b0b85938f98144e84c7635b1c13578baa84c6a73"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="da34ead3b212b0de58ae24a454ba93c84461958e">
<pre>Graphical User Interface
----
/%
@@color:#c4d6ed; ^^
Description: Graphical User Interface
^^@@
%/</pre>
</div>
<div title="GUI mockup" modifier="acarvalho" created="201501141842" modified="201601040001" tags="Concept Content" server.title="GUI mockup" server.page.revision="201601040001" server.etag='"acarvalho_public/GUI%20mockup/2442161:234f1664de00c4b72acd68f6a8c8cf0e0bf8cf74"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="fba02a98fcfeecbedc8494a4c14948dda301a96f">
<pre>A [[GUI]] [[mockup|http://en.wikipedia.org/wiki/Mockup]] is invaluable when defining and clarifying requirements with the Customer. Remember that he is not always a software expert and, as such, he much more easily discusses and understands a representation of an interface form than a bunch of statements from which he does not know a lot of terms.

Form mockups are very useful in [[validating|Validation]] our views and expected user/system interaction. Completeness and sufficiency of entity's data (attributes) and correctness of normalization (lookups) are also much more visible in a mockup than in a lot of statements. Process adequacy is also checked when execution simulation is performed over mockups and allows to pinpoint problems early.

Using mockups is advisable as they are not expensive and largely contribute to proper [[Validation]].

Pay attention that mockups are, and shall be, a very simple form of prototyping. You do not need advanced interaction or functional prototypes to take advantage of mockups. Fidelity or "pixel perfect" designs have their place in the development cycle but they have different goals than mockups.

&lt;&lt;Image "FR" "" "GUIMock01.PNG" "https://dl.dropbox.com/" "s/1ftuuqnfvomkixa/" "?dl=1" "Simple GUI mockup using Pencil tool"&gt;&gt;
A mockup shall be :
* cheap
* simple
* easily modifiable
* focused in validating/communicating 
** a proposed data representation
** a proposed interaction schema

Notice that the mockup on the right is deliberately minimalist. It has no colour and uses an hand-drawn style. ''The purpose is to focus on data, process and functionality not on aesthetics.''

Mockups shall be integrated in your specification. You can easily do it in [[EA|Sparx Enterprise Architect]], see [[EA Usage - Alternate Image]]. I've found that, when, for instance, specifying [[features|Feature]] for a form, it makes it much easier and safe to validate if I include a simple mockup among the statements.

A very good, and free, tool to produce GUI mockups is [[Pencil]].

A good list of [[Gui Prototyping Tools|http://c2.com/cgi/wiki?GuiPrototypingTools]].



----
See also : [[EA Usage - Alternate Image]] [[Pencil]] [[EA Usage - User Interface diagram]]
----
/%
@@color:#c4d6ed; ^^
Description: GUI mockup concept, tools and usage
^^@@
%/</pre>
</div>
<div title="GotoPlugin" modifier="acarvalho" created="201206181927" modified="201206181927" tags="NavigationPackage systemConfig" server.title="GotoPlugin" server.page.revision="201206181927" server.etag='"acarvalho_public/GotoPlugin/749992:955436c56881ba8182ef77375e876252c92b1a5d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="2e50d5bab33d6df9f0ea9a83115b5dfaab44313b">
<pre>/***
|Name|GotoPlugin|
|Source|http://www.TiddlyTools.com/#GotoPlugin|
|Documentation|http://www.TiddlyTools.com/#GotoPluginInfo|
|Version|1.9.2|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|view any tiddler by entering it's title - displays list of possible matches|
''View a tiddler by typing its title and pressing //enter//.''  As you type, a list of possible matches is displayed.  You can scroll-and-click (or use arrows+enter) to select/view a tiddler, or press escape to close the listbox to resume typing.  When the listbox is not displayed, pressing //escape// clears the current input.
!!!Documentation
&gt;see [[GotoPluginInfo]]
!!!Configuration
&lt;&lt;&lt;
*Match titles only after {{twochar{&lt;&lt;option txtIncrementalSearchMin&gt;&gt;}}} or more characters are entered.&lt;br&gt;Use down-arrow to start matching with shorter input.  //Note: This option value is also set/used by [[SearchOptionsPlugin]]//.
*To set the maximum height of the listbox, you can create a tiddler tagged with &lt;&lt;tag systemConfig&gt;&gt;, containing:
//{{{
config.macros.gotoTiddler.listMaxSize=10;  // change this number
//}}}
&lt;&lt;&lt;
!!!Revisions
&lt;&lt;&lt;
2009.05.22 [1.9.2] use reverseLookup() for IncludePlugin
|please see [[GotoPluginInfo]] for additional revision details|
2006.05.05 [0.0.0] started
&lt;&lt;&lt;
!!!Code
***/
//{{{
version.extensions.GotoPlugin= {major: 1, minor: 9, revision: 2, date: new Date(2009,5,22)};

// automatically tweak shadow SideBarOptions to add &lt;&lt;gotoTiddler&gt;&gt; macro above &lt;&lt;search&gt;&gt;
config.shadowTiddlers.SideBarOptions=config.shadowTiddlers.SideBarOptions.replace(/&lt;&lt;search&gt;&gt;/,"{{button{goto}}}\n&lt;&lt;gotoTiddler&gt;&gt;&lt;&lt;search&gt;&gt;");

if (config.options.txtIncrementalSearchMin===undefined) config.options.txtIncrementalSearchMin=3;

config.macros.gotoTiddler= { 
	listMaxSize: 10,
	listHeading: 'Found %0 matching title%1...',
	searchItem: "Search for '%0'...",
	handler:
	function(place,macroName,params,wikifier,paramString,tiddler) {
		var quiet	=params.contains("quiet");
		var showlist	=params.contains("showlist");
		var search	=params.contains("search");
		params = paramString.parseParams("anon",null,true,false,false);
		var instyle	=getParam(params,"inputstyle","");
		var liststyle	=getParam(params,"liststyle","");
		var filter	=getParam(params,"filter","");
		var html=this.html;
		var keyevent=window.event?"onkeydown":"onkeypress"; // IE event fixup for ESC handling
		html=html.replace(/%keyevent%/g,keyevent);
		html=html.replace(/%search%/g,search);
		html=html.replace(/%quiet%/g,quiet);
		html=html.replace(/%showlist%/g,showlist);
		html=html.replace(/%display%/g,showlist?'block':'none');
		html=html.replace(/%position%/g,showlist?'static':'absolute');
		html=html.replace(/%instyle%/g,instyle);
		html=html.replace(/%liststyle%/g,liststyle);
		html=html.replace(/%filter%/g,filter);
		if (config.browser.isIE) html=this.IEtableFixup.format([html]);
		var span=createTiddlyElement(place,'span');
		span.innerHTML=html; var form=span.getElementsByTagName("form")[0];
		if (showlist) this.fillList(form.list,'',filter,search,0);
	},
	html:
	'&lt;form onsubmit="return false" style="display:inline;margin:0;padding:0"&gt;\
		&lt;input name=gotoTiddler type=text autocomplete="off" accesskey="G" style="%instyle%"\
			title="Enter title text... ENTER=goto, SHIFT-ENTER=search for text, DOWN=select from list"\
			onfocus="this.select(); this.setAttribute(\'accesskey\',\'G\');"\
			%keyevent%="return config.macros.gotoTiddler.inputEscKeyHandler(event,this,this.form.list,%search%,%showlist%);"\
			onkeyup="return config.macros.gotoTiddler.inputKeyHandler(event,this,%quiet%,%search%,%showlist%);"&gt;\
		&lt;select name=list style="display:%display%;position:%position%;%liststyle%"\
			onchange="if (!this.selectedIndex) this.selectedIndex=1;"\
			onblur="this.style.display=%showlist%?\'block\':\'none\';"\
			%keyevent%="return config.macros.gotoTiddler.selectKeyHandler(event,this,this.form.gotoTiddler,%showlist%);"\
			onclick="return config.macros.gotoTiddler.processItem(this.value,this.form.gotoTiddler,this,%showlist%);"&gt;\
		&lt;/select&gt;&lt;input name="filter" type="hidden" value="%filter%"&gt;\
	&lt;/form&gt;',
	IEtableFixup:
	"&lt;table style='width:100%;display:inline;padding:0;margin:0;border:0;'&gt;\
		&lt;tr style='padding:0;margin:0;border:0;'&gt;&lt;td style='padding:0;margin:0;border:0;'&gt;\
		%0&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;",
	getItems:
	function(list,val,filter) {
		if (!list.cache || !list.cache.length || val.length&lt;=config.options.txtIncrementalSearchMin) {
			// starting new search, fetch and cache list of tiddlers/shadows/tags
			list.cache=new Array();
			if (filter.length) {
				var fn=store.getMatchingTiddlers||store.getTaggedTiddlers;
				var tiddlers=store.sortTiddlers(fn.apply(store,[filter]),'title');
			} else 
				var tiddlers=store.reverseLookup('tags','excludeLists');
			for(var t=0; t&lt;tiddlers.length; t++) list.cache.push(tiddlers[t].title);
			if (!filter.length) {
				for (var t in config.shadowTiddlers) list.cache.pushUnique(t);
				var tags=store.getTags();
				for(var t=0; t&lt;tags.length; t++) list.cache.pushUnique(tags[t][0]);
			}
		}
		var found = [];
		var match=val.toLowerCase();
		for(var i=0; i&lt;list.cache.length; i++)
			if (list.cache[i].toLowerCase().indexOf(match)!=-1) found.push(list.cache[i]);
		return found;
	},
	getItemSuffix:
	function(t) {
		if (store.tiddlerExists(t)) return "";  // tiddler
		if (store.isShadowTiddler(t)) return " (shadow)"; // shadow
		return " (tag)"; // tag 
	},
	fillList:
	function(list,val,filter,search,key) {
		if (list.style.display=="none") return; // not visible... do nothing!
		var indent='\xa0\xa0\xa0';
		var found = this.getItems(list,val,filter); // find matching items...
		found.sort(); // alpha by title
		while (list.length &gt; 0) list.options[0]=null; // clear list
		var hdr=this.listHeading.format([found.length,found.length==1?"":"s"]);
		list.options[0]=new Option(hdr,"",false,false);
		for (var t=0; t&lt;found.length; t++) list.options[list.length]=
			new Option(indent+found[t]+this.getItemSuffix(found[t]),found[t],false,false);
		if (search)
			list.options[list.length]=new Option(this.searchItem.format([val]),"*",false,false);
		list.size=(list.length&lt;this.listMaxSize?list.length:this.listMaxSize); // resize list...
		list.selectedIndex=key==38?list.length-1:key==40?1:0;
	},
	keyProcessed:
	function(ev) { // utility function
		ev.cancelBubble=true; // IE4+
		try{event.keyCode=0;}catch(e){}; // IE5
		if (window.event) ev.returnValue=false; // IE6
		if (ev.preventDefault) ev.preventDefault(); // moz/opera/konqueror
		if (ev.stopPropagation) ev.stopPropagation(); // all
		return false;
	},
	inputEscKeyHandler:
	function(event,here,list,search,showlist) {
		if (event.keyCode==27) {
			if (showlist) { // clear input, reset list
				here.value=here.defaultValue;
				this.fillList(list,'',here.form.filter.value,search,0);
			}
			else if (list.style.display=="none") // clear input
				here.value=here.defaultValue;
			else list.style.display="none"; // hide list
			return this.keyProcessed(event);
		}
		return true; // key bubbles up
	},
	inputKeyHandler:
	function(event,here,quiet,search,showlist) {
		var key=event.keyCode;
		var list=here.form.list;
		var filter=here.form.filter;
		// non-printing chars bubble up, except for a few:
		if (key&lt;48) switch(key) {
			// backspace=8, enter=13, space=32, up=38, down=40, delete=46
			case 8: case 13: case 32: case 38: case 40: case 46: break; default: return true;
		}
		// blank input... if down/enter... fall through (list all)... else, and hide or reset list
		if (!here.value.length &amp;&amp; !(key==40 || key==13)) {
			if (showlist) this.fillList(here.form.list,'',here.form.filter.value,search,0);
			else list.style.display="none";
			return this.keyProcessed(event);
		}
		// hide list if quiet, or below input minimum (and not showlist)
		list.style.display=(!showlist&amp;&amp;(quiet||here.value.length&lt;config.options.txtIncrementalSearchMin))?'none':'block';
		// non-blank input... enter=show/create tiddler, SHIFT-enter=search for text
		if (key==13 &amp;&amp; here.value.length) return this.processItem(event.shiftKey?'*':here.value,here,list,showlist);
		// up or down key, or enter with blank input... shows and moves to list...
		if (key==38 || key==40 || key==13) { list.style.display="block"; list.focus(); }
		this.fillList(list,here.value,filter.value,search,key);
		return true; // key bubbles up
	},
	selectKeyHandler:
	function(event,list,editfield,showlist) {
		if (event.keyCode==27) // escape... hide list, move to edit field
			{ editfield.focus(); list.style.display=showlist?'block':'none'; return this.keyProcessed(event); }
		if (event.keyCode==13 &amp;&amp; list.value.length) // enter... view selected item
			{ this.processItem(list.value,editfield,list,showlist); return this.keyProcessed(event); }
		return true; // key bubbles up
	},
	processItem:
	function(title,here,list,showlist) {
		if (!title.length) return;
		list.style.display=showlist?'block':'none';
		if (title=="*")	{ story.search(here.value); return false; } // do full-text search
		if (!showlist) here.value=title;
		story.displayTiddler(null,title); // show selected tiddler
		return false;
	}
}
//}}}</pre>
</div>
<div title="GotoPluginInfo" modifier="acarvalho" created="201206181927" modified="201304121713" tags="System pluginInfo" server.title="GotoPluginInfo" server.page.revision="201304121713" server.etag='"acarvalho_public/GotoPluginInfo/1183327:c2517860e97f54c45c5cb29f1d9062d635c6b39a"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1cd0cfb0e072a891d11609461b94113543c48b9f">
<pre>/***
|Name|GotoPluginInfo|
|Source|http://www.TiddlyTools.com/#GotoPlugin|
|Documentation|http://www.TiddlyTools.com/#GotoPluginInfo|
|Version|1.9.2|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|documentation|
|Description|Documentation for GotoPlugin|
''View a tiddler by typing its title and pressing //enter//.''  As you type, a list of possible matches is displayed.  You can scroll-and-click (or use arrows+enter) to select/view a tiddler, or press escape to close the listbox to resume typing.  When the listbox is not displayed, pressing //escape// clears the current input.
!!!!!Usage/Examples
&lt;&lt;&lt;
syntax: {{{&lt;&lt;gotoTiddler quiet search inputstyle:... liststyle:... filter:...&gt;&gt;}}}
All parameters are optional.
* ''quiet'' (//keyword//)&lt;br&gt;list will not be automatically display as each character is typed.  Use //down// or //enter// to view the list.
* ''showlist'' (//keyword//)&lt;br&gt;list will always be displayed, inline, directly below the input field.
* ''search'' (//keyword//)&lt;br&gt;adds an extra 'command item' to the list that can be used to invoke a full-text search using the entered value.  This can be especially useful when no matching tiddler titles have been found.
* ''inputstyle:'' and ''liststyle:''&lt;br&gt;are CSS declarations that modify the default input and listbox styles, respectively.  Note: the CSS styles must be surrounded by ({{{"..."}}} or {{{'...'}}}) or ({{{[[...]]}}}) (e.g., {{{liststyle:"border:1px dotted blue;color:green;..."}}}.
* ''filter:''&lt;br&gt;is a single tag value (or a boolean tag expression if MatchTagsPlugin is installed), and is used to limit the search to only those tiddlers matching the indicated tag or tag expression (e.g., {{{&lt;&lt;gotoTiddler filter:"faq or help"&gt;&gt;}}})
{{{&lt;&lt;gotoTiddler&gt;&gt;}}}
&lt;&lt;gotoTiddler&gt;&gt;
{{{&lt;&lt;gotoTiddler search&gt;&gt;}}}
&lt;&lt;gotoTiddler search&gt;&gt;
{{{&lt;&lt;gotoTiddler showlist filter:"pluginInfo" liststyle:"height:10em;width:auto;"&gt;&gt;}}}
&lt;&lt;gotoTiddler showlist filter:"pluginInfo" liststyle:"height:10em;width:auto;"&gt;&gt;
&lt;&lt;&lt;
!!!!!Configuration
&lt;&lt;&lt;
*Match titles only after {{twochar{&lt;&lt;option txtIncrementalSearchMin&gt;&gt;}}} or more characters are entered.&lt;br&gt;Use down-arrow to start matching with shorter input.  //Note: This option value is also set/used by [[SearchOptionsPlugin]]//.
*To set the maximum height of the listbox, you can create a tiddler tagged with &lt;&lt;tag systemConfig&gt;&gt;, containing:
//{{{
config.macros.gotoTiddler.listMaxSize=10;  // change this number
//}}}
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2009.05.22 1.9.2 use reverseLookup() for IncludePlugin
2009.04.12 1.9.1 support multiple instances with different filters by using per-element tiddler cache instead of shared static cache
2009.04.05 1.9.0 added 'showlist' parameter for inline display with listbox always visible.
2009.03.23 1.8.0 added txtIncrementalSearchMin (default=3).  Avoids fetching long lists.  Use down arrow to force search with short input.
2008.12.15 1.7.1 up arrow from input field now moves to end of droplist (search for input).  Also, shift+enter cam now be used to quickly invoke search for text.
2008.10.16 1.7.0 in macro handler(), changed to use //named// params instead of positional params, and added optional "filter:" param for tag filtering.  Removed 'insert' handling (now provided by [[QuickEditPlugin]]).
2008.10.02 1.6.1 for IE, wrap controls in a table.  Corrects placement of listbox so it is below input field.
2008.10.02 1.6.0 added 'search' param for optional "Search for:" item that invokes full text search (especially useful when no title matches are found)
2008.02.17 1.5.0 ENTER key always displays tiddler based on current input regardless of whether input matches any existing tiddler
2007.10.31 1.4.3 removed extra trailing comma on last property of config.macros.gotoTiddler object.  This fixes an error under InternetExplorer that was introduced 6 days ago... sure, I should have found it sooner, but... WHY DON'T PEOPLE TELL ME WHEN THINGS ARE BROKEN!!!!
2007.10.25 1.4.2 added onclick handler for input field, so that clicking in field hides the listbox.
2007.10.25 1.4.1 re-wrote getItems() to cache list of tiddlers/shadows/tags and use case-folded simple text match instead of regular expression to find matching tiddlers.  This *vastly* reduces processing overhead between keystrokes, especially for documents with many (&gt;1000) tiddlers.  Also, removed local definition of replaceSelection(), now supported directly by the TW2.2+ core, as well as via backward-compatible plugin
2007.04.25 1.4.0 renamed macro from "goto" to "gotoTiddler".  This was necessary to avoid a fatal syntax error in Opera (and other browsers) that require strict adherence to ECMAScript 1.5 standards which defines the identifier "goto" as "reserved for FUTURE USE"... *sigh*
2007.04.21 1.3.2 in html definition, removed DIV around droplist (see 1.2.6 below).  It created more layout problems then it solved. :-(
2007.04.01 1.3.1 in processItem(), ensure that correct textarea field is found by checking for edit=="text" attribute
2007.03.30 1.3.0 tweak SideBarOptions shadow to automatically add {{{&lt;&lt;goto&gt;&gt;}}} when using default sidebar content
2007.03.30 1.2.6 in html definition, added DIV around droplist to fix IE problem where list appears next to input field instead of below it.  
2007.03.28 1.2.5 in processItem(), set focus to text area before setting selection (needed for IE to get correct selection 'range')
2007.03.28 1.2.4 added prompt for 'pretty text' when inserting a link into tiddler content
2007.03.28 1.2.3 added local copy of core replaceSelection() and modified for different replace logic
2007.03.27 1.2.2 in processItem(), use story.getTiddlerField() to retrieve textarea control
2007.03.26 1.2.1 in html, use either 'onkeydown' (IE) or 'onkeypress' (Moz) event to process &lt;esc&gt; key sooner, to prevent &lt;esc&gt; from 'bubbling up' to the tiddler (which will close the current editor).
2007.03.26 1.2.0 added support for optional "insert" keyword param.
2006.05.10 1.1.2 when filling listbox, set selection to 'heading' item... auto-select first tiddler title when down/enter moves focus into listbox
2006.05.08 1.1.1 added accesskey ("G") to input field html (also set when field gets focus).  Also, inputKeyHandler() skips non-printing/non-editing keys. 
2006.05.08 1.1.0 added heading to listbox for better feedback (also avoids problems with 1-line droplist)
2006.05.07 1.0.0 list matches against tiddlers/shadows/tags.  input field auto-completion... 1st enter=complete matching input (or show list)... 2nd enter=view tiddler.  "quiet" param controls when listbox appears.  handling for enter (13), escape(27), and down(40) keys.   Change 'ondblclick' to 'onclick' to avoid unintended triggering of tiddler editor).  Shadow titles inserted into list instead of appended to the end.
2006.05.05 0.0.0 started
&lt;&lt;&lt;</pre>
</div>
<div title="GroupByPlugin" modifier="osmosoft" created="201311111923" modified="201311111923" tags="excludeLists excludeSearch systemConfig" server.title="GroupByPlugin" server.page.revision="201311111923" server.etag='"system-plugins_public/GroupByPlugin/1521873:0864341c10e92b88b6bf59e0542b74c3fd4f7807"' server.workspace="bags/system-plugins_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" _hash="d4f41fa53916a920347fbe97303966ebeed68945">
<pre>/***
|''Name''|GroupByPlugin|
|''Description''|Mimics allTags macro to provide ways of creating lists grouping tiddlers by any field|
|''Version''|0.6.1|
|''Author''|Jon Robson|
|''Status''|beta|
!Usage
{{{&lt;&lt;groupBy tags&gt;&gt;}}}
mimics allTags macro

{{{&lt;&lt;groupBy server.bag&gt;&gt;}}}
groups by the server.bag field (this version contains TiddlySpace specific code for turning a bag into a space name)

{{{groupBy modified dateFormat:"YYYY"}}}
group tiddlers by year.

{{{&lt;&lt;groupBy tags exclude:excludeLists exclude:systemConfig&gt;&gt;}}}
group tiddlers by tag but exclude the tags with values excludeLists and systemConfig

Within that group you can also exclude things by filter
{{{groupBy modifier filter:[tag[film]]}}}
will group tiddlers tagged with film by modifier.
***/
//{{{
(function($) {
var taglocale = config.views.wikified.tag;
var macro = config.macros.groupBy = {
	locale: {
		tooltip: "all tiddlers in group %0",
		noTiddlers: "no tiddlers",
		openAllText: taglocale.openAllText,
		openAllTooltip: taglocale.openAllTooltip,
		openTiddler: "open tiddler with title %0"
	},
	morpher: {
		// TODO: note currently the following 2 morphers are TiddlySpace specific and probably should be in separate plugin
		"server.workspace": function(value, options) {
			return macro.morpher["server.bag"](value.replace("bags/", "").replace("recipes/", ""));
		},
		"server.bag": function(value, options) {
			if(typeof(value) !== "string") {
				return false;
			} else if(value.indexOf("_public") === -1 &amp;&amp; value.indexOf("_private") === -1) {
				value = "*%0".format(value); // add star for non-space bags.
			}
			return value.replace("_public", "").replace("_private", "");
		},
		created: function(value, options) {
			return value.formatString(options.dateFormat || "DD MMM YYYY");
		},
		modified: function(value, options) {
			return macro.morpher.created(value, options);
		}
	},

	handler: function(place, macroName, params, wikifier, paramString) {
		var field = params[0] || "server.workspace";
		var dateFormat = params[1] || "DD MMM YYYY";
		var container = $("&lt;div /&gt;").attr("macroName", macroName).addClass("groupBy").
			attr("refresh", "macro").attr("fieldName", field).
			attr("paramString", paramString).
			attr("dateFormat", dateFormat).appendTo(place)[0];
		macro.refresh(container);
	},
	isTypeArray: function(value) {
		var valueType = typeof value;
		if(valueType === "object" &amp;&amp; typeof value.length === "number" &amp;&amp;
			!(value.propertyIsEnumerable("length")) &amp;&amp;
			typeof value.splice === "function") { //is Array
			return true;
		} else {
			return false;
		}
	},
	_onClickGroup: function(ev, options) {
		var i, target = ev.target, locale = macro.locale;
		var tiddlers = $(target).closest(".templateContainer").data("tiddlers");
		var popup = $(Popup.create(target)).addClass("taggedTiddlerList")[0];
		var value = $(target).attr("value");
		var openAll = createTiddlyButton($("&lt;li /&gt;").appendTo(popup)[0],
			locale.openAllText.format(value), locale.openAllTooltip);
		$(openAll).click(function(ev) {
			story.displayTiddlers(ev.target, tiddlers);
			return false;
		});
		var listBreak = $("&lt;li /&gt;").addClass("listBreak").html("&lt;div /&gt;").appendTo(popup);
		for(i = 0; i &lt; tiddlers.length; i++) {
			var item = $("&lt;li /&gt;").appendTo(popup)[0];
			var template = store.getTiddlerText(options.template) || macro.template;
			wikify(template, item, null, tiddlers[i]);
		}
		listBreak.clone().appendTo(popup);
		$(createTiddlyLink($("&lt;li /&gt;").appendTo(popup)[0], value, false)).
			text(locale.openTiddler.format(value));
		Popup.show();
		ev.stopPropagation();
		return false;
	},
	_refresh: function(container, tiddlers, options) {
		var totalGroups = 0, locale = macro.locale, i, j;
		var excludeValues = options.exclude;
		var values = {}, value_ids = [];
		var field = options.field;
		var morpher = macro.morpher[field] || function(value) {
			return value;
		};
		for(i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = tiddlers[i];
			var value = tiddler[field] || tiddler.fields[field];
			value = macro.isTypeArray(value) ? value : [ value ];
			for(j = 0; j &lt; value.length; j++) {
				var v = morpher(value[j], options);
				if(v &amp;&amp; $.inArray(v, excludeValues) === -1) {
					totalGroups += 1;
					if(!values[v]) {
						values[v] = [];
					}
					values[v].push(tiddler);
					value_ids.pushUnique(v);
				}
			}
		}
		var ul = $("&lt;ul /&gt;").appendTo(container)[0];
		if(totalGroups === 0) {
			$("&lt;li /&gt;").addClass("listTitle").text(locale.noTiddlers);
		}
		value_ids = value_ids.sort();
		var groupTemplate = store.getTiddlerText(options.groupTemplate);
		var onClick = function(ev) {
			macro._onClickGroup(ev, options);
		};
		for(i = 0; i &lt; value_ids.length; i++) {
			var title = value_ids[i];
			var info = getTiddlyLinkInfo(title);
			tiddlers = values[title];
			var btn = createTiddlyButton($("&lt;li /&gt;").appendTo(ul)[0],
				"%0 (%1)".format(title, tiddlers.length), locale.tooltip.format(title), null, info.classes);
			if(groupTemplate) {
				$(btn).empty();
				wikify(groupTemplate, btn, null, tiddlers[0]);
			}
			$(btn).click(onClick).attr("value", title).attr("refresh", "link").attr("tiddlyLink", title);
			$(btn).addClass("templateContainer").data("tiddlers", tiddlers);
		}
	},
	refresh: function(container) {
		container = $(container).empty();
		var paramString = container.attr("paramString");
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var options = { field: container.attr("fieldName"), dateFormat: container.attr("dateFormat"), exclude: args.exclude || [],
			template: args.template ? args.template[0] : false, groupTemplate: args.groupTemplate ? args.groupTemplate[0] : "" };
		var tiddlers = args.filter ? store.filterTiddlers(args.filter[0]) : store.getTiddlers("title");
		macro._refresh(container, tiddlers, options);
	},
	template: "&lt;&lt;view title link&gt;&gt;"
};

}(jQuery));
//}}}</pre>
</div>
<div title="Guideline" modifier="acarvalho" created="201310052120" modified="201310052121" server.title="Guideline" server.page.revision="201310052121" server.etag='"acarvalho_public/Guideline/1442387:4be230de294a01fd88491e7171bf7c947434a04f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="4088fccf41e4aa2400a96274f5e14879550d22c3">
<pre>&lt;&lt;TiddlyTagMindMap filter:[tag[Guideline]] vizType:rgraph id:Guideline nodeSize:5 nodeType:ellipse nodeHoverColor:'#ee00ff' nodeColor:"#ff0000" edgeColor:'#ccc' edgeWidth:2 width:750 height:480 template:NodeTemplate&gt;&gt;
----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="Guidelines" modifier="acarvalho" created="201206210848" modified="201206231939" server.title="Guidelines" server.page.revision="201206231939" server.etag='"acarvalho_public/Guidelines/756487:d96994ddecc8a1aadec2e788c6f7e9a91e5e1bd4"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="ffb4a2d777e3f53880f84ca1d9cc90bb0d8f3f4a">
<pre>A collection of practical development guidelines.

|Guideline|h
|&lt;&lt;list filter [tag[Guideline]]&gt;&gt;|
----
@@color:#c4d6ed; ^^
Description: A collection of practical development guidelines.
^^@@</pre>
</div>
<div title="Henry L. Mencken on simplicity" modifier="acarvalho" created="201306272315" modified="201306272315" tags="Content Quote" server.title="Henry L. Mencken on simplicity" server.page.revision="201306272315" server.etag='"acarvalho_public/Henry%20L.%20Mencken%20on%20simplicity/1284602:0533ab2c28326b9ae2ac95f94233c90bf4b8afd3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e17e3235578cc6d9572d5ecf4022b501874c2094">
<pre>"//''For every complex problem, there is a solution that is simple, neat, and wrong.''//"
[[Henry Louis Mencken|http://en.wikipedia.org/wiki/H._L._Mencken]] (1880 - 1956)
</pre>
</div>
<div title="High Maturity Practices" modifier="acarvalho" created="201208241620" modified="201512101351" tags="Content Development" server.title="High Maturity Practices" server.page.revision="201512101351" server.etag='"acarvalho_public/High%20Maturity%20Practices/2421820:29e3c6b08760ae1d23e9d29043030ecb2a510580"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="4a57038847962fd9d74a6906f0cdc476cc98bc62">
<pre>High Maturity Practices are one of the main factors to distinguish professional development from amateur one.

*[[Configuration Management]] ([[CM]]) is essential! No professional development may be carried out without it.
*[[Continuous Integration]] ([[CI]]) is important in any team with more than zero elements.
*[[Static Analysis]] is, probably, the simplest practice to implement and that can, immediately, have a big return on your code quality. Think about having one hundred of the best programmers inspecting your code... 
*[[Unit Testing]] overemphasised but nevertheless an excellent quality tool.
*[[Peer Review]] essential if a quality standard is to be maintained.
*[[Systematic Reuse]] is a major quality and productivity factor.
*[[Issue Management]] is essential to cope with complexity.

----
@@color:#c4d6ed; ^^
Description: Reference of practices that distinguish professional development from amateur one.
^^@@</pre>
</div>
<div title="HomePage" creator="AndreCarvalho" modifier="YourName" created="201206180947" modified="202104060837" tags="Content" _hash="df7a68ebb5073f3f26dc5ec22244a3d1530a30f9" changecount="16">
<pre>!Welcome to André de Carvalho's Wiki home page.

I'm involved with [[Software Development]] since the 80's and have worked from Turbo Pascal (3.01a), Clipper and Fox Pro (on SCO Xenix ;), through Delphi and now I mostly use C#.

I'm clearly a data-oriented ~WinForms guy that hates to "//program in XML//" and has not too much patience for browser limitations. 

Maybe I'm old fashioned but I do like good conceptual data models ( [[Sybase|http://www.sybase.com/]] [[Power Designer|http://www.sybase.com/products/modelingdevelopment/powerdesigner]] is my tool), the challenge of investigating a business problem and produce an elegant object oriented architectural solution ( [[Sparx Enterprise Architect]] is essential) and then to implement a robust and performance wise application that is expandable and reusable.

Wikis, and especially [[TiddlyWiki|http://www.tiddlywiki.com/]], were the first browser application that really interested me and this site is my personal site devoted mainly to [[Software Development]] although some other topics are also present. Hope You enjoy and find it useful.

----
This is now hosted for free by [[TiddlyHost|https://tiddlyhost.com]]. If You find this useful and want to contribute to ~TiddlyHost You can make a donation at [[TiddlyHost donation|https://tiddlyhost.com/donate]], its well deserved!

If You are wandering why is this still in [[TiddlyWiki Classic|https://classic.tiddlywiki.com/]] see [[Things I really miss in TW5|https://missingintw5.tiddlyhost.com/]].
----

!Last content updates
|Last 5 tiddlers created|Last 5 tiddlers modified|h
|&lt;&lt;ContentTimeline created 5&gt;&gt;|&lt;&lt;ContentTimeline modified 5&gt;&gt;|
 See more in [[Last Updates|LastUpdates]]

--__You may subscribe an RSS feed for this site in [[this link|http://acarvalho.tiddlyspot.com/index.xml]].__--

!Tagcloud
&lt;&lt;tagCloud excludeLists excludeSearch systemConfig systemServer PluginInfo Plugin excludeMissing excludePublisher takenotepackage app DiscoveryPackage NavigationPackage IconPackage TidIDEPackage TaskPackage ScrollbarPackage MediaPackage pluginInfo @cdent @developers @ricardoperes Administration follow tips Content System systemConfigDisable&gt;&gt;
''Also check TagPolicy for a resume of the more important subject tags used in this space. They can help you navigate the information.''
!~TiddliWiki
''
~TiddliWiki is a __non linear structure__, that is, there is not a fixed order to read its contents. For instance, if you are interested in my thoughts about [[Software Development]] you shall get to that tiddler then close all other opened tiddlers and start reading. You will find links to other tiddlers (concept definitions or detailed information about referred topics). If you hoover over links you will see a short description of its content, if you click it will open, you can read and then close it to go back to your main topic.
If you are new to ~TiddlyWiki my advice is that you keep only two tiddlers opened at the same time : your main topic one and the one that you followed to, when finished reading the second close it.
Be sure to explore the tiddler menu functionality and the tags also.

A note about most images in this site : if you ~Shift-Click on them they will zoom to their original (bigger) size.

If you are not comfortable with multiple tiddler navigation you may check &lt;&lt;option chkEnableTabsBar&gt;&gt; __Tabbed navigation__ or tune other DisplayOptions in this space.

--The last line of each tiddler let you comment and see commentaries on that tiddler. Comments are moderated so be patient, I'll do it ASAP.--
''
!General
You may also be interested in other [[Sites I Like]] or in [[Development Links]]
----
I may be contacted on ''Gmail'' as //andre.d.a.carvalho//.
----
!Privacy statement
This site uses Google Analytics through [[GATrackerPlugin|http://suiryc.github.io/TiddlyWiki-dev/#GATrackerPlugin]]. You may disable tracking by using [[NoScript|https://noscript.net/]] Firefox plugin and not authorizing //google-analytics.com//. 
This site uses a counter from [[https://www.simple-counter.com]]
This site uses a counter from [[https://info.flagcounter.com]]
--This site uses a counter from [[www.simplehitcounter.com|http://www.simplehitcounter.com/]]--
--This site uses [[Discus|https://disqus.com]] as it commentaries engine.--
----
@@color:#c4d6ed; ^^
Description: The main entry point in this wiki. 
^^@@</pre>
</div>
<div title="HoverMenu" modifier="AndreCarvalho" created="201206141003" modified="202103121813" tags="Administration System" server.title="HoverMenu" server.page.revision="201304121713" server.etag='"acarvalho_public/HoverMenu/1183330:8f67b7ff407e42df8c151bc7cd1edcf63ce95419"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="af62a178b2914b0d8acae58dea5fd136b93e7a20" changecount="2">
<pre>&lt;&lt;top&gt;&gt;
&lt;&lt;jump j '' top&gt;&gt;
&lt;&lt;toggleSideBar&gt;&gt;&lt;&lt;renameButton '&gt;' &gt;&gt;
&lt;&lt;fullscreen&gt;&gt;&lt;&lt;renameButton ↕ 'Full Screen'&gt;&gt;
&lt;&lt;newTiddler&gt;&gt;&lt;&lt;renameButton n&gt;&gt;
&lt;&lt;thostUpload&gt;&gt;&lt;&lt;renameButton s 'Save TiddlyWiki'&gt;&gt;
</pre>
</div>
<div title="HoverMenuPlugin" modifier="acarvalho" created="201206141003" modified="201207191322" tags="systemConfig" server.title="HoverMenuPlugin" server.page.revision="201207191322" server.etag='"acarvalho_public/HoverMenuPlugin/795382:4b2079d5f2f7da1437a14eead97af8236e0a0b06"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="9ad78be7ef91fbdbec1b9cc2959786172fcd013b">
<pre>/***
|Name|HoverMenuPlugin|
|Created by|SaqImtiaz|
|Location|http://tw.lewcid.org/#HoverMenuPlugin|
|Version|1.11|
|Requires|~TW2.x|
!Description:
Provides a hovering menu on the edge of the screen for commonly used commands, that scrolls with the page.

!Demo:
Observe the hovering menu on the right edge of the screen.

!Installation:
Copy the contents of this tiddler to your TW, tag with systemConfig, save and reload your TW.
To customize your HoverMenu, edit the HoverMenu shadow tiddler.

To customize whether the menu sticks to the right or left edge of the screen, and its start position, edit the HoverMenu configuration settings part of the code below. It's well documented, so don't be scared!

The menu has an id of hoverMenu, in case you want to style the buttons in it using css.

!Notes:
Since the default HoverMenu contains buttons for toggling the side bar and jumping to the top of the screen and to open tiddlers, the ToggleSideBarMacro, JumpMacro and the JumpToTopMacro are included in this tiddler, so you dont need to install them separately. Having them installed separately as well could lead to complications.

If you dont intend to use these three macros at all, feel free to remove those sections of code in this tiddler.

!To Do:
* rework code to allow multiple hovering menus in different positions, horizontal etc.
* incorporate code for keyboard shortcuts that correspond to the buttons in the hovermenu

!History:
*03-08-06, ver 1.1.2: compatibility fix with SelectThemePlugin
*03-08-06,  ver 1.11: fixed error with button tooltips
*27-07-06, ver 1.1 : added JumpMacro to hoverMenu
*23-07-06

!Code
***/

/***
start HoverMenu plugin code
***/
//{{{
config.hoverMenu={};
//}}}

/***
HoverMenu configuration settings
***/
//{{{
config.hoverMenu.settings={
               align: 'right',    //align menu to right or left side of screen, possible values are 'right' and 'left'               
               x: 1,              // horizontal distance of menu from side of screen, increase to your liking.
               y: 158            //vertical distance of menu from top of screen at start, increase or decrease to your liking
               };
//}}}

//{{{
//continue HoverMenu plugin code
config.hoverMenu.handler=function()
{              
               if (!document.getElementById("hoverMenu"))
               {
               var theMenu = createTiddlyElement(document.getElementById("contentWrapper"), "div","hoverMenu");
               theMenu.setAttribute("refresh","content");
               theMenu.setAttribute("tiddler","HoverMenu");
               var menuContent = store.getTiddlerText("HoverMenu");
               wikify(menuContent,theMenu);
              }

	       var Xloc = this.settings.x;
	       Yloc =this.settings.y;
	       var ns = (navigator.appName.indexOf("Netscape") != -1);
	       function SetMenu(id)
                        {
		        var GetElements=document.getElementById?document.getElementById(id):document.all?document.all[id]:document.layers[id];
		        if(document.layers)GetElements.style=GetElements;
		        GetElements.sP=function(x,y){this.style[config.hoverMenu.settings.align]=x +"px";this.style.top=y +"px";};
		        GetElements.x = Xloc;
		        GetElements.y = findScrollY();
		        GetElements.y += Yloc;
		        return GetElements;
	                }
               window.LoCate_XY=function()
                        {
		        var pY =  findScrollY();
                        ftlObj.y += (pY + Yloc - ftlObj.y)/15;
		        ftlObj.sP(ftlObj.x, ftlObj.y);
		        setTimeout("LoCate_XY()", 10);
	                }
               ftlObj = SetMenu("hoverMenu");
	       LoCate_XY();
};

window.old_lewcid_hovermenu_restart = restart;
restart = function()
{
               window.old_lewcid_hovermenu_restart();
               config.hoverMenu.handler();
};

setStylesheet(
"#hoverMenu .imgLink, #hoverMenu .imgLink:hover {border:none; padding:0px; float:right; margin-bottom:2px; margin-top:0px;}\n"+
"#hoverMenu  .button, #hoverMenu  .tiddlyLink {border:none; font-weight:bold; background:#18f; color:#FFF; padding:0 5px; float:right; margin-bottom:4px;}\n"+
"#hoverMenu .button:hover, #hoverMenu .tiddlyLink:hover {font-weight:bold; border:none; color:#fff; background:#000; padding:0 5px; float:right; margin-bottom:4px;}\n"+
"#hoverMenu .button {width:100%; text-align:center}"+
"#hoverMenu { position:absolute; width:7px;}\n"+
"\n","hoverMenuStyles");


config.macros.renameButton={};
config.macros.renameButton.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{

               if (place.lastChild.tagName!="BR")
                     {
                      place.lastChild.firstChild.data = params[0];
                      if (params[1]) {place.lastChild.title = params[1];}
                     }
};

config.shadowTiddlers["HoverMenu"]="&lt;&lt;top&gt;&gt;\n&lt;&lt;toggleSideBar&gt;&gt;&lt;&lt;renameButton '&gt;' &gt;&gt;\n&lt;&lt;jump j '' top&gt;&gt;\n&lt;&lt;saveChanges&gt;&gt;&lt;&lt;renameButton s 'Save TiddlyWiki'&gt;&gt;\n&lt;&lt;newTiddler&gt;&gt;&lt;&lt;renameButton n&gt;&gt;\n";
//}}}
//end HoverMenu plugin code

//Start ToggleSideBarMacro code
//{{{
config.macros.toggleSideBar={};

config.macros.toggleSideBar.settings={
         styleHide :  "#sidebar { display: none;}\n"+"#contentWrapper #displayArea { margin-right: 1em;}\n"+"",
         styleShow : " ",
         arrow1: "«",
         arrow2: "»"
};

config.macros.toggleSideBar.handler=function (place,macroName,params,wikifier,paramString,tiddler)
{
          var tooltip= params[1]||'toggle sidebar';
          var mode = (params[2] &amp;&amp; params[2]=="hide")? "hide":"show";
          if (!params[2])
              mode = "hide";
          var arrow = (mode == "hide")? this.settings.arrow1:this.settings.arrow2;
          var label= (params[0]&amp;&amp;params[0]!='.')?params[0]+" "+arrow:arrow;
          var theBtn = createTiddlyButton(place,label,tooltip,this.onToggleSideBar,"button HideSideBarButton");
          if (mode == "hide")
             { 
             (document.getElementById("sidebar")).setAttribute("toggle","hide");
              setStylesheet(this.settings.styleHide,"ToggleSideBarStyles");
             }
};

config.macros.toggleSideBar.onToggleSideBar = function(){
          var sidebar = document.getElementById("sidebar");
          var settings = config.macros.toggleSideBar.settings;
          if (sidebar.getAttribute("toggle")=='hide')
             {
              setStylesheet(settings.styleShow,"ToggleSideBarStyles");
              sidebar.setAttribute("toggle","show");
              this.firstChild.data= (this.firstChild.data).replace(settings.arrow1,settings.arrow2);
              }
          else
              {    
               setStylesheet(settings.styleHide,"ToggleSideBarStyles");
               sidebar.setAttribute("toggle","hide");
               this.firstChild.data= (this.firstChild.data).replace(settings.arrow2,settings.arrow1);
              }

     return false;
}

setStylesheet(".HideSideBarButton .button {font-weight:bold; padding: 0 5px;}\n","ToggleSideBarButtonStyles");
//}}}
//end ToggleSideBarMacro code

//start JumpToTopMacro code
//{{{
config.macros.top={};
config.macros.top.handler=function(place,macroName)
{
               createTiddlyButton(place,"^","jump to top",this.onclick);
}
config.macros.top.onclick=function()
{
               window.scrollTo(0,0);
};

config.commands.top =
{
               text:" ^ ",
               tooltip:"jump to top"
};

config.commands.top.handler = function(event,src,title)
{
               window.scrollTo(0,0);
}
//}}}
//end JumpToStartMacro code

//start JumpMacro code
//{{{
config.macros.jump= {};
config.macros.jump.handler = function (place,macroName,params,wikifier,paramString,tiddler)
{
        var label = (params[0] &amp;&amp; params[0]!=".")? params[0]: 'jump';
        var tooltip = (params[1] &amp;&amp; params[1]!=".")? params[1]: 'jump to an open tiddler';
        var top = (params[2] &amp;&amp; params[2]=='top') ? true: false;        

        var btn =createTiddlyButton(place,label,tooltip,this.onclick);
        if (top==true)
              btn.setAttribute("top","true")
}

config.macros.jump.onclick = function(e)
{
        if (!e) var e = window.event;
        var theTarget = resolveTarget(e);
        var top = theTarget.getAttribute("top");
	var popup = Popup.create(this);
	if(popup)
		{
                 if(top=="true")
                                {createTiddlyButton(createTiddlyElement(popup,"li"),'Top ↑','Top of TW',config.macros.jump.top);
                                 createTiddlyElement(popup,"hr");}
		
		story.forEachTiddler(function(title,element) {
			createTiddlyLink(createTiddlyElement(popup,"li"),title,true);
			});
                }
	Popup.show(popup,false);
	e.cancelBubble = true;
	if (e.stopPropagation) e.stopPropagation();
	return false;
}

config.macros.jump.top = function()
{
       window.scrollTo(0,0);
}
//}}}
//end JumpMacro code

//utility functions
//{{{
Popup.show = function(unused,slowly)
{
	var curr = Popup.stack[Popup.stack.length-1];
	var rootLeft = findPosX(curr.root);
	var rootTop = findPosY(curr.root);
	var rootHeight = curr.root.offsetHeight;
	var popupLeft = rootLeft;
	var popupTop = rootTop + rootHeight;
	var popupWidth = curr.popup.offsetWidth;
	var winWidth = findWindowWidth();
        if (isChild(curr.root,'hoverMenu'))
              var x = config.hoverMenu.settings.x;
        else
              var x = 0;
	if(popupLeft + popupWidth+x &gt; winWidth)
		popupLeft = winWidth - popupWidth -x;
        if (isChild(curr.root,'hoverMenu'))
  	        {curr.popup.style.right = x + "px";}
        else
                curr.popup.style.left = popupLeft + "px";
	curr.popup.style.top = popupTop + "px";
	curr.popup.style.display = "block";
	addClass(curr.root,"highlight");
	if(config.options.chkAnimate)
		anim.startAnimating(new Scroller(curr.popup,slowly));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
}

window.isChild = function(e,parentId) {
        while (e != null) {
                var parent = document.getElementById(parentId);
                if (parent == e) return true;
                e = e.parentNode;
                }
        return false;
};
//}}}


</pre>
</div>
<div title="HtmlJavascript" modifier="acarvalho" created="201208301409" modified="201501221203" tags="Administration excludeLists" server.title="HtmlJavascript" server.page.revision="201501221203" server.etag='"acarvalho_public/HtmlJavascript/2057214:74ec0909c66d60fb89b86002792e134be70ad617"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="5e363eb0ab5a1fc10ab416862204f3fdde328724">
<pre>http://htmljs.tiddlyspace.com/jquery.js
http://htmljs.tiddlyspace.com/htmljs-wikiupgrade.js
http://htmljs.tiddlyspace.com/htmljs-disqus
</pre>
</div>
<div title="IDE" modifier="acarvalho" created="201401242230" modified="201401242230" tags="Acronym Content" server.title="IDE" server.page.revision="201401242230" server.etag='"acarvalho_public/IDE/1636298:57eff289f1621ac595f56f0c6b44223e1978115d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6f847a82181759afe926cb668eb414bd787c6e64">
<pre>Integrated Development Environement
----
/%
@@color:#c4d6ed; ^^
Description: Integrated Development Environement
^^@@
%/</pre>
</div>
<div title="ImageMacro" modifier="YourName" created="201206281318" modified="202106180856" tags="TODO systemConfig" server.title="ImageMacro" server.page.revision="201305102046" server.etag='"acarvalho_public/ImageMacro/1211076:5b05e0f3331619f6f2db0654b5974f752172ef8e"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e25d26cd27e000356637c5d009f6e706cd3fdfed" changecount="3">
<pre>/***
|Name|ImageMacro|
|Created by|Andre' de Carvalho|
|Location|http://acarvalho.tiddlyspace.com/#ImageMacro|
|Version|1.1.1|
|Date|2021 06 18|
|Type|Macro|
|Description|A TiddlyWiki Macro to create configurable links to images.|

/%
Version history :
1.1.1 2021 06 18 : Corrected documentation
1.1.0 2013 05 10 : handling null parameters
%/

!!Example
&lt;&lt;Image "FL" "200" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
{{{
&lt;&lt;Image "FL" "200" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
}}}




or

&lt;&lt;Image "FR" "200" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
{{{
&lt;&lt;Image "FR" "200" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
}}}

or

&lt;&lt;Image "" "" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
{{{
&lt;&lt;Image "" "" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;
}}}

!!Installation
Import (or copy/paste) this tiddler into your document and tag it with "systemConfig".  For using size you need [[ImageSizePlugin|	http://www.TiddlyTools.com/#ImageSizePlugin]].

!!Code
***/
//{{{
version.extensions.Image= {major: 1, minor: 1 , revision: 1, date: new Date(2021,06,18)};
//Created by André de Carvalho
//}}}
//{{{
config.macros.Image = {};
config.macros.Image.handler= function(place,macroName,params) {
  /* Type : FL = float left, FR = float right, "" = no float */
   var type=params[0];
  /* Size : number = pixels (requires ImageSizePlugin), "" = no size */
   var size=params[1];
  /* Name : the name of the image file */
   var name=params[2];
  /* Path : the path of the image file (include end backslash) */
   var path = params[3];
  /* Prefix : optional prefix to be inserted between Path and FileName */
   var prefix = params[4];
  /* Postfix : optional postfix to be appended after FileName */
   var postfix = params[5];
  /* Caption : optional caption */
   var caption = params[6];

  var ini = "";
  var end = "";

  if (caption)
  {
    caption = "&lt;br&gt;@@padding:0.8em;@@@@color:#00f;^^"+caption+"^^@@";
  }
  else
  {
    caption = "";
  }

  switch(type)
  {
    case "FR":
      ini = "{{imgfloatright{[img";
      end = "]]"+caption+"}}}";
      break;
    case "FL":
      ini = "{{imgfloatleft{[img";
      end = "]]"+caption+"}}}";
      break;
    default:
      ini="[img";
      end = "]]";
  }

  if (size)
    ini = ini + "("+size+"px+,+)";

   ini = ini+"[";
   if (path)
     ini = ini+ path;
   if (prefix)
     ini = ini+ prefix;
   if (name)
     ini = ini+ name;
   if (postfix)
     ini = ini+ postfix;

   wikify(ini+end, place)
};
//}}}
 </pre>
</div>
<div title="ImageMacroPlugin" modifier="jon" created="201311111923" modified="201311111923" tags="excludeLists excludeSearch systemConfig" server.title="ImageMacroPlugin" server.page.revision="201311111923" server.etag='"tiddlyspace/ImageMacroPlugin/1521897:0b9f6078a42337da10a7fe10785ee664d5dcc31c"' server.workspace="bags/tiddlyspace" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" _hash="3f1696962a1dff3028ea1a4307d8b95c3b3ceb65">
<pre>/***
|''Name''|ImageMacroPlugin|
|''Version''|0.9.4|
|''Description''|Allows the rendering of svg images in a TiddlyWiki|
|''Author''|Osmosoft|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''Notes''|Currently only works in modern browsers (not IE)|
|''Requires''|BinaryTiddlersPlugin|
!Usage
{{{&lt;&lt;image SVG&gt;&gt;}}} will render the text of the tiddler with title SVG as an SVG image (but not in ie where it will fail silently)
!!Parameters
width/height: specify width/height parameters
link: make the image link to a given location
tiddlyLink: link to a tiddler

!Notes
Binary tiddlers in TiddlyWeb when passed through the wikifier will be shown as images.
eg. {{{&lt;&lt;view text wikified&gt;&gt;}}} on a binary tiddler will show the image.
{{{&lt;&lt;view fieldname image&gt;&gt;}}}
will render the value of the tiddler field 'fieldname' as an image. This field can contain a tid
{{{&lt;&lt;image SiteIcon&gt;&gt;}}}
will create an image tag where the tiddler has content type beginning image and not ending +xml
will attempt to create svg object in other scenarios
{{{&lt;&lt;image /photos/x.jpg&gt;&gt;}}}
will create an image tag with src /photos/x.jpg as long as there is not a tiddler called /photos/x.jpg in 
which case it will render that tiddler as an image. Note for the case of svg files it will attempt to render as an svg if possible via the image
tag. It doesn't embed the svg in the dom for security reasons as svg code can contain javascript.
!Code
***/
//{{{
(function($) {

var macro = config.macros.image = {
	shim: "/bags/common/tiddlers/shim",
	ieVersion: config.browser.isIE ? parseInt(config.browser.ieVersion[1], 10) : false,
	svgns: "http://www.w3.org/2000/svg",
	xlinkns: "http://www.w3.org/1999/xlink", 
	svgAvailable: document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"),
	_fixPrefix: 1,
	_external_cache: {},
	_image_tag_cache: {},
	_image_dimensions: {},
	locale: {
		badImage: "This image cannot be displayed."
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler){
		var imageSource = params[0];
		// collect named arguments
		var args = macro.getArguments(paramString, params);
		this.renderImage(place, imageSource, args);
	},
	init: function() {
		var startupImages = store.getTaggedTiddlers("systemImage");
		var place = $("&lt;div /&gt;").attr("id", "systemImageArea").appendTo("body").hide()[0];
		for(var i = 0; i &lt; startupImages.length; i++) {
			var image = startupImages[i];
			macro.renderImage(place, image.title, { idPrefix: "" });
		}
		var data = new Image();
		data.onload = function() {
			// note ie 8 only supports data uris up to 32k so cannot be relied on
			macro.supportsDataUris = this.width != 1 || this.height != 1 ? false : true;
			macro.supportsDataUris = macro.ieVersion &amp;&amp; macro.ieVersion &lt; 9 ? false : macro.supportsDataUris;
		};
		data.onerror = data.onload;
		data.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
	},
	refreshImage: function(src) {
		var elements = macro._image_tag_cache[src] ? macro._image_tag_cache[src] : [];
		if(macro._image_dimensions[src]) {
			macro._image_dimensions[src] = false;
		}
		for(var i = 0; i &lt; elements.length; i++) {
			var el = $(elements[i]);
			var newSrc = "%0?nocache=%1".format(src, Math.random());
			el.attr("src", newSrc); // force reload
		}
	},
	isBinaryImageType: function(contentType) {
		return (contentType &amp;&amp; contentType.indexOf("image") === 0 &amp;&amp;
			contentType.indexOf("+xml") != contentType.length - 4) ? true : false;
	},
	isImageTiddler: function(tiddler) {
		return macro.isSVGTiddler(tiddler) || macro.isBinaryImageTiddler(tiddler);
	},
	isSVGTiddler: function(tiddler) {
		var type = tiddler ? tiddler.fields['server.content-type'] : false;
		return type == "image/svg+xml";
	},
	isBinaryImageTiddler: function(tiddler) {
		return macro.isBinaryImageType(tiddler.fields['server.content-type']);
	},
	renderImage: function(place, imageSource, options) {
		var imageTiddler = store.getTiddler(imageSource);
		var container;
		var classes = ["image"];
		if(options.link) {
			classes = classes.concat(["imageLink", "externalLink"]);
			container = $("&lt;a /&gt;").attr("href", options.link).appendTo(place)[0];
		} else if(options.tiddlyLink) {
			classes.push("imageLink");
			container = createTiddlyLink(place, options.tiddlyLink, false);
		} else {
			container = $("&lt;span /&gt;").appendTo(place)[0];
		}
		$(container).addClass(classes.join(" "));

		options = options ? options : {};
		if(imageTiddler &amp;&amp; macro.isBinaryImageTiddler(imageTiddler)) { // handle the case where we have an image url
			return macro._renderBinaryImageTiddler(container, imageTiddler, options);
		} else if(imageTiddler){ // handle the case where we have a tiddler
			return macro._renderSVGTiddler(container, imageTiddler, options);
		} else { // we have a string representing a url
			return macro._renderBinaryImageUrl(container, imageSource, options);
		}
	},
	_renderAlternateText: function(container, options) {
		var img;
		var src = options.src || "";
		if(options.width &amp;&amp; options.height) {
			img = $("&lt;img /&gt;").attr("src", src).addClass("svgImageText").attr("width", options.width).
				attr("height", options.height).appendTo(container);
		}
		var alt = options.alt;
		if(img &amp;&amp; alt) {
			img.attr("alt", alt).attr("title", alt);
		} else if(alt) {
			$(container).addClass("svgImageText").text(alt);
		}
		macro._image_tag_cache[src] = img;
	},
	_renderSVGTiddler: function(place, tiddler, options) {
		if(!options) {
			options = {};
		}
		merge(options, { tiddler: tiddler, fix: true});

		if(macro.svgAvailable) {
			this._importSVG(place, options); // display the svg
		} else if(options.altImage) {
			var image = options.altImage;
			delete options.altImage;
			this._renderBinaryImageUrl(place, image, options);
		} else {
			this._renderAlternateText(place, options); // instead of showing the image show the alternate text.
		}
	},
	_renderBinaryImageTiddler: function(place, tiddler, options) {
		var resourceURI;
		var fields = tiddler.fields;
		if(fields["server.type"] == "tiddlyweb") { // construct an accurate url for the resource
			resourceURI = "%0/%1/tiddlers/%2".format(config.defaultCustomFields["server.host"],
				fields["server.workspace"], encodeURI(fields["server.title"]));
		} else { // guess the url for the resource
			resourceURI = tiddler.title;
		}
		var ctype = fields["server.content-type"] || tiddler.type;
		var text = tiddler.text;
		if(macro.supportsDataUris &amp;&amp; ctype &amp;&amp; text.indexOf("&lt;html") == -1) {
			var uri = "data:%0;base64,%1".format(ctype, text);
			options.src = resourceURI;
			return macro._renderBinaryImageUrl(place, uri, options);
		} else if(options.src) {
			return macro._renderBinaryImageUrl(place, options.src, options);
		} else {
			return macro._renderBinaryImageUrl(place, resourceURI, options);
		}
	},
	_renderImageTag: function(container, src, width, height, options) {
		var img;
		img = $("&lt;img /&gt;").appendTo(container);
		if(height) {
			img.attr("height", height);
		}
		if(width) {
			img.attr("width", width);
		}
		if(macro.ieVersion &amp;&amp; macro.ieVersion &lt; 7 &amp;&amp; macro.shim &amp;&amp; options.ie6png) {
			$(img).css({width: userW, height: userH,
					filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='%0', sizingMethod='scale')".format(src)
				}).attr("src", macro.shim);
		} else {
			img.attr("src", src);
		}
		if(!macro._image_tag_cache[options.srcUrl]) {
			macro._image_tag_cache[options.srcUrl] = [];
		}
		img = $(img).addClass(options.imageClass)[0];
		macro._image_tag_cache[options.srcUrl].push(img);
		return img;
	},
	_getDimensions: function(realDimensions, reqDimensions, preserve) {
		var w = realDimensions.width;
		var h = realDimensions.height;
		var reqh = reqDimensions.height;
		var reqw = reqDimensions.width;
		var finalw = w, finalh = h;
		var ratiow = reqw / w, ratioh = reqh / h;
		var scaledw = ratioh * w;
		var scaledh = ratiow * h;
		if(!reqw &amp;&amp; reqh) {
			finalw = scaledw;
			finalh = reqh;
		} else if(reqw &amp;&amp; !reqh) {
			finalw = reqw;
			finalh = scaledh;
		} else if(reqh &amp;&amp; reqw) {
			var preserveWidth = w &gt; h ? true : false;
			if(preserve) {
				if(preserveWidth &amp;&amp; scaledh &lt; reqh) {
					finalh = scaledh;
					finalw = reqw;
				} else {
					finalh = reqh;
					finalw = scaledw;
				}
			} else {
				finalw = reqw;
				finalh = reqh;
			}
		}
		return { width: parseInt(finalw, 10), height: parseInt(finalh, 10) };
	},
	_renderBinaryImageUrl: function(container, src, options) {
		var srcUrl = options.src ? options.src : src;
		srcUrl = srcUrl.indexOf("/") === -1 ? "/%0".format(srcUrl) : srcUrl; // for IE. 
		var image_dimensions = macro._image_dimensions[srcUrl];
		var image = new Image(); // due to weird scaling issues where you use just a width or just a height
		var createImageTag = function(dimensions, error) {
			if(error) {
				var altImage = options.altImage;
				if(altImage) {
					delete options.altImage;
					macro._renderBinaryImageUrl(container, altImage, options);
				} else {
					options.src = src;
					macro._renderAlternateText(container, options);
				}
			} else {
				var dim = macro._getDimensions(dimensions, { 
					width: options.width, height: options.height }, options.preserveAspectRatio);
				options.srcUrl = srcUrl;
				macro._renderImageTag(container, src, dim.width, dim.height, options);
			}
		};

		if(!image_dimensions) {
			image.onload = function() {
				var dimensions = { width: image.width, height: image.height};
				macro._image_dimensions[srcUrl] = dimensions;
				createImageTag(dimensions);
			};
			image.onerror = function() {
				createImageTag(null, true);
			};
			image.src = src;
		} else {
			createImageTag(image_dimensions);
		}
	},
	_generateIdPrefix: function(){
		return "twsvgfix_" + (this._fixPrefix++).toString() + "_";
	},
	_fixSVG: function(childNodes, idPrefix) {
		var urlPattern = /url\(\#([^\)]*)\)*/ig;
		var fixes = [
		{ attr: "id", pattern: /^(.*)$/ig },
		{ attr: "href", namespace: macro.xlinkns, pattern: /^#(.*)$/ig }
		];
		var url_fixes = ["filter", "fill", "mask", "stroke", "style"];
		for(var i = 0; i &lt; url_fixes.length; i++) {
			fixes.push({ attr: url_fixes[i], pattern: urlPattern });
		}
		for(var t = 0; t &lt; childNodes.length; t++) {
			var node = childNodes[t];
			for(var a = 0; a &lt; fixes.length; a++) {
				var fix = fixes[a];
				var attr = fix.attr;
				var ns = fix.namespace || "";
				if(node.hasAttributeNS &amp;&amp; node.hasAttributeNS(ns, attr)) {
					var v = node.getAttributeNS(ns, attr);
					fix.pattern.lastIndex = 0;
					var match = fix.pattern.exec(v);
					if(match) {
						// Make sure replacement string doesn't contain any single dollar signs
						var toReplace = match[1];
						if(toReplace.indexOf(idPrefix) !== 0 &amp;&amp; toReplace.indexOf("twglobal_") !== 0) {
							var replacement = (idPrefix + toReplace).replace("$", "$$$$"); 
							v = v.replace(match[1], replacement);
						}
						node.setAttributeNS(ns, attr,v);
					}
				}
			}
			var children = node.childNodes;
			if(children.length &gt; 0) {
				this._fixSVG(children, idPrefix);
			}
		}
	},
	_importSVG: function(place, options){
		options = options ? options : {};
		var svgDoc, tiddlerText = options.tiddler.text;
		if (window.DOMParser) {
			svgDoc = new DOMParser().parseFromString(tiddlerText, "application/xml").documentElement;
			var idPrefix = options.idPrefix || this._generateIdPrefix();
			this._fixSVG([svgDoc], idPrefix);
			var el = document.importNode(svgDoc, true);
			var svgHolder = document.createElementNS(macro.svgns,"svg");
			var width = options.width;
			var height = options.height;
			if(width || height) {
				if(width &amp;&amp; height) { // set view box of containing svg element based on the svg viewbox and width and height.
					var viewBox = el.getAttribute("viewBox");
					var topLeft = "0 0";
					if(viewBox) {
						topLeft = viewBox.replace(/([0-9]*) +([0-9]*) +([0-9]*) +([0-9]*) */gi,"$1 $2");
					}
					svgHolder.setAttributeNS(macro.svgns, "viewBox", "0 0 %0 %1".format(width, height));
				} else {
					if(!width) {
						width = el.getAttribute("width");
					}
					if(!height) {
						height = el.getAttribute("height");
					}
				}
				svgHolder.setAttribute("width", width);
				svgHolder.setAttribute("height", height);

				el.setAttribute("width", "100%");
				el.setAttribute("height", "100%");
				svgHolder.setAttribute("class", "svgImage svgIcon %0".format(options.imageClass || ""));
				svgHolder.appendChild(el);
				place.appendChild(svgHolder);
			}
			else {
				var existing = el.className ? el.className.baseVal : "";
				el.setAttribute("class","svgImage %0".format(existing));
				place.appendChild(el);
			}
			// if a tiddler attribute is set this is read as a link
			$("[tiddler], [tiddlyLink]", place).attr("refresh", "link").click(function(ev) {
				var tiddler = $(ev.target).attr("tiddlyLink");
				if(tiddler) {
					story.displayTiddler(ev.target, tiddler);
				}
			});
		}
	},
	getArguments: function(paramString, params) {
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var options = {};
		for(var id in args) {
			if(true) {
				var p = args[id];
				if(id == "def") {
					options[id] = p;
				} else {
					options[id] = p[0];
				}
			}
		}
		var width = isNaN(params[1]) ? false : parseInt(params[1], 10);
		var height = isNaN(params[2]) ? false : parseInt(params[2], 10);

		options.width = macro.lookupArgument(options, "width", width);
		options.height = macro.lookupArgument(options, "height", height);
		options.preserveAspectRatio = args.preserveAspectRatio &amp;&amp; 
			args.preserveAspectRatio[0] == "yes" ? true : false;
		options.tiddlyLink = macro.lookupArgument(options, "tiddlyLink", false);
		options.link = macro.lookupArgument(options, "link", false);
		return options;
	},
	lookupArgument: function(args, id, ifEmpty) {
		return args[id] ? args[id] : ifEmpty;
	}
};

// update views
var _oldwikifiedview = config.macros.view.views.wikified;
// update wikifier to check tiddler type before rendering
merge(config.macros.view.views, {
	wikified: function(value, place, params, wikifier, paramString, tiddler) {
		if(macro.isImageTiddler(tiddler) &amp;&amp; params[0] == "text") {
			var newplace = $("&lt;div /&gt;").addClass("wikifiedImage").appendTo(place)[0];
			macro.renderImage(newplace, tiddler.title, { alt: macro.locale.badImage });
		} else {
			_oldwikifiedview.apply(this, arguments);
		}
	},
	image: function(value, place, params, wikifier, paramString, tiddler) {
		// a field can point to another tiddler whereas text is the current tiddler.
		var title = params[0] == "text" ? tiddler.title : value;
		var args = macro.getArguments(paramString, params);
		macro.renderImage(place, title, args);
	}
});
config.shadowTiddlers.StyleSheetImageMacro = [".wikifiedImage svg, .wikifiedImage .image { width: 80%; }",
	".svgImageText { background-color:[[ColorPalette::Error]]; color:#ddd; display: inline-block; }",
	"span.svgImageText { display: inline-block; overflow: hidden; }"
].join("");
store.addNotification("StyleSheetImageMacro", refreshStyles);

})(jQuery);
//}}}</pre>
</div>
<div title="ImageSizePlugin" modifier="acarvalho" created="201206132135" modified="201206132135" tags="IconPackage systemConfig" server.title="ImageSizePlugin" server.page.revision="201206132135" server.etag='"acarvalho_public/ImageSizePlugin/745454:6f77bcb16287b33d55aa14f41c1ec888b901b132"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="13c8232c837e0835c02c390266b369bba0db894f">
<pre>/***
|Name|ImageSizePlugin|
|Source|http://www.TiddlyTools.com/#ImageSizePlugin|
|Version|1.2.3|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|adds support for resizing images|
This plugin adds optional syntax to scale an image to a specified width and height and/or interactively resize the image with the mouse.
!!!!!Usage
&lt;&lt;&lt;
The extended image syntax is:
{{{
[img(w+,h+)[...][...]]
}}}
where ''(w,h)'' indicates the desired width and height (in CSS units, e.g., px, em, cm, in, or %). Use ''auto'' (or a blank value) for either dimension to scale that dimension proportionally (i.e., maintain the aspect ratio). You can also calculate a CSS value 'on-the-fly' by using a //javascript expression// enclosed between """{{""" and """}}""". Appending a plus sign (+) to a dimension enables interactive resizing in that dimension (by dragging the mouse inside the image). Use ~SHIFT-click to show the full-sized (un-scaled) image. Use ~CTRL-click to restore the starting size (either scaled or full-sized).
&lt;&lt;&lt;
!!!!!Examples
&lt;&lt;&lt;
{{{
[img(100px+,75px+)[images/meow2.jpg]]
}}}
[img(100px+,75px+)[images/meow2.jpg]]
{{{
[&lt;img(34%+,+)[images/meow.gif]]
[&lt;img(21% ,+)[images/meow.gif]]
[&lt;img(13%+, )[images/meow.gif]]
[&lt;img( 8%+, )[images/meow.gif]]
[&lt;img( 5% , )[images/meow.gif]]
[&lt;img( 3% , )[images/meow.gif]]
[&lt;img( 2% , )[images/meow.gif]]
[img(  1%+,+)[images/meow.gif]]
}}}
[&lt;img(34%+,+)[images/meow.gif]]
[&lt;img(21% ,+)[images/meow.gif]]
[&lt;img(13%+, )[images/meow.gif]]
[&lt;img( 8%+, )[images/meow.gif]]
[&lt;img( 5% , )[images/meow.gif]]
[&lt;img( 3% , )[images/meow.gif]]
[&lt;img( 2% , )[images/meow.gif]]
[img(  1%+,+)[images/meow.gif]]
{{tagClear{
}}}
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2011.09.03 [1.2.3] bypass addStretchHandlers() if no '+' suffix is used (i.e., not resizable)
2010.07.24 [1.2.2] moved tip/dragtip text to config.formatterHelpers.imageSize object to enable customization
2009.02.24 [1.2.1] cleanup width/height regexp, use '+' suffix for resizing
2009.02.22 [1.2.0] added stretchable images
2008.01.19 [1.1.0] added evaluated width/height values
2008.01.18 [1.0.1] regexp for "(width,height)" now passes all CSS values to browser for validation
2008.01.17 [1.0.0] initial release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.ImageSizePlugin= {major: 1, minor: 2, revision: 3, date: new Date(2011,9,3)};
//}}}
//{{{
var f=config.formatters[config.formatters.findByField("name","image")];
f.match="\\[[&lt;&gt;]?[Ii][Mm][Gg](?:\\([^,]*,[^\\)]*\\))?\\[";
f.lookaheadRegExp=/\[([&lt;]?)(&gt;?)[Ii][Mm][Gg](?:\(([^,]*),([^\)]*)\))?\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg;
f.handler=function(w) {
	this.lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = this.lookaheadRegExp.exec(w.source)
	if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
		var floatLeft=lookaheadMatch[1];
		var floatRight=lookaheadMatch[2];
		var width=lookaheadMatch[3];
		var height=lookaheadMatch[4];
		var tooltip=lookaheadMatch[5];
		var src=lookaheadMatch[6];
		var link=lookaheadMatch[7];

		// Simple bracketted link
		var e = w.output;
		if(link) { // LINKED IMAGE
			if (config.formatterHelpers.isExternalLink(link)) {
				if (config.macros.attach &amp;&amp; config.macros.attach.isAttachment(link)) {
					// see [[AttachFilePluginFormatters]]
					e = createExternalLink(w.output,link);
					e.href=config.macros.attach.getAttachment(link);
					e.title = config.macros.attach.linkTooltip + link;
				} else
					e = createExternalLink(w.output,link);
			} else 
				e = createTiddlyLink(w.output,link,false,null,w.isStatic);
			addClass(e,"imageLink");
		}

		var img = createTiddlyElement(e,"img");
		if(floatLeft) img.align="left"; else if(floatRight) img.align="right";
		if(width||height) {
			var x=width.trim(); var y=height.trim();
			var stretchW=(x.substr(x.length-1,1)=='+'); if (stretchW) x=x.substr(0,x.length-1);
			var stretchH=(y.substr(y.length-1,1)=='+'); if (stretchH) y=y.substr(0,y.length-1);
			if (x.substr(0,2)=="{{")
				{ try{x=eval(x.substr(2,x.length-4))} catch(e){displayMessage(e.description||e.toString())} }
			if (y.substr(0,2)=="{{")
				{ try{y=eval(y.substr(2,y.length-4))} catch(e){displayMessage(e.description||e.toString())} }
			img.style.width=x.trim(); img.style.height=y.trim();
			if (stretchW||stretchH) config.formatterHelpers.addStretchHandlers(img,stretchW,stretchH);
		}
		if(tooltip) img.title = tooltip;

		// GET IMAGE SOURCE
		if (config.macros.attach &amp;&amp; config.macros.attach.isAttachment(src))
			src=config.macros.attach.getAttachment(src); // see [[AttachFilePluginFormatters]]
		else if (config.formatterHelpers.resolvePath) { // see [[ImagePathPlugin]]
			if (config.browser.isIE || config.browser.isSafari) {
				img.onerror=(function(){
					this.src=config.formatterHelpers.resolvePath(this.src,false);
					return false;
				});
			} else
				src=config.formatterHelpers.resolvePath(src,true);
		}
		img.src=src;
		w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
}

config.formatterHelpers.imageSize={
	tip: 'SHIFT-CLICK=show full size, CTRL-CLICK=restore initial size',
	dragtip: 'DRAG=stretch/shrink, '
}

config.formatterHelpers.addStretchHandlers=function(e,stretchW,stretchH) {
	e.title=((stretchW||stretchH)?this.imageSize.dragtip:'')+this.imageSize.tip;
	e.statusMsg='width=%0, height=%1';
	e.style.cursor='move';
	e.originalW=e.style.width;
	e.originalH=e.style.height;
	e.minW=Math.max(e.offsetWidth/20,10);
	e.minH=Math.max(e.offsetHeight/20,10);
	e.stretchW=stretchW;
	e.stretchH=stretchH;
	e.onmousedown=function(ev) { var ev=ev||window.event;
		this.sizing=true;
		this.startX=!config.browser.isIE?ev.pageX:(ev.clientX+findScrollX());
		this.startY=!config.browser.isIE?ev.pageY:(ev.clientY+findScrollY());
		this.startW=this.offsetWidth;
		this.startH=this.offsetHeight;
		return false;
	};
	e.onmousemove=function(ev) { var ev=ev||window.event;
		if (this.sizing) {
			var s=this.style;
			var currX=!config.browser.isIE?ev.pageX:(ev.clientX+findScrollX());
			var currY=!config.browser.isIE?ev.pageY:(ev.clientY+findScrollY());
			var newW=(currX-this.offsetLeft)/(this.startX-this.offsetLeft)*this.startW;
			var newH=(currY-this.offsetTop )/(this.startY-this.offsetTop )*this.startH;
			if (this.stretchW) s.width =Math.floor(Math.max(newW,this.minW))+'px';
			if (this.stretchH) s.height=Math.floor(Math.max(newH,this.minH))+'px';
			clearMessage(); displayMessage(this.statusMsg.format([s.width,s.height]));
		}
		return false;
	};
	e.onmouseup=function(ev) { var ev=ev||window.event;
		if (ev.shiftKey) { this.style.width=this.style.height=''; }
		if (ev.ctrlKey)  { this.style.width=this.originalW; this.style.height=this.originalH; }
		this.sizing=false;
		clearMessage();
		return false;
	};
	e.onmouseout=function(ev) { var ev=ev||window.event;
		this.sizing=false;
		clearMessage();
		return false;
	};
}
//}}}</pre>
</div>
<div title="Implementing Static Analysis" modifier="acarvalho" created="201208241733" modified="201304121436" tags="Content Guideline TODO" server.title="Implementing Static Analysis" server.page.revision="201304121436" server.etag='"acarvalho_public/Implementing%20Static%20Analysis/1182994:da439907e62a67c213c072fd7df1e28c9781e36e"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d98a99df64033f6ed13de5331cccde4cde9c57d7">
<pre>[[Static Analysis]] implementation in an enterprise wide fashion is not too expensive but presents several risks. You will have a machine telling people they made mistakes... the machine shall better be right or it will quickly be labelled as non functioning and ignored. Also one thousand warnings are no warning at all... You shall carefully select your Static Analysis rules and Severity levels in order to assure important things are noticed and unimportant ones don't clutter analysis. Credibility of the tool analysis shall be your first concern. Start by classifying all occurrences at Info or Minor level then analyse some projects and start promoting the level of the more important and trustworthy ones.

Coverage of the static analysis tool shall be progressive, that is, first it shall warn only on indisputable occurrences that constitute a clear defect or violation. This is a way to establish the tool and motivate adherence and recognition of its importance.

Consider some goals for Static Analysis:
*It shall be a tool for programmers to evolve in their code quality
*It shall be considered an useful "automated reviewer" by every programmer
*it shall promote an healthy competitive quality referential among teams and projects
*It shall be a trusted and respected warning system

!!Analysis Targets
|Type|Description|Sub-type|Description|h
|Defects||||
|Conformance||Documentation||
|~|~|Naming||
|Anti-pattern||Metrics||
|~|~|Security||
|~|~|Performance||
|~|~|Guideline||

!!Occurrence severity
|Level|Meaning|Action|Override|h
|''Blocker''|Refers to occurrences that, almost always, represent a very severe problem.|Immediate action required. Show stopper.|Non overrideable.|
|''Critical''|Refers to occurrences that, almost always, represent a severe problem.|Immediate action required.|Non overrideable.|
|''Major''|Refers to occurrences that, almost always, represent a problem.|Action advisable.|Overrideable only with a case-by-case analysis and justification.|
|''Minor''|Refers to occurrences that, normally, represent a deviation from the desirable pattern.|No immediate action required.|Globally overrideable with a justification.|
|''Info''|Refers to occurrences that may or may not be a problem depending on the specific context.|No immediate action required.|Project decision on the relevance of the pattern may be taken at a global level.|

----
@@color:#c4d6ed; ^^
Description: practical guidelines in implementing Static Analysis
^^@@</pre>
</div>
<div title="Implementing Systematic Reuse" modifier="acarvalho" created="201304061843" modified="201412101537" tags="Content Guideline Reuse TODO" server.title="Implementing Systematic Reuse" server.page.revision="201412101537" server.etag='"acarvalho_public/Implementing%20Systematic%20Reuse/1993663:7302ae7c5801346084472b0c7620abe396aa55f5"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="cab8dadf3a600ca50da9ea6a60efd32e6fee6d86">
<pre>!An incremental approach
Implementing [[Systematic Reuse]] is an engineering improvement process, much like the ones performed to achieve maturity levels (CMMI for instance). This means that there are areas where you should invest first and that are pre-conditions to the more evolved ones. An incremental approach, where you progress in phases in your ability to perform and on the return of your performance, is, thus, recommended. 

Before you start you should access if your organization is ready for such an initiative.

"//It is believed that until CMM Level 3 ("Defined Process") is achieved, when the entire organization is able to follow an explicitly defined process, it is hard to systematically make sweeping process and technology changes. In particular, effective pervasive software reuse requires many, if not most, projects in the organization to follow compatible managed processes to create, support or reuse assets. CMM Level 3 is a significant indicator that the organization has achieved a process maturity and readiness for change to this level of formal multi-project coordination.//"
(…)
"//First and foremost, introducing systematic software reuse is a significant process improvement, driven by critical business need. The CMM is a process improvement framework that summarizes key guidelines about mature software process, which can be directly applied to improved reuse practice. The change to a set of concurrent, managed and supported multi-project creator/reuser process demands significant organization changes and standardized process throughout the organization.//"
Reuse Strategies [[CMM as a Framework for Adopting Systematic Reuse|http://martin.griss.com/pubs/obm10.htm]], Martin L. Griss, Object Magazine, March, 1998, pp. 60-62,69.

Also make sure that the effort, time and expected return of the investment is well understood by your top and middle management as medium-term support will be essential to achieve any significant goals. Accountancy, that is, the ability to objectively demonstrate profitability of the initiative, is essential to keep it running, and funded, on the medium-term.

Below we will propose a Reuse Maturity Model (RMM) that you may use to plan and evaluate your reuse improvement programme but first you shall determine your goals, targets and actors in this endeavour.

!Improvement targets, goals and actors
Reuse targets are not only, nor even mainly, software code assets. Reuse is easier towards abstraction and, as such, specifications, techniques, architectures, know-how and many other tangible and intangible assets shall be considered when planning [[Systematic Reuse]] implementation. Probably it is much more rewarding to start by reusing an [[archetype|Application Archetype]] catalogue or a [[filesystem and namespace guideline|Namespace and Filesystem Guidelines]] than a specific code library. Consider this when planning your move towards systematic reuse and consider that you shall start by removing [[reuse obstacles|Reuse Obstacles]].

The goals of the improvement programme are to remove obstacles and to promote reuse and to achieve better and better reuse levels across all your software development activities thus achieving the known [[reuse advantages|Reuse Advantages]].

Actors of this improvement process are each and every person involved in the development process from management and sales, through development teams to designers and quality assurance among many others. This must be seen as a company wide pervasive endeavour. Of course that management sponsorship is essential but also direct project management is a condition for reuse to succeed. The first is quite easy to get but the last one is harder. [[PM]]s are usually much more concerned with the short-term than with medium or long-term benefits they will not willingly accept to divert a few resources from the immediate project goals to a medium-term target unless that is planned and paid for in advance and they are also rewarded for future earnings. [[PM]]s like to reuse they do not like to produce for reuse.

!A Reuse Maturity Model (RMM)
|Stage|Description|h
|Individual|Individual reuse is the first stage. This is the personal reuse every programmer or analyst does.|
|Processual|Processual stage is the one where a mature software company has established development processes and provides structural templates for most of its work products. Mandatory guidelines for [[Namespace and Filesystem Guidelines]], for instance, start to be established|
|Methodological|At this stage a software company provides a full lifecycle [[meta-model|http://en.wikipedia.org/wiki/Metamodeling]] and promotes a "[[Single Version of the Truth|http://en.wikipedia.org/wiki/Single_Version_of_the_Truth]]", content templates and methodological orientation and examples that actively fight [[reuse obstacles|Reuse Obstacles]]. Coherent metrics on reuse start to be established and dedicated effort is allocated to promote reuse.|
|Systematic|[[Reuse by copy|Reuse by Reference]] is reduced and [[Continuous Improvement]] is promoted. Reuse profitability is established. Dissemination practices and infrastructures are put in place (see &lt;&lt;quote 'Conway´s law' 'Conway´s law'&gt;&gt;). Reuse is considered and performed across all phases. Dedicated and formal roles are established for reuse. Permanent and stable funding. Medium / long term planning.|
----
@@color:#c4d6ed; ^^
Description: Guidelines on implementing a Systematic Reuse improvement process.
^^@@</pre>
</div>
<div title="Independence (KM)" creator="AndreCarvalho" modifier="YourName" created="201707142113" modified="202006231139" tags="Content Concept KM" changecount="2">
<pre>On the [[Knowledge Management|KnowledgeManagement]] domain we consider ''independence'' the degree to which information and knowledge in an organization do not depend exclusively from individual persons and expertises.
----
See also [[Knowledge Management|KnowledgeManagement]]
----
/%
@@color:#c4d6ed; ^^
Description:  Independence concept on Knowledge Management
^^@@
%/</pre>
</div>
<div title="Information Hiding" modifier="AndreCarvalho" created="201206161507" modified="202007091045" tags="Concept Content" server.title="Information Hiding" server.page.revision="201501271446" server.etag='"acarvalho_public/Information%20Hiding/2064044:47873ec77d8b9d22774f223a9b6b7a3976dc765c"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6dcdd63b1e0a4420d54c763cbb45e6879889e242" changecount="1">
<pre>//The second (and better) scenario is modularized based on "design decisions." Parnas observes, "We propose instead that one begins with a list of difficult design decisions or design decisions which are likely to change. Each module is then designed to hide such a decision from the others." //

[[Abstraction]] gears towards comprehension
[[Encapsulation]] gears towards protection from outside interference
Information Hiding gears towards containment of design changes


* Edward V. Berard - Abstraction, Encapsulation and Information Hiding	[[[Berard]|BibliographyPage##Berard]]
* D.L. Parnas  - On the Criteria To Be Used in Decomposing Systems Into Modules, 1972 [[[Parnas 1972]|BibliographyPage##Parnas 1972]]
----
@@color:#c4d6ed; ^^
Description: Information hiding concept and references.
^^@@
</pre>
</div>
<div title="InlineJavascriptPlugin" modifier="acarvalho" created="201206141159" modified="201206141159" tags="DiscoveryPackage IconPackage MediaPackage ScrollbarPackage TaskPackage TidIDEPackage systemConfig" server.title="InlineJavascriptPlugin" server.page.revision="201206141159" server.etag='"acarvalho_public/InlineJavascriptPlugin/745923:d27abebb61ec26a7a9a74129c555d3559118db40"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e6eb7b04f212984224b56844ab61a2a0ca1c981e">
<pre>/***
|Name|InlineJavascriptPlugin|
|Source|http://www.TiddlyTools.com/#InlineJavascriptPlugin|
|Documentation|http://www.TiddlyTools.com/#InlineJavascriptPluginInfo|
|Version|1.9.6|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|Insert Javascript executable code directly into your tiddler content.|
''Call directly into TW core utility routines, define new functions, calculate values, add dynamically-generated TiddlyWiki-formatted output'' into tiddler content, or perform any other programmatic actions each time the tiddler is rendered.
!!!!!Documentation
&gt;see [[InlineJavascriptPluginInfo]]
!!!!!Revisions
&lt;&lt;&lt;
2010.12.15 1.9.6 allow (but ignore) type="..." syntax
|please see [[InlineJavascriptPluginInfo]] for additional revision details|
2005.11.08 1.0.0 initial release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.InlineJavascriptPlugin= {major: 1, minor: 9, revision: 6, date: new Date(2010,12,15)};

config.formatters.push( {
	name: "inlineJavascript",
	match: "\\&lt;script",
	lookahead: "\\&lt;script(?: type=\\\"[^\\\"]*\\\")?(?: src=\\\"([^\\\"]*)\\\")?(?: label=\\\"([^\\\"]*)\\\")?(?: title=\\\"([^\\\"]*)\\\")?(?: key=\\\"([^\\\"]*)\\\")?( show)?\\&gt;((?:.|\\n)*?)\\&lt;/script\\&gt;",
	handler: function(w) {
		var lookaheadRegExp = new RegExp(this.lookahead,"mg");
		lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = lookaheadRegExp.exec(w.source)
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var src=lookaheadMatch[1];
			var label=lookaheadMatch[2];
			var tip=lookaheadMatch[3];
			var key=lookaheadMatch[4];
			var show=lookaheadMatch[5];
			var code=lookaheadMatch[6];
			if (src) { // external script library
				var script = document.createElement("script"); script.src = src;
				document.body.appendChild(script); document.body.removeChild(script);
			}
			if (code) { // inline code
				if (show) // display source in tiddler
					wikify("{{{\n"+lookaheadMatch[0]+"\n}}}\n",w.output);
				if (label) { // create 'onclick' command link
					var link=createTiddlyElement(w.output,"a",null,"tiddlyLinkExisting",wikifyPlainText(label));
					var fixup=code.replace(/document.write\s*\(/gi,'place.bufferedHTML+=(');
					link.code="function _out(place,tiddler){"+fixup+"\n};_out(this,this.tiddler);"
					link.tiddler=w.tiddler;
					link.onclick=function(){
						this.bufferedHTML="";
						try{ var r=eval(this.code);
							if(this.bufferedHTML.length || (typeof(r)==="string")&amp;&amp;r.length)
								var s=this.parentNode.insertBefore(document.createElement("span"),this.nextSibling);
							if(this.bufferedHTML.length)
								s.innerHTML=this.bufferedHTML;
							if((typeof(r)==="string")&amp;&amp;r.length) {
								wikify(r,s,null,this.tiddler);
								return false;
							} else return r!==undefined?r:false;
						} catch(e){alert(e.description||e.toString());return false;}
					};
					link.setAttribute("title",tip||"");
					var URIcode='javascript:void(eval(decodeURIComponent(%22(function(){try{';
					URIcode+=encodeURIComponent(encodeURIComponent(code.replace(/\n/g,' ')));
					URIcode+='}catch(e){alert(e.description||e.toString())}})()%22)))';
					link.setAttribute("href",URIcode);
					link.style.cursor="pointer";
					if (key) link.accessKey=key.substr(0,1); // single character only
				}
				else { // run script immediately
					var fixup=code.replace(/document.write\s*\(/gi,'place.innerHTML+=(');
					var c="function _out(place,tiddler){"+fixup+"\n};_out(w.output,w.tiddler);";
					try	 { var out=eval(c); }
					catch(e) { out=e.description?e.description:e.toString(); }
					if (out &amp;&amp; out.length) wikify(out,w.output,w.highlightRegExp,w.tiddler);
				}
			}
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	}
} )
//}}}

// // Backward-compatibility for TW2.1.x and earlier
//{{{
if (typeof(wikifyPlainText)=="undefined") window.wikifyPlainText=function(text,limit,tiddler) {
	if(limit &gt; 0) text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}
//}}}

// // GLOBAL FUNCTION: $(...) -- 'shorthand' convenience syntax for document.getElementById()
//{{{
if (typeof($)=='undefined') { function $(id) { return document.getElementById(id.replace(/^#/,'')); } }
//}}}</pre>
</div>
<div title="InlineJavascriptPluginInfo" modifier="acarvalho" created="201206141159" modified="201206141159" tags="pluginInfo" server.title="InlineJavascriptPluginInfo" server.page.revision="201206141159" server.etag='"acarvalho_public/InlineJavascriptPluginInfo/745924:429e8b7055b76c5e9f95745c9a8820683d785c99"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6c67b6c4086ba25b82d75e2d32ae3c8ffc8eedb6">
<pre>/***
|Name|InlineJavascriptPluginInfo|
|Source|http://www.TiddlyTools.com/#InlineJavascriptPlugin|
|Documentation|http://www.TiddlyTools.com/#InlineJavascriptPluginInfo|
|Version|1.9.6|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|documentation|
|Description|Documentation for InlineJavascriptPlugin|
''Call directly into TW core utility routines, define new functions, calculate values, add dynamically-generated TiddlyWiki-formatted output'' into tiddler content, or perform any other programmatic actions each time the tiddler is rendered.
!!!!!Usage
&lt;&lt;&lt;
This plugin adds wiki syntax for surrounding tiddler content with {{{&lt;script&gt;}}} and {{{&lt;/script&gt;}}} markers, so that it can be recognized as embedded javascript code.  When a tiddler is rendered, the plugin automatically invokes any embedded scripts, which can be used to construct and return dynamically-generated output that is inserted into the tiddler content.
{{{
&lt;script type="..." src="..." label="..." title="..." key="..." show&gt;
	/* javascript code goes here... */
&lt;/script&gt;
}}}
All parameters are //optional//.    When the ''show'' keyword is used, the plugin will also include the script source code in the output that it displays in the tiddler.  This is helpful when creating examples for documentation purposes (such as used in this tiddler!)

__''Deferred execution from an 'onClick' link''__
&lt;script label="click here" title="mouseover tooltip text" key="X" show&gt;
	/* javascript code goes here... */
	alert('you clicked on the link!');
&lt;/script&gt;
By including a {{{label="..."}}} parameter in the initial {{{&lt;script&gt;}}} marker, the plugin will create a link to an 'onclick' script that will only be executed when that specific link is clicked, rather than running the script each time the tiddler is rendered.  You may also include a {{{title="..."}}} parameter to specify the 'tooltip' text that will appear whenever the mouse is moved over the onClick link text, and a {{{key="X"}}} parameter to specify an //access key// (which must be a //single// letter or numeric digit only).

__''Loading scripts from external source files''__
&lt;script src="URL" show&gt;
	/* optional javascript code goes here... */
&lt;/script&gt;You can also load javascript directly from an external source URL, by including a src="..." parameter in the initial {{{&lt;script&gt;}}} marker (e.g., {{{&lt;script src="demo.js"&gt;&lt;/script&gt;}}}).  This is particularly useful when incorporating third-party javascript libraries for use in custom extensions and plugins.  The 'foreign' javascript code remains isolated in a separate file that can be easily replaced whenever an updated library file becomes available.

In addition to loading the javascript from the external file, you can also use this feature to invoke javascript code contained within the {{{&lt;script&gt;...&lt;/script&gt;}}} markers.  This code is invoked //after// the external script file has been processed, and can make immediate use of the functions and/or global variables defined by the external script file.
&gt;Note: To ensure that your javascript functions are always available when needed, you should load the libraries from a tiddler that is rendered as soon as your TiddlyWiki document is opened, such as MainMenu.  For example: put your {{{&lt;script src="..."&gt;&lt;/script&gt;}}} syntax into a separate 'library' tiddler (e.g., LoadScripts), and then add {{{&lt;&lt;tiddler LoadScripts&gt;&gt;}}} to MainMenu so that the library is loaded before any other tiddlers that rely upon the functions it defines. 
&gt;
&gt;Normally, loading external javascript in this way does not produce any direct output, and should not have any impact on the appearance of your MainMenu.  However, if your LoadScripts tiddler contains notes or other visible content, you can suppress this output by using 'inline CSS' in the MainMenu, like this: {{{@@display:none;&lt;&lt;tiddler LoadScripts&gt;&gt;@@}}}
&lt;&lt;&lt;
!!!!!Creating dynamic tiddler content and accessing the ~TiddlyWiki DOM
&lt;&lt;&lt;
An important difference between TiddlyWiki inline scripting and conventional embedded javascript techniques for web pages is the method used to produce output that is dynamically inserted into the document: in a typical web document, you use the {{{document.write()}}} (or {{{document.writeln()}}}) function to output text sequences (often containing HTML tags) that are then rendered when the entire document is first loaded into the browser window.

However, in a ~TiddlyWiki document, tiddlers (and other DOM elements) are created, deleted, and rendered "on-the-fly", so writing directly to the global 'document' object does not produce the results you want (i.e., replacing the embedded script within the tiddler content), and instead will //completely replace the entire ~TiddlyWiki document in your browser window (which is clearly not a good thing!)//.  In order to allow scripts to use {{{document.write()}}}, the plugin automatically converts and buffers all HTML output so it can be safely inserted into your tiddler content, immediately following the script.

''Note that {{{document.write()}}} can only be used to output "pure HTML" syntax.  To produce //wiki-formatted// output, your script should instead return a text value containing the desired wiki-syntax content'', which will then be automatically rendered immediately following the script.  If returning a text value is not sufficient for your needs, the plugin also provides an automatically-defined variable, 'place', that gives the script code ''direct access to the //containing DOM element//'' into which the tiddler output is being rendered.  You can use this variable to ''perform direct DOM manipulations'' that can, for example:
* generate wiki-formatted output using {{{wikify("...content...",place)}}}
* vary the script's actions based upon the DOM element in which it is embedded
* access 'tiddler-relative' DOM information using {{{story.findContainingTiddler(place)}}}
Note:
''When using an 'onclick' script, the 'place' element actually refers to the onclick //link text// itself, instead of the containing DOM element.''  This permits you to directly reference or modify the link text to reflect any 'stateful' conditions that might set by the script.  To refer to the containing DOM element from within an 'onclick' script, you can use "place.parentNode" instead.
&lt;&lt;&lt;
!!!!!Instant "bookmarklets"
&lt;&lt;&lt;
You can also use an 'onclick' link to define a "bookmarklet": a small piece of javascript that can be ''invoked directly from the browser without having to be defined within the current document.''  This allows you to create 'stand-alone' commands that can be applied to virtually ANY TiddlyWiki document... even remotely-hosted documents that have been written by others!!  To create a bookmarklet, simply define an 'onclick' script and then grab the resulting link text and drag-and-drop it onto your browser's toolbar (or right-click and use the 'bookmark this link' command to add it to the browser's menu).

Notes:
*When writing scripts intended for use as bookmarklets, due to the ~URI-encoding required by the browser, ''you cannot not use ANY double-quotes (") within the bookmarklet script code.''
*All comments embedded in the bookmarklet script must ''use the fully-delimited {{{/* ... */}}} comment syntax,'' rather than the shorter {{{//}}} comment syntax.
*Most importantly, because bookmarklets are invoked directly from the browser interface and are not embedded within the TiddlyWiki document, there is NO containing 'place' DOM element surrounding the script.  As a result, ''you cannot use a bookmarklet to generate dynamic output in your document,''  and using {{{document.write()}}} or returning wiki-syntax text or making reference to the 'place' DOM element will halt the script and report a "Reference Error" when that bookmarklet is invoked.  
Please see [[InstantBookmarklets]] for many examples of 'onclick' scripts that can also be used as bookmarklets.
&lt;&lt;&lt;
!!!!!Special reserved function name
&lt;&lt;&lt;
The plugin 'wraps' all inline javascript code inside a function, {{{_out()}}}, so that any return value you provide can be correctly handled by the plugin and inserted into the tiddler.  To avoid unpredictable results (and possibly fatal execution errors), this function should never be redefined or called from ''within'' your script code.
&lt;&lt;&lt;
!!!!!$(...) 'shorthand' function
&lt;&lt;&lt;
As described by Dustin Diaz [[here|http://www.dustindiaz.com/top-ten-javascript/]], the plugin defines a 'shorthand' function that allows you to write:
{{{
$(id)
}}}
in place of the normal standard javascript syntax:
{{{
document.getElementById(id)
}}}
This function is provided merely as a convenience for javascript coders that may be familiar with this abbreviation, in order to allow them to save a few bytes when writing their own inline script code.
&lt;&lt;&lt;
!!!!!Examples
&lt;&lt;&lt;
simple dynamic output:
&gt;&lt;script show&gt;
	document.write("The current date/time is: "+(new Date())+"&lt;br&gt;");
	return "link to current user: [["+config.options.txtUserName+"]]\n";
&lt;/script&gt;
dynamic output using 'place' to get size information for current tiddler:
&gt;&lt;script show&gt;
	if (!window.story) window.story=window;
	var title=story.findContainingTiddler(place).getAttribute("tiddler");
	var size=store.getTiddlerText(title).length;
	return title+" is using "+size+" bytes";
&lt;/script&gt;
dynamic output from an 'onclick' script, using {{{document.write()}}} and/or {{{return "..."}}}
&gt;&lt;script label="click here" show&gt;
	document.write("&lt;br&gt;The current date/time is: "+(new Date())+"&lt;br&gt;");
	return "link to current user: [["+config.options.txtUserName+"]]\n";
&lt;/script&gt;
creating an 'onclick' button/link that accesses the link text AND the containing tiddler:
&gt;&lt;script label="click here" title="clicking this link will show an 'alert' box" key="H" show&gt;
	if (!window.story) window.story=window;
	var txt=place.firstChild.data;
	var tid=story.findContainingTiddler(place).getAttribute('tiddler');
	alert('Hello World!\nlinktext='+txt+'\ntiddler='+tid);
&lt;/script&gt;
dynamically setting onclick link text based on stateful information:
&gt;{{block{
{{{
&lt;script label="click here"&gt;
	/* toggle "txtSomething" value */
	var on=(config.txtSomething=="ON");
	place.innerHTML=on?"enable":"disable";
	config.txtSomething=on?"OFF":"ON";
	return "\nThe current value is: "+config.txtSomething;
&lt;/script&gt;&lt;script&gt;
	/* initialize onclick link text based on current "txtSomething" value */
	var on=(config.txtSomething=="ON");
	place.lastChild.previousSibling.innerHTML=on?"disable":"enable";
&lt;/script&gt;
}}}
&lt;script label="click here"&gt;
	/* toggle "txtSomething" value */
	var on=(config.txtSomething=="ON");
	place.innerHTML=on?"enable":"disable";
	config.txtSomething=on?"OFF":"ON";
	return "\nThe current value is: "+config.txtSomething;
&lt;/script&gt;&lt;script&gt;
	/* initialize onclick link text based on current "txtSomething" value */
	var on=(config.txtSomething=="ON");
	place.lastChild.innerHTML=on?"enable":"disable";
&lt;/script&gt;
}}}
loading a script from a source url:
&gt;http://www.TiddlyTools.com/demo.js contains:
&gt;&gt;{{{function inlineJavascriptDemo() { alert('Hello from demo.js!!') } }}}
&gt;&gt;{{{displayMessage('InlineJavascriptPlugin: demo.js has been loaded');}}}
&gt;note: When using this example on your local system, you will need to download the external script file from the above URL and install it into the same directory as your document.
&gt;
&gt;&lt;script src="demo.js" show&gt;
	return "inlineJavascriptDemo() function has been defined"
&lt;/script&gt;
&gt;&lt;script label="click to invoke inlineJavascriptDemo()" key="D" show&gt;
	inlineJavascriptDemo();
&lt;/script&gt;
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2010.12.15 1.9.6 allow (but ignore) type="..." syntax
2009.04.11 1.9.5 pass current tiddler object into wrapper code so it can be referenced from within 'onclick' scripts
2009.02.26 1.9.4 in $(), handle leading '#' on ID for compatibility with JQuery syntax
2008.06.11 1.9.3 added $(...) function as 'shorthand' for document.getElementById()
2008.03.03 1.9.2 corrected fallback declaration of wikifyPlainText() (fixes Safari "parse error")
2008.02.23 1.9.1 in onclick function, use string instead of array for 'bufferedHTML' (fixes IE errors)
2008.02.21 1.9.0 output from 'onclick' scripts (return value or document.write() calls) are now buffered and rendered into into a span following the script.  Also, added default 'return false' handling if no return value provided (prevents HREF from being triggered -- return TRUE to allow HREF to be processed).  Thanks to Xavier Verges for suggestion and preliminary code.
2008.02.14 1.8.1 added backward-compatibility for use of wikifyPlainText() in TW2.1.3 and earlier
2008.01.08 [*.*.*] plugin size reduction: documentation moved to ...Info tiddler
2007.12.28 1.8.0 added support for key="X" syntax to specify custom access key definitions
2007.12.15 1.7.0 autogenerate URI encoded HREF on links for onclick scripts.  Drag links to browser toolbar to create bookmarklets.  IMPORTANT NOTE: place is NOT defined when scripts are used as bookmarklets.  In addition, double-quotes will cause syntax errors.  Thanks to PaulReiber for debugging and brainstorming.
2007.11.26 1.6.2 when converting "document.write()" function calls in inline code, allow whitespace between "write" and "(" so that "document.write ( foobar )" is properly converted.
2007.11.16 1.6.1 when rendering "onclick scripts", pass label text through wikifyPlainText() to parse any embedded wiki-syntax to enable use of HTML entities or even TW macros to generate dynamic label text.
2007.02.19 1.6.0 added support for title="..." to specify mouseover tooltip when using an onclick (label="...") script
2006.10.16 1.5.2 add newline before closing '}' in 'function out_' wrapper.  Fixes error caused when last line of script is a comment.
2006.06.01 1.5.1 when calling wikify() on script return value, pass hightlightRegExp and tiddler params so macros that rely on these values can render properly
2006.04.19 1.5.0 added 'show' parameter to force display of javascript source code in tiddler output
2006.01.05 1.4.0 added support 'onclick' scripts.  When label="..." param is present, a button/link is created using the indicated label text, and the script is only executed when the button/link is clicked.  'place' value is set to match the clicked button/link element.
2005.12.13 1.3.1 when catching eval error in IE, e.description contains the error text, instead of e.toString().  Fixed error reporting so IE shows the correct response text.  Based on a suggestion by UdoBorkowski
2005.11.09 1.3.0 for 'inline' scripts (i.e., not scripts loaded with src="..."), automatically replace calls to 'document.write()' with 'place.innerHTML+=' so script output is directed into tiddler content.  Based on a suggestion by BradleyMeck
2005.11.08 1.2.0 handle loading of javascript from an external URL via src="..." syntax
2005.11.08 1.1.0 pass 'place' param into scripts to provide direct DOM access 
2005.11.08 1.0.0 initial release
&lt;&lt;&lt;</pre>
</div>
<div title="InternetPage" creator="YourName" modifier="YourName" created="201808240941" modified="202110211235" tags="Content" changecount="17">
<pre>The Internet is not what it used to be. It was taken by scams, advertisement, sales and stupid pseudo-social applications that completely obfuscate everything else.
There is, however, some noble resistance. 

{{tw_ttoc{}}}

!General
General purpose links

* [[Wikipedia|https://www.wikipedia.org]] - The Free Encyclopedia
* [[Medium|https://medium.com/]] - Read, write and share stories that matter
* [[Increment|https://increment.com/]] - A print and digital magazine about how teams build and operate software systems at scale.

!Social
* [[Crítica|https://criticanarede.com/]] - A Crítica é uma publicação dedicada à filosofia, fundada em 1997 por Desidério Murcho. Recebe cerca de 100 mil leitores por mês.

!Archives
Archive web sites where we can find old (sometimes invaluable and unsurpassed) things
* [[Wayback Machine|https://web.archive.org/]] - The Internet Archive - Explore more than 624 billion web pages saved over time...
* [[bitsavers|http://bitsavers.org/]] - A personal archive worth a visit...
* [[www.oldapps.com|https://web.archive.org/web/20210515053706/https://www.oldapps.com/]] - Essential to fight nowadays "programmed obsolescence" obscenity.

!Search engines
Web search engines non advertising and sell oriented
* [[swisscows|https://swisscows.com/]] - Privacy safe search engine. A search engine that looks for what you seek instead of trying to sell you things.
* [[Ecosia|https://www.ecosia.org/]] - The search engine that plants trees.

!Indexers
Index engines for publications
* [[Cornell University's arXiv|https://arxiv.org/multi?group=grp_cs&amp;%2Fform=Form+Interface]] - Computer Science search form
* [[The Index of Information Systems Journals|http://lamp.infosys.deakin.edu.au/journals/]] - Published by Deakin University

!Finance
* [[GoParity|https://goparity.com]] - ~GoParity is an online investment platform connecting private and institutional investors with projects that are in line with the [[United Nations' Sustainable Development Goals (SDGs)|https://sdgs.un.org/goals]]. We operate based on a crowd-lending business model – in which our community of investors pool their funds together in order to lend collectively to specific projects.
----
~~See also: [[Privacy page|PrivacyPage]]~~
----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: Thoughts about the Internet and selected interesting resources that may be found there
^^@@
%/</pre>
</div>
<div title="KM" creator="YourName" modifier="YourName" created="201709101005" modified="201709101008" tags="Content Acronym" changecount="3">
<pre>Knowledge Management
"//Knowledge management (KM) is the process of creating, sharing, using and managing the knowledge and information of an organisation. It refers to a multidisciplinary approach to achieving organisational objectives by making the best use of knowledge.//"
From [[Wikipedia|https://en.wikipedia.org/wiki/Knowledge_management]]
----
See: KnowledgeManagement
----
/%
@@color:#c4d6ed; ^^
Description: Knowledge Management
^^@@
%/</pre>
</div>
<div title="KM Development" creator="YourName" modifier="YourName" created="202107271317" modified="202107271322" tags="Content KM TODO" changecount="3">
<pre>&lt;&lt;quote 'Standing on the shoulders of giants' 'Standing on the shoulders of giants'&gt;&gt;
In the development dimension we want to take every opportunity to improve and expand the available knowledge. For this agile tools are essential as those opportunities almost always emerge during other tasks and, if the effort required to utilize them is too much, people will stick to the task at hands and miss the opportunity. A system that promotes small but &lt;&lt;quote 'continuous incremental improvements' 'Continuous Improvement (KM)'&gt;&gt; to information and knowledge is the one that will prosper.

TODO:
----
Back to [[KnowledgeManagement]]
See also : [[KM Production]] [[KM Retrieval]] [[KM Storage]]
----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="KM Production" creator="YourName" modifier="YourName" created="202005091032" modified="202104131810" tags="Content KM TODO" changecount="10">
<pre>The knowledge production is a multi-faceted continuous task that must be performed in very different ways and systems. The "central repository" idea is wrong and will not cope with mutating needs that Knowledge Management area always faces.
The desired centralization shall be achieved through our proposed [[technical stack|KM Technical Stack]] and, especially, with the Search &amp; Index and Relationship pillars as their role is to provide a centralized and searchable access point to knowledge. This is the way to make &lt;&lt;quote 'available' 'Availability (KM)'&gt;&gt; the disperse and in multiple format and storages knowledge.

Make no mistake, in an organization, data will always be produced in a variety of formats and supports, trying to reduce that to a single format and repository is futile and doomed to failure.
The right approach to deal with that unavoidable dispersion is to implement the [[three technical stack pillars|KM Technical Stack]] in a way that allows them to cover the full data landscape and work as a central entry point to locate and access the available knowledge. That is, in a way that promotes our goals of &lt;&lt;quote 'availability' 'Availability (KM)'&gt;&gt;, &lt;&lt;quote 'continuity' 'Continuity (KM)'&gt;&gt;, &lt;&lt;quote 'independence' 'Independence (KM)'&gt;&gt; and &lt;&lt;quote 'Continuous Improvement' 'Continuous Improvement (KM)'&gt;&gt;.

This dispersion is also required by the agility needed in knowledge production. There shall be no obstacles to knowledge production, that is, any knowledge is good, no matter its format, as long as it is able to be integrated in in our stack and, as such, made &lt;&lt;quote 'available' 'Availability (KM)'&gt;&gt;.

''In this context the first and foremost requirement for knowledge production is that it is made in an externally (no silos) indexable, searchable and retrievable way.'' No other requirements shall be put as they will turn into obstacles to knowledge production. Of course that guidelines to ease classification and improve retrievability and content quality and maintainability are not only allowed but desirable.

So, as most of system designs should, we will start by identifying our data sources and model.
!!Books, Articles, Papers, Manuals, Standards and other written references
A ''Library'' is, still, the best knowledge base available. If you properly index its contents, making it &lt;&lt;quote 'available' 'Availability (KM)'&gt;&gt;, you will have a very powerful tool to promote better, informed, choices and generally increase the quality of your results and your team's potential.
TODO: Faceted search, semantic clustering, structures, tags, metadata

!! Organizational operational data
!! Technical Case Studies
!! White papers
!! Wikies and sites
!! Internal documents
Internal documents like guidelines, process definitions and even project documentation shall be great sources of information if properly indexed. The main obstacle here may be confidentiality issues and internal disclosure policies. 


----
Back to [[KnowledgeManagement]]
See also : [[KM Storage]] [[KM Retrieval]] [[KM Development]]
----
/%
@@color:#c4d6ed; ^^
Description: Knowledge Production requirements and considerations
^^@@
%/</pre>
</div>
<div title="KM Retrieval" creator="YourName" modifier="YourName" created="202107271316" modified="202107271319" tags="Content KM TODO" changecount="2">
<pre>The retrieval ability is the best chance to achieve a continuous improvement of produced, stored and retrieved knowledge. It is also the retrieval ability that makes knowledge useful. Knowledge must be &lt;&lt;quote 'available' 'Availability (KM)'&gt;&gt; when needed if not it is just a waste of resources.

TODO:
----
Back to [[KnowledgeManagement]]
See also : [[KM Production]] [[KM Storage]] [[KM Development]]----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="KM Search and Index" creator="YourName" modifier="YourName" created="201709100912" modified="201809131035" tags="Content KM Guideline TODO" changecount="19">
<pre>From the venerable [[Apache Lucene|https://lucene.apache.org/]] index engines have evolved a lot, even if its orientation today seems to focus more on web storefronts than information repositories there are plenty choices.
Two of the more important are [[ElasticSearch|https://www.elastic.co/products/elasticsearch]] and [[Solr|https://lucene.apache.org/solr/]]. Notice from the beginning that there are several integrated systems that perform all the functions of a search &amp; index system but, such integration carries constraints, namely on the authorization area, that may difficult a proper knowledge management approach.

{{tw_ttoc{}}}
!Main concern topics
!!Authentication and authorization
At this topic a difficult choice must be made, you are in the knowledge management context so your primary goal is to provide the existent information when it is needed to whoever needs it. This conflicts with the traditional confidentiality policies that hide everything until it be explicitly granted to a specific user.
Take notice that we are talking about an indexing and search system, actual access to the indexed data shall still be governed by its individual systems.
We propose a modified [[KM multi-level security]] model that is able to preserve some level of confidentiality without impairing knowledge share and &lt;&lt;quote 'availability' 'Availability (KM)'&gt;&gt;. One important aspect of this model is that it supposes that ''high sensitiveness information shall not be indexed in the system''.
!!Scalability and volume
Face it! If you do not intend to index the whole Internet you probably do not need an engine able to do so. For a normal organization the knowledge management data hardly classifies as "big data". The organization may produce "big data" but that is not the target of its knowledge management system, that "big data" shall be handled by dedicated systems with very different requirements and goals.
And remember that the more general your system is, less &lt;&lt;quote 'relevant' 'Relevance (KM)'&gt;&gt; will be its results.
!!Relevance
&lt;&lt;quote 'Recall' 'Recall (KM)'&gt;&gt; and &lt;&lt;quote 'Precision' 'Precision (KM)'&gt;&gt; are the two main measures for search engine results. 
The first is important if you need an exhaustive search, for instance in a legal data search system where you can not afford to miss a law on the subject you are working on. In these scenarios you will want to assure you return each and every possible result.
The second is more important when you have a large potential result set and must rank that set in order to present the most relevant results first. Results on the 99th page of a result set are not, usually, very useful because the user will not get there.
In the knowledge management field the index &amp; search system's major challenge is relevance. In crawling and parsing you must gather as much relevance signals as you can and these can range from placement and origin system's metadata to the typographical structure of indexed data. For this you may start with a generic parser but you will need to specialize it to specifically handle your repositories (data sources) if you want to maximize relevance.

!Anatomy of a search &amp; index block
A search&amp;index block has two autonomous processes: building the index and searching and retrieving results from the index.
In the first process (building the ''index'') you, typically, have three main steps: 
*''Crawling'': at this step you traverse your target information sources and get the data to be indexed. This will be files, web pages, database records or anything else you want to be able to search.
*''Parsing'': here you want to deal with all the formats in which data can be found and extract its content and meta-data to a common representation that is proper for indexing.
*''Indexing'': finally you give the common representation of each data item to the indexer engine to be incorporated in the index.

In the second process, ''Retrieval'', a user will define a search criteria that will be executed against the index and retrieve a result set that, hopefully, will be &lt;&lt;quote 'relevant' 'Relevance (KM)'&gt;&gt; and as &lt;&lt;quote 'complete' 'Recall (KM)'&gt;&gt; as possible.

!!Details on building the index
!!!Crawling
Crawling has, today, many challenges as we no more deal only with static web pages, files and data records. Crawling a Sharepoint site is not easy as we are facing dynamic content, ambiguous linking, multi-tenancy and many other difficulties that a classic http-crawler can't deal with. Crawling a [[CVS]] system like Git is a nightmare as you have to retrieve the entire repository before crawling.
Scalability is also an issue here as you are, potentially, talking about terabytes of data and, ideally, you should be able to handle it incrementally, by detecting change, and not with brute-force, by redoing it all every time.
!!!Parsing
The [[Apache Tika™|https://tika.apache.org/]] toolkit detects and extracts metadata and text from over a thousand different file types (such as PPT, XLS, and PDF).
!!!Indexing
Indexing is, typically, not problematic as modern engines, like Solr, already take care of it in a proper manner. The challenge here is to configure the index to increase &lt;&lt;quote 'precision' 'Precision (KM)'&gt;&gt; on the retrieval which is achieved by having as much &lt;&lt;quote 'relevance' 'Relevance (KM)'&gt;&gt; signals as possible and by structuring the data in order to rank matches by their relevance (for instance a match in a title is, typically,  more relevant than the same match in the text body). Remember that the quality of the results is determined at index time not at retrieval time: the retrieval system can not use data that is not indexed.

!!Details on searching the index
The retrieval system is what the users will see of the system... TODO:complete
----
Back to: [[KM Technical Stack]]
&lt;&lt;TiddlerToC&gt;&gt;
----
/%
@@color:#c4d6ed; ^^
Description: Guideline for implementing a KM Search &amp; Index stack
^^@@
%/</pre>
</div>
<div title="KM Storage" creator="YourName" modifier="YourName" created="202005091958" tags="Content KM TODO" changecount="1">
<pre>As we saw, in any real organization you will have multiple production and storage means for the information.
TODO:
----
Back to [[KnowledgeManagement]]
See also : [[KM Production]] [[KM Retrieval]] [[KM Development]]
----
/%
@@color:#c4d6ed; ^^
Description: KM Storage requirements and considerations
^^@@
%/</pre>
</div>
<div title="KM Technical Stack" creator="YourName" modifier="YourName" created="201709090947" modified="202005092040" tags="Content KM TODO" changecount="28">
<pre>!The context
In any organization information is dispersed among several different repositories. Think of CRM systems, shared filesystems, web sites, databases, and a lot of other possibilities.
The challenge here is, given the existence of information, how to access it, how to know that it exists and where to retrieve it when needed. And more, how to correlate that information in order to turn it into actionable knowledge (something that gives you more than what you already know).
!Three pillars
&lt;&lt;Image "FR" "320" "KM-ArchStack.jpg" "https://dl.dropbox.com/" "s/00rd1n42e9wo8ze/" "?dl=1" "KM architectural stack"&gt;&gt;
There are three systems that are essential for managing the information in order to transform it into knowledge. These work together and are complementary to each other.
!!Search and index
This is the most common. To have an indexing engine that access all or most of the repositories and indexes their content and an exploration system that is able to query those indexes is an unavoidable need for any organization with a reasonable volume of information. In [[KM Search and Index]] you may find a detailed proposal and guideline for implementing such a system.
But a mere word index that returns thousands of results for any search is not efficient.
!!Graph relationship

&lt;&lt;Image "FR" "320" "KM_ASK_tool.png" "https://dl.dropbox.com/" "s/g8brrykpw7cbujc/" "?dl=1" "ASKnowledge tool"&gt;&gt;

Relationship is what turns information into knowledge, actionable knowledge.
A proper relationship management tool is needed as it is the only way to cope with progressive ontology discovery and development. In my experience all other approaches fall short and fail in getting up with evolution and continuous improvement in an enterprise knowledge management endeavour.

&lt;&lt;Image "FL" "320" "km_tech.png" "https://dl.dropbox.com/" "s/6t8bx9u7x1wz3n0/" "?dl=1" "Tech area ontology"&gt;&gt;
&lt;&lt;Image "FR" "320" "km_tech_db.png" "https://dl.dropbox.com/" "s/ufhw6dpzl6jwn5n/" "?dl=1" "Tech area DB example"&gt;&gt;










Graph relationship and hyperlinking of information are also the proper ways to cope with progressive and cooperative building of knowledge. These techniques are ideal to foster collaboration and a continuous improvement and refining of knowledge. ''They are also the only ones that offer an open enough model to cope with ever evolving knowledge and its needs.'' They also provide the ideal medium to merge automatically gathered information and human produced one.
Their main strength is that, if properly designed, they provide an open and ever evolving [[ontology|https://en.wikipedia.org/wiki/Ontology_(information_science)]] keeping a strict normalization. The model expressiveness is not constrained //ab initio// but evolves and adapts to the emerging needs. 

!!Wiki repository
A napkin note is better than no note at all. 
We need a system that is able to handle quick notes, unstructured information and direct unobtrusive input and that is fit for progressive, incremental and collaborative information improvement. Wiki approach is the best for these goals. You can also use blogs and forums but consider that these tend to impair progressive improvement, as they are more cumulative than progressive information tools, and often produce a lot of noise around a subject. A topic may start in a forum but, as soon as it reaches some maturity, it shall be moved to a more structured and clean wiki page. Wikies are excellent tools for distilling, refining and cross-relating information and knowledge as they are intended, precisely, for collaborative and progressive iterative knowledge building. 
----
Back to: KnowledgeManagement
----
/%
@@color:#c4d6ed; ^^
Description: Knowledge Management technical stack presentation
^^@@
%/</pre>
</div>
<div title="KM multi-level security" creator="AndreCarvalho" modifier="AndreCarvalho" created="201709122150" modified="201709122236" tags="Content Guideline KM" changecount="6">
<pre>The [[KM]] system shall implement multi-level per area security.

The main goal of a knowledge management system is to provide access to information to those that need it. As such the system's focus shall not be to hide information but, otherwise, to expose it as much as possible. __High sensibility information shall not be indexed or handled by this system.__ Notice that the KM system does not provide access to the data itself this access is provided, and controlled, by the source systems.

The system shall implement a security mechanism that allows for lower Clearance Level users to know that information exists on upper Security Classification levels but not to know what that information is. This is devised so that a low clearance user can know that the information exists and ask for it to a higher cleared user when needed. These are known as ''Security Levels''.

The security system is built around security levels attributed to users and documents (or entire repositories) that when crossed determine one of four access levels that define what is returned to the user, from nothing to the full document title, link and context. Notice again that this system only returns, at most, the document's title, link and matching context, access to the document itself is governed by the source repository.

Security levels are called ''Security Clearance'' for users and ''Security Classification'' for documents/repositories. Notice that KM repositories may be a sub-set of physical repositories, that is, a [[CVS]] structured physical repository may be divided into two KM repositories one for source code (with lower classification) and the other for management information (with higher classification) for instance.

The system shall also consider that in organizations the users' clearance may depend and vary according to the user's and document's Business or Functional Area and, as such, documents belong to an area and users may have specific clearances per area.

Following is a draft list of security features that may help understand the proposed approach.

''~FT-10.010 - Security levels''
The system's security is based on a multi-level approach where access is granted to users with a clearance (security level) equal or above the security level classification of a document. 

''~FT-10.020 - Access levels''
The system implements 4 access levels that determine what is returned for each matching document:
1.	Nothing
2.	Count : a count of matched documents
3.	Title : the title and link of matched documents
4.	Full : the title, link and context of matched documents
The access level is determined in fall-back, that is, a user with Confidential clearance will have a nº3 (Title) access level over a Secret classified document and a nº2 (Count) access level over a Top Secret classified document. 

''~FT-10.030 - Security areas''
The users have a, potentially different, security clearance level per area. The documents belong to an area.
Areas are business areas for instance Technical, Commercial, etc. They may also be organizational departments if needed. 

''~FT-10.040 - Security defaults''
If a specific level is not attributed to a user in an area or to a document they default to the lowest level (Public).
The principle is that everything the system handles is Public until otherwise stated.
A document with no area is considered to belong to a General area. 

''~FT-10.050 - User security clearance''
Each user shall have a security clearance level defined for each available security area.
If not defined defaults will be used as per ~FT-10.030 - Security defaults . 

''~FT-10.060 - User security levels - persistence''
The system supports user security levels per area definition on LDAP.
Other methods shall be possible through adapter mechanisms. 

''~FT-10.070 - Document security classification levels''
Each indexed document has a security classification.
If not defined defaults will be used as per ~FT-10.030 - Security defaults .
The security classification is determined at crawling (may be revised at Parsing) and indexed along the document.
The security classification may be determined by repository configuration or by rules over the document's properties (path, type, etc.). 

''~FT-10.080 - Document area''
Each indexed document has an area.
If not defined defaults will be used as per ~FT-10.030 - Security defaults .
The area is determined at crawling (may be revised at Parsing) and indexed along the document.
The area may be determined by repository configuration or by rules over the document's properties (path, type, etc.). 

''~FT-10.090 - Search service''
The search service is responsible for applying access levels to each returned match set on each search.
The access level nº2 counts shall be performed by page and state:
//"There was x additional matches found but not available for your clearance."//


----
Back to: [[KM Search and Index]]
----
/%
@@color:#c4d6ed; ^^
Description: Security guideline for a knowledge management system
^^@@
%/</pre>
</div>
<div title="KnowledgeManagement" modifier="YourName" created="201406071349" modified="202107161411" tags="Content KM TODO" _hash="21be48507164d5c8a7edb95f8703a029ec6600be" changecount="38">
<pre>!Knowledge management is a broad and important organisational area.

"//Knowledge management (KM) is the process of creating, sharing, using and managing the knowledge and information of an organisation. It refers to a multidisciplinary approach to achieving organisational objectives by making the best use of knowledge.//"
From [[Wikipedia|https://en.wikipedia.org/wiki/Knowledge_management]]

{{tw_ttoc{}}}

In most areas nobody doubts that knowledge is the most valuable asset of an organization. In most organizations knowledge is, also, stored on individual and unique people. This puts several challenges in areas like &lt;&lt;quote 'availability' 'Availability (KM)'&gt;&gt;, &lt;&lt;quote 'continuity' 'Continuity (KM)'&gt;&gt;, &lt;&lt;quote 'independence' 'Independence (KM)'&gt;&gt;, &lt;&lt;quote 'Continuous Improvement' 'Continuous Improvement (KM)'&gt;&gt; and others.
But also KM is, still today, regarded with some suspicion by management deciders. This may be due to some unrealistic expectations that, naturally, were not met in past endeavours. This is prompting the appearance of several new buzz words like //knowledge sharing//, or the more selective usage of KM's sub-domains like //expertise locator systems (ELS)//.

As in many other areas of organizational evolution the first caution is to consider that the real challenge is in devising and maintaining a system, not on selecting some technologies. Throwing technology on a problem is not, usually, a solution, especially in a ''people-centric problem'' like knowledge management. This being said, technology plays an important role in a KM system but it __shall be selected to potentiate and promote the system not to derive the system from it__. Also, a proper and full KM system for a specific organization can hardly be supported by any single of-the-shelf solution.

We will propose a knowledge management system, with some focus on software organizations, and, in each proper place suggest, available or bespoke, technological solutions to support and promote that system.

!Organisational knowledge dimensions
Knowledge may be seen through four fundamental dimensions:
- production
- storage
- retrieval
- development
These are interconnected and interdependent:
*You may produce and store lots of knowledge but, if nobody is able to retrieve it when needed, it is useless. 
*You may produce lots of knowledge but if you do not store it it will fade away and eventually be lost. 
*You may put in place excellent storage and retrieval mechanisms but if nobody produces knowledge they are useless. 
*You may even be able to produce, store and retrieve knowledge but, if you are not able to maintain and update it, it will soon become obsolete and unmanageable.
These dimensions must be considered along __each and every step__ of the knowledge management process.
Lets look with more detail at each of the proposed dimensions.
!!Production
The first thing to consider is that knowledge is produced in an incremental fashion. It can not be seen only as a single task with a defined and final output. It is an iterative process whose results are much better in a collaborative, continuous improvement, environment.
Knowledge production must be encouraged and supported by collaboration tools and practices that remove obstacles and reward producers. 
Knowledge must also be produced in an agile (or spiral) approach and have tools that support that approach, that is, tools that support a progressive and shared building, improvement and expansion of each and every knowledge item.

Today's mindset is much more oriented to produce basic elementary statements (think of Twitter) than to engage in true collaborative, incremental knowledge production, also the "blog" perspective is very limited as it encourages the expression of immature views that are seldom revisited, polished and improved. That's not knowledge but only data or information. If we want to produce knowledge we must acknowledge that it will take time and effort as well as collaboration and iterative improvement. ''The major challenge here (as in most other places) is people'' and their inhibitions and lack of argumentative training and practice. Most people is much more comfortable with consensual, useless, statements than with provocative thinking and laborious, time-consuming, iterative truth discovery through study, dialogue and even passionate discussion. But face it, the last is the only way to produce really useful and lasting knowledge.

The ''"definition of Done"'' for Knowledge is ''never''. A "done" knowledge piece is an obsolete and of little usefulness one. This presents a major challenge to knowledge support systems and to knowledge initiatives management. It takes courage, long-term vision, wisdom and experience to be able to embrace these challenges.

See [[KM Production]] for more details and requirements in this topic.

!!Storage
People's memory and experience are very good, but unreliable, storage mediums.
Personal knowledge, when you get to it, is excellent in compactness and relevance because it can understand your context and needs and provide experience. You will never want to dismiss expert knowledge. But as an organization you can not depend, exclusively, on specific people you must also have &lt;&lt;quote 'independent' 'Independence (KM)'&gt;&gt; knowledge.

See [[KM Storage]] for more details and requirements in this topic.

!!Retrieval
The retrieval ability is the best chance to achieve a continuous improvement of produced, stored and retrieved knowledge. It is also the retrieval ability that makes knowledge useful. Knowledge must be &lt;&lt;quote 'available' 'Availability (KM)'&gt;&gt; when needed if not it is just a waste of resources.

See [[KM Retrieval]] for more details and requirements in this topic.

!!Development
&lt;&lt;quote 'Standing on the shoulders of giants' 'Standing on the shoulders of giants'&gt;&gt;
In the development dimension we want to take every opportunity to improve and expand the available knowledge. For this agile tools are essential as those opportunities almost always emerge during other tasks and, if the effort required to utilize them is too much, people will stick to the task at hands and miss the opportunity. A system that promotes small but continuous incremental improvements to information and knowledge is the one that will prosper.

See [[KM Development]] for more details and requirements in this topic.

!Guidelines and resources
To manage anything you better know what it is first, so a good place to start is to define a proper [[ontology|http://en.wikipedia.org/wiki/Ontology_%28information_science%29]] for the domain. In our case a [[Software Development Ontology|SoftwareDevelopmentOntology]].

In an organization knowledge management needs a technological stack that supports its needs, operation and development. Our proposal is at [[KM Technical Stack]].


TODO: complete
TODO: graphs

----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: Knowledge management main page
^^@@
%/</pre>
</div>
<div title="LastUpdates" modifier="acarvalho" created="201206161153" modified="201304121409" tags="excludeLists" server.title="LastUpdates" server.page.revision="201304121409" server.etag='"acarvalho_public/LastUpdates/1182910:14d460521babc3911dec24567c4075fdd46f9153"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1c98a8c2d97a946b560f9a81e8cb4646703a18dd">
<pre>|Last 30 tiddlers created|Last 30 tiddlers modified|h
|&lt;&lt;ContentTimeline created 30&gt;&gt;|&lt;&lt;ContentTimeline modified 30&gt;&gt;|
----
@@color:#c4d6ed; ^^
Description: Shows the last updates in this wiki. 
^^@@
</pre>
</div>
<div title="LoadRemoteFileThroughProxy" modifier="YourName" created="200703202229" modified="201206131413" tags="systemConfig">
<pre>/***
|''Name:''|LoadRemoteFileThroughProxy (previous LoadRemoteFileHijack)|
|''Description:''|When the TiddlyWiki file is located on the web (view over http) the content of [[SiteProxy]] tiddler is added in front of the file url. If [[SiteProxy]] does not exist "/proxy/" is added. |
|''Version:''|1.1.0|
|''Date:''|mar 17, 2007|
|''Source:''|http://tiddlywiki.bidix.info/#LoadRemoteFileHijack|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0|
***/
//{{{
version.extensions.LoadRemoteFileThroughProxy = {
 major: 1, minor: 1, revision: 0, 
 date: new Date("mar 17, 2007"), 
 source: "http://tiddlywiki.bidix.info/#LoadRemoteFileThroughProxy"};

if (!window.bidix) window.bidix = {}; // bidix namespace
if (!bidix.core) bidix.core = {};

bidix.core.loadRemoteFile = loadRemoteFile;
loadRemoteFile = function(url,callback,params)
{
 if ((document.location.toString().substr(0,4) == "http") &amp;&amp; (url.substr(0,4) == "http")){ 
 url = store.getTiddlerText("SiteProxy", "/proxy/") + url;
 }
 return bidix.core.loadRemoteFile(url,callback,params);
}
//}}}
</pre>
</div>
<div title="MainMenu" creator="AndreCarvalho" modifier="YourName" created="201206131641" modified="202310050834" tags="System" _hash="73c1a2d802e4b5b895e0365332cac16da951218c" changecount="27">
<pre>[[Home|HomePage]] 
[[Software Development]]
[[Guidelines]]
[[Pearls]]

[[Software Tools|SoftwareToolsPage]]
[[Modelling References]]
[[Programming Topics]]

[[Knowledge Management|KnowledgeManagement]]

[[Privacy|PrivacyPage]]

[[Quotes|QuotesPage]]
[[Concepts|ConceptsPage]]
[[Bibliography|BibliographyPage]]
[[Selected References]]
TagPolicy
----
[[Android|AndroidPage]]
[[Travel|TravelPage]]
[[Internet|InternetPage]]
----
__''[[Last Updates|LastUpdates]]''__
----
[[Administration|AdministrationPage]]
&lt;&lt;option chkEnableTabsBar&gt;&gt; Tabbed navigation
DisplayOptions
^^TiddlyWiki 
&lt;&lt;version&gt;&gt;
^^
&lt;&lt;unsavedChanges list "&lt;br&gt;"&gt;&gt;
----
&lt;html&gt;
&lt;!-- Start of SimpleHitCounter Code
&lt;div align="center"&gt;&lt;a href="http://www.simplehitcounter.com" target="_blank"&gt;&lt;img src="http://simplehitcounter.com/hit.php?uid=2038168&amp;f=16777215&amp;b=0" border="0" height="18" width="83" alt="web counter"&gt;&lt;/a&gt;&lt;br&gt;&lt;a href="http://www.simplehitcounter.com" target="_blank" style="text-decoration:none;"&gt;&lt;/a&gt;&lt;/div&gt;
End of SimpleHitCounter Code --&gt;
&lt;/html&gt;
Stats from
2021 03 11
&lt;html&gt;
&lt;!-- ADAC From 20200703 COUNT 0 --&gt;
&lt;!-- hitwebcounter Code START --&gt;
&lt;div align="center"&gt;&lt;a href="https://www.hitwebcounter.com" target="_blank"&gt;
&lt;img src="https://hitwebcounter.com/counter/counter.php?page=7763272&amp;style=0006&amp;nbdigits=5&amp;type=page&amp;initCount=0" title="Free Counter" Alt="web counter"   border="0" /&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!-- http://s05.flagcounter.com/index.html START --&gt;
&lt;div align="center"&gt;&lt;a href="https://info.flagcounter.com/E3cW"&gt;&lt;img src="https://s01.flagcounter.com/count/E3cW/bg_BABABA/txt_000000/border_CCCCCC/columns_3/maxflags_30/viewers_0/labels_0/pageviews_0/flags_0/percent_0/" alt="Flag Counter" border="0"&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/html&gt;
----

</pre>
</div>
<div title="Mannion and Keepence on requirements effort" modifier="acarvalho" created="201306171419" modified="201306171423" tags="Content Quote Requirements" server.title="Mannion and Keepence on requirements effort" server.page.revision="201306171423" server.etag='"acarvalho_public/Mannion%20and%20Keepence%20on%20requirements%20effort/1263283:cb070e2e8d21ee920de14c00b5a8510505585481"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="4c8b0551366d7cec4be757fb71e561dfb73a353e">
<pre>"//''Systems Analysis, or as it is increasingly known as today, Requirements Engineering, is a time consuming, expensive but critical phase in software (and system) development.''//"
[[SMART Requirements]] by &lt;&lt;BibRef "Mannion,Keepence 1995"&gt;&gt;

----
/%
@@color:#c4d6ed; ^^
Description: Mannion and Keepence on requirements effort
^^@@
%/</pre>
</div>
<div title="Meta-architecture" modifier="acarvalho" created="201206211403" modified="201305202055" tags="Concept Content" server.title="Meta-architecture" server.page.revision="201305202055" server.etag='"acarvalho_public/Meta-architecture/1220963:8300f654f04e431b3811f0b6e67bc92d4b8960f0"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="356c97468cd04aeb5cf99334cc86e08c6953ad3c">
<pre>//"The [[meta-architecture|http://www.bredemeyer.com/ArchitectingProcess/MetaArchitecture.htm]] collects together decisions relating to your architecture strategy. It sets direction for your architecture effort, with high-level decisions that will shape the architecture and guide the architects. These include architecture principles, statements of philosophy, metaphors and organizing concepts that will guide system decomposition and design of architectural mechanisms."//

Meta-architecture is a concept of [[VAP - Visual Architecting Process|http://www.bredemeyer.com/ArchitectingProcess/VisualArchitectingProcess.htm]] by Ruth Malan and Dana Bredemeyer.

Meta architecture harmonization and sharing is a key aspect of [[Implementing Systematic Reuse]] and it is also a main target and indicator of the Methodological stage in the Reuse Maturity Model. Meta-architectural matching is a primary indicator of reusability when accessing a potential reusable asset.
----
See also: [[Namespace and Filesystem Guidelines]] [[Namespace Coupling Guidelines]]
----
/%
@@color:#c4d6ed; ^^
Description: Meta-architecture concept explanation and references.
^^@@
%/</pre>
</div>
<div title="Modelling References" modifier="YourName" created="201206212026" modified="202303081004" tags="Content UML" server.title="Modelling References" server.page.revision="201503061404" server.etag='"acarvalho_public/Modelling%20References/2127071:df8929421ae39f194c3ee9b2ea06e9ac592a3c3d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1dc1ed20bfaec09ee7315d69294190130e4e8471" changecount="2">
<pre>* [[Ongoing References]] - list of ongoing study references

!!General UML diagrams
* [[The Unified Modeling Language|http://www.uml-diagrams.org/]]
!!Data Flow Diagrams
* [[Data Flow Diagram]] - Data Flow Diagrams (DFD) were proposed as the essential view in the historical Structured Analysis and System Specification by Tom ~DeMarco, Yourdon Press, New York, 1978. 
!!Use Case Diagrams
* [[Use Case Diagram]] - Use Case Diagrams (UC) are a very useful communication mean to use with users and stakeholders.
!!Application Archetype
* [[Application Archetype]] - illustrates the fundamental tier and layer organization of a software architecture. 
!!Component Diagrams
* [[UML basics: The component diagram|http://www.ibm.com/developerworks/rational/library/dec04/bell/index.html]] - From The Rational Edge: This article introduces the component diagram, a structure diagram within the new Unified Modeling Language 2.0 specification. - Donald Bell (bellds@us.ibm.com), IT Architect, IBM Corporation
!!Sequence diagrams
* [[UML Tutorial: Sequence Diagrams - Robert C. Martin - 1998|https://web.archive.org/web/20070820035259/http://www.objectmentor.com/resources/articles/UMLSequenceDiagrams.pdf]] - In this column we will be discussing UML Sequence diagrams. Sequence diagrams contain the same information as Collaboration diagrams, but emphasize the sequence of the messages instead of the relationships between the objects.
* [[UML basics: The sequence diagram|http://www.ibm.com/developerworks/rational/library/3101.html]] - From The Rational Edge series of articles, .UML basics, on the essential diagrams in the Unified Modeling Language, this article offers a detailed introduction to the sequence diagram. It also introduces several new notation elements in the recent UML 2.0 specification. - Donald Bell (bellds@us.ibm.com), IT Architect, IBM Corporation
!!CASE Tools
* [[Sparx Enterprise Architect]] - a comprehensive tool that can handle almost all modelling elements and scenarios. This tiddler also lists all my articles on &lt;&lt;tag EA&gt;&gt; usage.
* [[Sybase|http://www.sybase.com/]] [[Power Designer|http://www.sybase.com/products/modelingdevelopment/powerdesigner]] - the best tool for data modelling. Conceptual and physical models and full round-trip engineering.
----
@@color:#c4d6ed; ^^
Description: Unified Modelling Language (and others) references
^^@@</pre>
</div>
<div title="Modularization" modifier="YourName" created="201206191344" modified="202007181113" tags="Concept Content OOP TODO" changecount="6" server.title="Modularization" server.page.revision="201502031035" server.etag='"acarvalho_public/Modularization/2071865:55d2c5a5e80243a27b6703d4c0b31b059f30db56"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="cf98f377df229831ad8b25d59cf4c589ca5c3148">
<pre>Modularization is, probably, the most important choice you will make on structuring, specifying and implementing a solution. Its impacts, good or bad, will affect [[validation|Validation]] and [[verification|Verification]] ability, [[reuse|Reuse]], maintainability, robustness, [[refactorability|Refactor]] and all the other important aspects that define the overall quality of your solution.
If I had to choose just one quality for a software project I would not doubt : good modularization. Everything else is meaningless without it. The sheer size of any software project is not humanely manageable without proper modularization.

!What is modularization
"The effectiveness of a "modularization" is dependent upon the criteria used in dividing the system into modules." &lt;&lt;BibRef "Parnas 1972"&gt;&gt;
Modularization is a division of complexity, based on criteria, that produces an [[abstract|Abstraction]] structure.
But modularization is also the containment of change impact through [[information hiding|Information Hiding]] and [[coupling|Coupling]] minimization through [[encapsulation|Encapsulation]]. See &lt;&lt;BibRef Berard&gt;&gt;.
Criteria (plural) are the essential condition to have modularization and not a random split of topics that no one is able to navigate. But notice that you will have several levels of modularization each one with one different criterion (singular), for instance you are likely to have a first level modularization based on tier physical separation and then progress to further levels based, for instance on business or functional domains (see [[Namespace and Filesystem Guidelines]]).

!The many contexts of modularization
!!Modularization at Analysis
The first thing to do when facing a 'big problem' is to split it in several 'smaller problems'. This is common sense from many centuries now, consider [[Rene Descartes' |http://www.marxists.org/reference/archive/descartes/1635/discourse-method.htm]] second principle "//''The second, to divide each of the difficulties under examination into as many parts as possible, and as might be necessary for its adequate solution.''//"
At analysis you will want to start build a conceptual framework for the domain at hands and so you will start identifying conceptual topics for each subject you may address in relative isolation, this is an essential step to avoid being overwhelmed by the problem's magnitude. This will also be your table of contents for navigating information and your [[coverage|Coverage]] (completeness) checklist. 
!!Modularization at Specification
Conceptualization of a solution is the first step to be able to cope with complexity and to work in a team with the communication needs it involves. A good concept is worth a thousand words...
At specification you have many goals to achieve besides being able to communicate efficiently. The [[Object Oriented Design|OOP]] principles give you some.
!!Modularization at Construction
Filesystem and namespace rules play an essential role in preventing obstacles to and promoting many of the most important software qualities. A well structured filesystem and namespace is essential for maintainability, coupling control, cohesion, refactorability, testability and many other qualities. Be sure to establish a set of comprehensive and well reasoned [[Namespace and Filesystem Guidelines]]

TODO: packaging principles
----
See also : [[Application Archetype]] [[Coupling]] [[Cohesion]]
@@color:#c4d6ed; ^^
Description: Modularization concept explanation.
^^@@</pre>
</div>
<div title="Namespace Code Placement Guidelines" modifier="acarvalho" created="201206230112" modified="201308042218" tags="Content Guideline Reuse TODO" server.title="Namespace Code Placement Guidelines" server.page.revision="201308042218" server.etag='"acarvalho_public/Namespace%20Code%20Placement%20Guidelines/1332802:f0903db87b40e5af7e9790ad89c8df92d90dad7b"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e9286088ead40bc83e3730a13610315d46fbaf88">
<pre>On developing we produce different types of code in what generalization (and, as such, re-usability) is concerned :
* ''Sub-systems'' : These are highly &lt;&lt;quote 'cohesive' 'Cohesion&gt;&gt; modules with no &lt;&lt;quote 'coupling' 'Coupling&gt;&gt;. They do one thing and do it well without any external dependencies. This code is highly reusable and shall also be well &lt;&lt;quote 'encapsulated' 'Encapsulation&gt;&gt; and exposed through an as simple as possible &lt;&lt;quote 'API' 'API'&gt;&gt;. Sub-systems shall have a single responsibility with clear input and output. Think of a Logging sub-system, for instance, although it may perform several functions like information gathering, formatting and persisting it shall not extend its responsibilities to alarm triggering or corrective control, that shall be other module's responsibility.
* ''Generic code'' : is, mostly, the old functional library concept and Interfaces (pure abstract classes). It shall have simple and objective responsibilities. Coupling shall be kept to a minimum. Think of a mathematical functions library, a recursive filesystem traverse function, etc. 
* ''Base code'' : shall have strong functional [[cohesion|Cohesion]] but is intended to be the generic base for specialization at platform.
* ''Platform code'' : introduces advanced automation, that is, it assumes a specific architecture, data structures and functionality and provides most of the technical requirements for its intended domain. It also integrates and orchestrates all the more generic code to provide a base ready to be specialized.
* ''Specialized code'' : specializes and overrides Platform and produces a specific solution for a specific project's business needs (with more or less customization ability).

----
See also [[Namespace and Filesystem Guidelines]], [[Namespace Coupling Guidelines]] and [[Promoting Reuse by Reference]]
----
@@color:#c4d6ed; ^^
Description: Guidelines for namespace code placement
^^@@</pre>
</div>
<div title="Namespace Coupling Guidelines" modifier="acarvalho" created="201206210850" modified="201304121442" tags="Content Guideline Reuse TODO" server.title="Namespace Coupling Guidelines" server.page.revision="201304121442" server.etag='"acarvalho_public/Namespace%20Coupling%20Guidelines/1183005:a25f9344e553de10f5ff1328af1600bc53cae5b0"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="26e255383dee2668b65cb3aa9dbd1817c2dfc486">
<pre>Strong [[cohesion|Cohesion]] and loose [[coupling|Coupling]] are a good thing in software design. On defining a good structure for your namespaces you will also be preventing "spaghetti coupling" and, to some extent, weak cohesion.

Coupling is not easy to [[refactor|Refactor]] as it involves moving code (and files) around. This usually messes up [[CVS]] and has large impact specially on reused code. This shall encourage you to clearly think ahead and establish your namespace coupling rules.

&lt;&lt;Image "FR" "250" "Coupling-root-level.png" "https://dl.dropbox.com/" "s/vfki4dkx343k4ut/" "?dl=1" "Root level allowed dependencies."&gt;&gt;

Your [[Meta-architecture]] shall address the Coupling control strategy by establishing clear rules about allowed dependencies between your namespaces.

Start at ''root level'' and define the allowed dependencies. Remember that you want your project's code to depend from your reusable code and both of them to depend from third-parties. Of course the inverse is not allowed as you want to keep reusable elements decoupled from specializations.



&lt;&lt;Image "FR" "250" "Coupling-reusable-code.png" "https://dl.dropbox.com/" "s/ayuutnc6sl4bha3/" "?dl=1" "Reusable code allowed dependencies."&gt;&gt;
Inside ''reusable code'' you shall promote a dependency hierarchy where the more specialized can depend from the more generic. Remember that your goal is to reduce reuse obstacles to the minimum possible.
See [[Namespace and Filesystem Guidelines]] for a rationale of the FRW, CMP and SYS division and [[Namespace Code Placement Guidelines]]. Of course you may use other if that makes more sense in your scenario.
Notice also that the same conceptual module (for instance ~ErrorHandling) may, and probably shall, have instances at different generalization layers (one generic instance in CMP to deal with basic catching and display and one more specialized instance at FRW that introduces context analysis for instance).





&lt;&lt;Image "FR" "250" "Coupling-tier-level.png" "https://dl.dropbox.com/" "s/hu07f3mq7229uce/" "?dl=1" "Tier level allowed dependencies."&gt;&gt;
Finally you shall consider to keep a strict ''tier level'' separation. Remember that tier level exists everywhere except on ~ThirdParties (and even here we could consider to implement it as second level). Again it is essential to promote a [[modularization|Modularization]] that favours reuse.
A conceptual module (for instance ~ErrorHandling at the component CMP layer) may have physical modules at ''Common'', ''Server'' and ''Client'' tiers (the catching code at Common and the dialogue for user display at Client and eventual server-only code at Server ).


----
See also : [[Namespace and Filesystem Guidelines]], [[Namespace Code Placement Guidelines]] and [[Promoting Reuse by Reference]]
----
@@color:#c4d6ed; ^^
Description: Guidelines for namespace coupling control.
^^@@</pre>
</div>
<div title="Namespace and Filesystem Guidelines" modifier="acarvalho" created="201206202058" modified="201304121442" tags="Content Development Guideline OOP Reuse" server.title="Namespace and Filesystem Guidelines" server.page.revision="201304121442" server.etag='"acarvalho_public/Namespace%20and%20Filesystem%20Guidelines/1183008:df28be433b5ae0efef08f0e76794a07ca7f5e6e2"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="60c0f65be1125e6a128f055f584327477fc52121">
<pre>!! Why do you need Filesystem and Namespace Guidelines
Filesystem and Namespace Guidelines shall be a mandatory (and reusable) part of your [[Meta-architecture]]. These are strategic decisions that will affect all of your project in very important qualities like reusability, maintainability, modularization and team work efficiency. You can survive without them in a single man small project, but will need them as a roadmap for design and implementation and as an enforcing mechanism for your [[Application Archetype]] among your team.

!! Filesystem, namespaces and packaging
First of all, filesystem, namespaces and packaging shall be equivalent. This is important for search ability on the code and avoids incoherence and naming clashes when reusing.
{{{
Filesystem :
C:\source\AdacSoft\ProjectX\Server\DAO
shall contain namespace :
AdacSoft.ProjectX.Server.DAO
that is packaged in DLL :
AdacSoft.ProjectX.Server.DAO.dll
}}}
This simple rule will save you a lot of trouble when developing and maintaining your code on a team. With this you define packaging, placement and conceptual [[modularization|Modularization]] at the same time. The binary naming also plays an important role when you need to dynamically discover and load ~DLLs based on a namespace. DLL name may be shorter than namespace, that is, {{{AdacSoft.ProjectX.Server.DAO.SQLite}}} may be contained in {{{AdacSoft.ProjectX.Server.DAO.dll}}}.

!! Filesystem definition
You shall have a standard base filesystem structure that you reuse and follow in every one of your projects. And you shall, definitely, use a [[CVS]] system. See [[Promoting Reuse by Reference]] guideline for a detailed filesystem and reuse structure proposal.

!! Namespace definition
For defining namespace you shall also follow defined and well understood rules.

First you want it to be different to avoid conflicts and to promote your brand so you should use your company name as root. You shall also consider using third-party components and also to segregate your own reusable components, so you may have two other root level items : 
*''[~YourCompanyName]'' : for your project's root. 
*''[~YourCompanyAcronym]'' : for your own reusable modules. 
*''[~ThirdParties]'' : for external, off-the-shelf components. The second level shall be producer name and the third product name for instance {{{ThirdParties.Apache.Log4Net}}}
These guidelines have an huge impact in management and maintenance of your [[CVS]] repository and also help in preventing [[reuse by copy|Reuse by Reference]].

Then you want to distinguish your different projects so the second level shall be project name.
At the third level you shall be concerned with coupling control and tier segregation to handle strict n-tier scenarios.
You shall stick to this organization even if your code is single tier. Think about it being reused in a n-tier scenario or if you want to reuse n-tier code. Also this encourages good [[modularization|Modularization]] and thus [[coupling control|Namespace Coupling Guidelines]].

The fourth level shall represent your conceptual modules (Components or archetype parts). This shall be a technical (Architectural) criterion.

From the fourth level onwards common sense applies, don't go too deep, divide if you have to, you may use technical, business or any other criteria but be coherent and explicit.


Your namespaces shall then be built according to : 
{{{
{Root level}.{Project/Product level}.{Tier level}.{Module level}
}}}
* ''Root level''
** Root level shall reflect ownership.
*** ''[~YourCompanyName]'' for specific project/product resources
*** ''[~YourCompanyAcronym]'' for reusable, shared among projects, resources
*** ''[~ThirdParties]'' for third-party resources. You may choose to use third party company name at this level but it will clutter root.
* ''Project/Product level''
** This second level is dependant on the previous one and shall reflect domain or coupling layer separation.
** For ''[~YourCompanyName]'' root :
*** [Project Code] - for "normal" projects
*** [Product Name] - for products
** For ''[~YourCompanyAcronym]'' root :
*** ''CMP'' is intended to hold reusable modules that are independent from particular architectures but that may be strongly coupled to other CMP modules.
*** ''FRW'' is intended to hold reusable modules that are strongly coupled and that require a specific architecture. This layer encourages strong automation.
*** ''SYS'' is intended to hold reusable modules that are loosely coupled and that shall be seen as autonomous subsystems.
** For ''[~ThirdParties]'' root :
*** This shall be manufacturer name followed by the item namespace
*** The ~ThirdParties root level has no further guidelines after 2nd level and shall conform to producer specifications. Example {{{Apache.log4net}}}
* ''Tier level''
** ''Client'' : client side code, may depend on Common, interacts with user.
** ''Common'' : common code, may not depend on any of the others, may not interact with user.
** ''Server'' : server side code, may depend on Common, may not interact with user.
* ''Module level''
** From module level onwards common sense rules apply.
** You may use Business Domain or sub-Domain criteria or Technical Domain or both.

----
See also : [[Namespace Coupling Guidelines]], [[Namespace Code Placement Guidelines]] and [[Promoting Reuse by Reference]]
----
@@color:#c4d6ed; ^^
Description: An example Filesystem and Namespace Guideline for .Net projects.
^^@@</pre>
</div>
<div title="No Silver Bullet" creator="YourName" modifier="AndreCarvalho" created="202006102039" modified="202103121954" tags="Content Quote" changecount="4">
<pre>"//''There is no single development, in either technology or management 
technique, which by itself promises even one order-of-magnitude 
improvement within a decade in productivity, in reliability, in simplicity. ''//"

[[No Silver Bullet - Essence and Accident in Software Engineering |http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]] ([[on WayBack Machine|https://web.archive.org/web/*/http://faculty.salisbury.edu/~xswang/Research/Papers/SERelated/no-silver-bullet.pdf]])
[[Frederick P. Brooks|http://en.wikipedia.org/wiki/Fred_Brooks]]
Also on [[Wikipedia|https://en.wikipedia.org/wiki/No_Silver_Bullet]]

----
/%
@@color:#c4d6ed; ^^
Description: Quote of Frederick P. Brooks No Silver Bullet
^^@@
%/</pre>
</div>
<div title="OOP" modifier="acarvalho" created="201206140908" modified="201206140916" tags="Tag" server.title="OOP" server.page.revision="201206140916" server.etag='"acarvalho_public/OOP/745701:950c8ab895a460e118bc977b149b33f9b8c3edb7"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="013ab2bbcb6e0d29ff3f969c468efa7af87a7760">
<pre>!Tag page for OOP (Object Oriented Programming)

[[From Wikipedia, the free encyclopedia|http://en.wikipedia.org/wiki/Object-oriented_programming]] - Object-oriented programming (OOP) is a programming paradigm using "objects" – data structures consisting of data fields and methods together with their interactions – to design applications and computer programs. Programming techniques may include features such as [[data abstraction, encapsulation, messaging, modularity, polymorphism, and inheritance|ObjectOrientedProgramming]]. Many modern programming languages now support OOP, at least as an option.

The main entry point for the subject on this wiki is [[Object Oriented Programming|ObjectOrientedProgramming]] page.

</pre>
</div>
<div title="ObjectOrientedProgramming" modifier="YourName" created="201206140819" modified="202007121106" tags="Content Development OOP" changecount="6" server.title="ObjectOrientedProgramming" server.page.revision="201304121424" server.etag='"acarvalho_public/ObjectOrientedProgramming/1182947:702c9afac9c6ec5366ab6fc4d6f94c9a470aed05"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" publish.name="ObjectOrientedProgramming" _hash="d7fdbd06013b4d3faa209cbf51d7906f60a91d24">
<pre>[[Modularization]] is, probably, the most important choice you will make on structuring, specifying and implementing a solution. Its impacts, good or bad, will affect [[validation|Validation]] ability, reuse, maintainability, robustness, refactorability and all the other important aspects that define the overall quality of your solution.
It will also play a key role in the management ability of your project, planning, testing, delivery and other tasks are dependent on the quality of your modularization, progress reporting and evaluation, task assignment and know-how selection and almost any other development aspect will favourably or adversely be affected by it. 

The first, easiest and with more immediate return investment in modularization is to define, and closely enforce, a clear set of guidelines to be followed by the development team. These guidelines must encompass [[Namespace and Filesystem Guidelines]],  [[Namespace Coupling Guidelines]] and [[Namespace Code Placement Guidelines]].

!!Fundamental concepts
* ''[[Abstraction]], [[Encapsulation]] and [[Information Hiding]]'' - The fundamental reference is [[Abstraction, Encapsulation, and Information Hiding|http://www.tonymarston.co.uk/php-mysql/abstraction.txt]] By Edward V. Berard, The Object Agency &lt;&lt;BibRef Berard&gt;&gt;

!!Principles
* Packaging (or modularization)
** [[Stable Dependencies Principle]]

----
See also [[Programming Links|ProgrammingLinksPage]]
----
@@color:#c4d6ed; ^^
Description: Object Oriented Programming topics.
^^@@</pre>
</div>
<div title="Ongoing References" creator="YourName" modifier="YourName" created="202303081006" modified="202303081012" tags="Content UML" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" changecount="5">
<pre>|Area|Title|Year|Description|Notes|DOI|Rating|h
|Model Centric|[[A Quantitative SWOT-TOWS Analysis for the Adoption of Model-Based Software Engineering|https://www.jot.fm/issues/issue_2022_04/article9.pdf]]|2022|Enterprises’ trend to low-code development revives model-based software engineering (MBSE) since several low-code platforms are based on the principles of model-based design, automatic code generation, and visual programming.|Interesting factors for model based adoption.|[[10.5381/jot|http://dx.doi.org/10.5381/jot.2022.21.4.a9]]||


----
/%
@@color:#c4d6ed; ^^
Description: Ongoing study references list
^^@@
%/</pre>
</div>
<div title="Opportunistic Productization" modifier="acarvalho" created="201207151211" modified="201304121444" tags="Concept Content" server.title="Opportunistic Productization" server.page.revision="201304121444" server.etag='"acarvalho_public/Opportunistic%20Productization/1183009:52c1879fac567cb1448adf6ab6f6f730d305a408"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="3b1659bae84aa797c3fb3cc2bb02f09d2624e5ae">
<pre>''Opportunistic Productization is a disciplined management and engineering activity oriented to achieve scale savings and continuous improvement on the opportunity to produce similar solutions for different customers.''

Opportunistic Productization may be seen as an higher level [[Systematic Reuse]].
The concept is useful for project-oriented software houses. It cames into play when you have a Customer request that is similar to something you already developed for another Customer.

In these scenarios you have an opportunity and several dangers. 
The opportunity is to evolve your solution to near an off-the-shelf, high quality, product you will be able to resell more times with almost no cost and very good Customer satisfaction levels. 
The dangers are that you will ''dump price'' (and Customer's perceived value for the solution) and engage in a series of adaptation hacks that, ultimately, will became more expensive than a complete reimplementation. The second risk is that, if you are lucky in the first hack, you will try a second based on the same estimation. This is a severe mistake as [[software rot|Software Rot]] happened for sure in the first adaptation and is more than likely to increase at the second. 

Opportunistic Productization may lead to a full Product Development process but not necessarily. Product Development is a different, and with different methods and techniques, activity.

&lt;&lt;Image "FR" "250" "Gartner-magic-quadrant-animated.gif" "https://dl.dropbox.com/" "s/pl96dh24fvq83r6/" "?dl=1" "Gartner magic quadrants"&gt;&gt;
If, in a second, similar, sell you do not have resources for more, at least encourage your team to establish a clear [[Application Archetype]] and [[refactor|Refactor]] what they can towards better [[encapsulation|Encapsulation]] and [[modularization|Modularization]].

In the image on the right you can see an animation using [[Gartner Magic Quadrants|http://www.gartner.com/technology/research/methodologies/research_mq.jsp]] that illustrates your product position along several opportunistic productization cycles. If you took the opportunity your vision and your realisation ability increased so you can now aim to the top right corner. At this point, unless you exhausted the market, productization ability is no longer just an hypotheses, it is a proved fact, now you should consider a proper Product Development Process.
The number of cycles may vary depending on your investment and on the characteristics of the project and the market it targets.

One good rule of thumb to access the quality of a second productization effort is that the results shall be seen as an upgrade opportunity for the prior Customers, that is, the results are more customizable and increased in overall quality. To achieve this you should assure that, at least, technical management stays the same across projects. You must also assure that some, if not all, of the reuse savings are invested in improving the (to be) product.

----
@@color:#c4d6ed; ^^
Description: Opportunistic Productization concept explanation,
^^@@</pre>
</div>
<div title="OptionsPanel" creator="AndreCarvalho" modifier="AndreCarvalho" created="202103121818" changecount="1">
<pre>Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]</pre>
</div>
<div title="PERT" modifier="acarvalho" created="201307172103" modified="201307172207" tags="Acronym Content" server.title="PERT" server.page.revision="201307172207" server.etag='"acarvalho_public/PERT/1311519:eb0b6772da87069ed5df2a08c173fcb7220783eb"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7bfdc3be35a84e8fb3e80c4d6dccee6519b08acc">
<pre>PERT - Program (or Project) Evaluation and Review Technique
//PERT is a method to analyze the involved tasks in completing a given project, especially the time needed to complete each task, and to identify the minimum time needed to complete the total project.

PERT was developed primarily to simplify the planning and scheduling of large and complex projects. It was developed for the U.S. Navy Special Projects Office in 1957 to support the U.S. Navy's Polaris nuclear submarine project. It was able to incorporate uncertainty by making it possible to schedule a project while not knowing precisely the details and durations of all the activities.
(...)
Through an electronic computer, the PERT technique processes data representing the major, finite accomplishments (events) essential to achieve end-objectives; the inter-dependence of those events; and estimates of time and range of time necessary to complete each activity between two successive events. Such time expectations include estimates of ''"most likely time"'', ''"optimistic time"'', and ''"pessimistic time"'' for each activity.
//
From [[Wikipedia|http://en.wikipedia.org/wiki/Program_Evaluation_and_Review_Technique]]
----
/%
@@color:#c4d6ed; ^^
Description: Program (or Project) Evaluation and Review Technique
^^@@
%/</pre>
</div>
<div title="PM" modifier="acarvalho" created="201307281603" modified="201307281603" tags="Acronym Content" server.title="PM" server.page.revision="201307281603" server.etag='"acarvalho_public/PM/1325616:a5852b017da2f92f980e95995e5b761fc8c87622"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="dba03b33fd05dc6460ec0d69826dc0ce91ccc851">
<pre>Project Manager
----
/%
@@color:#c4d6ed; ^^
Description: Project Manager
^^@@
%/</pre>
</div>
<div title="PaletteViewMacro" creator="YourName" modifier="YourName" created="201701301900" tags="systemConfig" changecount="1">
<pre>/***
|''Name''|PaletteViewMacro|
|''Version''|0.2|
|''Author''|FND|
|''Source''|[[FND's DevPad|http://devpad.tiddlyspot.com/#PaletteViewMacro]]|
|''License''|[[Creative Commons Attribution-ShareAlike 3.0 License|http://creativecommons.org/licenses/by-sa/3.0/]]|
|''~CoreVersion''|2.1|
|''Type''|macro|
|''Requires''|N/A|
|''Overrides''|N/A|
|''Description''|Displays color palettes.|
!Notes
There is also [[ViewPalettePlugin|http://simon.tiddlyspot.com/#ViewPalettePlugin]], which currently does not work with TiddlyWiki v2.2 though.
!Usage
{{{
&lt;&lt;paletteView [tiddler name]&gt;&gt;
}}}
!!Example
&lt;&lt;paletteView [[ColorPalette]]&gt;&gt;
!Revision History
!!v0.1 (2007-11-18)
* initial release
!!v0.2 (2007-11-20)
* limited processing to slices containing [[actual color values|http://www.w3.org/TR/CSS21/syndata.html#color-units]]
* changed fallback value to the tiddler the macro is called from (instead of using [[ColorPalette]])
!To Do
* selection list for all available palettes (tag-based)
* parameter for custom table class
* customizable column order
* documentation (e.g. using from within [[ViewTemplate]])
!Code
***/
//{{{
config.macros.paletteView = {};

config.macros.paletteView.handler = function(place, macroName, params, wikifier, paramString, tiddler) {
	var title = params[0] || tiddler.title;
	//var palettes = store.getTaggedTiddlers(params[0]); // DEBUG: yet to be implemented
	var colors = store.calcAllSlices(title);
	var labels = [];
	for(var c in colors) {
		if(this.isColor(colors[c])) {
			labels.push(c);
		}
	}
	if(labels.length &gt; 0) {
		var output = "|!Sample|!Value|!Name|h\n";
		for(var i = 0; i &lt; labels.length; i++) {
			output += "|padding:0 4em;background-color:" + colors[labels[i]] + ";&amp;nbsp;|"
				+ "{{{" + colors[labels[i]] + "}}}|"
				+ "[[" + labels[i] + "|" + title + "]]|\n";
		}
		wikify(output, place);
	}
};

config.macros.paletteView.isColor = function(s) {
	var colors = ["Black", "Green", "Silver", "Lime", "Gray", "Olive", "White", "Yellow",
		"Maroon", "Navy", "Red", "Blue", "Purple", "Teal", "Fuchsia", "Aqua", "Orange"];
	var match = s.match(/^#[0-9A-F]{3}$|^#[0-9A-F]{6}$|^RGB\([\d,\s]{5,}\)$/i);
	if(match) return true;
	if(colors.contains(s)) return true;
	return false;
};
//}}}</pre>
</div>
<div title="PasswordOptionsPlugin" modifier="YourName" created="200704220851" modified="201206131413" tags="systemConfig">
<pre>/***
|''Name:''|PasswordOptionPlugin|
|''Description:''|Extends TiddlyWiki options with non encrypted password option.|
|''Version:''|1.0.2|
|''Date:''|Apr 19, 2007|
|''Source:''|http://tiddlywiki.bidix.info/#PasswordOptionPlugin|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0 (Beta 5)|
***/
//{{{
version.extensions.PasswordOptionPlugin = {
	major: 1, minor: 0, revision: 2, 
	date: new Date("Apr 19, 2007"),
	source: 'http://tiddlywiki.bidix.info/#PasswordOptionPlugin',
	author: 'BidiX (BidiX (at) bidix (dot) info',
	license: '[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D]]',
	coreVersion: '2.2.0 (Beta 5)'
};

config.macros.option.passwordCheckboxLabel = "Save this password on this computer";
config.macros.option.passwordInputType = "password"; // password | text
setStylesheet(".pasOptionInput {width: 11em;}\n","passwordInputTypeStyle");

merge(config.macros.option.types, {
	'pas': {
		elementType: "input",
		valueField: "value",
		eventName: "onkeyup",
		className: "pasOptionInput",
		typeValue: config.macros.option.passwordInputType,
		create: function(place,type,opt,className,desc) {
			// password field
			config.macros.option.genericCreate(place,'pas',opt,className,desc);
			// checkbox linked with this password "save this password on this computer"
			config.macros.option.genericCreate(place,'chk','chk'+opt,className,desc);			
			// text savePasswordCheckboxLabel
			place.appendChild(document.createTextNode(config.macros.option.passwordCheckboxLabel));
		},
		onChange: config.macros.option.genericOnChange
	}
});

merge(config.optionHandlers['chk'], {
	get: function(name) {
		// is there an option linked with this chk ?
		var opt = name.substr(3);
		if (config.options[opt]) 
			saveOptionCookie(opt);
		return config.options[name] ? "true" : "false";
	}
});

merge(config.optionHandlers, {
	'pas': {
 		get: function(name) {
			if (config.options["chk"+name]) {
				return encodeCookie(config.options[name].toString());
			} else {
				return "";
			}
		},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	}
});

// need to reload options to load passwordOptions
loadOptionsCookie();

/*
if (!config.options['pasPassword'])
	config.options['pasPassword'] = '';

merge(config.optionsDesc,{
		pasPassword: "Test password"
	});
*/
//}}}</pre>
</div>
<div title="Pearls" creator="YourName" modifier="YourName" created="202303261303" modified="202307140910" tags="Content" changecount="2">
<pre>These are assorted wisdom pearls that I collect from many places.

!!Software Engineering

*[[sd&amp;m Conference 2001, Software Pioneers|https://www.software-pioneers.com/en/conference]] - One of the best software engineering conferences ever.

!!Systems and Quality

*[[Russell L. Ackoff|https://en.wikipedia.org/wiki/Russell_L._Ackoff]] : [[If Russ Ackoff had given a TED Talk...|https://www.youtube.com/watch?v=OqEeIG8aPPk]] - Simply amazing! Enlightening! The absolute fundamentals of Systems Thinking and Continuous Improvement in under 15 minutes.
----
/%
@@color:#c4d6ed; ^^
Description: A collection of wisdom pearls. Things like this make life worth living.
^^@@
%/</pre>
</div>
<div title="Pencil" modifier="acarvalho" created="201308041541" modified="201501141842" tags="Content Tool" server.title="Pencil" server.page.revision="201501141842" server.etag='"acarvalho_public/Pencil/2049058:dbae56d9128c0c1ea8f356027cc2bbf94abc33a3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6a06acb988f295dd4fd6b3724b9ae3c981de960a">
<pre>&lt;&lt;Image "FL" "" "logo-shadow.png" "http://pencil.evolus.vn/" "styling/images/" "" ""&gt;&gt; &lt;&lt;Image "FR" "" "home-ss.jpg" "http://pencil.evolus.vn/" "images/" "" ""&gt;&gt;
[[Pencil Project|http://pencil.evolus.vn/]] - //An open-source [[GUI]] prototyping tool that's available for ALL platforms. Pencil is built for the purpose of providing a free and open-source GUI prototyping tool that people can easily install and use to create mockups in popular desktop platforms.//


* [[Google Code stencil download page for Pencil|http://code.google.com/p/evoluspencil/downloads/list?q=label:Stencil]]. 
* [[Google Code template download page for Pencil|http://code.google.com/p/evoluspencil/downloads/list?q=label:Template]].

Pencil is a very useful tool for sketching GUI elements. These are a very important way of validating intended and expected user interaction.
----
See also : [[EA Usage - Alternate Image]] [[GUI mockup]]
----
/%
@@color:#c4d6ed; ^^
Description: Pencil - GUI modelling free and open-source tool
^^@@
%/</pre>
</div>
<div title="Precision (KM)" creator="YourName" modifier="YourName" created="201709111045" modified="201709111048" tags="Content Concept KM" changecount="3">
<pre>//"Precision is the percentage of documents in the returned results that are relevant."//
[[Apache Solr Reference Guide 6.0|https://lucene.apache.org/solr/guide/]]
----
See also: [[Recall (KM)]] [[Relevance (KM)]]
----
/%
@@color:#c4d6ed; ^^
Description: Precision concept on knowledge management
^^@@
%/</pre>
</div>
<div title="PrivacyPage" modifier="YourName" created="201601111027" modified="202206170744" tags="Content Privacy" changecount="20" _hash="35896e256cb6224fd16a63cf6d25f0298a5abe8d">
<pre>&lt;&lt;Image "FL" "182" "universal-declaration-human-rights.jpg" "http://www.un.org/sites/www.un.org/files/2015/10/07/" "" ""&gt;&gt;

''[[The Universal Declaration of Human Rights|http://www.un.org/en/universal-declaration-human-rights/index.html]]''
''Article 12.''
''// No one shall be subjected to arbitrary interference with his privacy, family, home or correspondence, nor to attacks upon his honour and reputation. Everyone has the right to the protection of the law against such interference or attacks.//''



Always connected actual reality is frightening. People you do not know from anywhere is constantly monitoring where you are, what you do, to whom you talk, what you read and so many other aspects of your life that we can not even imagine.

Cloud, mobile ~OSs, like Google Android and IOS, completely remove your control over to whom you, or your devices and software, interact with. They say that you can control but, in fact, the choice is an "all or nothing", if you want to use an application you must grant it all privileges even if you do not want or need to use some of them.

There are lots of examples. MS ~OneNote mobile only works with cloud storage and not with local files. Why?  Android devices treat you not as the device owner but as a very limited user with very limited control and knowledge of what's really happening with your data. Any mobile application now requests network access, to display advertising they say, and what else?

The question here is not if ''I do have something to hide'' the question here is that ''I consider my right to have something to hide'', and that is being taken away from me.

I'm starting a systematic approach to protect my privacy in the devices and software I use and I'll try to share those techniques and tools here.

|Type|Name|Description|h
|Browsing|[[Tor Browser|https://www.torproject.org/projects/torbrowser.html.en]]|The Tor Browser lets you use Tor on Windows, Mac OS X, or Linux without needing to install any software. It can run off a USB flash drive, comes with a pre-configured web browser to protect your anonymity, and is self-contained (portable).|
|E-mail service|[[Tutanota|https://tutanota.de]]|Secure every message with automatic encryption. Tutanota protects your data by encrypting subject, content and attachments of emails. Tutanota automatically encrypts all your data on your device. Your emails as well as your contacts stay private. You can easily communicate with any of your friends end-to-end encrypted. Even subject and attachments as well as all your contacts are encrypted.|
|Messaging|[[Jami|https://jami.net/]]|Share, freely and privately.&lt;br&gt; Available on Linux, Android, ~AndroidTV, Windows, macOS and iOS. &lt;br&gt;No personal information needs to be provided when creating an account. &lt;br&gt;All communications are peer-to-peer and end-to-end encrypted.|
|Track control|[[NoScript|https://noscript.net/]]|~NoScript Firefox extension provides extra protection for Firefox, Seamonkey and other mozilla-based browsers: this free, open source add-on allows ~JavaScript, Java, Flash and other plugins to be executed only by trusted web sites of your choice (e.g. your online bank).|
|~|[[Privacy Badger|https://www.eff.org/privacybadger]]|Privacy Badger is a browser add-on that stops advertisers and other third-party trackers from secretly tracking where you go and what pages you look at on the web. Privacy Badger learns about trackers as you browse. For Firefox, Opera and Chrome.|
|Track detection|[[Lightbeam|https://www.mozilla.org/en-US/lightbeam/]]|Lightbeam is a Firefox add-on that uses interactive visualizations to show you the first and third party sites you interact with on the Web. As you browse, Lightbeam reveals the full depth of the Web today, including parts that are not transparent to the average user. &lt;br&gt; [[Lightbeam extension for Firefox is no longer supported|https://support.mozilla.org/en-US/kb/lightbeam-extension-firefox-no-longer-supported]]|
|~|[[Lightbeam 3.0|https://addons.mozilla.org/en-US/firefox/addon/lightbeam-3-0/]]|by Princiya &lt;br&gt; I have been involved with Lightbeam since 2017 through Outreachy and ~PrototypeFund.de programs. I now take responsibility to maintain this web extension! &lt;br&gt; [[On GitHub|https://github.com/mozilla/lightbeam-we]]|
|~|[[BrowserLeaks|https://browserleaks.com/]]|~BrowserLeaks.com — It's all about Web Browser Fingerprinting. Here you will find the gallery of web browser security testing tools, that tell you what exactly personal identity data may be leaked without any permissions when you surf the Internet.|
|~|[[TcpLogView|http://www.nirsoft.net/utils/tcp_log_view.html]]|TcpLogView is a simple utility that monitors the opened TCP connections on your system, and adds a new log line every time that a TCP connection is opened or closed. For every log line, the following information is displayed: Even Time, Event Type (Open, Close, Listen), Local Address, Remote Address, Remote Host Name, Local Port, Remote Port, Process ID, Process Name &lt;br&gt; Run this and get scared at the level Windows exposes You.|
|~|[[IPNetInfo|http://www.nirsoft.net/utils/ipnetinfo.html]]|IPNetInfo is a small utility that allows you to easily find all available information about an IP address: The owner of the IP address, the country/state name, IP addresses range, contact information (address, phone, fax, and email), and more.|
|Android Firewall|[[NetGuard|http://www.netguard.me/]]|~NetGuard provides a simple way to block access to the internet - no root required. Applications can individually be allowed or denied access to your ~WiFi and/or mobile connection.|
|~|[[AFWall+|https://github.com/ukanth/afwall]]|Android Firewall+ is an advanced iptables editor (GUI) for Android. It provides fine-grained control over which Android apps are allowed to access the network.|
|Internet Search|[[SwissCows|https://swisscows.ch/]]|Privacy safe ~WEB-search. A good alternative to advertisement oriented search engines like Google.|
|~|[[search.privacytools.io|https://search.privacytools.io/]]|Powered by searx - Searx is a free internet metasearch engine which aggregates results from more than 70 search services. Users are neither tracked nor profiled. Additionally, searx can be used over Tor for online anonymity.|
|OS Privacy|[[W10Privacy|https://www.winprivacy.de/english-home/]]|The by default highly questionable set options concerning privacy and data protection in Windows 10 make this program a __MUST__ for every user. The program is a help, to display the available settings relatively clearly and to set the desired options if necessary.|

!Sites on privacy
* [[privacytools.io|https://www.privacytools.io/]] - You are being watched. Private and state-sponsored organizations are monitoring and recording your online activities. privacytools.io provides services, tools and knowledge to protect your privacy against global mass surveillance.
* [[EFF|https://www.eff.org/]] - Electronic Frontier Foundation. The leading nonprofit defending digital privacy, free speech, and innovation.
* [[Humane Tech Community|https://github.com/humanetech-community]] - promoting solutions that improve wellbeing, freedom and society.
----
/%
@@color:#c4d6ed; ^^
Description: Privacy related matters page
^^@@
%/</pre>
</div>
<div title="Programming Database" modifier="YourName" created="201303161441" modified="201904122300" tags="Content Database Programming" changecount="5" server.title="Programming Database" server.page.revision="201502081248" server.etag='"acarvalho_public/Programming%20Database/2079963:80e7a2eba56a020cb378c15a401bf82b131818d5"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="580788e69f6e132328cc0bfc8518f4d63e05153a">
<pre>!Database programming

!!Paradigms and approaches
There are a lot of approaches for data persistence. Depending on the exploration scenario some are better than others.
Following are some worth reading articles on the subject :
|Author|Date|Title|Resume|h
|Martin Kleppmann|2015|[[Stream processing, Event sourcing, Reactive, CEP… and making sense of it all|https://www.confluent.io/blog/making-sense-of-stream-processing/]]|An excellent and complete article about available persistence approaches. A must read!|

!!Keys
Record identification and ID generation and strategy is a major choice when designing a database.
!!!GUID
Global Unique Identifiers (aka UUID on Java world) present some very attractive advantages to database keys but they have some drawbacks also.
The main advantages of using ~GUIDs are related to integration and distributed and briefcase model applications. Using ~GUIDs allows for concurrent creation of items without key clash. But using ~GUIDs (really using, that is, they are single primary keys and any relationship uses them and not some business alternate key) also follows some good programming principles. 
*  &lt;&lt;quote 'Stable Dependencies Principle' 'Stable Dependencies Principle'&gt;&gt; : as they are not business driven or dependent they can be much more stable than any business key that can change out of our control.
* &lt;&lt;quote 'Encapsulation' 'Encapsulation'&gt;&gt; : being business independent they present "a protection layer" that shields our systems from changes in business rules or errors and variance in human input.
Following are some worth reading articles on the subject :
|Author|Date|Title|Resume|h
|Jeremy Todd|2013|[[GUIDs as fast primary keys under multiple databases|http://www.codeproject.com/Articles/388157/GUIDs-as-fast-primary-keys-under-multiple-database]]|This article outlines an approach for using GUID values as primary keys/clustered indexes that avoids most of the normal disadvantages, adapting the COMB model for sequential GUIDs developed by Jimmy Nilsson in his article The Cost of GUIDs as Primary Keys.  While that basic model has been used by a variety of libraries and frameworks (including NHibernate), most implementations seem to be specific to Microsoft SQL Server.  This article attempts to adapt the approach into a flexible system that's can be used with other common database systems such as Oracle, PostgreSQL, and MySQL, and also addresses some of the eccentricities of the .NET Framework in particular.|
|Jimmy Nilsson|2002|[[The Cost of GUIDs as Primary Keys|http://www.informit.com/articles/article.aspx?p=25862]]|In this article, Jimmy Nilsson presents the pros and cons of using globally unique identifiers (GUIDs) as the datatype for primary keys in SQL Server 2000. In doing so, he shows you test results that hint of performance characteristics and introduces you to a special type of GUID that he invented, called COMBs, that solves what otherwise might give you a big throughput problem.|
|||||

----
@@color:#c4d6ed; ^^
Description: Database programming main page.
^^@@</pre>
</div>
<div title="Programming Tools" creator="YourName" modifier="YourName" created="201812200922" modified="201812200930" tags="Content [[Software Tool]]" changecount="4" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com">
<pre>This page lists my selection of the finest programming tools I've used.

!! CASE
* [[Sparx Enterprise Architect]] - The best, full process, modelling tool by far.
* [[Sybase Power Designer]] - Essential for database moddeling.

!! Static Analysis
* [[Source Monitor]] - The freeware program Source Monitor lets you see inside your software source code to find out how much code you have and to identify the relative complexity of your modules. Web site : [[Campwood Software|http://www.campwoodsw.com/sourcemonitor.html]]

!! Diff &amp; merge
* [[Araxis Merge]] - Advanced 2 and 3-way file comparison (diff), merging and folder synchronization. [[Web site|https://www.araxis.com/merge/index.en]]

----
/%
@@color:#c4d6ed; ^^
Description: This page lists my selection of the finest programming tools I've used.
^^@@
%/</pre>
</div>
<div title="Programming Topics" modifier="acarvalho" created="201303161615" modified="201401091809" tags="Content Programming" server.title="Programming Topics" server.page.revision="201401091809" server.etag='"acarvalho_public/Programming%20Topics/1620280:1f2aa1d7bffdfe2dbce92560d4c28dfdaaeadc71"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="4a64ad196a2debe2306f76fc2bf24c180cf11964">
<pre>*[[Database Programming|Programming Database]]

----
* [[Object Oriented Programming (OOP)|ObjectOrientedProgramming]] - concepts and thoughts about this essential paradigm.
* [[Development Links]] - a collection of worth visiting links.

Some tools I made that you may find interesting
* [[ASPerfBench]] - small tool to allow for quick assessment of .Net code relative performance.
----
@@color:#c4d6ed; ^^
Description: Programming main page
^^@@</pre>
</div>
<div title="ProgrammingPage" creator="AndreCarvalho" modifier="YourName" created="201206131811" modified="201902120937" tags="Programming" server.title="ProgrammingPage" server.page.revision="201206141512" server.etag='"acarvalho_public/ProgrammingPage/746131:0983e4d0165c355e4dc640bd884ef050b879d75f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="8525236f2a49fa3588c355b28580a22ab653eabb" changecount="1">
<pre>I do program software for living and even get paid for it ;) .

* [[Business Analysis|Business Analysis]] - first the problem then the solution.
* [[Software Specification|SoftwareSpecification]] - ask for things in the right way if you want them to be done well.
* [[Object Oriented Programming (OOP)|ObjectOrientedProgramming]] - concepts and thoughts about this essential paradigm.
* [[References|ReferencesPage]] - a collection of worth visiting links.

Some tools I made that you may find interesting
* [[ASPerfBench]] - small tool to allow for quick assessment of .Net code relative performance.

----
</pre>
</div>
<div title="Promoting Reuse by Reference" modifier="acarvalho" created="201303272245" modified="201410202216" tags="Content Guideline Reuse" server.title="Promoting Reuse by Reference" server.page.revision="201410202216" server.etag='"acarvalho_public/Promoting%20Reuse%20by%20Reference/1929840:720d294d2afcf626094323cd9ae5f07d64035cd1"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e5612c391bf605791bb4d008bfd8d139ab646724">
<pre>[[Reuse by Reference]] has to face several obstacles and, if not properly planned and supported, will produce a nightmare in maintenance and development. But, on the other hand, [[Reuse by Reference]] is the only way to achieve [[Continuous Improvement]] on reusable assets and to capitalize inter-project and inter-team synergies. That's the difference between a solo freelancer developer and a team in a solid and mature company.

This approach assumes you are using a proper [[CVS]] system that holds all your project's data and reusable assets. See [[Concurrent Versioning System]].

!!Filesystem 
The first concern shall be to put in place a proper filesystem structure and reuse strategy that is used, known, and enforced, among all your projects. Your filesystem structure and reuse strategy shall be part of your shared infrastructure specification.

The filesystem shall have folders for, among others, specification items, quality management, project plans and, of course, code. Inside the code folder you must use relative paths for your dependencies and, if you want to share reusable code, you may use the CVS system to produce something like symbolic links, that is, you may checkout reusable modules to the project's filesystem keeping relative dependencies stable and the base code in a shared common place.

The option of checking out common code to the project's folder and not to a shared location intends to allow for each project to depend on specific versions of the reused modules and also to only have to deal with the modules you indeed reuse in each project and not with all of your reusable assets.

On the next image you can see an example of a filesystem structure that promotes [[Reuse by Reference]] and allows for reusable modules to be stored at a central shared location on [[CVS]] while being used (and edited) at each project's filesystem.
&lt;&lt;Image "FR" "" "Reuse%20Filesystem%20Structure.jpg" "https://dl.dropbox.com/" "s/ddp713d8htzcihs/" "?dl=1" "Filesystem structure for reuse."&gt;&gt;
On the left is the [[CVS]] filesystem structure organized according to our proposed [[Namespace and Filesystem Guidelines]], on the right is the development filesystem structure, that is, the checked out filesystem on the developer's machine.
Suppose now that you have a reusable module that is a façade for third-party logging systems like Log4Net and that you want to reuse it in your Project1 project. You have several choices :
# Get a copy of the module and third-party and put it on the project's Implementation folder
# Checkout the module and third-party to your CVSROOT and establish dependencies to it
# Checkout the module and third-party to your project's Implementation folder reproducing it's relative path
The first approach works but you are hiding the module from all other projects, if you improve or correct it the changes will not be visible for others.
The second approach also works but, aside for the difficulty of maintaining relative paths, it prevents the scenario where you have several projects reusing different versions of the reusable module and makes building, deployment and archiving more difficult. It may also bring unnecessary modules to your filesystem and project's environment.
In the third approach you check out only the needed modules from //Internal// folder to a reproduction of the [[standard filesystem structure|Namespace and Filesystem Guidelines]], this way they keep their relative paths and, although they point to the same location on the [[CVS]] you can check out specific tags (versions) for each project. If you change the reusable module you may promote the tag to a branch and commit your changes to the shared module. The reusable module owner can later decide to merge your changes in a new release.

To make thing easier for your users (the developers), and to prevent future maintenance needs, you shall produce a small batch file for each of your reusable modules that will perform the checkout to the folder where it is placed. This way re-users just have to place these batch files where they are needed and run them, this is essential if you do automated [[Continuous Integration]].
{{{
cvs -z9 -r checkout -P -r LOGGING-REL-01_00_002 -d Logging -- Internal/[YourCompanyAcronym]/SYS/Common/Logging

cvs -z9 -r checkout -P -r LOGGING-REL-01_00_002 -d Log4Net -- Internal/Third-Parties/Apache/Log4Net
}}}
The above command will check out the Logging module from [[CVS]] on tag ~LOGGING-REL-01_00_002 and place it in a Logging folder beneath the current directory. The second command will check out the Apache's Log4Net from your repository.

To specify, disseminate and enforce a proper and shared filesystem structure and reuse methodology is the first step for succeeding in [[Systematic Reuse]] efforts and is also a condition for performing [[Emergent Reuse]] effectively.
----
See also : [[Namespace Coupling Guidelines]], [[Namespace Code Placement Guidelines]] and [[Namespace and Filesystem Guidelines]] [[Reuse oriented CVS]]
----
@@color:#c4d6ed; ^^
Description: Promoting Reuse by Reference through a proper filesystem structure guideline
^^@@</pre>
</div>
<div title="QuotePlugin" modifier="acarvalho" created="201304101316" modified="201304101333" tags="systemConfig" server.title="QuotePlugin" server.page.revision="201304101333" server.etag='"acarvalho_public/QuotePlugin/1180543:f1ad9ba890f4fcf2f9bb4f63d703d4948b9cf3e5"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="3b5e700f63b933d7bd148c10c9af50cae1c6adc9">
<pre>/***
|Name|~QuotePlugin|
|Source|http://web.ist.utl.pt/tiago.dionizio/twiki/twiki.cgi/TWPlugins.html#%5B%5BQuote%20Plugin%5D%5D|
|Documentation||
|Version|1.0.0|
|Date|15/7/2005|
|Author|Tiago Dionízio|
|License||
|~CoreVersion||
|Type|plugin|
|Description|Create a direct link to a tiddler using a normal button and a button that expands the specified tiddler inside the current tiddler.|

!!!Syntax:
{{{&lt;&lt;quote 'Text to display' 'Tiddler name' [open]&gt;&gt;}}}

!!!Description:
Create a direct link to a tiddler using a normal button and a button that expands the specified tiddler inside the current tiddler.
To display the included tiddler initially visible just pass ''open'' in the third parameter (not actually the only possible value but you can interpret it like that).
The expand button can also collapse the included tiddler, this will actually remove the included contents. If the included tiddler is changed you can simply expand it again.

!!!Code
***/
{{{
version.extensions.quote = { major: 1, minor: 0, revision: 0, date: new Date(2005, 07, 15)};

config.macros.quote = {};
config.macros.quote.onClick = function(e) {
    if (!e) var e = window.event;
    var container = this.nextSibling;
    var isOpen = container.style.display == "block";

    var tick;
    this.removeChild(this.firstChild);
    if (isOpen) {
        container.style.display = "none";
        tick = "+";
        removeChildren(container);
    }
    else {
        tick = "-";
        var title = container.getAttribute("tiddlyLink");
        var text = store.getTiddlerText(title);
        removeChildren(container);
        if(text)
            wikify(text,container,null,null);
        container.style.display = "block";
    }
    this.appendChild(document.createTextNode(tick));
}
config.macros.quote.handler = function(place,macroName,params) {
    // param 0: text button
    // param 1: tiddler name to display
    // param 2: initial display by default
    var label = params[0];
    var title = params[1];
    var isOpen = params[2] != null;
    var link = createTiddlyLink(place,title,false);
    link.appendChild(document.createTextNode(label));
    var btn = createTiddlyButton(place, isOpen ? "-" : "+", "expand tiddler " + title, this.onClick);
    var container = createTiddlyElement(place, "blockquote");
    container.setAttribute("tiddlyLink", title);
    container.style.display = isOpen ? "block" : "none";
    if (isOpen) {
        var text = store.getTiddlerText(title);
        if(text)
            wikify(text,container,null,null);
    }
}

}}}
</pre>
</div>
<div title="QuotesPage" modifier="acarvalho" created="201306050854" modified="201306050855" tags="Content" server.title="QuotesPage" server.page.revision="201306050855" server.etag='"acarvalho_public/QuotesPage/1248329:1bccf09079e6b54c3c89f8e82598e36a3cce9cb8"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6ecdaa9d20430486b8a76635551868cd426d7d6a">
<pre>|Quotes|h
|&lt;&lt;list filter [tag[Quote]]&gt;&gt;|
----
/%
@@color:#c4d6ed; ^^
Description: A collection of important quotes from important people
^^@@
%/</pre>
</div>
<div title="RFP" modifier="acarvalho" created="201206161633" modified="201304221428" tags="Acronym Content TODO" server.title="RFP" server.page.revision="201304221428" server.etag='"acarvalho_public/RFP/1192928:b9e12cf52f8b8d450e61e3d2e30e780782946adf"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="03bd0f5e706836a042d0cd8cc74336c290b07f20">
<pre>Request for Proposal
----
See also : [[RFP Analysis Guidelines]]
----
/%
@@color:#c4d6ed; ^^
Description: Request for Proposal
^^@@
%/</pre>
</div>
<div title="RFP Analysis Guidelines" modifier="acarvalho" created="201207162153" modified="201312131035" tags="Content Guideline TODO" server.title="RFP Analysis Guidelines" server.page.revision="201312131035" server.etag='"acarvalho_public/RFP%20Analysis%20Guidelines/1594472:96a8846aaaa49ca5f2b65aa44540eb8981b5a596"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="b3c06527d5a115e0feaf9170a109fba44f183299">
<pre>//''"In preparing for battle, I have always found that plans are useless but planning is indispensable."''//
[[Dwight David Eisenhower (14 October 1890 – 28 March 1969)|http://en.wikiquote.org/wiki/Dwight_D._Eisenhower]]
!Introduction
The Request for Proposal Analysis occurs when you have to respond to a Customer's request for providing a Proposal (technical, financial and schedule) for a, possible, project he is willing to perform. This is the first stage you must perform : study and analysis of the problem and its scope.

{{tw_ttoc{}}}

!RFP Analysis Structure
The Request for Proposal Analysis is intended to provide a study infrastructure and step that will allow you to fully understand the Customer's request and needs. If done with method and proper tools, it will also produce a known, coherent and normalized [[traceability|Traceability]] basis for further work.
At the same time you study the [[RFP]] you shall &lt;&lt;quote 'copy' 'EA Tips &amp; Tricks##Creating elements by dragging text onto a diagram'&gt;&gt; its information to the referred structure, changing as little as you can. The structure will act as a roadmap for analysis and as a completeness check list.
Do not think it is a waste of time, restructuring and normalizing the information is one of the best known ways of converting it into knowledge, and more, ''shareable persistent knowledge''. 
!!Problem Statement
This is an introductory section that shall give an overview of the problem and give a broad overview of the Customer envisioned solution.
This shall also provide a context for the following sections.
EA usage : Packages as  typographical elements of a document. Illustrative diagrams may be used if necessary. This shall, when possible, be an import of the Customer provided information.
&lt;&lt;Image "FR" "" "RFP-Analysis-Structure.PNG" "https://dl.dropbox.com/" "s/dwefsm068yfz2w0/" "?dl=1" "RFP Analysis Structure"&gt;&gt;

//This is the Business Requirements Level. The business requirement is written from the Sponsor's point-of-view. It defines the objective of the project (goal) and the measurable business benefits for doing the project. The following sentence format is used to represent the business requirement and helps to increase consistency across project definitions:
"The purpose of the [project name] is to [project goal -- that is, what is the team expected to implement or deliver] so that [measurable business benefit(s) -- the sponsor's goal]." //
&lt;&lt;BibRef "BABOK 2008"&gt;&gt; Chapter 4 : Enterprise Analysis

!!Goals
The Goals section shall describe the Customer goals for the project.
It shall also provide a list of success criteria in Customer's perspective.
This section shall present the business goals the project is supposed to support. This information shall be used to take decisions and to evaluate project's success.

You may, and probably shall, partition the project goals in sub-packages as specific as possible. Remember the goals are the factors to consider in trade-offs and are also success criteria so, the more specific they are the better.

Goals list is a main alignment tool between you and your Customer. Goals identification and description are also a main validation item that provides a very readable and understandable topic for your stakeholders.

"//According to our experience, the goal-agent-scenario triangle proved to be really effective. In particular, we repeatedly observed that a well-structured goal model provides an ideal communication interface between business managers and software engineers. Decision makers looked at goal models carefully, paying special attention to alternative goal refinements, operationalizations and responsibility assignments; they did not care too much about UML object models; annotated goal diagrams were found to be more helpful for focussed brainstorming, validation, negotiation, and decision making than fairly vague use case diagrams.//"
A. van Lamsweerde 
[[Goal-Oriented Requirements Engineering: A Roundtrip from Research to Practice |http://www.info.ucl.ac.be/Research/Publication/2004/avl-RE04-Keynote.pdf]]
Proceedings of RE’04, 12th IEEE Joint International Requirements Engineering Conference, Kyoto, Sept. 2004, 4-8 (Invited Keynote Paper) 


!!Stakeholders
Stakeholders are the persons affected by the project results and that can sponsor, contribute or take decisions over its definition.
&lt;&lt;Image "FR" "250" "RFP-Stakeholders.png" "https://dl.dropbox.com/" "s/25108r91fth99ra/" "?dl=1" "RFP Stakeholders"&gt;&gt;
Define Stakeholders list.
Stakeholder attributes :
*Identification
*Contact details
*Affected interests
*Project's impact : real / perceived
*Decision ability
EA usage : ''Use Case'' diagram. ''Actor'' element (for groups detail contact person(s)). Fill details (Stakeholder attributes) in each element.
[[Traceability]] : Stakeholders may/shall be traced from Requested Features as authors or decision makers.
Stakeholders are not Roles. Not all Stakeholders will correspond to a role in the solution but all roles in the Proposed Solution must have a correspondent Stakeholder.
&lt;&lt;BibRef "BABOK 2008"&gt;&gt; Chapter 2 : Business Analysis Planning and Monitoring : 2.3 and 2.9 

!!Business Processes
&lt;&lt;Image "FR" "250" "RFP-Business-Process.png" "https://dl.dropbox.com/" "s/go4tkspievr9bqc/" "?dl=1" "RFP Business Processes"&gt;&gt;
This section shall describe all business processes, as the Customer see or perform them, that the solution will interact with.
This information may came from Customer's documented business processes or be constructed by a joint effort between Tendering and Technical Proposal Team. If necessary and possible it shall also involve Customer.
EA usage : The Business Processes diagram is ''Activity'' and the most relevant elements are ''Partition'', ''Activities'' and ''Decision''.
Primary Relationship is ''Control Flow'' to convey sequence.
The partitions shall reflect the relevant actors be them Customer organizational units or existing or to be developed systems. For each activity the expected role of the solution shall be stated.
Business Processes shall be structured in packages and the package shall contain a contextual introduction to the diagram. The diagram itself shall contain a textual description of the process.

!!System Context
The following sections are intended to provide a full description of the surrounding environment for the solution.
This is a major scope control information and shall prevent most of the integration problems. It is also very useful in defining our system's responsibilities versus Customer's systems responsibilities and, as such, very important for Proposal. 
!!!Data Flow Diagram
&lt;&lt;Image "FR" "250" "DFD%280%29.png" "https://dl.dropbox.com/" "s/9xa5jbcjemrd9j9/" "?dl=1" "DFD(0) or Context Diagram"&gt;&gt;
Next to specification errors, integration "surprises" are a major cause of project problems or even failure. Determining a clear exploration context with very specific integration needs is, therefore, a major concern in Software Development. Also an underspecified context is a major scope risk. You know the scenario when tenths of MS Access databases start popping in requirements phase, don't you? 
On analysing the [[RFP]] you shall identify each and every reference to external systems and record it in your [[DFD|Data Flow Diagram]].

A [[Data Flow Diagram]] is your first and best ally in this matter.


!!!Integration Environment
The Integration Environment shall describe the intended hardware, network and software platform were the system is supposed to be deployed.
It is the deployment or infrastructure view of the Context Diagram.
&lt;&lt;Image "FR" "250" "Integration%20Environment%20-%20Overview.png" "https://dl.dropbox.com/" "s/zbvwh0uix7o3i8y/" "?dl=1" "Integration Environment - Overview"&gt;&gt;
There are two views for this information: 
*informal - targeted to non technical audiences is simpler and only focuses in nodes and connections, 
*formal - for more technical audiences addresses execution environments.

The integration environment is an important piece to align customer infrastructure needs and also to assure good and specified integration of the solution. This may save you a lot of trouble and waiting time when deploying for acceptance.

*Description:
**This shall describe Customer's infrastructure and the integration environment for the requested solution.
**It shall present the existent deployment hardware environment and the software components with which the solution interacts.
**This must clearly state all integration requirements such as Authentication Schema, mandatory frameworks/technologies, etc.
&lt;&lt;Image "FR" "250" "Integration%20Environment.png" "https://dl.dropbox.com/" "s/6c58fgjn7omzmfi/" "?dl=1" "Integration Environment"&gt;&gt;
*EA usage:
**The Integration Environment diagrams are Deployment diagram. The elements are Nodes for machines, Execution Environments for operating systems and platforms, Components for programs, existent or to be developed. The components to be developed shall be represented at the deployment package or system level and they may be placed here or at Technical Proposal.Technical Solution.Preliminary Component Model being this the preferred placement.
**Relationships are Association and they may be named for protocol and have source and target roles specified.
**Two diagrams shall be produced : the Overview with only the Nodes and their relationships and using friendly icons and the Detailed diagram using all referred elements.
*Traceability
**Traceability shall be maintained upwards by Association with correspondent Data Flow Externals.
*Scope:
**This is a PUBLIC section that is not directly present in deliverables.
*Internal section goals:
**This section shall present a technological introduction to the problem and its context. It shall also present a broad technological scope definition for the proposal. This shall be a Customer view. 
**This is the (Customer) declared integration environment, it will be the basis for the corresponding section on Proposal.
**All systems (hardware, devices, software, interfaces) that are relevant to the problem/solution shall be listed and described with as much detail as possible. Relationships between them shall be described and protocols identified.
*External section goals:
**None.
*When in doubt:
**This is a mandatory input. You may state "NO INTEGRATION" if you, as an architect, are lucky enough to have such a project, in this case this is a very probable candidate to productization and reuse.
*Notes:
**This section is reused (probably with modifications/enhancements) on [[Proposal|Technical Proposal Production Guidelines]].
**This is a clear candidate for reuse and continuous improvement when we have more than one project with the Customer. It shall be continuously refined along all the project.
*References:
!!!External Interfaces
*Description:
**This shall list and describe Customer's systems interfaces that our system will depend upon.
**The interfaces shall be described (operations and parameters) to the possible extent. This may/shall be refined on Specification phase.
**This must clearly state all interfaces that our system will depend upon.
*EA usage:
**The External Interfaces diagram is Class Diagram and the elements are Interface.
*Traceability
**External Interfaces shall be exposed on Integration Environment Components.
*Scope:
**This is a PUBLIC section that is not directly present in deliverables.
*Internal section goals:
**This section shall, up to the possible extent, present a full list of interfaces that our system will use on Customer's existing systems. 
*External section goals:
**Validate completeness.
*When in doubt:
**This is a mandatory input. You may state "NO INTEGRATION" if you, as an architect, are lucky enough to have such a project, in this case this is a very probable candidate to productization and reuse.
*Notes:
**This section is reused (probably with modifications/enhancements) on [[Proposal|Technical Proposal Production Guidelines]].
**This is a clear candidate for reuse and continuous improvement when we have more than one project with the Customer. It shall be continuously refined along all the project.
*References:
!!Organization Standards
Every organization has some standards it follows. They may be more or less formal, written or just practised,  but they are always, at least, guidelines and expectation referentials.
When this information is transmitted to you, in any form, you can not afford to ignore or lose it under the penalty of disregarding something that is obviously important for your Customer.
In our context this section shall list, reference and, at least, summary describe all Customer pertinent information. Imagine a reference architecture, a naming convention, a glossary, an external standard the Customer is certified under, etc.
This information is essential and is an important business continuity mark when you have more than one project with the same Customer. It shall be reused and enhanced in each new project with the same Customer.

!!Requested Features
The first consideration is how to express the problem and the business needs. ''User Requirements'' concept is the first thing to came to mind. We propose, however, that a different concept be used in the Inception phase, that concept is ''Feature'' in the form of ''Requested Feature'' and ''Proposed Feature''. The detailed discussion on this approach is in [[Software Requirement vs. Feature]].

The Requested Features shall have a content as close to the Customer's original expression as possible. You want to capture all of the RFP information in the model in order to not have to go back to [[RFP]] after analysis is concluded. For this you shall respect Customer's statements and make clear what was said by him and what you add yourself. Remember that Requested Features are your primary [[traceability|Traceability]] origins and scope items.

Decompose Customer statements into as many features as they contain and create one feature for each. You want requested Features to be as specific as possible.
Customer : "//The system shall optimize data entry effort and enrich it with more information than we have today.//"
''~RFT-10.010 - Optimize data entry effort''
The system shall optimize data entry effort (...).
''~RFT-10.020 - Enrich data with more information''
The system shall (...) enrich [data entry] with more information than we have today.

!!Issues
If you are analysing you'll have doubts and identify omissions, record them or lose them, is that simple.

----
Back to [[Business Analysis]]
----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: Guidelines for RFP analysis
^^@@
%/</pre>
</div>
<div title="Recall (KM)" creator="YourName" modifier="YourName" created="201709111044" modified="201709111048" tags="Content Concept KM" changecount="2">
<pre>//"Recall is the percentage of relevant results returned out of all relevant results in the system. Obtaining perfect recall is trivial: simply return every document in the collection for every query."//
[[Apache Solr Reference Guide 6.0|https://lucene.apache.org/solr/guide/]]
----
See also: [[Precision (KM)]] [[Relevance (KM)]]
----
/%
@@color:#c4d6ed; ^^
Description: Recall concept on knowledge management
^^@@
%/</pre>
</div>
<div title="Refactor" modifier="acarvalho" created="201206210933" modified="201304121429" tags="Concept Content" server.title="Refactor" server.page.revision="201304121429" server.etag='"acarvalho_public/Refactor/1182965:1681720d2141583f9229ea1a54f92333826ff1bc"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="338c506248affab6a7228b139de074543f7ea058">
<pre>''//"Refactoring is a disciplined technique for restructuring an existing body of code, altering its internal structure without changing its external behavior."//''
Martin Fowler [[Refactoring Home Page|http://martinfowler.com/refactoring/]]

&lt;&lt;Image "FR" "125" "P/0201485672.01.MZZZZZZZ.jpg" "http://images.amazon.com/" "images/P/" "" ""&gt;&gt;
"//Refactoring is about improving the design of existing code. It is the process of changing a software system in such a way that it does not alter the external behaviour of the code, yet improves its internal structure. With refactoring you can even take a bad design and rework it into a good one.//"
[[Refactoring: Improving the Design of Existing Code|http://c2.com/cgi/wiki?RefactoringImprovingTheDesignOfExistingCode]], 1999
Martin Fowler, Kent Beck, John Brant, William Opdyke, Don Roberts

Refactoring is a primary weapon against [[Software Rotting|Software Rot]] and an essential tool for [[Continuous Improvement]], [[Systematic Reuse]] and [[Opportunistic Productization]].

An interesting blog post by Vijay Narayanan states [[Refactor Code Often, Continuously, Every Iteration|http://artofsoftwarereuse.com/2013/03/24/refactor-code-often-continuously-every-iteration/]] and, in fact, you should. Refactoring is never a waste of time even if you don't reuse the refactored code and just have to maintain it.
----
@@color:#c4d6ed; ^^
Description: Refactor concept explanation and references.
^^@@</pre>
</div>
<div title="ReferencesPage" modifier="acarvalho" created="201206132155" modified="201206141731" tags="Links Programming References" server.title="ReferencesPage" server.page.revision="201206141731" server.etag='"acarvalho_public/ReferencesPage/746182:6a41712996c4c62eceacb7b6241978406bf80380"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="8443350a2000f149a7ab89e6bb48c74773b4072b">
<pre>!! &lt;html&gt;&lt;a name="Architecture" /&gt;&lt;/html&gt; Architecture
* [[Bredemeyer Consulting - Software Architecture, Architects and Architecting|http://www.bredemeyer.com/]] - This site organizes a variety of resources to help enterprise architects and software architects deepen and expand their understanding of architecture and the role of the architect.
* [[MS The Architecture Journal|http://www.architecturejournal.net]] - Microsoft's Architecture Journal.

!! &lt;html&gt;&lt;a name="BusinessAnalysis" /&gt;&lt;/html&gt; Business Analysis
* [[A Guide to the Business Analysis Body of Knowledge® (BABOK® Guide)|http://www.iiba.org/imis15/IIBA/Professional_Development/Business_Analysis_Body_of_Knowledge/IIBA_Website/Professional_Development/Business_Analysis_Body_of_Knowledge_pages/Business_Analysis_Body_of_Knowledge.aspx?hkey=d0891e0a-996a-431f-a6f5-a7d644e23a5c]] - is the collection of knowledge within the profession of business analysis and reflects current generally accepted practices. As with other professions, the body of knowledge is defined and enhanced by the business analysis professionals who apply it in their daily work role. 

!! &lt;html&gt;&lt;a name="OOP" /&gt;&lt;/html&gt; OOP (Object Oriented Programming)
* [[JOT|http://www.jot.fm]] - Journal of Object Technology (JOT) is an on-line peer-reviewed publication, published six times per year by the ETH Swiss Federal Institute of Technology, aimed at intermediate to advanced practitioners, educators and researchers in the field of object technology.

----</pre>
</div>
<div title="Relevance (KM)" creator="YourName" modifier="YourName" created="201709101035" modified="201709111047" tags="Content Concept KM" changecount="6">
<pre>//"In information retrieval, relevance is defined as the practice of returning search results that most satisfy the user’s information needs."// 
Relevant Search - With applications for Solr and Elasticsearch
Doug Turnbull and John Berryman

As a measure :
//"Relevance is the degree to which a query response satisfies a user who is searching for information."//
[[Apache Solr Reference Guide 6.0|https://lucene.apache.org/solr/guide/]]
----
See also: [[Precision (KM)]] [[Recall (KM)]]
----
/%
@@color:#c4d6ed; ^^
Description: Relevance concept in Knowledge Management
^^@@
%/</pre>
</div>
<div title="Requirement Boilerplate" modifier="acarvalho" created="201306051704" modified="201401230921" tags="Concept Content" server.title="Requirement Boilerplate" server.page.revision="201401230921" server.etag='"acarvalho_public/Requirement%20Boilerplate/1633775:a7b12eb7ec094d78422870151f23d2c08cfdd7c3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="5f4044b4ad84e9f97b73a8358f88ab2d1e3582ef">
<pre>The concept of using boilerplates for writing statements of requirement is quite simple: choose an appropriate predefined template, and fill in the gaps. Each statement of requirement then becomes a generic boilerplate plus the specific values of selected attributes. 

''Example boilerplate:''
&gt;     The &lt;user&gt; shall be able to &lt;capability&gt; at a maximum rate of at least &lt;quantity&gt; times per &lt;time unit&gt;.
''Example instantiation: ''
&gt;     &lt;user&gt; = order entry clerk
&gt;     &lt;capability&gt; = raise an invoice
&gt;     &lt;quantity&gt; = 10
&gt;    &lt;time unit&gt; = hour
''Giving :''
&gt;     "The order entry clerk shall be able to raise an invoice at a maximum rate of at least 10 times per hour."

Using this approach, an organisation can gradually refine a repertoire of ways of expressing all the kinds of requirement it needs. By encouraging engineers always to choose from the repertoire, a uniformity of style can be achieved in the organisation.

From : http://eatwalksleep.com/gbjedi/books/re/boilerplates/index.htm
----
/%
@@color:#c4d6ed; ^^
Description: Requirement Boilerplate concept and references.
^^@@
%/</pre>
</div>
<div title="Reuse" modifier="YourName" created="201310052119" modified="202106171512" server.title="Reuse" server.page.revision="201310052119" server.etag='"acarvalho_public/Reuse/1442383:dc92d4a660951dda0e50851664f798c255d3309f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="182ae8b15d1635dff8be791ce5f6a5d12b4ebdf2" changecount="1">
<pre>Reuse, [[Systematic Reuse]], is, probably, the closest thing to a "//silver bullet//" that one can get in Software Engineering.
But the fact is that most of reuse endeavors fail miserably.
In my opinion this is due, mostly, to a focus on "code reuse" instead of in promoting the conditions that favor the production of reusable code.

----
/%
@@color:#c4d6ed; ^^
Description: Tag for reuse matters
^^@@
%/</pre>
</div>
<div title="Reuse Advantages" modifier="acarvalho" created="201512041021" modified="201512041102" tags="Content Reuse" server.title="Reuse Advantages" server.page.revision="201512041102" server.etag='"acarvalho_public/Reuse%20Advantages/2412249:f6c8a817803f41211b4ecb5d978695734a16440b"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="8a0566c4fb70a8f47f13594b258fa568dca5df76">
<pre>''Solution quality''
A reused solution is more mature than an absolutely new one. Maturity is a good thing as it incorporates continuous improvement and assures more knowledge and control over the context and results. Also a reused solution is, typically, better verified and validated than a new one.

''Reduced costs''
A reused solution shall reduce cost when compared to a brand new solution.
This shall improve competitiveness and release resources to the really specific challenges of each concrete project.

''Estimation accuracy''
Estimating over a reuse framework is more accurate as the uncertain parts are less and framed by known meta-architectures and solution patterns.
Also estimation history and problem comparability increases figures safety and the ability to decrease risk margin thus contributing to potential competitiveness.

''Homogeneity promotion''
Reuse promotes homogeneity of work products thus also promoting their reusability and continuous improvement making a virtuous cycle.

----
/%
@@color:#c4d6ed; ^^
Description: An enumeration of reuse benefits
^^@@
%/</pre>
</div>
<div title="Reuse Obstacles" modifier="acarvalho" created="201307281638" modified="201512041100" tags="Content Reuse" server.title="Reuse Obstacles" server.page.revision="201512041100" server.etag='"acarvalho_public/Reuse%20Obstacles/2412248:741714dce052146086dd4dcf0c9d8b4aa866439a"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d4927e234c6eb61bfc3f788d8056dfb8c1fb6d8a">
<pre>There are many obstacles to implementing [[Systematic Reuse]]. Some are practical and technical considerations, some are management attitudes and myths, some are strategic choices, some are just reflex of lack of experience and immaturity.

!Reusable Asset Discovery
The first obstacle is the difficulty on locating potential reusable assets. How do you know that they exist? How do you assess them in a time/cost-effective manner? To progress from the Individual Reuse level (See [[RMM|Implementing Systematic Reuse]]) to more advanced ones you must tackle this problem.
See also : [[Software Development Ontology|SoftwareDevelopmentOntology]]

!Project Centric fanatic views
A common minimalistic management view is to think that projects shall consider only the shortest possible view to accomplish their immediate targets and never consider any medium-term goals, these are top management tasks, project members are just task oriented code doers incapable of taking reasonable medium-term economical decisions.
This has a known effect of stalling technical progress and effectively prevent and even discourage any kind of reuse.

!Lack of established guidelines for namespace and coupling control
Chaotic namespaces ([[filesystem, namespace and packaging|Namespace and Filesystem Guidelines]]) and uncontrolled spaghetti [[coupling|Coupling]] are one of the major technical  obstacles to reuse. They undermine confidence in the profitability of reuse and bring nasty surprises to those who dare to risk reusing. They are, however, quite simple to avoid with proper planning and clear guidelines enforced. I do recommend these two aspects to be addressed at the beginning of any reuse improvement programme. [[Namespace and Filesystem Guidelines]] and [[Namespace Coupling Guidelines]] provide some very simple approaches to deal with the subject.

!Reuse by Copy
[[Reuse by Copy|Reuse by Reference]] is induced by the technical myth that you must completely isolate each project's code from all other projects. This completely impairs continuous improvement of reusable artefacts and creates a nightmare of hacked versions that for sure discourage reusable artefact authors of maintaining and improving them. At the very minimum any reusable artefact shall have an owner and the owner shall be informed of each and every reuse instance and be given the opportunity to know and comment any changes made to the artefact. 

!Lack of established archetypes
Chaotic [[modularizations|Modularization]] often prevent reuse even inside the same project. An established [[archetype|Application Archetype]] catalogue will help in orienting [[modularizations|Modularization]] of your systems in order to reduce [[Coupling]] and increase [[Cohesion]] and these are major factors on reuseability.

!The tool myth
Before choosing tools to manage reuse assets or processes you must be able to produce reusable assets and have those assets. To produce reusable assets you must invest in promoting homogeneity (compatibility) and collaboration (continuous, collaborative improvement). A tool without a method is an obstacle...
See [[Implementing Systematic Reuse]] for, I think, a better approach.

!Concurrent Versioning System methods
Choosing the wrong [[Concurrent Versioning System]] may be one of the worst obstacles to [[Systematic Reuse]]. Certain methods encourage divergence (branching) and do not promote convergence and, thus, [[Continuous Improvement]], collaboration and sharing.
See [[Reuse oriented CVS]].
----
/%
@@color:#c4d6ed; ^^
Description: Reuse Obstacles identification and discussion
^^@@
%/</pre>
</div>
<div title="Reuse by Reference" modifier="acarvalho" created="201206211056" modified="201304121429" tags="Concept Content" server.title="Reuse by Reference" server.page.revision="201304121429" server.etag='"acarvalho_public/Reuse%20by%20Reference/1182966:ca8028541610d0ef221ea64cd7de11fc008a036e"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1fcf371bec12d6b0b7cfc2ec8adfad3ac5279cd5">
<pre>Reuse by copy opposes to __reuse by reference__ and is one of the main obstacles to [[Systematic Reuse]] and [[Continuous Improvement]]. Reuse by reference applies to code reuse primarily but keep in mind that [[Systematic Reuse]] is not only, nor even primarily, code reuse.

Reuse by copy happens when, on reusing a module, you just copy it from its original repository and put the copy on the filesystem of the project that reuses it. On __reuse by reference__ you check out the reusable module to the filesystem of the reusing project but, on the [[CVS]] repository, the module is the same. Of course you shall relay your dependency on a [[CVS Tag]]. The benefit of doing so is evident : ''all enhancements and improvements may be easily shared among all projects that reuse the module'' along time. When you copy you hide from all other projects and [[Systematic Reuse]] is impaired.

In a very interesting post about [[5 Tips to Co-Create Reusable Components|http://artofsoftwarereuse.com/2013/02/17/5-tips-to-co-create-reusable-components/]] Vijay Narayanan states :
"//Share the source code of all your reusable components so every developer in the team can see under the hood how the component works and how it can be improved//"
----
See also : [[Promoting Reuse by Reference]]
----
@@color:#c4d6ed; ^^
Description: Reuse by Reference vs. Reuse by Copy  concept explanation.
^^@@</pre>
</div>
<div title="Reuse oriented CVS" modifier="acarvalho" created="201403091003" modified="201512141813" tags="Content Development Guideline Reuse TODO" server.title="Reuse oriented CVS" server.page.revision="201512141813" server.etag='"acarvalho_public/Reuse%20oriented%20CVS/2424166:6c64999daf336338c837460a2458dc95233763fe"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="755ec65237ba33223a15b56cd3dd85978efc5b68">
<pre>The first thing to consider when designing a [[CVS]] policy is file system structure. You must establish rules and standard file system structures to cope with complexity and allow for information location and retrieval. Also, if [[reuse|Systematic Reuse]] is, and it should be, a concern, a proper, standardized and followed, [[code file system|Namespace and Filesystem Guidelines]] is a major asset you can not afford to underestimate.
As said, [[Configuration Management]] encompasses much more than code and, as such, your file system structure shall reflect that.
For the code part you may look at [[Promoting Reuse by Reference]] and [[Namespace and Filesystem Guidelines]]. A good [[CVS]] tool and policy are essential on promoting [[Systematic Reuse]].

TODO: source-control vs. concurrent versioning system
----
Back to [[Concurrent Versioning System]] [[High Maturity Practices]]
See also [[Namespace and Filesystem Guidelines]] [[Promoting Reuse by Reference]]
----
/%
@@color:#c4d6ed; ^^
Description: Some guidelines for Concurrent Versioning Systems implementation and management.
^^@@
%/</pre>
</div>
<div title="SAS" modifier="acarvalho" created="201206161635" modified="201304122132" tags="Acronym Content TODO" server.title="SAS" server.page.revision="201304122132" server.etag='"acarvalho_public/SAS/1183981:ddae027ab9f435e84b65c9d5ebe3e0563c593ee0"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="2cf6aa370ff30bce5d20566182042dbd70b1ae6e">
<pre>Software Architecture Specification
----
@@color:#c4d6ed; ^^
Description: Software Architecture Specification
^^@@</pre>
</div>
<div title="SBPAP" modifier="acarvalho" created="201309161051" modified="201309161059" tags=".Net Content Tool" server.title="SBPAP" server.page.revision="201309161059" server.etag='"acarvalho_public/SBPAP/1404499:77c39baf751c70236016280f785895c0ecbdd1d0"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="2aba935ebce27e65512b16cdb2e3b185900486f5">
<pre>!Self-balanced Parallel Asynchronous Processor (SBPAP)

Provide a reusable platform and architectural guidance for self-balanced parallel asynchronous processing of variable data objects in order to increase applications performance and leverage actual multiprocessor environments full potential.
Self-balancing means that the system is able to adjust itself to load and available resources during its operation.
Parallel means that the system is able to process each data object in different parallel threads taking full advantage of multi-processor environments.
Asynchronous means that the system is intended for asynchronous usage, that is, it is not intended for scenarios where an immediate response is needed from processing (although it can also be used that way, probably with some performance and architectural advantages).

You may download the full article [[here|https://www.dropbox.com/s/luehyrcvmpeq8yd/Self-balanced%20Parallel%20Asynchronous%20Processor%20%28SBPAP%29.docx?dl=1]]


----
/%
@@color:#c4d6ed; ^^
Description: Self-balanced Parallel Asynchronous Processor (SBPAP)
^^@@
%/</pre>
</div>
<div title="SDP" modifier="acarvalho" created="201206172120" modified="201308062307" tags="Acronym Content" server.title="SDP" server.page.revision="201308062307" server.etag='"acarvalho_public/SDP/1334988:6b0fae223f2765a3765f1dcba7cfd7136431f331"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="b61bf46183b9e038cf1d6e9d18c22448a5bde0d2">
<pre>[[Software Development Process]]
----
/%
@@color:#c4d6ed; ^^
Description: Software Development Process
^^@@
%/</pre>
</div>
<div title="SMART Requirements" modifier="acarvalho" created="201206181857" modified="201304121421" tags="Concept Content Requirements" server.title="SMART Requirements" server.page.revision="201304121421" server.etag='"acarvalho_public/SMART%20Requirements/1182927:f30eaf9bacc64c4939eaad6a42ebb05fe3aeede4"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="9e55de0485b18383e541d3e672b4d7d19a55d742">
<pre>SMART stands for :
* ''Specific'' : A requirement must say exactly what is required.
* ''Measurable'' : In the context of Requirements Engineering, by measurable we mean is it possible, once the system has been constructed, to verify that this requirement has been met.
* ''Attainable'' : By an attainable requirement we mean it is possible physically for the system to exhibit that requirement under the given conditions.
* ''Realizable'' : in the context of software requirements, by realisable we mean is it possible to achieve this requirement given what is known about the constraints under which the system and the project must be developed. 
* ''Traceable'' : Requirements [[Traceability]] is the ability to trace (forwards and backwards) a requirement from its conception through its specification to its subsequent design, implementation and test.

These are characteristics a Software Requirement shall present to be considered as such. The concept was proposed by &lt;&lt;BibRef "Mannion,Keepence 1995"&gt;&gt;.

----
See also : [[Software Requirement]] [[Writing Good Requirements]]
----
@@color:#c4d6ed; ^^
Description: SMART Requirements concept explanation and reference.
^^@@</pre>
</div>
<div title="SRS" modifier="acarvalho" created="201206161634" modified="201304122133" tags="Acronym Content TODO" server.title="SRS" server.page.revision="201304122133" server.etag='"acarvalho_public/SRS/1183983:98b8bb958207da5699837f874c22586a1c8bf507"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="40cd96151852bb4a3f91883da21615c9f28ee34b">
<pre>Software Requirements Specification
----
@@color:#c4d6ed; ^^
Description: Software Requirements Specification
^^@@</pre>
</div>
<div title="Scope Management" modifier="YourName" created="201304242003" modified="202007121042" tags="Content Guideline" changecount="1" server.title="Scope Management" server.page.revision="201601072342" server.etag='"acarvalho_public/Scope%20Management/2444804:28a4813aa26a374499911b7beaca13625796861d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="251695a785dce2242ba911da766319803efc980f">
<pre>Next to Inception and Specification errors, lack of Scope Control is one of the major failure causes in Software Development.

Scope is (re)defined along the entire project, however, Scope Definition should be centered in some specific phases as changes to it in later phases usually bring a lot of cost and risk associated.

Scope Management is related to several other disciplines namely Change Management and, of course Inception and Specification. In fact, Inception and Specification quality and maturity greatly determine the scope risks a project will incur.

[[Traceability]] is the first weapon against loosing scope control, proper structure, methods and maturity of the specification team are the other factors to consider. A proper and traceable structure gives you a check list and a known context where you can detect omissions and ambiguity warnings as well as clear indicators of scope growing. Evolved methods allow for objective expression, coherence and validation of the considered scope. Maturity is essential to anticipate, detail, integrate and define a scope that is feasible and adequate to Customer's needs.
&lt;&lt;Image "FR" "358" "Phasing-Scope.png" "https://dl.dropbox.com/" "s/tpr7waf8t2l60wo/" "?dl=1" "Phasing and Scope."&gt;&gt;
We propose that scope be, primarily, defined in the Inception phase (Pre-sales, RFP and Proposal). The image illustrates the relative scope range in the different phases from a broad open scope in pre-sales to a more focused one in [[Request For Proposal|RFP Analysis Guidelines]] to a closed, defined and sufficient scope on [[Proposal|Technical Proposal Production Guidelines]]. The [[Requirements|Software Specification]] phase shall not change the proposed scope unless with a formal Change Procedure. Remember estimation and, thus, price, schedule and resources, were defined at Proposal. But also remember that the Customer is entitled to expect that your proposed scope is ''sufficient'' to address his needs unless you clearly stated otherwise in your Proposal.
There is a permanent and difficult balance to be done between "selling arguments" in the Proposal and realistic and adequate scope definition.

To manage (protect) scope at Requirements Specification phase is one of the most challenging tasks a Software Development team faces.
The first task with a Change Request is to identify it as an ''omission'', that is, a Feature of the system that is essential for it to fulfil its declared goals and, as such, its a shared mistake between your Proposal team and the Customer's Proposal validation team, or as an ''addition'', that is, an opportunistic identification of a need, that the Customer wants to see covered by a Feature of the current system and that is, in fact, an extension to the proposed scope.
----
See also [[Coverage]]
----
/%
@@color:#c4d6ed; ^^
Description: Scope Management guidelines
^^@@
%/</pre>
</div>
<div title="SectionLinksPlugin" modifier="acarvalho" created="201206140931" modified="201206140931" tags="systemConfig" server.title="SectionLinksPlugin" server.page.revision="201206140931" server.etag='"acarvalho_public/SectionLinksPlugin/745707:a563a9786fd6a5bde61e1c3fbea3401203717596"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="60e0ed86862ccb7d65387a731edbc157ce12f153">
<pre>/***
|Name|SectionLinksPlugin|
|Source|http://www.TiddlyTools.com/#SectionLinksPlugin|
|Documentation|http://www.TiddlyTools.com/#SectionLinksPlugin|
|Version|1.4.2|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|allow tiddler sections in TiddlyLinks to be used as anchor points|
This plugin enhances tiddler links so that they can include section references that ''auto-scroll to the indicated section heading'' within a tiddler (i.e., similar to the 'anchor' behavior provided in HTML by {{{&lt;a name="foo"&gt;}}} and {{{&lt;a href="#foo"&gt;...&lt;/a&gt;}}}).  The {{{&lt;&lt;tiddler&gt;&gt;}}} macro syntax has also be extended to allow section references without a tiddler name, so that transclusion of //hidden sections from the same tiddler// can be easily accomplished.  The plugin also adds a new macro, &lt;&lt;sectionTOC&gt;&gt; which can auto-generate and embed a 'Table of Contents' outline view into a tiddler to enable quick navigation to sections within that tiddler.
!!!Usage
&lt;&lt;&lt;
!!!!~TiddlyLink syntax
You can link to a section of a tiddler by adding the "##sectionname" syntax to the tiddlername:
{{{
[[SomeTiddler##SomeSection]]
}}}
When clicked, the tiddler is displayed and the specified section heading is automatically scrolled into view. If the tiddler title is omitted or the 'here' keyword is used, e.g.,
{{{
[[##SomeSection]] or [[here##SomeSection]]&gt;&gt;
}}}
then the current containing tiddler is implied by default.
!!!!HTML anchor syntax
You can use HTML syntax to create a scrollable 'anchor' location within a tiddler without use of the standard TW section heading syntax:
{{{
&lt;html&gt;&lt;a name="sectionname" /&gt;&lt;/html&gt;
}}}
You can then link to that section using the enhanced TiddlyLink syntax as above.
!!!!{{{&lt;&lt;tiddler&gt;&gt;}}} macro 
The {{{&lt;&lt;tiddler&gt;&gt;}}} syntax has been extended so that when the tiddler title is omitted or the 'here' keyword is used, e.g.,
{{{
&lt;&lt;tiddler ##SomeSection&gt;&gt; or &lt;&lt;tiddler here##SomeSection&gt;&gt;
}}}
then the current containing tiddler is implied by default.
!!!!"""&lt;&lt;sectionTOC&gt;&gt;""" macro
This macro generates a 'Table of Contents' outline-style bullet list with links to all sections within the current tiddler.  Simply place the following macro at the //end of the tiddler content// (i.e., following all section headings).  Important note: //''The {{{&lt;&lt;sectionTOC&gt;&gt;}}} macro must occur at the end of the tiddler in order to locate the rendered section headings that precede it.''//
{{{
&lt;&lt;sectionTOC&gt;&gt; or &lt;&lt;sectionTOC className&gt;&gt;
}}}
To position the macro's //output// within the tiddler, you must create a special 'target element' that uses a specific classname (default='sectionTOC'), like this:
{{{
{{sectionTOC{}}}
}}}
When the {{{&lt;&lt;sectionTOC&gt;&gt;}}} macro is rendered, it will find the matching 'sectionTOC'-classed element and writes it's output there.  You can also add the macro and/or target elements directly to the [[ViewTemplate]] definition, so that every tiddler can automatically display the table of contents:
{{{
&lt;span class='sectionTOC'&gt;&lt;/span&gt; &lt;!-- target element --&gt;
...
&lt;span macro='sectionTOC'&gt;&lt;/span&gt; &lt;!-- must be at end of tiddler --&gt;
}}}
&lt;&lt;&lt;
!!!Configuration
&lt;&lt;&lt;
You can change the {{{&lt;&lt;SectionTOC&gt;&gt;}}} output link format by adding the following statement to a tiddler tagged with &lt;&lt;tag systemConfig&gt;&gt;
{{{
config.macros.sectionTOC.linkFormat='[[%0|##%0]]';
}}}
The default value (shown above) produces a link to each section within the tiddler, using "%0" to insert the section name into the link.  You can add extra formatting to generate additional output to suit your purposes.  For example, if you have EditSectionPlugin installed, you could include a link that invokes that plugin's popup editor directly from each item in the TOC display, like this:
{{{
config.macros.sectionTOC.linkFormat='[[%0|##%0]] &lt;&lt;editSection [[##%0]] [[(edit)]]&gt;&gt;';
}}}
&lt;&lt;&lt;
!!!Examples
&lt;&lt;&lt;
links to sections defined by ''TW heading syntax'' (e.g, {{{!!!sectionname}}}):{{indent{
[[SectionLinksPlugin##onClickTiddlerLink]]
[[##onClickTiddlerLink]] //(current tiddler implied)//}}}
links to anchors defined by ''HTML syntax'' (e.g., {{{&lt;html&gt;&lt;a href="anchorname"&gt;&lt;/html&gt;}}}):{{indent{
[[SectionLinksPlugin##sampleanchorlink]]
[[##sampleanchorlink]] //(current tiddler implied)//}}}
&lt;&lt;&lt;
!!!Revisions
&lt;&lt;&lt;
2011.12.21 1.4.2 refactor sectionTOCformat to permit customization
2011.02.08 1.4.1 in isExternalLink() hijack, strip section references before testing for external link
2010.08.09 1.4.0 in scrollToSection(), added support for using HTML &lt;a name="..."&gt; anchor elements
2009.08.21 1.3.4 added handling to ignore leading/trailing whitespace in section references
2009.08.21 1.3.3 in createTiddlyLink(), add tiddlyLinkNonExistingSection class if matching section is not found
2009.08.14 1.3.2 in createTiddlyLink(), don't override core value for ~TiddlyLink attribute
2009.08.02 1.3.1 in sectionTOC.handler(), trim leading/trailing whitespace from generated section links
2009.08.01 1.3.0 in scrollToSection(), apply 3-tier section matching (exact, startsWith, contains)
2009.07.06 1.2.2 fixed displayTiddler() hijack
2009.07.03 1.2.1 in {{{&lt;&lt;sectionTOC&gt;&gt;}}}, suppress output if target is not found
2009.06.02 1.2.0 added support for 'here' keyword in {{{[[here##section]]}}} links and {{{&lt;&lt;tiddler here##section&gt;&gt;}}} macro
2009.04.09 1.1.1 in sectionTOC macro, make target visible when TOC is rendered.
2009.01.18 1.1.0 added {{{&lt;&lt;sectionTOC&gt;&gt;}}} macro to generate numbered-bullet links to sections of current tiddler
2009.01.06 1.0.0 converted to stand-alone plugin
2008.10.14 0.0.0 initial release (as [[CoreTweaks]] #784 - http://trac.tiddlywiki.org/ticket/784)
&lt;&lt;&lt;
!!!Code
***/
//{{{
version.extensions.SectionLinksPlugin= {major: 1, minor: 4, revision: 2, date: new Date(2011,12,21)};

Story.prototype.scrollToSection = function(title,section) {
	if (!title||!section) return; var t=this.getTiddler(title); if (!t) return null;
	var elems=t.getElementsByTagName('*');
	var heads=[]; var anchors=[];
	for (var i=0; i&lt;elems.length; i++)
		if (['H1','H2','H3','H4','H5'].contains(elems[i].nodeName)) heads.push(elems[i]);
	for (var i=0; i&lt;elems.length; i++)
		if (elems[i].nodeName=='A' &amp;&amp; (elems[i].getAttribute('name')||'').length) anchors.push(elems[i]);
	var found=null;
	for (var i=0; i&lt;heads.length; i++)
		if (getPlainText(heads[i]).trim()==section) { found=heads[i]; break; }
	if (!found) for (var i=0; i&lt;heads.length; i++)
		if (getPlainText(heads[i]).trim().startsWith(section)) { found=heads[i]; break; }
	if (!found) for (var i=0; i&lt;heads.length; i++)
		if (getPlainText(heads[i]).trim().indexOf(section)!=-1) { found=heads[i]; break; }
	if (!found) for (var i=0; i&lt;anchors.length; i++)
		if (anchors[i].getAttribute('name')==section) { found=anchors[i]; break; }
	if (!found) for (var i=0; i&lt;anchors.length; i++)
		if (anchors[i].getAttribute('name').startsWith(section)) { found=anchors[i]; break; }
	if (!found) for (var i=0; i&lt;anchors.length; i++)
		if (anchors[i].getAttribute('name').indexOf(section)!=-1) { found=anchors[i]; break; }
	if (found) {
		// if section heading is collapsed, click to expand it - see [[FoldHeadingsPlugin]]
		if (hasClass(found,'foldable') &amp;&amp; found.nextSibling.style.display=='none') found.onclick();
		// scroll *after* tiddler animation
		var delay=config.options.chkAnimate?config.animDuration+100:0;
		setTimeout('window.scrollTo('+findPosX(found)+','+findPosY(found)+')',delay);
		return found;
	}
}
//}}}
/***
!!!!core hijacks
***/
/***
!!!!!createTiddlyLink
***/
//{{{
// [[tiddlername##section]] and [[##section]]
if (!window.createTiddlyLink_section)
	window.createTiddlyLink_section=window.createTiddlyLink;
window.createTiddlyLink=function(place,title) {
	var t=story.findContainingTiddler(place); var tid=t?t.getAttribute('tiddler'):'';
	var parts=title.split(config.textPrimitives.sectionSeparator);
	var title=parts[0]; var section=parts[1]; if (section) section=section.trim();
	if (!title.length || title.toLowerCase()=='here') title=tid;  // default=current tiddler
	arguments[1]=title;
	var btn=createTiddlyLink_section.apply(this,arguments);
	if (section) {
		btn.setAttribute('section',section);
		if (store.getTiddlerText(title+config.textPrimitives.sectionSeparator+section)===null)
			addClass(btn,'tiddlyLinkNonExistingSection');
	}
	return btn;
}
//}}}
/***
!!!!!onClickTiddlerLink
***/
//{{{
if (!window.onClickTiddlerLink_section)
	window.onClickTiddlerLink_section=window.onClickTiddlerLink;
window.onClickTiddlerLink=function(ev) {
	var e=ev||window.event;	var target=resolveTarget(e); var title=null;
	while (target!=null &amp;&amp; title==null) {
		title=target.getAttribute('tiddlyLink');
		section=target.getAttribute('section');
		target=target.parentNode;
	} 
	var t=story.findContainingTiddler(target); var tid=t?t.getAttribute('tiddler'):'';
	if (title!=tid||!section) // avoid excess scrolling for intra-tiddler links
		onClickTiddlerLink_section.apply(this,arguments);
	story.scrollToSection(title,section);
	return false;
}
//}}}
/***
!!!!! displayTiddler
***/
//{{{
if (!Story.prototype.displayTiddler_section)
	Story.prototype.displayTiddler_section=Story.prototype.displayTiddler;
Story.prototype.displayTiddler = function(srcElement,tiddler)
{
	var title=(tiddler instanceof Tiddler)?tiddler.title:tiddler;
	var parts=title.split(config.textPrimitives.sectionSeparator);
	var title=parts[0]; var section=parts[1]; if (section) section=section.trim();
	if (!title.length || title.toLowerCase()=='here') {
		var t=story.findContainingTiddler(place);
		title=t?t.getAttribute('tiddler'):'';
	}
	arguments[1]=title;  // default=current tiddler
	this.displayTiddler_section.apply(this,arguments);
	story.scrollToSection(title,section);
}
//}}}
/***
&lt;html&gt;&lt;a name="sampleanchorlink" /&gt;&lt;/html&gt;This is a sample ''anchor link'': {{{&lt;html&gt;&lt;a name="sampleanchorlink" /&gt;&lt;/html&gt;}}}
!!!!!isExternalLink
***/
//{{{
if (!config.formatterHelpers.isExternalLink_section)
	config.formatterHelpers.isExternalLink_section=config.formatterHelpers.isExternalLink;
config.formatterHelpers.isExternalLink=function(link) {  // remove section references before testing
	var l=link.split(config.textPrimitives.sectionSeparator)[0];
	return config.formatterHelpers.isExternalLink_section(l);
}
//}}}
/***
!!!!!tiddler.handler
***/
//{{{
if (!config.macros.tiddler.handler_section)
	config.macros.tiddler.handler_section=config.macros.tiddler.handler;
config.macros.tiddler.handler=function(place,macroName,params,wikifier,paramString,tiddler)
{
	if (!params[0]) return;
	var sep=config.textPrimitives.sectionSeparator;
	var parts=params[0].split(sep); var tid=parts[0]; var sec=parts[1]; if (sec) sec=sec.trim();
	if ((tid.toLowerCase()=='here'||!tid.length) &amp;&amp; sec) { // fixup for 'here##section' and '##section'
		var here=story.findContainingTiddler(place)
		var tid=here?here.getAttribute('tiddler'):tiddler?tiddler.title:'';
		arguments[2][0]=tid+sep+sec;
		arguments[4]=paramString.replace(new RegExp('(here)?'+sep+sec),tid+sep+sec);
	}
	config.macros.tiddler.handler_section.apply(this,arguments);
}
//}}}
/***
!!!!sectionTOC macro
***/
//{{{
config.macros.sectionTOC = {
	targetClass: 'sectionTOC',
	linkFormat: '[[%0|##%0]]',
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		var out=[];
		var targetClass=params[0]||this.targetClass;
		var t=story.findContainingTiddler(place); if (!t) return;
		var elems=t.getElementsByTagName('*');
		var level=5; // topmost heading level
		for (var i=0; i&lt;elems.length; i++) {
			var txt=getPlainText(elems[i]).trim();
			var link=this.linkFormat.format([txt]);
			switch(elems[i].nodeName) {
				case 'H1': out.push('#'+link);		level=1; break;
				case 'H2': out.push('##'+link);		level=level&lt;2?level:2; break;
				case 'H3': out.push('###'+link);	level=level&lt;3?level:3; break;
				case 'H4': out.push('####'+link);	level=level&lt;4?level:4; break;
				case 'H5': out.push('#####'+link);	level=level&lt;5?level:5; break;
				default: if (hasClass(elems[i],targetClass)) var target=elems[i];
			}
		}
		// trim excess bullet levels
		if (level&gt;1) for (var i=0; i&lt;out.length; i++) out[i]=out[i].substr(level-1);
		// show numbered list
		if (out.length &amp;&amp; target) {
			if (target.style.display=='none') target.style.display='block';
			wikify(out.join('\n'),target);
		}
	}
}
//}}}
/***
!!!Invoke macro
{{{
&lt;&lt;sectionTOC&gt;&gt;
}}}
***/
// //&lt;&lt;sectionTOC&gt;&gt;</pre>
</div>
<div title="Selected References" creator="YourName" modifier="YourName" created="202310050832" modified="202310050832" tags="Content" changecount="2">
<pre>
!Architecture

[[Level Up Coding|https://blog.levelupcoding.co/]] - Complex programming concepts explained with simple terms and stunning visuals. Join the growing community of engineers experiencing accelerated learning through straight-to-the-point, bite-sized explanations.

[[Stream processing, Event sourcing, Reactive, CEP… and making sense of it all|https://confluentinc.wordpress.com/2015/01/29/making-sense-of-stream-processing/]] - by Martin Kleppmann - In this talk, we will go in search of the wisdom behind the buzzwords. We will discuss how event streams can help make your application more scalable, more reliable and more maintainable.

----
/%
@@color:#c4d6ed; ^^
Description: Selected references and pointers
^^@@
%/</pre>
</div>
<div title="SideBarOptions" creator="AndreCarvalho" modifier="AndreCarvalho" created="202103121810" modified="202103121825" changecount="4">
<pre>{{button{goto}}}
&lt;&lt;gotoTiddler&gt;&gt;&lt;&lt;search&gt;&gt;&lt;&lt;closeAll&gt;&gt;&lt;&lt;permaview&gt;&gt;&lt;&lt;newTiddler&gt;&gt;&lt;&lt;newJournal "DD MMM YYYY" "journal"&gt;&gt;&lt;&lt;thostUpload&gt;&gt;[[download|https://acarvalho.tiddlyhost.com/download]]&lt;&lt;slider chkSliderOptionsPanel OptionsPanel "options »" "Change TiddlyWiki advanced options"&gt;&gt;</pre>
</div>
<div title="SinglePageModePlugin" modifier="acarvalho" created="201304241626" modified="201304241626" tags="System systemConfig" server.title="SinglePageModePlugin" server.page.revision="201304241626" server.etag='"acarvalho_public/SinglePageModePlugin/1195317:d6f5a84f7c104f62ec9a53fed0852955e2fae95d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c78c9b5896c83b27a984b2ad65d2f4b2192eb5e9">
<pre>/***
|Name|SinglePageModePlugin|
|Source|http://www.TiddlyTools.com/#SinglePageModePlugin|
|Documentation|http://www.TiddlyTools.com/#SinglePageModePluginInfo|
|Version|2.9.7|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|Show tiddlers one at a time with automatic permalink, or always open tiddlers at top/bottom of page.|
This plugin allows you to configure TiddlyWiki to navigate more like a traditional multipage web site with only one tiddler displayed at a time.
!!!!!Documentation
&gt;see [[SinglePageModePluginInfo]]
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time
&gt;&lt;&lt;option chkSinglePagePermalink&gt;&gt; Automatically permalink current tiddler
&gt;&lt;&lt;option chkSinglePageKeepFoldedTiddlers&gt;&gt; Don't close tiddlers that are folded
&gt;&lt;&lt;option chkSinglePageKeepEditedTiddlers&gt;&gt; Don't close tiddlers that are being edited
&lt;&lt;option chkTopOfPageMode&gt;&gt; Open tiddlers at the top of the page
&lt;&lt;option chkBottomOfPageMode&gt;&gt; Open tiddlers at the bottom of the page
&lt;&lt;option chkSinglePageAutoScroll&gt;&gt; Automatically scroll tiddler into view (if needed)

Notes:
* The "display one tiddler at a time" option can also be //temporarily// set/reset by including a 'paramifier' in the document URL: {{{#SPM:true}}} or {{{#SPM:false}}}.
* If more than one display mode is selected, 'one at a time' display takes precedence over both 'top' and 'bottom' settings, and if 'one at a time' setting is not used, 'top of page' takes precedence over 'bottom of page'.
* When using Apple's Safari browser, automatically setting the permalink causes an error and is disabled.
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2010.11.30 2.9.7 use story.getTiddler()
2008.10.17 2.9.6 changed chkSinglePageAutoScroll default to false
| Please see [[SinglePageModePluginInfo]] for previous revision details |
2005.08.15 1.0.0 Initial Release.  Support for BACK/FORWARD buttons adapted from code developed by Clint Checketts.
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.SinglePageModePlugin= {major: 2, minor: 9, revision: 7, date: new Date(2010,11,30)};
//}}}
//{{{
config.paramifiers.SPM = { onstart: function(v) {
	config.options.chkSinglePageMode=eval(v);
	if (config.options.chkSinglePageMode &amp;&amp; config.options.chkSinglePagePermalink &amp;&amp; !config.browser.isSafari) {
		config.lastURL = window.location.hash;
		if (!config.SPMTimer) config.SPMTimer=window.setInterval(function() {checkLastURL();},1000);
	}
} };
//}}}
//{{{
if (config.options.chkSinglePageMode==undefined)
	config.options.chkSinglePageMode=false;
if (config.options.chkSinglePagePermalink==undefined)
	config.options.chkSinglePagePermalink=true;
if (config.options.chkSinglePageKeepFoldedTiddlers==undefined)
	config.options.chkSinglePageKeepFoldedTiddlers=false;
if (config.options.chkSinglePageKeepEditedTiddlers==undefined)
	config.options.chkSinglePageKeepEditedTiddlers=false;
if (config.options.chkTopOfPageMode==undefined)
	config.options.chkTopOfPageMode=false;
if (config.options.chkBottomOfPageMode==undefined)
	config.options.chkBottomOfPageMode=false;
if (config.options.chkSinglePageAutoScroll==undefined)
	config.options.chkSinglePageAutoScroll=false;
//}}}
//{{{
config.SPMTimer = 0;
config.lastURL = window.location.hash;
function checkLastURL()
{
	if (!config.options.chkSinglePageMode)
		{ window.clearInterval(config.SPMTimer); config.SPMTimer=0; return; }
	if (config.lastURL == window.location.hash) return; // no change in hash
	var tids=decodeURIComponent(window.location.hash.substr(1)).readBracketedList();
	if (tids.length==1) // permalink (single tiddler in URL)
		story.displayTiddler(null,tids[0]);
	else { // restore permaview or default view
		config.lastURL = window.location.hash;
		if (!tids.length) tids=store.getTiddlerText("DefaultTiddlers").readBracketedList();
		story.closeAllTiddlers();
		story.displayTiddlers(null,tids);
	}
}


if (Story.prototype.SPM_coreDisplayTiddler==undefined)
	Story.prototype.SPM_coreDisplayTiddler=Story.prototype.displayTiddler;
Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,slowly)
{
	var title=(tiddler instanceof Tiddler)?tiddler.title:tiddler;
	var tiddlerElem=story.getTiddler(title); // ==null unless tiddler is already displayed
	var opt=config.options;
	var single=opt.chkSinglePageMode &amp;&amp; !startingUp;
	var top=opt.chkTopOfPageMode &amp;&amp; !startingUp;
	var bottom=opt.chkBottomOfPageMode &amp;&amp; !startingUp;
	if (single) {
		story.forEachTiddler(function(tid,elem) {
			// skip current tiddler and, optionally, tiddlers that are folded.
			if (	tid==title
				|| (opt.chkSinglePageKeepFoldedTiddlers &amp;&amp; elem.getAttribute("folded")=="true"))
				return;
			// if a tiddler is being edited, ask before closing
			if (elem.getAttribute("dirty")=="true") {
				if (opt.chkSinglePageKeepEditedTiddlers) return;
				// if tiddler to be displayed is already shown, then leave active tiddler editor as is
				// (occurs when switching between view and edit modes)
				if (tiddlerElem) return;
				// otherwise, ask for permission
				var msg="'"+tid+"' is currently being edited.\n\n";
				msg+="Press OK to save and close this tiddler\nor press Cancel to leave it opened";
				if (!confirm(msg)) return; else story.saveTiddler(tid);
			}
			story.closeTiddler(tid);
		});
	}
	else if (top)
		arguments[0]=null;
	else if (bottom)
		arguments[0]="bottom";
	if (single &amp;&amp; opt.chkSinglePagePermalink &amp;&amp; !config.browser.isSafari) {
		window.location.hash = encodeURIComponent(String.encodeTiddlyLink(title));
		config.lastURL = window.location.hash;
		document.title = wikifyPlain("SiteTitle") + " - " + title;
		if (!config.SPMTimer) config.SPMTimer=window.setInterval(function() {checkLastURL();},1000);
	}
	if (tiddlerElem &amp;&amp; tiddlerElem.getAttribute("dirty")=="true") { // editing... move tiddler without re-rendering
		var isTopTiddler=(tiddlerElem.previousSibling==null);
		if (!isTopTiddler &amp;&amp; (single || top))
			tiddlerElem.parentNode.insertBefore(tiddlerElem,tiddlerElem.parentNode.firstChild);
		else if (bottom)
			tiddlerElem.parentNode.insertBefore(tiddlerElem,null);
		else this.SPM_coreDisplayTiddler.apply(this,arguments); // let CORE render tiddler
	} else
		this.SPM_coreDisplayTiddler.apply(this,arguments); // let CORE render tiddler
	var tiddlerElem=story.getTiddler(title);
	if (tiddlerElem&amp;&amp;opt.chkSinglePageAutoScroll) {
		// scroll to top of page or top of tiddler
		var isTopTiddler=(tiddlerElem.previousSibling==null);
		var yPos=isTopTiddler?0:ensureVisible(tiddlerElem);
		// if animating, defer scroll until after animation completes
		var delay=opt.chkAnimate?config.animDuration+10:0;
		setTimeout("window.scrollTo(0,"+yPos+")",delay); 
	}
}

if (Story.prototype.SPM_coreDisplayTiddlers==undefined)
	Story.prototype.SPM_coreDisplayTiddlers=Story.prototype.displayTiddlers;
Story.prototype.displayTiddlers = function() {
	// suspend single/top/bottom modes when showing multiple tiddlers
	var opt=config.options;
	var saveSPM=opt.chkSinglePageMode; opt.chkSinglePageMode=false;
	var saveTPM=opt.chkTopOfPageMode; opt.chkTopOfPageMode=false;
	var saveBPM=opt.chkBottomOfPageMode; opt.chkBottomOfPageMode=false;
	this.SPM_coreDisplayTiddlers.apply(this,arguments);
	opt.chkBottomOfPageMode=saveBPM;
	opt.chkTopOfPageMode=saveTPM;
	opt.chkSinglePageMode=saveSPM;
}
//}}}</pre>
</div>
<div title="SinglePageModePluginInfo" modifier="acarvalho" created="201304241626" modified="201304241626" tags="System" server.title="SinglePageModePluginInfo" server.page.revision="201304241626" server.etag='"acarvalho_public/SinglePageModePluginInfo/1195318:b3ede22b4b164514d643c748839e3977ca6e3419"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="88f360ef7c51e37560431629dcbccd98dcc72f57">
<pre>/***
|Name|SinglePageModePluginInfo|
|Source|http://www.TiddlyTools.com/#SinglePageModePlugin|
|Documentation|http://www.TiddlyTools.com/#SinglePageModePluginInfo|
|Version|2.9.6|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|documentation|
|Description|Documentation for SinglePageModePlugin|
Normally, as you click on the links in TiddlyWiki, more and more tiddlers are displayed on the page. The order of this tiddler display depends upon when and where you have clicked. Some people like this non-linear method of reading the document, while others have reported that when many tiddlers have been opened, it can get somewhat confusing.  SinglePageModePlugin allows you to configure TiddlyWiki to navigate more like a traditional multipage web site with only one item displayed at a time.
!!!!!Usage
&lt;&lt;&lt;
When the plugin is enabled, only one tiddler will be displayed at a time and the browser window's titlebar is updated to include the current tiddler title.  The browser's location URL is also updated with a 'permalink' for the current tiddler so that it is easier to create a browser 'bookmark' for the current tiddler.  Alternatively, even when displaying multiple tiddlers //is// permitted, you can still reduce the potential for confusion by forcing  tiddlers to always open at the top (or bottom) of the page instead of being displayed following the tiddler containing the link that was clicked.
&lt;&lt;&lt;
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time
&gt;&lt;&lt;option chkSinglePagePermalink&gt;&gt; Automatically permalink current tiddler
&gt;&lt;&lt;option chkSinglePageKeepFoldedTiddlers&gt;&gt; Don't close tiddlers that are folded
&gt;&lt;&lt;option chkSinglePageKeepEditedTiddlers&gt;&gt; Don't close tiddlers that are being edited
&lt;&lt;option chkTopOfPageMode&gt;&gt; Open tiddlers at the top of the page
&lt;&lt;option chkBottomOfPageMode&gt;&gt; Open tiddlers at the bottom of the page
&lt;&lt;option chkSinglePageAutoScroll&gt;&gt; Automatically scroll tiddler into view (if needed)

Notes:
* {{block{
The "display one tiddler at a time" option can also be //temporarily// set/reset by including a 'paramifier' in the document URL: {{{#SPM:true}}} or {{{#SPM:false}}}. You can also use {{{SPM:expression}}}, where 'expression' is any javascript statement that evaluates to true or false.  This allows you to create hard-coded links in other documents that can selectively enable/disable the use of this option based on various programmatic conditions, such as the current username. For example, using
&amp;nbsp;&amp;nbsp;&amp;nbsp;{{{#SPM:config.options.txtUserName!="SomeName"}}}
enables 'one tiddler at a time' display for all users //other than// "~SomeName")}}}
* If more than one display mode is selected, 'one at a time' display takes precedence over both 'top' and 'bottom' settings, and if 'one at a time' setting is not used, 'top of page' takes precedence over 'bottom of page'.
* When using Apple's Safari browser, automatically setting the permalink causes an error and is disabled.
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2008.10.17 2.9.6 changed chkSinglePageAutoScroll default to false
2008.06.12 2.9.5 corrected 'scroll to top of page' logic in auto-scroll handling
2008.06.11 2.9.4 added chkSinglePageKeepEditedTiddlers option
2008.06.05 2.9.3 in displayTiddler(), bypass single/top/bottom mode handling if startingUp.  Allows multiple tiddlers to be displayed during startup processing (e.g., #story:DefaultTiddlers), even if single/top/bottom mode is enabled.
2008.04.18 2.9.2 in displayTiddler() and checkLastURL(), handling for Unicode in tiddler titles (remove explicit conversion between Unicode and UTF, as this is apparently done automatically by encode/decodeURIComponent, resulting in double-encoding!
2008.04.08 2.9.1 don't automatically add options to AdvancedOptions shadow tiddler
2008.04.02 2.9.0 in displayTiddler(), when single-page mode is in use and a tiddler is being edited, ask for permission to save-and-close that tiddler, instead of just leaving it open.
2008.03.29 2.8.3 in displayTiddler(), get title from tiddler object (if needed).  Fixes errors caused when calling function passes a tiddler *object* instead of a tiddler *title*
2008.03.14 2.8.2 in displayTiddler(), if editing specified tiddler, just move it to top/bottom of story *without* re-rendering (prevents discard of partial edits).
2008.03.06 2.8.1 in paramifier handler, start 'checkURL' timer if chkSinglePageMode is enabled
2008.03.06 2.8.0 added option, {{{config.options.chkSinglePageKeepFoldedTiddlers}}}, so folded tiddlers won't be closed when using single-page mode.  Also, in checkURL(), if hash is a ''permaview'' (e.g., "#foo bar baz"), then display multiple tiddlers rather than attempting to display "foo bar baz" as a single tiddler
2008.03.05 2.7.0 added support for "SPM:" URL paramifier
2008.03.01 2.6.0 in hijack of displayTiddler(), added 'title' argument to closeAllTiddlers() so that target tiddler isn't closed-and-reopened if it was already displayed.  Also, added config.options.chkSinglePageAutoScrolloption to bypass automatic 'scroll into view' logic (note: core still does it's own ensureVisible() handling)
2007.12.22 2.5.3 in checkLastURL(), use decodeURIComponent() instead of decodeURI so that tiddler titles with commas (and/or other punctuation) are correctly handled.
2007.10.26 2.5.2 documentation cleanup
2007.10.08 2.5.1 in displayTiddler(), when using single-page or top-of-page mode, scrollTo(0,0) to ensure that page header is in view.
2007.09.13 2.5.0 for TPM/BPM modes, don't force tiddler to redisplay if already shown.  Allows transition between view/edit or collapsed/view templates, without repositioning displayed tiddler.
2007.09.12 2.4.0 added option to disable automatic permalink feature.  Also, Safari is now excluded from permalinking action to avoid bug where tiddlers don't display after hash is updated.
2007.03.03 2.3.1 fix typo when adding BPM option to AdvancedOptions (prevented checkbox from appearing)
2007.03.03 2.3.0 added support for BottomOfPageMode (BPM) based on request from DaveGarbutt
2007.02.06 2.2.3 in Story.prototype.displayTiddler(), use convertUnicodeToUTF8() for correct I18N string handling when creating URL hash string from tiddler title (based on bug report from BidiX)
2007.01.08 2.2.2 use apply() to invoke hijacked core functions
2006.07.04 2.2.1 in hijack for displayTiddlers(), suspend TPM as well as SPM so that DefaultTiddlers displays in the correct order.
2006.06.01 2.2.0 added chkTopOfPageMode (TPM) handling
2006.02.04 2.1.1 moved global variable declarations to config.* to avoid FireFox 1.5.0.1 crash bug when assigning to globals
2005.12.27 2.1.0 hijack displayTiddlers() so that SPM can be suspended during startup while displaying the DefaultTiddlers (or #hash list).  Also, corrected initialization for undefined SPM flag to "false", so default behavior is to display multiple tiddlers
2005.12.27 2.0.0 Update for TW2.0
2005.11.24 1.1.2 When the back and forward buttons are used, the page now changes to match the URL.  Based on code added by Clint Checketts
2005.10.14 1.1.1 permalink creation now calls encodeTiddlyLink() to handle tiddler titles with spaces in them
2005.10.14 1.1.0 added automatic setting of window title and location bar ('auto-permalink').  feature suggestion by David Dickens.
2005.10.09 1.0.1 combined documentation and code in a single tiddler
2005.08.15 1.0.0 Initial Release
&lt;&lt;&lt;</pre>
</div>
<div title="SiteIcon" modifier="acarvalho" created="201206131647" modified="201311302134" tags="excludeLists" server.title="SiteIcon" server.page.revision="201311302134" server.etag='"acarvalho_public/SiteIcon/1569138:81bfe92f249d7c9d8650cacf8698e3c55755f8fb"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="image/gif" _hash="6841a0ef73bdf171a804ad8ca9364dd2b075bded">
<pre>R0lGODlhWwAkAPf7AAAAAAgICBAQEBgQEBgQGCEYMSEpISEpMSkYISkpITEhMTEpKTEpMTEpOTEpSjExQjFSUjkhITkpMTkxOTkxSjk5Yzlac0IpIUIxMUI5KUJCUkJKa0JSY0JaY0JahEoxIUo5MUo5OUpCIUpjhEpjjEprc0pznFJCMVJCQlJSWlJSa1JaY1Jaa1JjWloxKVo5MVo5QlpCQlpCUlpCY1qEpVqMrWNKQmNKY2NSa2Naa2Nae2Nrc2NrhGN7jGsxOWs5OWtSKWtSOWtSQmtaSmtjOWuMe2uMhGuMnGuUrXM5UnNCWnNKa3NSc3NaWnNae3NjKXNrSnNze3N7jHtKUntjhHtrY3t7lHuEnHulvYRCOYRaWoRac4RjWoRje4Rra4RrjIR7Y4R7jIR7lISMa4SMjISMnISUpYxjQox7Qox7e4yMOYyMUoyMe4ylrZRzc5R7Y5R7lJSEe5SMnJSUa5xzc5yEe5yElJyMe5yUjJycnJycpaVKY6V7UqWEjKWUY6WcjKWle61zc62Ee62MSq2lY7WcnLWtrbW1pb21rb3GtcalSsalnMa1a861StaEjNbGWtbGa9bOe97Wa97We/fnSvfve////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAL8AAAC/AL+/AAAAv78AvwC/v8DAwICAgP8AAAD/AP//AAAA//8A/wD//////wAAAAAAAAAAAAAAACH5BAEAAPsALAAAAABbACQABwj8APcJHEiwoMGDCAtSyLFjB5MqKxJKnEixosWEKnhQoSJGTh49cEKKgSNGTI4UOyhcXMmyZUEYcOyIlMJDhw4VOHI6ofLlCxw9UVwKHYrwQh89Yr5IkULFiRObOnKqUDEhQAACN76kkUC0q1AQX+yEUUrFJg4GAhDI0EElRYEBVgP8I0DhCwaveC1e2IJ0Y1MdTgQEUBAiAFwCBEJMEEDgn1wMXyLknYzwAN+SX5wCTsETBQG5cR2DfswkTALKqAWK8GGopBgqTDYa+KdEwD/RcXPHRRBgwhYlqSfPGYCojBQxUtjmYPAPBQrcuqMbjuAERfC8AeyYsVKSbeHb+xNS/BMsPfo/BAQwaLnelYgPpHJKOpHhGEEX+qGlk4+ehD3RAH3kUQZJTBXmQgBTzAZdedENgMA+CGiAQhVB+VcRGC8YIoccYSTlBA4hxADaggsySMA+ESBhAgkjVDCCCkOAYSFCJ9ixYYcyfKaWEgiUyGAAackl2gUaINHDkUjUQMOSFgRAhx5kkBGGhYBEYAgccsARx4iO7fdjbgOY0QMLEBhAAAIxHNkDD2ouaUYAFCBBwwgkeBCAI0MBckccaAQBAghAiJDAAB+4oEceGzYxnlW3fSndAFYgIamkR/AAAQJX9GDCESSQsOk/GtSgZg13sjTGGlCsQUQQ+y9A8UIQacQRRxqGEAGDhnLo8RyQV3nJqH65HUHDkVccgaQBD5iQggom0IDEEaAu2cMRNfyDJ0WHgEGEtn6AEUIdEmVggyGI6iEeYv80oeBo5d0mAGM7GGtsmyUMsAACDTSgAQtFgMoDCz1YcYQAU7CRRkJzELGGH1CgcYdFCSiBqxx9BHBCFYY5KpcADWSUKWILpMCDCWvSsMMAGZnAwwgpJPBPCB0YIMAAcFFBwgwqOBAFuAIBIsIZkjxhA0tDwKDHhrlGEYABCPTIoG0DaMCDFZk6QPOgAURoxZItBBDFChQswLSQjQr2zwwmmJGkCRwYEAgRQEAiiSQL+3CBx0pjfHB00gsEEIHMP/7TgBRX8ECCDp8RsEDUnnIgAQ9IdDDebY0G8METaAzSiCRqnH1EQxqYiUAgIWQxt9yPEIIqBkGAUUUcEkWwtx453JaYj6BtMO/KbPKAQQRsjkDnCAjo0EOjmKuhyCOUNO985+TdFoIdA0UxBB9yz619JHOsgQYaKITwAhFNEGRAH4boYQgeA4TQWFy+BiBFGz2MwEIKHDSQQg868LCyDlZYGfFC8I8BKMJ5COTcE0TAqAIqYREHScMOhgAFRpwue5PQHiQIQQQiNGwNQcCAF3ZAoQLIIA05UJBjKHebHVghCiwgwchMMAAdCM9w+53qlAlKcJsBPEISlGiEGp6QgHdRziowgB1FolAFG6ABEpHIoCQgQUXtSWISlZBEFiPBCEYQwg9rCCMFg3CCBLQOCmCAggHg4pgQpAAFA4jCmlgwFRVo4I5VsQrNzMbC0OyhJVFoQgbQ4AdGPOIRkDjkISWxSCtW4pGQjKQkKzEJRowBCosbANQI8K7QdKmBLOwSGwUwmT+wgQ1gWMAU0pCGN0CBdd/73hqeAIWGNQwNYawl3ICQAQOs0WwywAISzHCEYh7hCm2YDaMYA4Mo9EEgLhvAH2aEhwkg5QsheMAWQsnNUFrFbAQIWLGOMKl+xeWZBsEDBGckkDEsrKAMesCDBIBkg07Gj0GiQQAD9CW1BVDOB+ysSBUQoAL1heEffbuno/6xTjx4AQwICIEX0BlQiiTCOWJY3wQiAD+NMYqiFSXKBBAgBj0UQg8USMz7FgqDkOYFDxEKQ65QgK8HyAx3txGCSydziCEsQANR0MNsIuAGDYSAj2RDgCB2mpo8yIACMkDADagQOgRQwKgDIMAP7sZU9uAhDEaIggwWgIIl4KEP66xoQAAAO/7vVGhpcyBHSUYgZmlsZSB3YXMgYXNzZW1ibGVkIHdpdGggR0lGIENvbnN0cnVjdGlvbiBTZXQgZnJvbToNCg0KQWxjaGVteSBNaW5kd29ya3MgSW5jLg0KUC5PLiBCb3ggNTAwDQpCZWV0b24sIE9udGFyaW8NCkwwRyAxQTANCkNBTkFEQS4NCg0KVGhpcyBjb21tZW50IGJsb2NrIHdpbGwgbm90IGFwcGVhciBpbiBmaWxlcyBjcmVhdGVkIHdpdGggYSByZWdpc3RlcmVkIHZlcnNpb24gb2YgR0lGIENvbnN0cnVjdGlvbiBTZXQAOw==</pre>
</div>
<div title="SiteInfo" modifier="acarvalho" created="201206141341" modified="201208301353" tags="Administration" server.title="SiteInfo" server.page.revision="201208301353" server.etag='"acarvalho_public/SiteInfo/850489:3cfc76ac882ee4c4af294c4382c1b12240e11afc"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="24e5543b944936e854fc4780ee8eefced3658ebc">
<pre>&lt;&lt;image SiteIcon&gt;&gt; 
!!Personal site for Andre' de Carvalho's Software Development thoughts and more...

Most of the content will be Software Engineering related but other topics will emerge as well.
Hope you find it useful.

 </pre>
</div>
<div title="SiteSubtitle" creator="AndreCarvalho" modifier="acarvalho" created="201206131956" modified="201207062239" tags="excludeLists excludeSearch" server.title="SiteSubtitle" server.page.revision="201207062239" server.etag='"acarvalho_public/SiteSubtitle/776596:7733b1750c72de9365a11f0fdc40ba7c587c3699"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="8759db3e30040b6d2cd289dd426fbe6696fc6bd8">
<pre>Software development thoughts and more...</pre>
</div>
<div title="SiteTitle" creator="AndreCarvalho" modifier="AndreCarvalho" created="201206131956" modified="202106171719" tags="excludeLists excludeSearch" _hash="c0625e435c34e138332a6e774969f3f14a9c98b2" changecount="7">
<pre>[img[https://www.dropbox.com/s/yexreus6je9j3o7/shiplogo.gif?dl=1]] André de Carvalho</pre>
</div>
<div title="SiteUrl" modifier="AndreCarvalho" created="201206162123" modified="202103121745" server.title="SiteUrl" server.page.revision="201206162123" server.etag='"acarvalho_public/SiteUrl/748139:bd63516f0067e04ca073b872e0638b1f833f7b1f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="fcabf0e5ba219207a0bff5af6bbff9411124016b" changecount="3">
<pre>https://acarvalho.tiddlyhost.com</pre>
</div>
<div title="Sites I Like" modifier="acarvalho" created="201206141730" modified="201304121437" tags="Content Links" server.title="Sites I Like" server.page.revision="201304121437" server.etag='"acarvalho_public/Sites%20I%20Like/1182997:48dc73711dc83fa5418590fd6ec4632c6e6e1423"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="157c532ac4d158c75d5a6d9070ded145a7c5fa94">
<pre>!!Friends
* [[Development with a Dot|http://weblogs.asp.net/ricardoperes/default.aspx]] - Ricardo Peres .Net technical blog with lots of enlightened information.

----
</pre>
</div>
<div title="SitesILike" modifier="acarvalho" created="201206141730" modified="201206141730" tags="Links" server.title="SitesILike" server.page.revision="201206141730" server.etag='"acarvalho_public/SitesILike/746181:9b0101550ef01e0a155edd0ea7077cbc42619702"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e55d6b51309690819273032bb6e55980ed4f5cb6">
<pre>!!Friends
* [[Development with a Dot|http://weblogs.asp.net/ricardoperes/default.aspx]] - Ricardo Peres .Net technical blog with lots of enlighted information.

----
</pre>
</div>
<div title="Software Development" modifier="YourName" created="201206131811" modified="202109290840" tags="Content Development" changecount="4" server.title="Software Development" server.page.revision="201501221707" server.etag='"acarvalho_public/Software%20Development/2057552:cc1d35ae006bb940b1a094025c10410e3fa2c9df"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="8eea4f094cb413fe1a1c084a2b1d8ffd86ce15ca">
<pre>I do develop software for living and even get paid for it ;) .

&lt;&lt;quote 'Charlton Ogburn on reorganising' 'Charlton Ogburn on reorganising' 'open'&gt;&gt;

&lt;&lt;quote 'Ed Yourdon on Systems Analysis' 'Ed Yourdon on Systems Analysis' 'open'&gt;&gt;

I do not intend to present any new software development methodology. There are already many deserving that title and each one has its own strengths depending on the scenario you want to use it in. But I do want to present a comprehensive view of Software Development that focus on practical performance aspects of the domain.

# [[Software Development Process]] (SDP) - concepts and thoughts about software development as a process.
# [[Software Development Pattern]] - concepts and thoughts about Software Development practices, techniques, tools, methods, etc.
## [[Business Analysis]] - first the problem then the solution.
### [[RFP Analysis Guidelines]]
#### [[Traceability]]
#### [[Data Flow Diagram]]
### [[Technical Proposal Production Guidelines]]
#### [[Software Requirement vs. Feature]]
#### [[Validation]]
#### [[Application Archetype]]
## [[Software Specification]] - ask for things in the right way if you want them to be done well.
### [[Software Requirements Specification Guidelines]]
#### [[Writing Good Requirements]]
#### [[SMART Requirements]]
#### [[Requirement Boilerplate]]
### [[Software Architecture Specification Guidelines]]
#### [[Meta-architecture]]
## [[Software Construction]]
### [[Software System Documentation]]
## [[Software Maintenance]]
# [[High Maturity Practices]] - software development high maturity practices.
## [[Configuration Management]]
###[[Concurrent Versioning System]]
###[[Reuse oriented CVS]]
###[[Digital Artefact Identification]]
## [[Continuous Integration]]
## [[Static Analysis]]
###[[Implementing Static Analysis]]
## [[Unit Testing]]
## [[Peer Review]]
## [[Systematic Reuse]]
## [[Issue Management]]
# [[The Agile Problem]]
# [[The Methodological Problem]]

----
@@color:#c4d6ed; ^^
Description: The main page for software development matters. 
^^@@</pre>
</div>
<div title="Software Development Model" modifier="acarvalho" created="201206191217" modified="201308041507" tags="Concept Content" server.title="Software Development Model" server.page.revision="201308041507" server.etag='"acarvalho_public/Software%20Development%20Model/1332568:540158345fda3a4935e21a8d3878c88fbfd6d8de"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="7d3c2936261c4a085e82a1ad7e465917a4dd238b">
<pre>The term Software Development Model (SDM) is used to address [[Software Development Process]] (SDP) realization sequence.

SDM concept is used as Software Development Process Model to identify different sequence approaches to the development process like [[Waterfall|http://en.wikipedia.org/wiki/Waterfall_model]], [[Spiral|http://en.wikipedia.org/wiki/Spiral_model]], etc.

Although there are many development models one must acknowledge that we can not ''do'' before we know ''how'' to do and we can not choose how to do before knowing ''what'' to do and also that knowing ''why'' to do is very useful to know what to do. This implies that, ultimately, all models are little more than sequences of waterfalls.

----
See also : [[Software Development Pattern]]
----
@@color:#c4d6ed; ^^
Description: Software Development Model (SDM) concept as used here
^^@@</pre>
</div>
<div title="Software Development Pattern" modifier="YourName" created="201206190935" modified="202006191429" tags="Concept Content Development" server.title="Software Development Pattern" server.page.revision="201401202317" server.etag='"acarvalho_public/Software%20Development%20Pattern/1630696:9fb438eaacfd4d819b72555c625ba07dedac14a2"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="61ef344aedeac6111a620fbe1c8c799e73a32166" changecount="3">
<pre>The term Software Development Pattern is used here to mean a set of resources, practices and techniques that shall frame [[SDP]]'s concrete performance. You may think of it in a similar manner as [[Design or Architectural Patterns|Design Patterns]] but applied to Software Development Process performance. In fact we are trying here to provide a set of very good, tested and proved solutions to common, recurrent challenges you will find in any Software Development endeavour. 

!!Why do we need a Development Pattern?
The [[SDP]] establishes a formal software development process that is the basis for certification and performance at an high maturity level. On doing so it, however, usually assumes that all actors, Customer included, will perform at that level, which, many times, is not the case. On the other hand the [[SDP]] "starts" at Specification phase and assumes a proper Inception phase was performed and produced proper results to serve as its input, again, that, many times, is not the case. 
The fact is that the Customer, in many projects, does not want or does not have the resources to produce a proper Inception phase with also proper results and so expects the software development company to help him to deal with the problem. When this fact is not properly acknowledged the risk exists that you will enter a "garbage in - garbage out" process in which everybody will loose. 

It must be clear that an [[SDP]] that "starts" at Software Requirements Specification is assuming the Inception phase was properly performed and produced adequate results. The scenario where those results are not available or are not adequate is frequent, specially when dealing with customers whose primary concern is not software development, in these cases the assumption that "//the Customer does not know what he wants//" is a very dangerous one and a severe mistake. Of course the Customer knows what he want, we, the software development team, are the ones that do not know what the Customer want.

On the other hand, technical communication, effective technical communication, is a difficult task where mistakes are paid high. A development pattern may help in providing a common vocabulary and in making outcomes more predictable and homogeneous. See, for instance, &lt;&lt;quote 'Brad Appleton on patterns and communication' 'Brad Appleton on patterns and communication'&gt;&gt;

!!A Software Development Pattern

&lt;&lt;quote 'Henry L. Mencken on simplicity' 'Henry L. Mencken on simplicity' 'open'&gt;&gt;

A Software Development Pattern presents, for a domain (technical, business or other) and a known context, a set of proved and coherent choices on ''__how__''&amp;nbsp;to do it in order to produce excellent quality and predictable and reusable results.

Software Development Pattern is an integrated view of and comprises the process performance guidelines, techniques and infrastructure. __It also includes the definition of a full [[meta-model|http://en.wikipedia.org/wiki/Metamodeling]] for the project's information structure and content__. 
It is a low-level technical asset not a management tool although it does have radical impacts in management concerns.
The Software Development Process is a rule, the Software Development Pattern is a guideline. You may override it in particular cases if you have a solid reason to do it.

The following topics address some of my findings, study and conclusions about success factors on software development projects for different Customers of an high maturity ([[CMMI|http://www.sei.cmu.edu/cmmi/]] level 5) company. Although the Company works with Customers like [[ESA|http://www.esa.int]], the scenarios I'm addressing here are the ones involving customers from industry, services, government or finance on medium size and criticality projects.

These projects often present enormous challenges, specially at Inception level, due to time and specification detail constraints. If you ever worked in one of these you know the feeling of being asked to produce a Technical Proposal, in a week, to compete with several other proponents. Of course you must be [[agile|Agile Methodologies]] ... but you also must get it right at the first attempt, you will not have another.

[[Systematic Reuse]], [[Opportunistic Productization]] and [[Continuous Improvement]] are the goals to pursue here. First objectives should be establishing a [[meta-model|http://en.wikipedia.org/wiki/Metamodeling]] for project full lifecycle (from Inception to Maintenance, Productization and Reuse) documentation (probably on [[EA|Sparx Enterprise Architect]]) and to establish a "[[Single Version of the Truth|http://en.wikipedia.org/wiki/Single_Version_of_the_Truth]]" (again probably on [[EA|Sparx Enterprise Architect]]).

An important foreword on this subject is that the execution pattern we are proposing works in a ''fall-back mode'', that is, although there are ideal moments and even sequences identified to perform these activities it is not always possible to perform them on those recommended moments. This does not mean that we just give up of doing them, we shall perform them as soon as possible! If I can't produce a good [[DFD|Data Flow Diagram]] at [[RFP]] Analysis I still shall do it at a later time, even if I did produce a DFD at Proposal I shall maintain and update it along all the project.

This also means that the project's model (the full model in the [[CASE]] tool used) is a living model constantly improved and updated, although its organization may lead You to think that it is a sequence ( of [[SDP]] phases ) it is not! In fact the proposed organization is oriented, mainly, to make standard [[SDP]] formal documents generation easier and promote structure recognition. Differently from what many Agile authors (wrongly) think, even a waterfall project, in real world, is always a spiral endeavor that progresses in refinement and breadth at each iteration. This has an important consequence that the model shall never be seen as a baseline artifact. The baseline artifacts are the specific documents generated from the model at milestone moments, the model is (shall be) an as updated as possible view of the present reality. For instance the [[DFD]] diagram started at [[RFP]] Analysis shall be continuously improved along the entire project (1).

----
(1) Of course that the scope contention role that it shall perform shall be done through its different incarnations on the baseline documents. On the model the [[DFD]] shall always represent everything we know up to the moment.
----
Back to [[Software Development]]
----
@@color:#c4d6ed; ^^
Description: a set of resources, practices and techniques that shall frame SDP's concrete performance
^^@@</pre>
</div>
<div title="Software Development Process" modifier="acarvalho" created="201306061312" modified="201308062306" tags="Content Development" server.title="Software Development Process" server.page.revision="201308062306" server.etag='"acarvalho_public/Software%20Development%20Process/1334982:7724696a6324f4847d1b7634c9304ed5c31d0c11"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="9852204865cab53a6b434a8fe82e8fcc9b60b77a">
<pre>A Software Development Process (SDP) intends to establish ''__when__''&amp;nbsp;and ''__what__''&amp;nbsp;has to be done in order to produce minimum quality assured and repeatable results. 

This is not the main focus of this site as there are plenty process definitions available, our focus is more on the [[Software Development Pattern]] used when instantiating a defined [[SDP]].
----
/%
@@color:#c4d6ed; ^^
Description: Software Development Process (SDP)
^^@@
%/</pre>
</div>
<div title="Software Requirement" modifier="acarvalho" created="201206161625" modified="201304121422" tags="Concept Content Requirements TODO" server.title="Software Requirement" server.page.revision="201304121422" server.etag='"acarvalho_public/Software%20Requirement/1182928:64fbaaa8cfb1b308bde69c59b1d53677b340ee22"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="76a29de9c5e11c6bac95bf8981c53f56cdea0499">
<pre>"//(...) a software requirement is a property which must be exhibited by software developed or adapted to solve a particular problem.//"
[[Guide to the Software Engineering Body of Knowledge (SWEBOK)|http://www.computer.org/portal/web/swebok/html/ch2#ch2-1.1]]

For a distinction against [[Feature]] see [[Software Requirement vs. Feature]]
----
See also : [[SMART Requirements]] [[Writing Good Requirements]]
----
@@color:#c4d6ed; ^^
Description: Software Requirement concept explanation and reference.
^^@@
</pre>
</div>
<div title="Software Requirement vs. Feature" modifier="acarvalho" created="201206161317" modified="201307261650" tags="Content Requirements" server.title="Software Requirement vs. Feature" server.page.revision="201307261650" server.etag='"acarvalho_public/Software%20Requirement%20vs.%20Feature/1323841:e8574d519df690ef8f7234cfc1b64b86afa4b63d"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="405215eb44e0fea4d1053763c65c89248c6bc610">
<pre>Business analysis literature commonly refers to ''Requirements'' (User, System and Software). See, for instance, &lt;&lt;BibRef "BABOK 2008"&gt;&gt;. But, in the software world, ''Requirements'' have a very specific meaning and several conditions to be considered as such. The best characterization is in ''[[SMART Requirements]]'' &lt;&lt;BibRef "Mannion,Keepence 1995"&gt;&gt;.

"//A great deal of formal and anecdotal evidence exists that the typical quality of actual requirement specifications today is embarrassingly poor. In practice, far too many requirements are ambiguous, incomplete, infeasible, unverifiable, inadequately prioritized, and mutually inconsistent [Firesmith 2003a]. In fact, this poor quality of individual requirements and the requirements specifications that document them is a primary reason why so many projects continue to fail [Standish 1994].//"
Donald G. Firesmith: “Quality Requirements Checklist”, in [[Journal of Object Technology, vol. 4|http://www.jot.fm/issues/issue_2005_11/column4]], no. 9 November - December 2005, pp. 31 - 38

Experience tells us that it is not so often that we find SMART requirements in ''Requests for Proposal'' or even in ''Technical Proposals'', they usually only appear, if they do at all, on the ''Specification Phase'' in ''Requirements Gathering''. Using the ''Requirements'' concept in a superficial and stressed phase, as the ''Inception'' usually is, is dangerous as it implies a concreteness degree that is seldom or never achieved. This leads to misunderstandings and miscalculations that may be very hard to solve. It also increases the risk of expressing artificial requirements that do not correspond to an effective need but will condition architecture sometimes preventing the best choices.

&lt;&lt;Image "FR" "250" "Requirements-Elements.png" "https://dl.dropbox.com/" "s/o4ewv8nlr4vfb7w/" "?dl=1" "Feature element in EA."&gt;&gt;
''[[Feature]]s'' are an higher abstraction level towards ''[[Software Requirement]]s'' in the sense that they allow a more relaxed expression of a need or of a commitment. Features can be as [[SMART|SMART Requirements]] as Requirements but they need not to be. The required characteristics of a feature are :
* ''Need oriented'' : A [[feature|Feature]] is a service that the system provides to fulfil one or more stakeholder needs.
* ''Specific enough'' : they are atomic to the granular level possible at the circumstances.
* ''Reasonable scope'' : they provide a reasonable scope delimitation for the request or proposal.
* ''Support estimation'' : they provide support for estimation within the accepted risk levels.
* ''Support Validation'' : they support Customer [[validation|Validation]] of Proposal understanding, adequacy, completeness and contractual commitment.
* ''[[Traceable|Traceability]]'' : uniquely identified and relatable to stakeholders, between request and proposal and between proposal and requirements.

Features concreteness level may range from very specific user requirement ("The system shall support IE 6.0.") to very diffuse problem statements ("The system shall optimize data entry effort.") to which the software company is expected to give the best possible answer. Of course Proposed Features shall narrow Requested Feature's scope in order to provide a validateable direction to proposed solution and a [[controlled scope|Scope Management]] for the Proposal.


----
Back to [[Business Analysis]]
See also [[Feature]]
----
@@color:#c4d6ed; ^^
Description: definition and discussion of the two concepts and their usage.
^^@@
</pre>
</div>
<div title="Software Rot" modifier="acarvalho" created="201206231237" modified="201512312314" tags="Concept Content" server.title="Software Rot" server.page.revision="201512312314" server.etag='"acarvalho_public/Software%20Rot/2441433:b695968ed10ede83d0dcfb380af1bd1ef29c51b4"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d85c3c5b048392e11d6375b5e4f58d0244a57112">
<pre>Also known as bit rot, code rot, software entropy, software erosion or software decay.
&lt;&lt;Image "FR" "" "BoehmsCurve.JPG" "https://dl.dropbox.com/" "s/cq6e3p0wiwpl4pq/" "?dl=1" "Boehm's Curve"&gt;&gt;
In //Software Engineering Economics//, 1981, [[Barry Boehm|http://csse.usc.edu/csse/about/people/faculties/BarryBoehm.html]] showed that change's cost exponentially increases along software life-cycle. 
In my opinion this is the most important aspect of software rot and not the performance issues that are commonly referred to the concept today.
It shall be noted that not only bugs and design flaws matter here but also, and, probably mostly, the normal evolutive maintenance changes that any really used professional software must undergo.

Casuistic quick adaptation hacks and features are the most common cause of decay. And they add to each other up to an unmanageable, uncorrectable and impossible to improve system. The main problem here is to not perform [[refactoring|Refactor]], or even redesign, when they are needed. But refactoring and redesign are expensive so we should focus on ways to make them easier, platform based software and [[Systematic Reuse]] principles and methodologies are good steps for these goals.

A software system that is not based on a platform maintained with [[Systematic Reuse]] and [[Continuous Improvement]] will decay over time and became legacy or obsolete software. If it is really used in a professional environment it will, rapidly, become unmaintainable and impossible to improve to respond to its user's needs.

[[Refactoring|Refactor]] is a way of dealing with the problem of software rot. [[Systematic Reuse]] also contributes to prevent it.

----
@@color:#c4d6ed; ^^
Description: Software Rot concept explanation and discussion.
^^@@</pre>
</div>
<div title="Software Specification" modifier="AndreCarvalho" created="201206141646" modified="202006201653" tags="Content Development TODO" server.title="Software Specification" server.page.revision="201307051814" server.etag='"acarvalho_public/Software%20Specification/1296952:e282407b01f6a18f09e3d8708352b60e47ea774b"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="9f093c644a52e4fe915437bb8044193c7084fa73" changecount="6">
<pre>&lt;&lt;Image "FR" "350" "RUP-Elaboration.png" "https://dl.dropbox.com/" "s/wswkdlgwx5gdqpm/" "?dl=1" "This is the RUP vision of the Development Process."&gt;&gt;
Software Specification occurs mainly in the ''Elaboration Phase'' and encompasses :
* Software Requirements Specification (SRS)
* Software Architecture Specification (SAS)

At this point you are working in a won software project. The first thing to consider is that You are not starting from scratch but continuing a project that started before and produced already some information, mainly, a Proposal that shall frame all your work. This is the next stage on model construction, in this iteration we shall refine and detail Requirements and Architecture in order to achieve a clear and suficient specification for system implementation.

The next consideration is that, not like many people on the Agile field think, Requirements and Architecture are not pure sequential activities. They interact and feed each other. Its true that Architecture shall respond to Requirements but Requirements gathering must also be oriented by envisioned Architecture in order to gather the needed information to build the system.

The first part of Requirements and Architecture was done at what we called [[Business Analysis]] section ( Inception phase in RUP ) in the [[Request for Proposal Analysis|RFP Analysis Guidelines]] and [[Technical Proposal production|Technical Proposal Production Guidelines]] activities. Those activities had defined goals, mainly: 
* allow for ''estimation'' of the proposed work within the accepted risk level 
* reassure the Customer on our ''understanding of the problem'' and ''ability to overcome it'' 
* and, of course, to establish a ''contractual baseline on scope''.

Here we are in a new phase (Elaboration in RUP) that has a different set of goals. This phase is much more //pure software engineering// and it really does not matter that much what management approach you will work in, be it Waterfall, Spiral (with or without staged delivery), Agile or whatever, ''you need to technically specify to develop software'' (at least when working in a team). And make no mistake, this is as technical as coding and requires as much (if not more) knowledge, experience and vocation.

----
Back to : [[Software Development]] [[Software Development Pattern]]
See also : [[Development Links]]
----
</pre>
</div>
<div title="SoftwareDevelopmentOntology" modifier="YourName" created="201406071403" modified="202005092030" tags="Content KM TODO" server.title="SoftwareDevelopmentOntology" server.page.revision="201501201039" server.etag='"acarvalho_public/SoftwareDevelopmentOntology/2054307:35de8c873aac7539e1cfde169ae64d2e7fd9ace9"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="fee164faf54417cf1d45a6651402981005adf613" changecount="2">
<pre>This [[ontology|https://en.wikipedia.org/wiki/Ontology_(information_science)]] is intended to represent software development knowledge oriented to reuse asset discovery and human resource management as well as strategic technical analysis and planing.
The proposed classes are not closed and are oriented by the meaningful relationships you may establish among them. They are focused on the questions you may want to put to the system in a drill-down approach.

The main idea is that information is added continuously to the system and, along time, by establishing relationships, knowledge is built. This is essential  to manage know-how in your company, access knowledge gaps, strengths and weakness, detect trends.

!!Classes

&lt;&lt;Image "" "" "SoftwareDevelopmentOntology.PNG" "https://dl.dropbox.com/" "s/5tdv4n38z9imrop/" "?dl=1" "Software Development Ontology classes."&gt;&gt;

''People''
People class holds people be it Customer personnel, collaborators, external experts, etc.
''Customer''
Customer organizations we interact with.
They may establish relationships among themselves when necessary.
''Location''
Locations may be geographical locations or organizational locations.
It is intended to provide the ability to access proximity (of people, teams, Customers, etc.).
''Project''
Projects are aggregators and correspond to the Project Management concept.
''Proposal''
A formal proposal for a project.
''Vertical''
Vertical is a broad business area that requires specific treatment.
''Domain''
Business domain corresponds to a coherent and common set of business needs that appear across relevant sets of projects and Customers and, possibly, Verticals.
''Standard''
Standards are established standards that are required by Customers or Verticals or even by internal Quality or Architectural policies.
''Certification''
Certifications are formal acknowledgements that a Customer or People have.
Certifications may be linked to standards and, when from a Customer, may impose requirements to the projects.
''Area''
A technical area is a broad division that, typically, means technical comfort or high productivity zones for people.
It may also imply technical compatibility.
.Net, Java, ASP .Net, BI, DB, Mobile, Business Analysis, Requirements, Architecture, Continuous Integration, Unit Testing, Static Analysis, Configuration Management, etc.
''Pattern''
A pattern is an application architectural solution type. An architectural pattern like ORM, CRM, CEP, Pipes&amp;Filters.  
''Tool''
A tool is a tool, that is, something we use as an aid to produce our results. A tool may require Techniques, has expert People and be used in Projects.
''Technique''
A technique is something that a person may have expertise in and that is required to use a tool or that is used by projects to produce some results.
C#, UML, English are examples of techniques one may possess and use.
''Framework''
A framework is a development platform that may have experts and be used in projects.
''Resource''
A resource may be anything useful, a book, a web site, etc.
''Tag''
A tag is just a tag, that is, something that qualifies other classes through Association.

!!Relationships

&lt;&lt;Image "" "" "SoftwareDevelopmentOntology2.JPG" "https://dl.dropbox.com/" "s/v8rs37f2rm5ulep/" "?dl=1" "Software Development Ontology relationships."&gt;&gt;

TODO: update classes and relationships

----
/%
@@color:#c4d6ed; ^^
Description: A Software Development domain ontology proposal
^^@@
%/</pre>
</div>
<div title="SoftwareSelection" creator="YourName" modifier="YourName" created="202110201622" modified="202110201626" tags="Content [[Software Tool]]" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" changecount="6">
<pre>!Software Selection

|Area|Name|Description|OS|Type|h
|Notes|[[Markor|https://gsantner.net/project/markor.html]]|Offline and private &lt;br&gt;Markor is a TextEditor for Android. This project aims to make an editor that is versatile, flexible, and lightweight. Markor utilizes simple markup formats like Markdown and todo.txt for note-taking and list management. Markor is versatile at working with text, it can also be used for keeping bookmarks, copying to clipboard, fast opening a link from text and lots of more. Created files are interoptable with any other plaintext software on any platform.Markor is using open formats and is free software, openly developed and accepts community contributions.|Android|Free/OS|
|~|[[Todo.txt|http://todotxt.org/]]|Offline and private &lt;br&gt;Todo.txt apps are minimal, todo.txt-focused editors which help you manage your tasks with as few keystrokes and taps possible.|All|Free/OS|

----
~~Back to [[SoftwareToolsPage]]~~
----
/%
@@color:#c4d6ed; ^^
Description: Organized by topic software selection page
^^@@
%/</pre>
</div>
<div title="SoftwareSpecification" modifier="acarvalho" created="201206141646" modified="201206141646" tags="Programming" server.title="SoftwareSpecification" server.page.revision="201206141646" server.etag='"acarvalho_public/SoftwareSpecification/746155:7603961742e01bcaf2ece9e6ffa1ac2e11b17ba9"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="e7309458cb76c04853661b1cc0f91a019f8c7446">
<pre>----
See also [[References|ReferencesPage##Architecture]]
----
</pre>
</div>
<div title="SoftwareToolsPage" modifier="YourName" created="201206132242" modified="202110201615" tags="Content [[Software Tool]]" changecount="16" server.title="SoftwareToolsPage" server.page.revision="201410202219" server.etag='"acarvalho_public/SoftwareToolsPage/1929841:641f0ad70f962df262cc6faa85cf0e1648c52696"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="6af8562328da1caecbd9edcb855942f386c01043">
<pre>This page is a personal collection of software tools I find particularly interesting or useful. 

See also the topic organized [[Software Selection|SoftwareSelection]] page
See also the dedicated [[Programming Tools]] page.
See also the dedicated [[Privacy|PrivacyPage]] page.

!!Outstanding sites
* [img(150px+,+)[http://www.nirsoft.net/nirsoft2.gif]] [[NirSoft web site|http://www.nirsoft.net/]] provides a unique collection of small and useful freeware utilities, all of them developed by Nir Sofer. 
* [img(150px+,+)[https://web.archive.org/web/20210515043246im_/https://cache.oahermes.com/images/logo.png]] [[www.oldapps.com|https://web.archive.org/web/20210515053706/https://www.oldapps.com/]] - Essential to fight nowadays "programmed obsolescence" obscenity.

!! Information management
* [img[https://dl.dropbox.com/s/x5pa51wewk8ymr8/TiddlyWiki.png?dl=1]] [[TiddlyWiki|http://www.tiddlywiki.com/]] - a reusable non-linear personal web notebook. ~TiddlyWiki is written in HTML, CSS and ~JavaScript to run on any reasonably modern browser without needing any ~ServerSide logic. It allows anyone to create personal ~SelfContained hypertext documents that can be published to a ~WebServer, sent by email, stored in a ~DropBox or kept on a USB thumb drive to make a ~WikiOnAStick. Because it doesn't need to be installed and configured it makes a great ~GuerillaWiki.
* --[img[http://tiddlyspot.com/_ts/images/banner-logo.png]] [[TiddlySpot|http://tiddlyspot.com/]] - ~TiddlySpot builds on the tried and tested tiddler model introduced by ~TiddlyWiki by moving tiddlers to the web.--
* [img[https://tiddlyhost.com/assets/logo-d172f33f619f67863d9e0c60088fc1f396e6e85a7938f0b9c11049ef10c045fd.svg]] [[TiddlyHost|https://tiddlyhost.com]] - The successor to ~TiddlySpot (that succeded ~TiddlySpace) and is, today, the golden standard for hosting ~TiddlyWiki.
* [img(150px+,+)[http://freemind.sourceforge.net/wiki/images/thumb/c/c8/FreeMind-computer-knowledge-080.png/800px-FreeMind-computer-knowledge-080.png]] [[Freemind|http://freemind.sourceforge.net/wiki/index.php/Main_Page]] - ~FreeMind is a premier free mind-mapping software written in Java. 

!! &lt;html&gt;&lt;a name="Online" /&gt;&lt;/html&gt; Online Services
* [img(38px+,+)[https://dl.dropbox.com/s/e8oenx53kn8z392/dropbox_48x48.ico?dl=1]] [[Dropbox|https://www.dropbox.com]] - Dropbox is a free service that lets you bring all your photos, docs, and videos anywhere. 

!! &lt;html&gt;&lt;a name="Security" /&gt;&lt;/html&gt; Security
* [img(150px+,+)[https://www.safer-networking.org/wp-content/themes/spybot3-pepi/img/spybot-blue.svg]] [[Spybot-S&amp;D|http://www.safer-networking.org/en/index.html]] - the free, fully functioning privacy and anti-malware software brought to you for over 10 years by ~Safer-Networking!
* [[TrueCrypt|http://www.truecrypt.org/]] - Free open-source disk encryption software for Windows 7/Vista/XP, Mac OS X, and Linux.
** [img[https://truecrypt.ch/wp-content/uploads/2014/06/TCN-logo1.png]] [[TrueCrypt.ch|https://truecrypt.ch/]] - TrueCrypt must not die. TrueCrypt.ch is the gathering place for all up-to-date information.  Unfortunately TrueCrypt.org really is dead. But, we organize a future.
** [img(38px+,+)[https://avatars.githubusercontent.com/u/5839944?v=4]] [[Open Crypto Audit Project|https://opencryptoaudit.org/]] - The Open Crypto Audit Project (OCAP) is a community-driven global initiative which grew out of the first comprehensive public audit and cryptanalysis of the widely used encryption software TrueCrypt®.
*** [[Verified Windows, OSX, Linux TrueCrypt v. 7.1a binaries and source files|https://github.com/AuditProject]] on ~GitHub
* [img(38px+,+)[http://keepass.info/images/plockb75.gif]] [[KeePass Password Safe|http://keepass.info/]] - the free, open source, light-weight and easy-to-use password manager.

!! &lt;html&gt;&lt;a name="SystemUtilities" /&gt;&lt;/html&gt; System utilities
* [img[http://www.steffengerlach.de/freeware/_scnthumb.gif]] [[Scanner|http://www.steffengerlach.de/freeware/]] - This tool uses a sunburst chart to display the usage of your hard disk or other media. The chart shows all major files and folders from all directory levels at once. 
* [[ClickFix|https://github.com/CemraJC/clickfix]] - Tame your mouse - stop annoying repeat clicks. It works!
----
</pre>
</div>
<div title="Sparx Enterprise Architect" modifier="acarvalho" created="201206212225" modified="201501191427" tags="Content EA Tool" server.title="Sparx Enterprise Architect" server.page.revision="201501191427" server.etag='"acarvalho_public/Sparx%20Enterprise%20Architect/2053579:932faaa38e501969e7b178e5f1d82971d76ae820"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="a3281801839ce4fac8eb79094ad8ca19de96437e">
<pre>{{imgfloatleft{[img(150px+,+)[http://www.sparxsystems.com/images/products/logos/EA.png]]}}}{{imgfloatright{[img(250px+,+)[http://www.sparxsystems.com/images/products/ea/recording_thumb.jpg]]}}}


Enterprise Architect is my primary tool in software development specification and documentation activities. For me it is a full life-cycle tool that I use from Inception, through code documenting and reuse management up to the end of life of each solution.

|EA specific articles in this site|h
|&lt;&lt;list filter [tag[EA]]&gt;&gt;|


[[Sparx Enterprise Architect|http://www.sparxsystems.com/]] [[CASE]] tool.
----
!!Additional resources
* [[Sparx Systems Enterprise Architect Community Site|http://community.sparxsystems.com/]]
* [[Exploring EA|http://exploringea.com/]] - Learning, experimenting and extending Sparx Systems Enterprise Architect
* [[Enterprise Architect (Sparx Systems) User Group|http://www.linkedin.com/groups?home=&amp;gid=1356]] - Linkdin group on EA
* [[eaWorkplace|http://www.eaworkplace.com./]] - your one-stop shop for all Sparx Enterprise Architect tools, services and talent. 
* [[Geert Bellekens|http://bellekens.com/]] - Freelance UML and Enterprise Architect consultant


----
@@color:#c4d6ed; ^^
Description: Sparx Enterprise Architect CASE tool.
^^@@</pre>
</div>
<div title="Stable Dependencies Principle" creator="YourName" modifier="AndreCarvalho" created="201709141043" modified="202006201703" tags="Content OOP Principle Concept" changecount="4">
<pre>!The Stable Dependencies Principle (SDP)
"//THE DEPENDENCIES BETWEEN PACKAGES IN A DESIGN SHOULD BE IN THE DIRECTION OF THE STABILITY OF THE PACKAGES. A PACKAGE SHOULD ONLY DEPEND UPON PACKAGES THAT ARE MORE STABLE --THAT-- THAN IT IS.//"
Robert C. Martin
https://web.archive.org/web/20151203170924/http://www.objectmentor.com/resources/articles/stability.pdf
----
/%
@@color:#c4d6ed; ^^
Description: OOP Robert C. Martin packaging principle
^^@@
%/</pre>
</div>
<div title="Standing on the shoulders of giants" creator="YourName" modifier="YourName" created="201709111323" tags="Content Quote" changecount="1">
<pre>The metaphor of dwarfs standing on the shoulders of giants (Latin: //nanos gigantum humeris insidentes//) expresses the meaning of "discovering truth by building on previous discoveries". This concept has been traced to the 12th century, attributed to Bernard of Chartres. Its most familiar expression in English is by Isaac Newton in 1675: "If I have seen further, it is by standing on the shoulders of giants."
[[Wikipedia|https://en.wikipedia.org/wiki/Standing_on_the_shoulders_of_giants]]
----
/%
@@color:#c4d6ed; ^^
Description: Isaac Newton : If I have seen further, it is by standing on the shoulders of giants.
^^@@
%/</pre>
</div>
<div title="Static Analysis" modifier="YourName" created="201208241723" modified="201710190844" tags="Concept Content" changecount="2" server.title="Static Analysis" server.page.revision="201305072243" server.etag='"acarvalho_public/Static%20Analysis/1207743:8eca02029c82d8cf26e39a982f60854c78fdb4ab"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1fac4b7651ac27d3d01f181391cc9c9576620243">
<pre>In our scope Static Analysis refers to ''Static Code Analysis''. It is static because it is a code quality analysis done without running the code. In this sense a code inspection may be considered a form of static analysis. Modern tools for automated static analysis that detect known problematic patterns or rule violations are common nowadays and provide a very good quality return with little effort and investment. At static analysis' high-end we also include formal Code Inspections, or Code Reviews, performed by a group of programmers, but these are expensive and shall be reserved for targets that automated tools can not achieve.

Static Analysis targets are ''defects'', that is, code patterns that are known to cause problems or ''violations'', that is, occurrences that violate an existent coding rule or guideline (naming conventions for instance). Targets also encompass ''errors'' that can be discovered in Code Inspections as unconsidered risks, limitations or scenarios or even logical mismatches against requirements.

Static Analysis is one of the [[High Maturity Practices]] in [[Software Development]].

For a guideline on enterprise wide implementation of static analysis see : [[Implementing Static Analysis]]

!!Static Analysis References
* Tools
** [[List of tools for static code analysis|http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis]] From Wikipedia, the free encyclopedia.
* Implementing
** [[Deploying Static Analysis|http://www.drdobbs.com/testing/deploying-static-analysis/240003801?pgno=1]] by Flash Sheridan, 2012 - Static analysis is a cheap and easy way to find bugs, but it offers important challenges that tend to be more political than technical.
** [[How to Spring Clean Your Static Analysis: 10 Tips|http://www.codeproject.com/Articles/589448/How-to-Spring-Clean-Your-Static-Analysis-10-Tips]] by c_a_dunlop, 2013 - A [[Code Project|http://www.codeproject.com]] article with some interesting tips.
----
@@color:#c4d6ed; ^^
Description: Static Analysis concept, discussion and references.
^^@@</pre>
</div>
<div title="StyleSheet" modifier="acarvalho" created="201206162238" modified="201401122232" server.title="StyleSheet" server.page.revision="201401122232" server.etag='"acarvalho_public/StyleSheet/1623519:c23104253ecad554aba03c18e01792599d24e151"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="fc3033af2cb91e151aff7a23c99e1068ab1e4437">
<pre>/* -------------------------- */
/* Mind Map */
/* -------------------------- */
.mindMap {
height: 300px;
margin: 16px 448px 0px 72px;
}
/* -------------------------- */
/* Image padding */
/* -------------------------- */
.viewer img { padding:0em 0.5em 0em 0.5em; }
/* -------------------------- */
/* -------------------------- */
/* Image formatting for float */
/* -------------------------- */
.imgfloatleft{float:left;} 
.imgfloatright{float:right;padding:5px} 
.imgfloatcenter{float:center;} 
/* -------------------------- */

/* -------------------------- */
/* Site titles */
/* -------------------------- */
.siteTitle { 
 font-family: script;
 font-size: 3.0em;
 font-weight: bold;
}

.siteSubtitle { 
 font-family: script;
 font-size: 1.5em;
 font-weight: bold;
 padding-left: 1.0em;
}
/* -------------------------- */

/* -------------------------- */
/* Tiddler options*/
/* -------------------------- */
.tiddler .subtitle { display:none; } 
/* -------------------------- */

/* -------------------------- */
/* Font selection */
/* -------------------------- */
body {
 font-family: "Lucida Sans Unicode", freesans, clean, sans-serif;
 font-size: 1.0em;
}
/* -------------------------- */
</pre>
</div>
<div title="StyleSheetTiddlersBar" modifier="acarvalho" created="201304241626" modified="201304241626" tags="System excludeLists" server.title="StyleSheetTiddlersBar" server.page.revision="201304241626" server.etag='"acarvalho_public/StyleSheetTiddlersBar/1195316:aa59e7b039e9a3c0bc36949ca7b722da2b2f679a"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="78f8b3354065f502c51134feaa580e3b1de88529">
<pre>/*{{{*/

/* This was the original border around the tab section at top   */
/* 
#tiddlersBar {
	margin: 0.5em;
        border: 1px [[ColorPalette::TertiaryLight]] solid;
        background-color:[[ColorPalette::Background]];
}
*/

/* Undo the xxx to have an underline / border underneath TopMenu or the tab section
#tiddlersBar {
	margin: 0.5em;
           border-bottom: 1px [[ColorPalette::TertiaryLight]] solid;
           border-top:    1px [[ColorPalette::TertiaryLight]] solid;
        background-color:[[ColorPalette::Background]];
}
*/





/* line-height controls the second row of tabs at top. Not noticeable until after 21px;   */
#tiddlersBar .tab { 
     white-space: nowrap;  
     padding: .2em; 
     border: 1px [[ColorPalette::PrimaryDark]] solid;  
     line-height: 30px;
}


#tiddlersBar {padding : .5em}
.tabUnselected .tabButton, .tabSelected .tabButton {padding : 0 2px 0 2px; margin: 0 0 0 0px;}
.tiddler, .tabContents {border:0px [[ColorPalette::TertiaryLight]] solid;}
.tabUnselected { background-color:[[ColorPalette::TertiaryLight]];}
.tabSelected   { background-color:[[ColorPalette::PrimaryLight]];}

 #tiddlersBar .button 
{
    border:0; 
    padding-right: 5px;
    padding-left: 5px;
 
}

/*}}}*/</pre>
</div>
<div title="SystemSettings" modifier="AndreCarvalho" created="201206221240" modified="201701311034" tags="excludeLists" _hash="fb1de5e4b098ff8daebac720b0cbeb96c5732095" changecount="2">
<pre>chkPrivateMode: false
txtUploadStoreUrl: store.cgi
txtUploadUserName: acarvalho
txt_GATracker_id: UA-32849239-1
txt_GATracker_track: 1%2C1%2C1%2C1%2C1%2C1%2C1</pre>
</div>
<div title="Systematic Reuse" modifier="acarvalho" created="201206231213" modified="201402281017" tags="Concept Content Reuse TODO" server.title="Systematic Reuse" server.page.revision="201402281017" server.etag='"acarvalho_public/Systematic%20Reuse/1674424:9b18cb2fba341701992674ad5b882cbdaf9f938f"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c20c9a4cb63c68b028529942db1076e02c9924f0">
<pre>Systematic reuse opposes to //ad hoc// (or opportunistic) reuse as it involves defined practices, processes, management  and infrastructure that allow [[Continuous Improvement]].
//Ad hoc// reuse, or opportunistic reuse, is just a scavenging practice unable to scale and doomed to fall way back of systematic reuse potential. It is usually performed as [[Reuse by Copy|Reuse by Reference]] and, as such, it does not promote [[Continuous Improvement]] and is destined to [[rot|Software Rot]].

''Systematic reuse starts, and has its major potential, at processes, analysis and specification, not on code.''
This is an often overlooked aspect as, most people, think in __reuse code__ as the first reuse topic. ''The fact is that reuse is easier towards abstraction.'' Its easier to reuse a set of [[Feature]]s (business needs) than the specific [[Software Requirement]]s they originate, its easier to reuse a set of requirements than the specific code that was produced in response to them, its easier to reuse an interface than a concrete class. Of course that, if systematic reuse is in the mindset of your analysis and specification, chances are that you will also produce more reusable code.

''Systematic reuse improves overall quality of development artefacts as it provides [[Continuous Improvement]] opportunities.'' Each reuse instance is an opportunity to [[refactor|Refactor]], optimize, correct and enhance and, if [[Reuse by Copy|Reuse by Reference]] is avoided, these improvements propagate to all the other, past, present and future reuse instances.

''Systematic reuse is a major competitiveness factor.'' On tendering it allows us to focus on the specific Customer request challenges and not on technical common problems, this makes us more [[agile|Agile Methodologies]] and improves the quality of our response. Reuse (of proper reusable artefacts) also has an huge impact on cost contributing to a more competitive proposal. By using common, known and tested approaches we also reduce risk and improve estimation accuracy.

In [[Implementing Systematic Reuse]] we point out some guidelines that may be useful in this endeavour.
----
!!Other references on the topic
* Aravamudhan Narayanan (Vijay),  on [[Art of Software Reuse|http://artofsoftwarereuse.com/]] - Enabling Organizational Agility using Systematic Software Reuse
----
See also : [[Emergent Reuse]], [[Reuse oriented CVS]], [[Reuse Obstacles]]
----
@@color:#c4d6ed; ^^
Description: Systematic Reuse concept explanation and discussion.
^^@@</pre>
</div>
<div title="TagCloudPlugin" modifier="ELSDesignStudios" created="200510141945" modified="200907190523" tags="NavigationPackage systemConfig DiscoveryPackage" server.type="file" server.host="http://www.TiddlyTools.com" server.page.revision="200907190523">
<pre>/***
|Name|TagCloudPlugin|
|Source|http://www.TiddlyTools.com/#TagCloudPlugin|
|Version|1.7.0|
|Author|Eric Shulman|
|Original Author|Clint Checketts|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|present a 'cloud' of tags (or links) using proportional font display|
!Usage
&lt;&lt;&lt;
{{{
&lt;&lt;cloud type action:... limit:... tag tag tag ...&gt;&gt;
&lt;&lt;cloud type action:... limit:... +TiddlerName&gt;&gt;
&lt;&lt;cloud type action:... limit:... -TiddlerName&gt;&gt;
&lt;&lt;cloud type action:... limit:... =tagvalue&gt;&gt;
}}}
where:
* //type// is a keyword, one of:
** ''tags'' (default) - displays a cloud of tags, based on frequency of use
** ''links'' - displays a cloud of tiddlers, based on number of links //from// each tiddler
** ''references'' - displays a cloud of tiddlers, based on number of links //to// each tiddler
* ''action:popup'' (default) - clicking a cloud item shows a popup with links to related tiddlers&lt;br&gt;//or//&lt;br&gt; ''action:goto'' - clicking a cloud item immediately opens the tiddler corresponding to that item
* ''limit:N'' (optional) - restricts the cloud display to only show the N most popular tags/links
* ''tag tag tag...'' (or ''title title title'' if ''links''/''references'' is used)&lt;br&gt;shows all tags/links in the document //except// for those listed as macro parameters
* ''+TiddlerName''&lt;br&gt;show only tags/links read from a space-separated, bracketed list stored in a separate tiddler.
* ''-TiddlerName''&lt;br&gt;show all tags/links //except// those read from a space-separated, bracketed list stored in a separate tiddler.
* ''=tagvalue'' (//only if type=''tags''//)&lt;br&gt;shows only tags that are themselves tagged with the indicated tag value (i.e., ~TagglyTagging usage)
//note: for backward-compatibility, you can also use the macro {{{&lt;&lt;tagCloud ...&gt;&gt;}}} in place of {{{&lt;&lt;cloud ...&gt;&gt;}}}//
&lt;&lt;&lt;
!Examples
&lt;&lt;&lt;
//all tags excluding&lt;&lt;tag systemConfig&gt;&gt;, &lt;&lt;tag excludeMissing&gt;&gt; and &lt;&lt;tag script&gt;&gt;//
{{{&lt;&lt;cloud systemConfig excludeMissing script&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud systemConfig excludeMissing script&gt;&gt;}}}
//top 10 tags excluding&lt;&lt;tag systemConfig&gt;&gt;, &lt;&lt;tag excludeMissing&gt;&gt; and &lt;&lt;tag script&gt;&gt;//
{{{&lt;&lt;cloud limit:10 systemConfig excludeMissing script&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud limit:10 systemConfig excludeMissing script&gt;&gt;}}}
//tags listed in// [[FavoriteTags]]
{{{&lt;&lt;cloud +FavoriteTags&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud +FavoriteTags&gt;&gt;}}}
//tags NOT listed in// [[FavoriteTags]]
{{{&lt;&lt;cloud -FavoriteTags&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud -FavoriteTags&gt;&gt;}}}
//links to tiddlers tagged with 'package'//
{{{&lt;&lt;cloud action:goto =package&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud action:goto =package&gt;&gt;}}}
//top 20 most referenced tiddlers//
{{{&lt;&lt;cloud references limit:20&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud references limit:20&gt;&gt;}}}
//top 20 tiddlers that contain the most links//
{{{&lt;&lt;cloud links limit:20&gt;&gt;}}}
{{groupbox{&lt;&lt;cloud links limit:20&gt;&gt;}}}
&lt;&lt;&lt;
!Revisions
&lt;&lt;&lt;
2009.07.17 [1.7.0] added {{{-TiddlerName}}} parameter to exclude tags that are listed in the indicated tiddler
2009.02.26 [1.6.0] added {{{action:...}}} parameter to apply popup vs. goto action when clicking cloud items
2009.02.05 [1.5.0] added ability to show links or back-links (references) instead of tags and renamed macro to {{{&lt;&lt;cloud&gt;&gt;}}} to reflect more generalized usage.
2008.12.16 [1.4.2] corrected group calculation to prevent 'group=0' error
2008.12.16 [1.4.1] revised tag filtering so excluded tags don't affect calculations
2008.12.15 [1.4.0] added {{{limit:...}}} parameter to restrict the number of tags displayed to the top N most popular
2008.11.15 [1.3.0] added {{{+TiddlerName}}} parameter to include only tags that are listed in the indicated tiddler
2008.09.05 [1.2.0] added '=tagname' parameter to include only tags that are themselves tagged with the specified value (i.e., ~TagglyTagging usage)
2008.07.03 [1.1.0] added 'segments' property to macro object.  Extensive code cleanup
&lt;&lt;&lt;
!Code
***/
//{{{
version.extensions.TagCloudPlugin= {major: 1, minor: 7 , revision: 0, date: new Date(2009,7,17)};
//Originally created by Clint Checketts, contributions by Jonny Leroy and Eric Shulman
//Currently maintained and enhanced by Eric Shulman
//}}}
//{{{
config.macros.cloud = {
	tagstip: "%1 tiddlers tagged with '%0'",
	refslabel: " (%0 references)",
	refstip: "%1 tiddlers have links to '%0'",
	linkslabel: " (%0 links)",
	linkstip: "'%0' has links to %1 other tiddlers",
	groups: 9,
	init: function() {
		config.macros.tagCloud=config.macros.cloud; // for backward-compatibility
		config.shadowTiddlers.TagCloud='&lt;&lt;cloud&gt;&gt;';
		config.shadowTiddlers.StyleSheetTagCloud=
			'/*{{{*/\n'
			+'.tagCloud span {line-height: 3.5em; margin:3px;}\n'
			+'.tagCloud1{font-size: 80%;}\n'
			+'.tagCloud2{font-size: 100%;}\n'
			+'.tagCloud3{font-size: 120%;}\n'
			+'.tagCloud4{font-size: 140%;}\n'
			+'.tagCloud5{font-size: 160%;}\n'
			+'.tagCloud6{font-size: 180%;}\n'
			+'.tagCloud7{font-size: 200%;}\n'
			+'.tagCloud8{font-size: 220%;}\n'
			+'.tagCloud9{font-size: 240%;}\n'
			+'/*}}}*/\n';
		setStylesheet(store.getTiddlerText('StyleSheetTagCloud'),'tagCloudsStyles');
	},
	getLinks: function(tiddler) { // get list of links to existing tiddlers and shadows
		if (!tiddler.linksUpdated) tiddler.changed();
		var list=[]; for (var i=0; i&lt;tiddler.links.length; i++) {
			var title=tiddler.links[i];
			if (store.isShadowTiddler(title)||store.tiddlerExists(title))
				list.push(title);
		}
		return list;
	},
	handler: function(place,macroName,params) {
		// unpack params
		var inc=[]; var ex=[]; var limit=0; var action='popup';
		var links=(params[0]&amp;&amp;params[0].toLowerCase()=='links'); if (links) params.shift();
		var refs=(params[0]&amp;&amp;params[0].toLowerCase()=='references'); if (refs) params.shift();
		if (params[0]&amp;&amp;params[0].substr(0,7).toLowerCase()=='action:')
			action=params.shift().substr(7).toLowerCase();
		if (params[0]&amp;&amp;params[0].substr(0,6).toLowerCase()=='limit:')
			limit=parseInt(params.shift().substr(6));
		while (params.length) {
			if (params[0].substr(0,1)=='+') { // read taglist from tiddler
				inc=inc.concat(store.getTiddlerText(params[0].substr(1),'').readBracketedList());
			} else if (params[0].substr(0,1)=='-') { // exclude taglist from tiddler
				ex=ex.concat(store.getTiddlerText(params[0].substr(1),'').readBracketedList());
			} else if (params[0].substr(0,1)=='=') { // get tag list using tagged tags
				var tagged=store.getTaggedTiddlers(params[0].substr(1));
				for (var t=0; t&lt;tagged.length; t++) inc.push(tagged[t].title);
			} else ex.push(params[0]); // exclude params
			params.shift();
		}
		// get all items, include/exclude specific items
		var items=[];
		var list=(links||refs)?store.getTiddlers('title','excludeLists'):store.getTags();
		for (var t=0; t&lt;list.length; t++) {
			var title=(links||refs)?list[t].title:list[t][0];
			if (links)	var count=this.getLinks(list[t]).length;
			else if (refs)	var count=store.getReferringTiddlers(title).length;
			else 		var count=list[t][1];
			if ((!inc.length||inc.contains(title))&amp;&amp;(!ex.length||!ex.contains(title)))
				items.push({ title:title, count:count });
		}
		if(!items.length) return;
		// sort by decending count, limit results (optional)
		items=items.sort(function(a,b){return(a.count==b.count)?0:(a.count&gt;b.count?-1:1);});
		while (limit &amp;&amp; items.length&gt;limit) items.pop();
		// find min/max and group size
		var most=items[0].count;
		var least=items[items.length-1].count;
		var groupSize=(most-least+1)/this.groups;
		// sort by title and draw the cloud of items
		items=items.sort(function(a,b){return(a.title==b.title)?0:(a.title&gt;b.title?1:-1);});
		var cloudWrapper = createTiddlyElement(place,'div',null,'tagCloud',null);
		for (var t=0; t&lt;items.length; t++) {
			cloudWrapper.appendChild(document.createTextNode(' '));
			var group=Math.ceil((items[t].count-least)/groupSize)||1;
			var className='tagCloudtag tagCloud'+group;
			var tip=refs?this.refstip:links?this.linkstip:this.tagstip;
			tip=tip.format([items[t].title,items[t].count]);
			if (action=='goto') { // TAG/LINK/REFERENCES GOTO
				var btn=createTiddlyLink(cloudWrapper,items[t].title,true,className);
				btn.title=tip;
				btn.style.fontWeight='normal';
			} else if (!links&amp;&amp;!refs) { // TAG POPUP
				var btn=createTiddlyButton(cloudWrapper,items[t].title,tip,onClickTag,className);
				btn.setAttribute('tag',items[t].title);
			} else { // LINK/REFERENCES POPUP
				var btn=createTiddlyButton(cloudWrapper,items[t].title,tip,
					function(ev) { var e=ev||window.event; var cmt=config.macros.cloud;
						var popup = Popup.create(this);
						var title = this.getAttribute('tiddler');
						var count = this.getAttribute('count');
						var refs  = this.getAttribute('refs')=='T';
						var links = this.getAttribute('links')=='T';
						var label = (refs?cmt.refslabel:cmt.linkslabel).format([count]);
						createTiddlyLink(popup,title,true);
						createTiddlyText(popup,label);
						createTiddlyElement(popup,'hr');
						if (refs) {
							popup.setAttribute('tiddler',title);
							config.commands.references.handlePopup(popup,title);
						}
						if (links) {
							var tiddler = store.fetchTiddler(title);
							var links=config.macros.cloud.getLinks(tiddler);
							for(var i=0;i&lt;links.length;i++)
								createTiddlyLink(createTiddlyElement(popup,'li'),
									links[i],true);
						}
						Popup.show();
						e.cancelBubble=true; if(e.stopPropagation) e.stopPropagation();
						return false;
					}, className);
				btn.setAttribute('tiddler',items[t].title);
				btn.setAttribute('count',items[t].count);
				btn.setAttribute('refs',refs?'T':'F');
				btn.setAttribute('links',links?'T':'F');
				btn.title=tip;
			}
		}
	}
};
//}}}</pre>
</div>
<div title="TagPolicy" modifier="AndreCarvalho" created="201304121940" modified="201709091131" tags="Content" changecount="2" _hash="f7ff7bdec01f7823691ae610c941792cbad42684">
<pre>Tags are a very useful navigation and search mechanism in TiddlyWiki.
This space has several tags that group and categorize subjects.
When you open a tiddler its list of tags is in the upper right corner. You may click each tag to see a list of tiddlers tagged with it.

|Type|Tag|Description|h
|Generic|&lt;&lt;tag System&gt;&gt;|Support, configuration and functionality tiddlers for this space. You will only be interested in them if you want to know more about how TiddlyWiki and TiddlySpace work and how some functionality is made in this space.|
|~|&lt;&lt;tag Content&gt;&gt;|Main content of this site intended for visitors. All user content is tagged as such. Each subject in these tiddlers may, and most do, have other tags that further categorize its content|
|Subject|&lt;&lt;tag Acronym&gt;&gt;|Acronyms mainly from Software Engineering area|
|~|&lt;&lt;tag Concept&gt;&gt;|Software Engineering concepts with short descriptions and references.|
|~|&lt;&lt;tag Development&gt;&gt;|Software Development thoughts and tools.|
|~|&lt;&lt;tag EA&gt;&gt;|Sparx Enterprise Architect CASE tool usage guidelines and references.|
|~|&lt;&lt;tag Guideline&gt;&gt;|Software Engineering practical performance guidelines and detailed practical performance examples.|
|~|&lt;&lt;tag KM&gt;&gt;|Knowledge Management|
|~|&lt;&lt;tag OOP&gt;&gt;|Software Engineering Object Oriented Programming or Principles|
|~|&lt;&lt;tag Quote&gt;&gt;|Software Engineering important citations from important people.|
|~|&lt;&lt;tag Reuse&gt;&gt;|Software Reuse concepts, guidelines and information|
|~|&lt;&lt;tag Requirements&gt;&gt;|Software Requirements concepts, guidelines and information|
|~|&lt;&lt;tag Tool&gt;&gt;|Software selected tools|
|System|&lt;&lt;tag systemConfig&gt;&gt;|Tags tiddlers that are treated as code providing additional functionality to TiddlyWiki|
|~|&lt;&lt;tag excludeLists&gt;&gt;|Tags tiddlers that shall not appear in any list|
|~|&lt;&lt;tag excludeSearch&gt;&gt;|Tags tiddlers that shall not appear in search results|

!Tagcloud
&lt;&lt;tagCloud&gt;&gt;

----
/%
@@color:#c4d6ed; ^^
Description: Tag policy used in this space
^^@@
%/</pre>
</div>
<div title="Tailoring" modifier="acarvalho" created="201208131828" modified="201510201451" tags="Concept Content Guideline TODO" server.title="Tailoring" server.page.revision="201510201451" server.etag='"acarvalho_public/Tailoring/2378293:93ea1567842f167eb366cddc04097ba3b1fb1bae"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="1a3c7571ec8a2a3e4bf78455f3d30d4df5d6afee">
<pre>Software Development Process tailoring "//is an activity that adjusts an abstract set of processes and activities to the needs of a concrete project by selecting processes and activities and/or reducing (or enlarging) their complexity, frequency, etc.//"
[[Software Development Plan Tailoring : A Goal Oriented Strategy Proposal|https://www.dropbox.com/s/p308qz0iwtnhvy8/Software%20Development%20Plan%20Tailoring.pdf?dl=1]] by André de Carvalho, 2002 (draft 1)

“//Tailoring is a key element in the organization’s ability to develop reasonable and efficient software development plans for use in managing and controlling projects within the organization.//”
Process Tailoring and the Software Capability Maturity Model – CMU/~SEI-94-TR-024 – Mark P. Ginsberg, Lauren H. Quinn – 1995

----
@@color:#c4d6ed; ^^
Description: Software Development Process tailoring concept and references
^^@@</pre>
</div>
<div title="Technical Proposal Production Guidelines" modifier="AndreCarvalho" created="201209032047" modified="202007090935" tags="Content Development Guideline TODO" server.title="Technical Proposal Production Guidelines" server.page.revision="201312190928" server.etag='"acarvalho_public/Technical%20Proposal%20Production%20Guidelines/1600487:f0a07057268433125f71fd62ec3220ab8e111865"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="cab6cfd62d745e16accbba012a8c8b3d8db23458" changecount="1">
<pre>!Introduction
After you performed [[RFP Analysis|RFP Analysis Guidelines]] you are ready to start building your Technical Proposal to use it as the basis for estimations and, as such, the basis for the Financial Proposal but also as a clear demonstration of capability able to persuade the Customer that you are the best technical choice to carry on his project.

{{tw_ttoc{}}}

!Technical Proposal Structure
The Technical Proposal is your contractual proposal to the Customer. It shall clearly close the scope of work and present your view of it to be validated by the Customer.
It is this view that determines effort estimation and cost proposed to the Customer and, as such, every effort shall be put on achieving a clear and closed scope to be used as a contractual reference.

The Technical Proposal may, and shall, refer the [[RFP]] if it is a formal one or may produce information that is supposed to came from [[RFP]] if it is an informal one.

Take notice that Proposal shall establish the structure and scope for Requirements gathering and, as such, it shall be as complete and detailed as possible.

At the Proposal closure the information items referred in [[RFP]] and Proposal shall be acquired no matter if from  [[RFP]] or built in the Proposal. This is a very important aspect of safe and realistic proposals.
!!Glossary
&lt;&lt;Image "FR" "" "Technical-Proposal-Structure.PNG" "https://dl.dropbox.com/" "s/1ao4mpykaidyynt/" "?dl=1" "Technical Proposal Structure"&gt;&gt; Never underestimate the importance of communication. Remember that each knowledge area has its own vocabulary, your Customer's included, and that a common vocabulary is essential to communicate any ideas. To establish a Glossary that you keep, validate and enhance shall be one of your priorities. [[EA|Sparx Enterprise Architect]] provides a good mechanism to produce a glossary and, of course, you shall reuse it in other projects with the Customer or even on the domain. Start it on the first day.

!!Problem and Solution Statement
This is an introductory section that shall give an overview of the problem and provide a context for the following sections. It shall reuse (structuring, extending and enhancing) the correspondent section on the RFP.
*EA usage: 
**Packages as  typographical elements of a document. Illustrative diagrams may be used if necessary. 
*Internal section goals: 
**This section shall present an introduction to the problem and its context. It shall also present a broad scope definition for the proposal. This shall be Customer view as we understand it.
*External section goals: 
**This section shall be able to provide the Customer with the means to validate our conceptual understanding of his problem.

!!Solution Processes
This is the Proposal counterpart to RFP Business Processes section.
At this level we shall describe all business processes that the solution will support or contribute to. This is the system view of the business processes.
*EA usage: 
**The Solution Processes diagram is Activity and the most relevant elements are Partition, Activities and Decision.
**Primary Relationship is Control Flow to convey sequence. The partitions shall reflect the relevant actors be them Customer organizational units or existing or to be developed systems. For each activity the role of the solution shall be stated. Solution Processes shall be structured in packages and the package shall contain a contextual introduction to the diagram. The diagram itself shall contain a textual description of the process.
* [[Traceability]] : 
**Partitions shall trace to Roles.
*Internal section goals: 
**This section shall present an overview of the system/solution processes and a description of the activities proposed. This is a major scope definition item as any externally observable solution feature must be present here.
*External section goals: 
**Validate business view and understanding and solution [[coverage|Coverage]] of business needs.
!!Roles
This section shall describe all Roles that are relevant for the solution.
This information may came from the RFP or be constructed by a joint effort between Tendering and Technical Proposal Team. If necessary and possible it shall also involve Customer.
*EA usage: 
**Diagram is Use Case. Role element is Actor. Actors may be related by Generalization/Specialization relationships. Actor description shall include a description of the role and solution interaction.
* [[Traceability]] : 
**Roles shall be traced to RFP Stakeholders.
*Internal section goals: 
**The Roles section provides a definitive list of Human interaction with the system. It may also represent other automated systems that play a role in the solution. This is an important information for instance to determine the different, Authorization based, interfaces the system must allow.
**This is also an important scope item as it provides a definitive list of foreseen interactions with the system.
!!Use Cases
This section shall describe all the Use Cases derived from Roles and Solution Processes interaction.
*EA usage: 
**The Use Cases diagram is Use Case and the elements are Actor (from Roles) and Use Case. Use Cases shall be structured in packages the top package shall state the structuring criteria. Each package shall state its scope with a short description. Each Use Case may be detailed by filling its Scenarios in Basic or Alternate paths. Actors relate with Use Cases through Use relationship. Use Cases relate with each other through Include and Extends relationships. The Use Case elements may be hierarchically numbered with, at least, two levels (xx.xxx). It is advisable to use factor 10 increments.
* [[Traceability]] : 
**Actors must be those in Roles. Use Cases may/shall be linked with Solution Processes' Activities as a way to detail them from an user interaction perspective.
*Internal section goals: 
**When possible register User interaction foreseen by the Customer or envisioned by the proposal team. Validate completeness and adequacy. 
**Help in defining proposal scope. The scope contribution is not definitive as Use Cases are used to detail User Interaction with the system when needed so its catalogue is not exhaustive, however if an Use Case exists it is a positive scope item that must be honoured.
*External section goals: 
**Allow Customer to validate adequacy of the perceived GUI needs.
See also : [[Use Case Diagram]]
!!Solution Integration and Deployment
*Description:
**This section shall describe the integration environment of the solution, namely, describing and specifying external interfaces and protocols used for our system integration with existing or foreseen external systems.
*EA usage:
**The Solution Integration diagram is Deployment and the elements are mainly Node, Execution Environment, Component and Interface.
**Components shall be reused from Technical Solution.
* [[Traceability]] : 
*Scope:
**The intended audience scope for the section is PUBLISHED.
*Internal section goals:
**This section is intended to define the integration needs of the solution by identifying all external systems and correspondent Interfaces and Protocols. This section shall also present a preliminary deployment environment specification for our system.
*External section goals:
**Validation of completeness of external systems list and identification of interfaces and protocols. 
*When in doubt:
** Build assumptions.
*Notes:
*References:
!!Proposed Features
Proposed [[Feature]]s are your response to customer's Requested Features. They will be the main content of your Technical Proposal and the main content of your customer analysis on the suitability and advantages of your proposed solution.
*Description:
**This section shall present the complete list of Proposed Features for the solution. These are our response to the Requested Features from Customer and constitute our proposed agreement terms and solution scope.
*EA usage:
**The Proposed Features diagram is Requirements and the element is Feature.
**The Proposed Feature elements have FT- prefix.
**The Proposed Feature elements are hierarchically numbered with, at least, two levels (xx.xxx). It is advisable to use factor 10 increments.
* [[Traceability]] : 
**Proposed Features shall trace (Abstraction) to Requested Features on RFP. Proposed Features shall be traced (Abstraction) from Software Requirements. Proposed Features may dependency trace to Issues and Assumptions and be associated to Ideas and Changes.
*Scope:
**The intended audience scope for the section is PUBLISHED.
*Internal section goals:
**This section shall contain the complete list of proposed Features and Assumptions in response to the RFP and, thus, be seen as the complete and primary scope definition for the Proposal.
*External section goals:
**This section shall allow Customer validation of completeness and adequacy of our proposal and serve as the complete agreement on project's scope.
*When in doubt:
**Any pending Issue at this stage shall be solved by an Assumption.
*Notes:
*References:
!!Technical Solution
On a Proposal the technical solution is, of course, preliminary. Nevertheless your Customer expects that you are able to convince him that you do have a solid technical solution and are able to execute it. He also wants, for sure, to access the compatibility and fitness of your proposed solution in his environment and evolution roadmap. Finally your Customer wants to be reassured that you understood the full scope and complexity of the problem and are taking that into account on your financial proposal and not just "tossing up a nice round number" over a simplistic view.
!!!Major Challenges
Identifying major technical challenges of the project is essential for estimation, know-how gathering and team assembling. Clearly stating them will also assure your Customer that you are a mature software developer that understood the problem and its solution and that your Proposal is solid, serious and proper for the task at hands. It is also a major asset when you have to "discuss the cost".
*Description:
**This section shall describe the major technical challenges rose by the project and propose approaches for each one.
*EA usage:
**This is a textual section.
**Correspondent Features, Components, etc. shall have their &lt;&lt;quote 'Difficulty attribute' 'EA Usage - Attribute Difficulty' &gt;&gt; set to High.
*Scope:
**The intended audience scope for the section is PUBLIC or PUBLISHED depending on the confidence of the analysis.
*Internal section goals:
**Internally this section must convey the assurance that all major technical challenges were considered. If a challenge has no immediate solution approach then Risks shall be created and Assumptions made.
**Technical challenges may also be rise from business challenges.
**This is an important factor in estimation accuracy. This is also important in defining know-how required and V&amp;V potential main targets.
*External section goals:
**This section shall increase Customer confidence in a proper understanding and prioritisation of the solution challenges.
*When in doubt:
**Seek for Expert advise. Rise Risks and build Assumptions.
!!!Architectural Archetype
The &lt;&lt;quote 'Architectural Archetype' 'Application Archetype'&gt;&gt; is the spine of your solution's architecture. It is the first vision of it and will greatly determine all your other architectural choices, and, by the way, possibilities.
A known and well thought archetype will inspire confidence and provide a very good fitness [[validation|Validation]] element.
*Description:
**This section intends to convey the architectural, or, better, the meta-architectural archetype, in which the proposed technical solution will fit.
*EA usage:
**The Archetype diagram is CompositeStructure and the stack element is Part. You may use Boundary to separate tiers.
**The relationship is Connector from consumer to provider.
**This is a common Stacked Diagram as it is generally used in protocol illustration. Layers shall be vertically stacked inside tiers. Communication between tiers is important and also transversal concerns.
*Scope:
**The intended audience scope for the section is PUBLISHED.
*Internal section goals:
**The most important goal here is to establish an architectural basis, an archetype, from which solutions may be inferred in terms of commonly used patterns in the approach. 
**Non-conventional parts of the proposed solution must be explicitly detailed as such. **Example : the solution uses a proprietary Authentication schema. The "standard" solution parts need not to be much detailed and may be just referred.
**This diagram is invaluable in accessing reuse candidates.
*External section goals:
**It must allow the Customer to identify as known the architectural basis of our architecture. The Customer shall also validate that the proposed meta-architecture fits in his existent/envisioned environment.
**This top folder shall contain a brief justification of the choice as well as a demonstration that it fits in Customer's existing systems/architecture. If it is a new/isolated system then the justification shall be more elaborated in order to be perceived as proper for future development and expansion (maturity, long term support forecast, adopters importance, etc. are important factors to consider and to show to the Customer that they were considered).
*When in doubt:
**Produce clear assumptions regarding suitability of the archetype and its used patterns.
*References:
&gt;Microsoft Application Architecture Guide (2nd Edition)
&gt;[[Application Archetypes|http://msdn.microsoft.com/en-us/library/ee658107%28v=PandP.10%29.aspx]]
!!!Development Environment
*Description:
**This section shall state the technologies to be used in the proposed project.
**In most of the cases this section shall be a direct reuse of the standard list of environments. A standard environment comprises IDE, language, Database, Third-parties, Frameworks, Tools, etc.
*EA usage:
**For now this shall be a textual description of the environment.
*Scope:
**The intended audience scope for the section is PUBLISHED.
*Internal section goals:
**The most important goal here is to establish an architectural environment that directs know-how gathering, team selection and costs forecast. 
*External section goals:
**It must allow the Customer to identify as known the technological basis of proposed architecture. 
**This top folder shall contain a brief justification of the choice as well as a demonstration that it fits in Customer's existing technologies. If it is a new/isolated system then the justification shall be more elaborated in order to be perceived as proper for future development and expansion (maturity, long term support forecast, adopters importance, etc. are important factors to consider and to show to the Customer that they were considered).
*When in doubt:
**Produce clear assumptions regarding suitability of the Development Environment.
*References:
!!!Preliminary Component Model
*Description:
**This section shall provide a preliminary component model decomposition of the system that is primary oriented to support estimation and reuse analysis.
**Attention shall be centred on Major Challenges and the strategies envisioned to deal with them. Also the modularization shall reflect the architectural archetype chosen.
*EA usage:
**The Preliminary Component Model (PCM) diagram is Component and the PCM main elements are Component and Interface.
**Decomposition shall progress from overview model to more detailed ones. Detail shall be the one that is enough to produce an effort estimation within the risk level accepted for the Proposal and without taking unnecessary compromise with specific solution designs.
* [[Traceability]] : 
** Components shall Realize Software Requirements that, in this way, become their responsibilities. Components also Realize Interfaces and Aggregate Classes.
** Notice that this is a ''preliminary'' component model here at Proposal. It may be fully replaced by a Software Architecture Specification later.
*Scope:
**The intended audience scope for the section is PUBLISHED. Not all detail levels, however, may appear in final Proposal document as we must consider the level of Architectural compromise we want or are able to support at this phase.
*Internal section goals:
**Perform a first modular view of the system able to support estimation of effort, reuse analysis including third-parties, necessary know-how definition and challenge consideration demonstration and overcame strategy existence.
*External section goals:
**Perform a first modular view of the system that Customer's technical personal may validate.
**Generate confidence in our ability to deal with changes and achieve a good solution.
*When in doubt:
**Produce Assumptions. Identify Risks.
*Notes:
*References:
!!Assumptions
*Description:
**This section shall present the complete list of Assumption established for pending Issues, doubts or disambiguation.
*EA usage:
**The Assumption diagram is Custom and the element is Issue.
**The Assumption elements have AS- prefix.
**The Assumption elements are hierarchically numbered with, at least, two levels (xx.xxx). It is advisable to use factor 10 increments.
* [[Traceability]] : 
**Assumptions shall dependency trace from any element they are related to.
*Scope:
**The intended audience scope for the section is PUBLISHED.
*Internal section goals:
**This section shall establish a closed scope for proposal even when issues and doubts are still present.
*External section goals:
**This section shall allow Customer validation of our assumptions and serve as a complete closure on project's scope.
*When in doubt:
**This is mandatory.
*Notes:
*References:

----
Back to [[Business Analysis]]
----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: Guidelines for Technical Proposal Production
^^@@
%/</pre>
</div>
<div title="TestTiddler" creator="YourName" modifier="AndreCarvalho" created="202103101742" modified="202103121751" changecount="2">
<pre>Test content
one change
----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="The Agile Problem" creator="YourName" modifier="YourName" created="202009171256" modified="202302070952" tags="Content" changecount="44" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com">
<pre>{{tw_ttoc{}}}

!Introduction

Agile brought a needed reality check and optimization to some practices and methodologies used in software development. Unfortunately the quality and knowledge of its proponents was not met by a large part of its current followers and evangelists. The unfortunate result is that you see a considerable retrogress in many software development practices and methods with profound consequences in the result's quality.

On the following text I'm taking Agile with a broad sense to encompass everything that is commonly done under its name. I do know that the origins of many of these things are not Agile (not even SCRUM) like the backlog that comes from Kanban and that many things done and said today, under the Agile buzzword, would never cross Agile proponent's minds but, for practical purposes, I'm referring as Agile all the practices and ideas that are, nowadays, fashionable as opposed to structured methodologies. May the respectable authors of the [[Agile Manifesto|https://agilemanifesto.org/]] forgive me.

Agile proposes a method for user functional needs capture based on User Stories and, indeed, they are a good approach to iteratively capture the gap between the current user status and his desired one. In rapidly changing environments like e-commerce or "social" applications or even in product first stages development, experimentalism and "fail-fast" are necessary and specification detail may be a waste of effort and imply an unsatisfactory time-to-market. Also on evolutive maintenance, over a known and solid platform, this gap oriented specification is, in many cases, the most effective and efficient approach.

Agile also proposes a team management methodology that advocates team autonomy and sufficiency and this is a much welcome change in that it empowers team's people and potentiates much more realistic, and committed, plans and deadlines. It also optimizes change reaction effort with its self-contained sprints and dynamic backlog (if compared with the worst case, and hypothetical, full project re-planning on other scenarios).

Agile also proposes an estimation approach based on story points and evolving team's average velocity that provides much more objective results than many other methods. The planning approach based on small, self-contained sprints and the maintenance of a backlog presents clear advantages on the proper scenarios.

But, as any other methodologies, Agile has an exploration scenario, the ''Agile Problem'' is that, nowadays, most of its evangelists have a &lt;&lt;quote 'silver bullet' 'No Silver Bullet'&gt;&gt; view of it and force it into any scenario and software development task, many times with "out of thin air", inefficient, immature and obsolete approaches that produce "pretend to be" solutions that greatly affect the software solution's quality and the team's continuous growing and comfort.

The problem (using Agile where it is not supposed to be used) is exacerbated by the fact that, in many projects and teams, it is overcome with technical leadership performing all the tasks that Agile do not cover in an "off-the-record" fashion without any guidance, planned effort, method and peer support. 
This scenario, with all the lone responsibility it produces, tends to rapid burn-out of technical leadership that soon resorts to self-preservation mode just doing and using what "everybody does and uses", being this, typically, purely determined by volatile commercial strategies of the big players on the domain, and fall-back to the tired (and false) excuse of "the Customer does not know what he wants". 
The sum-up is that, in many agile projects, the agile management methodology (with its myths and misconceptions around a handful of very basic principles) just obfuscates Software Engineering practices and techniques without providing any other real alternative.

Another aspect of the Agile vs. the other methodologies discussion, nowadays, is that Agile advocates are, typically, demagogic by presenting a best-case scenario for Agile vs. a worst-case, purely hypothetical and ultimately stupid, scenario for other methodologies. This line of discussion is effective for non technical deciders and inexperienced practitioners but is totally damaging for any serious and informed discussion.  

As a starting point for this discussion it is necessary to (re)explore the concept of &lt;&lt;quote 'essential complexity' 'Essence of software'&gt;&gt; characteristic of software systems or, at least, of interesting and relevant software systems. It is also necessary to establish that ''usability'' has very different meanings for a web site to sell shoes than what it has for a professional software tool. It must also be noticed that "minimum viable product" is a concept (equivalent to prototype or proof-of-concept) that has its exploration context but that no professional wants his daily tools to be "minimum" or just an experiment.  And, of course, it is necessary to expose the Agile's fallacious arguments around [[BDUF (Big Design Up Front)|https://en.wikipedia.org/wiki/Big_Design_Up_Front]].

!!Complexity
Software systems are &lt;&lt;quote 'inherently complex' 'Frederick P. Brooks on Complexity'&gt;&gt;.
Since [[Rene Descartes |http://www.marxists.org/reference/archive/descartes/1635/discourse-method.htm]] that we know that complex problems shall be attacked with method and all military know that &lt;&lt;quote 'plans are useless but planning is essential' 'Dwight D. Eisenhower on plans'&gt;&gt;.
Complex software systems need to be specified in a structured way to be developed with the bare minimum of quality. Most agile instantiations completely hide this truth and inexperienced practitioners are convinced that they can tackle a complex professional software system the same way they do some "more of the same" selling websites. That's simply not true.

!!Usability and users
&lt;&lt;quote 'No, the user is no longer the king.' 'Tom DeMarco on the Software Analyst role'&gt;&gt; Most professional users have no clue on what are the possibilities that a software system can bring to their work, very few of them will have a "system view" and even fewer will consider the system and its data potential in the medium term. Almost none of them will understand the technical trade-offs implied in their software choices. I'm not insulting the users: its not their job to design and build software. Its ours.

Any professional software tool has a learning curve. That is the counterpart of its power and potential. To demand that a software tool for complex tasks be "intuitive" is just plain stupid and, most of the times, originates a solution that is "funny" in the first couple of days and a limiting pain for the next five or six years of its usage.

!!MVP approaches
Minimum Viable Product approaches are essential in many contexts and an aberration on other. If You are trying to build a new product or service, of course that You want to prototype, explore and "fail fast". Nobody wants to invest an year just to discover that his public is interested in something else. In these contexts You want to quickly produce "something" that can be used to confirm or infirm Your expectations on what are the needs Your product will fulfill and what is the strength of those needs (Your potential market). You want to do it as fast as possible and as cheap as possible. And You are prepared to throw it all away and start from scratch as soon as You have proved Your theories and have real data to work from.

On the other hand, in professional software systems, that is, systems intended to be intensively used by professionals performing their profession You may use this approach in very small and self-contained domains, to test a new idea to a specific challenge, to evaluate adhesion from the users and other experimental endeavors. But, if You are addressing a full system, don't be naive, You will not, nowadays, be building a first generation system, You will be building a sixth or seventh generation system upon which there should be decades of knowledge, lessons learnt and evolution, in one word, experience. You will be, much more, integrating proved solutions than inventing radically new ones, Your best contribution will be in discovering and incrementally improve the existent not on devising a completely new solution out of thin air. In this context, analysis, structured analysis, is essential.

!!BDUF (Big Design Up Front) fallacy
Of course that nobody (minimally intelligent) ever thought of specifying a software system to the ultimate detail (except in critical scenarios where failure is not acceptable). The analogy is to produce a map at 1:1 scale ([[Jorge Luís Borges tale|https://en.wikipedia.org/wiki/On_Exactitude_in_Science]] comes to mind).
Of course, also, that nobody wants to produce tons of documents with information scattered among them and painfully (and ineffectively) tied together with document hierarchies and manually constructed Excel traceability matrices. Also it is clear to everybody (with minimum experience) that specification is not a "one-shot" endeavor but a continuous task along entire project (and even after it) as [[Rational Unified Process (RUP)|https://en.wikipedia.org/wiki/Rational_Unified_Process]] taught us many years ago.

To advocate that line of business systems do not need a structured specification is just foolish, to say that structured specification can not be done without spending prohibitive effort and time is ignorant and reveals a very obsolete view of it.

On the first point it is nowadays clear that many "Agile built" information systems of the last half dozen years reached their unmaintainable state and can no longer be evolved, but, worst, the knowledge that built them was not persisted and maintained and fade away (and no, reverse engineering of the code is not an answer as it will only, in the best case, give You knowledge of one of the possible solutions and tell You nothing about the problem to solve). 
Their owners face the "start from scratch" dilemma and, usually, incur in a fatal mistake : they start defining a full line of business system with "User Stories" (and, worst, Jira tickets). These "User Stories" are unstructured, out of context, incomplete, redundant, unmanageable, untraceable and ambiguous, they are also, and thus, not fully validateable by its stakeholders. And, as unmanageable, they also tend to be a "never ending story"...

On the second point, the effort and time required for structured analysis, the fact is that it has already been done in projects that previously failed, miserably, using the Agile approach, and done, roughly, in half the time they previously took to produce mainly garbage and confusion (and it is my belief that the Agile "products" produced, in fact, doubled the Structured Analysis necessary effort...). 
Of course that, if You want to do anything on Software Engineering, You need to study to know how to do it and You need to take advantage of every tool (CASE tools for instance) and method (model centric specification for instance) at Your disposal to be successful (effective and efficient). Of course, also, that naive "we see as we go" and "I'll figure that out alone" approaches are doomed to failure, Software Engineering deals with lots of Essential Complexity &lt;&lt;BibRef "Brooks 1986"&gt;&gt; after all. 

!After Agile
It is my belief that we are entering an "after Agile" era. Not only its most respected authors start condemning the abuses made to it, but reality is starting to show the medium-term (and, sometimes, short-term) costs it implies. And is showing it in an undeniable and powerful way!
Notice that I'm not saying that Agile principles are wrong, they are not!
I'm just acknowledging that, as an Engineering Methodology, Agile does not fulfill the main goals as it does nothing to prevent, and even creates conditions to promote, practitioners to produce inferior, simplistic results, instead of framing their behavior in a continuous improvement path. On another perspective, and against Agile principles, Agile, as it is practiced nowadays, blindly impedes the practitioners from using proved, seasoned and proper techniques and tools to successfully (effectively and efficiently) tackle the challenges of a software project.
Many will say that Agile well done has not these problems. And they will be right! 
But the fact is that methodologies are not made, nor they are that useful, for exceptional practitioners, they are for common, average practitioners and are intended to improve our performance and help us achieve better results.

A methodology that is (ab)used as justification for a "//burn the books//" and "//everything before us is wrong//" kind of attitude is damaging and should be abandoned as soon as possible (we will revisit it in a decade or two, don't worry...).

----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
/%
@@color:#c4d6ed; ^^
Description: A discussion on Agile methodologies
^^@@
%/</pre>
</div>
<div title="The Methodological Problem" creator="YourName" modifier="YourName" created="202105201329" modified="202105201701" tags="Content TODO" server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" changecount="14">
<pre>Aside from well know challenges in Software Development, Software Engineering faces, nowadays, a very important challenge from the attitude many young, and not so young, practitioners have towards knowledge and methodologies.

Nobody doubts that Software Engineering needs methods to address the &lt;&lt;quote 'complex problems' 'Frederick P. Brooks on Complexity'&gt;&gt; it faces. During much of its history this was understood as a laborious and permanent effort of knowing and acquiring experience with as much methodologies as possible and then carefully distil the most effective and efficient practices of each one to assemble into a personal method where one could be as effective and efficient as possible. The notion that there were &lt;&lt;quote '"no silver bullets"' 'No Silver Bullet'&gt;&gt; was common and the patience to slowly and laboriously progress up to excellence was understood and accepted. Those who had done that path were regarded as having "experience".

Nowadays it seems that many practitioners expect to find a simple and complete recipe to develop software. There is no such thing! If you are not willing to traverse the hard path to acquire "experience" You will never be much more than a coder and, in the worst case, a code typist. There is nothing wrong with that but just don't expect to be able to handle any real professional software development project, You will do as told in small, self-contained, tasks defined by someone else. Recent methodologies are presented, or at least largely perceived, as "one size fits all" &lt;&lt;quote '"silver bullets"' 'No Silver Bullet'&gt;&gt; that "can also" be used in anything and any context. Ahh! And they are simple too... if they are not any aspiring practitioner, and even some seasoned ones, just drop them as &lt;&lt;quote '"too complex"' 'Henry L. Mencken on simplicity'&gt;&gt;. And, to my astonishment, this is regarded as "normal". Proficiency without effort, excellence without study, total ignorance of the scientific knowledge of the area.

!!Art and Engineering

[[The Art of Computer Programming|https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming]] - Donald Knuth, 1968
[[The Art, Science, and Engineering of Software Development|https://stevemcconnell.com/articles/the-art-science-and-engineering-of-software-development/]] - Steve ~McConnell, 1998

... TODO: ...
 
----
/%
@@color:#c4d6ed; ^^
Description: A broad discussion on some methodological trends nowadays.
^^@@
%/</pre>
</div>
<div tags="systemConfig" modifier="TiddlyHost" title="ThostUploadPlugin"><pre>/***
|''Name:''         |ThostUploadPlugin |
|''Description:''  |Support saving to Tiddlyhost.com |
|''Version:''      |1.0.0 |
|''Date:''         |March 06, 2021 |
|''Source:''       |https://github.com/simonbaird/tiddlyhost/tree/main/rails/tw_content/plugins |
|''Author:''       |BidiX, Simon Baird |
|''License:''      |BSD open source license |
|''~CoreVersion:'' |2.9.2 |
***/
//{{{

version.extensions.ThostUploadPlugin = {
  major: 1, minor: 0, revision: 0,
  date: new Date("Mar 06, 2021"),
  source: 'https://github.com/simonbaird/tiddlyhost/rails/tw_content/plugins',
  author: 'BidiX, Simon Baird',
  coreVersion: '2.9.2'
};

//
// Environment
//

if (!window.bidix) window.bidix = {};
bidix.debugMode = false;

//
// Upload Macro
//

config.macros.thostUpload = {
  handler: function(place,macroName,params) {
    createTiddlyButton(place, "save to tiddlyhost",
      "save this TiddlyWiki to a site on Tiddlyhost.com",
      this.action, null, null, this.accessKey);
  },

  action: function(params) {
    var siteName = config.options.txtThostSiteName.trim();
    if (!siteName) {
      alert("Tiddlyhost site name is missing!");
      clearMessage();
    }
    else {
      bidix.thostUpload.uploadChanges('https://' + siteName + '.tiddlyhost.com');
    }
    return false;
  }
};

//
// Upload functions
//

if (!bidix.thostUpload) bidix.thostUpload = {};

if (!bidix.thostUpload.messages) bidix.thostUpload.messages = {
  invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
  mainSaved: "Main TiddlyWiki file uploaded",
  mainFailed: "Failed to upload main TiddlyWiki file. Your changes have not been saved",
  loadOriginalHttpPostError: "Can't get original file",
  aboutToSaveOnHttpPost: 'About to upload on %0 ...',
  storePhpNotFound: "The store script '%0' was not found."
};

bidix.thostUpload.uploadChanges = function(storeUrl) {
  var callback = function(status, uploadParams, original, url, xhr) {
    if (!status) {
      displayMessage(bidix.thostUpload.messages.loadOriginalHttpPostError);
      return;
    }
    if (bidix.debugMode) {
      alert(original.substr(0,500)+"\n...");
    }

    var posDiv = locateStoreArea(original);
    if ((posDiv[0] == -1) || (posDiv[1] == -1)) {
      alert(config.messages.invalidFileError.format([localPath]));
      return;
    }

    bidix.thostUpload.uploadMain(uploadParams, original, posDiv);
  };

  clearMessage();

  // get original
  var uploadParams = [storeUrl];
  var originalPath = document.location.toString();
  var dest = 'index.html';
  displayMessage(bidix.thostUpload.messages.aboutToSaveOnHttpPost.format([dest]));

  if (bidix.debugMode) {
    alert("about to execute Http - GET on "+originalPath);
  }

  var r = doHttp("GET", originalPath, null, null, null, null, callback, uploadParams, null);

  if (typeof r == "string") {
    displayMessage(r);
  }

  return r;
};

bidix.thostUpload.uploadMain = function(uploadParams, original, posDiv) {
  var callback = function(status, params, responseText, url, xhr) {
    if (status) {
      displayMessage(bidix.thostUpload.messages.mainSaved);
      store.setDirty(false);
    }
    else {
      alert(bidix.thostUpload.messages.mainFailed);
      displayMessage(bidix.thostUpload.messages.mainFailed);
    }
  };

  var revised = bidix.thostUpload.updateOriginal(original, posDiv);
  bidix.thostUpload.httpUpload(uploadParams, revised, callback, uploadParams);
};

bidix.thostUpload.httpUpload = function(uploadParams, data, callback, params) {
  var localCallback = function(status, params, responseText, url, xhr) {
    if (xhr.status == 404) {
      alert(bidix.thostUpload.messages.storePhpNotFound.format([url]));
    }

    var saveNotOk = responseText.charAt(0) != '0';

    if (bidix.debugMode || saveNotOk) {
      alert(responseText);
    }

    if (saveNotOk) {
      status = null;
    }

    callback(status, params, responseText, url, xhr);
  };

  // do httpUpload
  var boundary = "---------------------------"+"AaB03x";
  var uploadFormName = "UploadPlugin";
  // compose headers data
  var sheader = "";
  sheader += "--" + boundary + "\r\nContent-disposition: form-data; name=\"";
  sheader += uploadFormName +"\"\r\n\r\n";
  sheader += "backupDir=x" +
        ";user=x" +
        ";password=x" +
        ";uploaddir=x";
  if (bidix.debugMode) {
    sheader += ";debug=1";
  }
  sheader += ";;\r\n";
  sheader += "\r\n" + "--" + boundary + "\r\n";
  sheader += "Content-disposition: form-data; name=\"userfile\"; filename=\"index.html\"\r\n";
  sheader += "Content-Type: text/html;charset=UTF-8" + "\r\n";
  sheader += "Content-Length: " + data.length + "\r\n\r\n";
  // compose trailer data
  var strailer = "";
  strailer = "\r\n--" + boundary + "--\r\n";
  data = sheader + data + strailer;
  if (bidix.debugMode) {
    alert("about to execute Http - POST on " + uploadParams[0]+ "\n with \n" + data.substr(0,500) + " ... ");
  }
  var r = doHttp("POST", uploadParams[0], data,
    "multipart/form-data; ;charset=UTF-8; boundary=" + boundary, 'x','x', localCallback, params, null);

  if (typeof r == "string") {
    displayMessage(r);
  }

  return r;
};

// same as Saving's updateOriginal but without convertUnicodeToUTF8 calls
bidix.thostUpload.updateOriginal = function(original, posDiv) {
  if (!posDiv) {
    posDiv = locateStoreArea(original);
  }
  if ((posDiv[0] == -1) || (posDiv[1] == -1)) {
    alert(config.messages.invalidFileError.format([localPath]));
    return;
  }

  var revised = original.substr(0, posDiv[0] + startSaveArea.length) + "\n" +
    store.allTiddlersAsHtml() + "\n" +
    original.substr(posDiv[1]);

  var newSiteTitle = getPageTitle().htmlEncode();
  revised = revised.replaceChunk("&lt;title"+"&gt;","&lt;/title"+"&gt;"," " + newSiteTitle + " ");
  revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
  revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
  revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
  revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
  return revised;
};

//
// Site config
//

bidix.initOption = function(name,value) {
  if (!config.options[name]) {
    config.options[name] = value;
  }
};

merge(config.optionsDesc, {
  txtThostSiteName: "Site name for uploads to Tiddlyhost.com",
});

bidix.initOption('txtThostSiteName','acarvalho');

//
// Tiddlyhost stuff
//

// So you can see edit controls via http
config.options.chkHttpReadOnly = false;
window.readOnly = false;
window.showBackstage = true;

// Add 'upload to tiddlyhost' button
with (config.shadowTiddlers) {
  SideBarOptions = SideBarOptions.replace(/(&lt;&lt;saveChanges&gt;&gt;)/,"$1&lt;&lt;thostUpload&gt;&gt;");
}

//}}}
</pre></div>
<div title="TiddlerToCPlugin" modifier="acarvalho" created="201206221130" modified="201304221421" tags="systemConfig" server.title="TiddlerToCPlugin" server.page.revision="201304221421" server.etag='"acarvalho_public/TiddlerToCPlugin/1192924:e91be972182b0b12bd37d263797c5ac0b7922ace"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="65443038af3eb740315cc6aead161a31ec702a5b">
<pre>/***
|Name|TiddlerToCPlugin|
|Description|Tiddler Table of Contents generator|
|Author|Julien Coloos|
|Version|1.1.0|
|Date|2011-06-12|
|Status|stable|
|Source|http://julien.coloos.free.fr/TiddlyWiki-dev/#TiddlerToCPlugin|
|License|[img[CC BY-SA 3.0|http://i.creativecommons.org/l/by-sa/3.0/80x15.png][http://creativecommons.org/licenses/by-sa/3.0/]]|
|CoreVersion|2.6|
|Documentation|http://julien.coloos.free.fr/TiddlyWiki-dev/#TiddlerToCPlugin|

{{tw_ttoc{}}}
!Description
This plugin adds the {{{TiddlerToC}}} macro to generate a ~ToC inside a tiddler.
The generated ~ToC entries list the visible headings found in the tidder, each entry being preceded by a number representing its level and index (e.g.: //1.2.1//). Those numbers link to the corresponding heading.
Found headings are also altered to display a link back to the ~ToC.

The ~ToC does not reference tiddlers embedded using the {{{tiddler}}}, {{{slider}}} or {{{tabs}}} macro.

The ~ToC is either generated at a given target, or at the beginning of the place it was dropped in. If there are less headings than a given minimum (default being 2), the ~ToC is not displayed.
The ~ToC title can be clicked to hide/display the ~ToC content.


!Notes
The {{{TiddlerToC}}} macro searches for the HTML headings ({{{h1}}} to {{{h6}}} tags) in the place where it is inserted. Each heading is then converted to a ~ToC entry, preserving inner text format.
The macro thus has to be inserted at the end of the tiddler: content has been generated and the ~ToC can be populated.


!Usage
The {{{TiddlerToC}}} macro is intended to be inserted at the end of a tiddler.

By default the ~ToC is generated at the beginning of the place the macro was inserted in.
However a target can be used: if the place contains an element which class is {{{tw_ttoc}}}, this element will be replaced by the ~ToC.
Such an element can be generated by dropping one of the following inside the tiddler:
* using a ~TiddlyWiki macro
{{{
{{tw_ttoc{}}}
}}}
* inserting an explicit HTML tag; the advantage here is that attributes can be specified
{{{
&lt;html&gt;&lt;div class="tw_ttoc" min-entries="3"/&gt;&lt;/html&gt;
}}}


The macro and/or target element can also be used in [[ViewTemplate]] to be applied to all tiddlers:
{{{
...
&lt;!-- Wikified tiddler content --&gt;
&lt;div class='viewer' macro='view text wikified'&gt;
	&lt;!-- Insert ToC right before tiddler content --&gt;
	&lt;div class='tw_ttoc'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- ToC generator, to use at the end of the tiddler --&gt;
&lt;div macro='TiddlerToC min-entries:3'&gt;&lt;/div&gt;
}}}

!!Parameters
The following parameters are available:
* {{{min-entries}}} (optional)
** minimum number of entries needed to display the ~ToC
** can be specified as macro parameter, and can be overridden in the target tag (needs explicit HTML tag; see before)
** default value is {{{2}}}

!!Examples
Without target:
{{{
Tiddler content.
...

&lt;&lt;TiddlerToC min-entries:3&gt;&gt;
}}}

With a target:
{{{
Beginning of the tiddler.
...

Where to generate the ToC:
{{tw_ttoc{}}}
Or, with a minimum number of entries specified:
&lt;html&gt;&lt;div class="tw_ttoc" min-entries="3"/&gt;&lt;/html&gt;

Tiddler continues ...

&lt;&lt;TiddlerToC min-entries:3&gt;&gt;
}}}


!Styling
~ToC content uses some classes which style can be overriden using CSS. Those classes are:
* {{{tw_ttoc}}}: ~ToC
* {{{tw_ttoc_title}}}: title ({{{Table of Contents}}})
* {{{tw_ttoc_level}}}: sub-level entry indentation
* {{{tw_ttoc_entry}}}: entry
* {{{tw_ttoc_id}}}: entry number
* {{{tw_ttoc_top}}}: heading link back to the ~ToC

Default style can be found in the code below, and can be overridden in the [[StyleSheet]] tiddler.


!Revision History
!!v1.1.0 (2011-06-12)
Changes:
* by default, ~ToC is now displayed only if it contains more than one entry

Enhancements:
* added a macro parameter to give the minimum number of entries needed to display the ~ToC
** the parameter can be overridden in the ~ToC target

Fixes:
* do not list headings that are not //displayed//

!!v1.0.1 (2011-05-29)
Changes:
* if there is none, adds a {{{br}}} tag after the ~ToC

!!v1.0.0 (2011-05-28)
Initial release.


!Code
***/
//{{{
if (!config.macros.TiddlerToC) {(function($) {

version.extensions.TiddlerToCPlugin = {major: 1, minor: 1, revision: 0, date: new Date(2011, 6, 12)};

var hTag = /^h([1-6])$/i;

setStylesheet(".tw_ttoc {background-color: #F8F8F8; padding: 10px; border: 1px #CCCCCC solid;} .tw_ttoc_title {text-align:center; font-weight: bold; margin: 5px 0px 20px 0px;} .tw_ttoc_level {padding-left: 20px;} .tw_ttoc_id {margin-right: 6px;} .tw_ttoc_top {float: right; font-size: 0.5em;}", "TiddlerToCPlugin");

function cloneNodeWithEvents(node) {
	var clone = node.cloneNode(true);
	var n1 = [node].concat(Array.prototype.slice.call(node.getElementsByTagName('*')));
	var n2 = [clone].concat(Array.prototype.slice.call(clone.getElementsByTagName('*')));

	for (var i=0 ; i&lt;n1.length ; i++) {
		for (var j in n1[i]) {
			if (j.substr(0,2) != "on") continue;
			n2[i][j] = n1[i][j];
		}
	}

	return clone;
}

var pl = config.macros.TiddlerToC = {
handler: function(place, macroName, params, wikifier, paramString, tiddler) {
	var namedParams = paramString.parseParams(null, null, true), paramMinEntries = getParam(namedParams, "min-entries"), minEntries = paramMinEntries ? parseInt(paramMinEntries) : 2;

	if ($(place).hasClass("viewer") || $(place).parents(".viewer").size()) pl.generate(place, minEntries);
	else {
		/* the macro is not used inside a tiddler content but probably in a template */
		var t = story.findContainingTiddler(place);
		if (!t) return;
		pl.generate(t, minEntries);
	}
},
getElements: function(place) {
	var els = $();

	$(place).children().each(function(i, n) {
		/* exclude embedded tiddlers */
		if ($(n).attr("tiddler") || $(n).hasClass("sliderPanel") || $(n).hasClass("tabsetWrapper")) return;
		/* include headings and ToC target */
		if (hTag.test(n.tagName) || $(n).is(".tw_ttoc")) els = els.add(n);
		/* recurse */
		els = els.add(pl.getElements(n));
	});

	return els;
},
generate: function(place, minEntries) {
	var els = pl.getElements(place);

	/* get ToC target, or insert it as first element */
	var toc = els.filter(".tw_ttoc");
	if (toc.size()) {
		if (toc.size() &gt; 1) {
			/* More than one target; happens when using ViewTemplate while
			 * tiddler already contains a ToC target. In any case, it is best
			 * to keep the last one and remove others.
			 */
			toc.not(toc.last()).remove();
			toc = toc.last();
		}
		/* check the ToC was not already generated */
		if (toc[0].toc &amp;&amp; toc[0].toc.generated) return;
		/* check if the minimum number of entries is overridden */
		if (toc.attr("min-entries")) minEntries = parseInt(toc.attr("min-entries"));
		/* rebuild target tag */
		toc = toc.empty().wrapInner("&lt;div class='tw_ttoc'/&gt;").children("div").unwrap();
	}
	else toc = $("&lt;div class='tw_ttoc'/&gt;").prependTo(place);

	var hLevelCurrent = 0, hLevel;
	var tocInner = $("&lt;div/&gt;"), listCurrent = tocInner[0], listId = "1";
	toc.hide().append($("&lt;div class='tw_ttoc_title'&gt;&lt;a href='javascript:;'&gt;Table of Contents&lt;/a&gt;&lt;/div&gt;"), tocInner);
	$(".tw_ttoc_title a", toc).click(function() {
		if (tocInner.is(":visible")) tocInner.hide("fast");
		else tocInner.show("fast");
	});

	var headings = $();
	els.each(function(i, c) {
		/* check we got a visible heading */
		var match = hTag.exec(c.tagName);
		if (!match || !$(c).is(":visible")) return;
		hLevel = parseInt(match[1]);

		/* check the heading level */
		if (!hLevelCurrent) hLevelCurrent = hLevel;
		if (hLevel &lt; hLevelCurrent) {
			/* have to go up */
			while ((hLevel &lt;= --hLevelCurrent) &amp;&amp; listCurrent.parentNode) {
				listCurrent = listCurrent.parentNode.parentNode;
				ids = listId.split(".");
				ids.pop();
				listId = ids.join(".");
			}
		}
		else if (hLevel &gt; hLevelCurrent) {
			/* have to go down */
			while (hLevel &gt;= ++hLevelCurrent) {
				$(listCurrent.lastChild).append(listCurrent = $("&lt;div class='tw_ttoc_level'/&gt;")[0]);
				ids = listId.split(".");
				ids.push(1);
				listId = ids.join(".");
			}
		}
		/* determine this heading index */
		ids = listId.split(".");
		ids[ids.length-1] = $(listCurrent).children("div.tw_ttoc_entry").size() + 1;
		listId = ids.join(".");

		/* clone the heading content to insert it in the ToC */
		$(cloneNodeWithEvents(c)).wrapInner("&lt;div class='tw_ttoc_entry'/&gt;").children("div").unwrap().prepend($("&lt;a class='tw_ttoc_id' href='javascript:;'/&gt;").html(listId).click({target: c}, function(ev){window.scrollTo(0,findPosY(ev.data.target))})).appendTo(listCurrent);

		headings = headings.add(c);

		hLevelCurrent = hLevel;
	});
	toc[0].toc = {generated: true};

	if (headings.size() &gt;= minEntries) {
		/* display ToC */
		/* Note: jQuery 'next' does not take into account text nodes */
		var sibling = toc.show()[0].nextSibling;
		if (sibling &amp;&amp; (sibling.nodeName != "BR")) toc.after("&lt;br/&gt;");

		/* insert a 'ToC' link in the headings */
		headings.append($("&lt;span class='tw_ttoc_top'&gt;&lt;a href='javascript:;' title='Go to Table of Contents'&gt;[ToC]&lt;/a&gt;&lt;/span&gt;")).find(".tw_ttoc_top a").click(function() {window.scrollTo(0,findPosY(toc[0]))});
	}
}
};

})(jQuery);}
//}}}
/***
&lt;&lt;TiddlerToC&gt;&gt;
***/
</pre>
</div>
<div title="TiddlersBarPluginMP" modifier="acarvalho" created="201304241626" modified="201306271505" tags="System systemConfig" server.title="TiddlersBarPluginMP" server.page.revision="201306271505" server.etag='"acarvalho_public/TiddlersBarPluginMP/1284307:3d62164bcc2d457b1d6c7ecbb35c3dff24d324f7"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="82bce3d7c0d7ae9805b35ff52d8e956728f439fb">
<pre>/***
|''Name:''|TiddlersBarPluginMP|
|''Description:''|A bar to switch between tiddlers through tabs (like browser tabs bar).|
|''Version:''|1.2.5|
|''Date:''|Jan 18,2008|
|''Source:''|http://visualtw.ouvaton.org/VisualTW.html|
|''Author:''|Pascal Collin|
|''License:''|[[BSD open source license|License]]|
|''~CoreVersion:''|2.1.0|
|''Browser:''|Firefox 2.0; InternetExplorer 6.0, others|
!Attention
This plugin contains some changings, at the end of the plugin marked with !!MP!!

!Demos
On [[homepage|http://visualtw.ouvaton.org/VisualTW.html]], open several tiddlers to use the tabs bar.
!Installation
#import this tiddler from [[homepage|http://visualtw.ouvaton.org/VisualTW.html]] (tagged as systemConfig)
#save and reload
#''if you're using a custom [[PageTemplate]]'', add {{{&lt;div id='tiddlersBar' refresh='none' ondblclick='config.macros.tiddlersBar.onTiddlersBarAction(event)'&gt;&lt;/div&gt;}}} before {{{&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;}}}
#optionally, adjust StyleSheetTiddlersBar
!Tips
*Doubleclick on the tiddlers bar (where there is no tab) create a new tiddler.
*Tabs include a button to close {{{x}}} or save {{{!}}} their tiddler.
*By default, click on the current tab close all others tiddlers.
!Configuration options 
&lt;&lt;option chkDisableTabsBar&gt;&gt; Disable the tabs bar (to print, by example).
&lt;&lt;option chkHideTabsBarWhenSingleTab &gt;&gt; Automatically hide the tabs bar when only one tiddler is displayed. 
&lt;&lt;option txtSelectedTiddlerTabButton&gt;&gt; ''selected'' tab command button.
&lt;&lt;option txtPreviousTabKey&gt;&gt; previous tab access key.
&lt;&lt;option txtNextTabKey&gt;&gt; next tab access key.
!Code
***/
//{{{
config.options.chkEnableTabsBar = config.options.chkEnableTabsBar ? config.options.chkEnableTabsBar : true;
config.options.chkHideTabsBarWhenSingleTab  = config.options.chkHideTabsBarWhenSingleTab  ? config.options.chkHideTabsBarWhenSingleTab  : true;
config.options.txtSelectedTiddlerTabButton = config.options.txtSelectedTiddlerTabButton ? config.options.txtSelectedTiddlerTabButton : "closeOthers";
config.options.txtPreviousTabKey = config.options.txtPreviousTabKey ? config.options.txtPreviousTabKey : "";
config.options.txtNextTabKey = config.options.txtNextTabKey ? config.options.txtNextTabKey : "";
config.macros.tiddlersBar = {
	tooltip : "see ",
	tooltipClose : "click here to close this tab",
	tooltipSave : "click here to save this tab",
	promptRename : "Enter tiddler new name",
	currentTiddler : "",
	previousState : false,
	previousKey : config.options.txtPreviousTabKey,
	nextKey : config.options.txtNextTabKey,	
	tabsAnimationSource : null, //use document.getElementById("tiddlerDisplay") if you need animation on tab switching.
	handler: function(place,macroName,params) {
		var previous = null;
		if (config.macros.tiddlersBar.isShown())
			story.forEachTiddler(function(title,e){
				if (title==config.macros.tiddlersBar.currentTiddler){
					var d = createTiddlyElement(null,"span",null,"tab tabSelected");
					config.macros.tiddlersBar.createActiveTabButton(d,title);
					if (previous &amp;&amp; config.macros.tiddlersBar.previousKey) previous.setAttribute("accessKey",config.macros.tiddlersBar.nextKey);
					previous = "active";
				}
				else {
					var d = createTiddlyElement(place,"span",null,"tab tabUnselected");
					var btn = createTiddlyButton(d,title,config.macros.tiddlersBar.tooltip + title,config.macros.tiddlersBar.onSelectTab);
					btn.setAttribute("tiddler", title);
					if (previous=="active" &amp;&amp; config.macros.tiddlersBar.nextKey) btn.setAttribute("accessKey",config.macros.tiddlersBar.previousKey);
					previous=btn;
				}
				var isDirty =story.isDirty(title);
				var c = createTiddlyButton(d,isDirty ?"!":"x",isDirty?config.macros.tiddlersBar.tooltipSave:config.macros.tiddlersBar.tooltipClose, isDirty ? config.macros.tiddlersBar.onTabSave : config.macros.tiddlersBar.onTabClose,"tabButton");
				c.setAttribute("tiddler", title);
				if (place.childNodes) {
					place.insertBefore(document.createTextNode(" "),place.firstChild); // to allow break line here when many tiddlers are open
					place.insertBefore(d,place.firstChild); 
				}
				else place.appendChild(d);
			})
	}, 
	refresh: function(place,params){
		removeChildren(place);
		config.macros.tiddlersBar.handler(place,"tiddlersBar",params);
		if (config.macros.tiddlersBar.previousState!=config.macros.tiddlersBar.isShown()) {
			story.refreshAllTiddlers();
			if (config.macros.tiddlersBar.previousState) story.forEachTiddler(function(t,e){e.style.display="";});
			config.macros.tiddlersBar.previousState = !config.macros.tiddlersBar.previousState;
		}
	},
	isShown : function(){
		if (! config.options.chkEnableTabsBar) return false;
		if (!config.options.chkHideTabsBarWhenSingleTab) return true;
		var cpt=0;
		story.forEachTiddler(function(){cpt++});
		return (cpt&gt;1);
	},
	selectNextTab : function(){  //used when the current tab is closed (to select another tab)
		var previous="";
		story.forEachTiddler(function(title){
			if (!config.macros.tiddlersBar.currentTiddler) {
				story.displayTiddler(null,title);
				return;
			}
			if (title==config.macros.tiddlersBar.currentTiddler) {
				if (previous) {
					story.displayTiddler(null,previous);
					return;
				}
				else config.macros.tiddlersBar.currentTiddler=""; 	// so next tab will be selected
			}
			else previous=title;
			});		
	},
	onSelectTab : function(e){
		var t = this.getAttribute("tiddler");
		if (t) story.displayTiddler(null,t);
		return false;
	},
	onTabClose : function(e){
		var t = this.getAttribute("tiddler");
		if (t) {
			if(story.hasChanges(t) &amp;&amp; !readOnly) {
				if(!confirm(config.commands.cancelTiddler.warning.format([t])))
				return false;
			}
			story.closeTiddler(t);
		}
		return false;
	},
	onTabSave : function(e) {
		var t = this.getAttribute("tiddler");
		if (!e) e=window.event;
		if (t) config.commands.saveTiddler.handler(e,null,t);
		return false;
	},
	onSelectedTabButtonClick : function(event,src,title) {
		var t = this.getAttribute("tiddler");
		if (!event) event=window.event;
		if (t &amp;&amp; config.options.txtSelectedTiddlerTabButton &amp;&amp; config.commands[config.options.txtSelectedTiddlerTabButton])
			config.commands[config.options.txtSelectedTiddlerTabButton].handler(event, src, t);
		return false;
	},
	onTiddlersBarAction: function(event) {
		var source = event.target ? event.target.id : event.srcElement.id; // FF uses target and IE uses srcElement;
		if (source=="tiddlersBar") story.displayTiddler(null,'New Tiddler',DEFAULT_EDIT_TEMPLATE,false,null,null);
	},
	createActiveTabButton : function(place,title) {
		if (config.options.txtSelectedTiddlerTabButton &amp;&amp; config.commands[config.options.txtSelectedTiddlerTabButton]) {
			var btn = createTiddlyButton(place, title, config.commands[config.options.txtSelectedTiddlerTabButton].tooltip ,config.macros.tiddlersBar.onSelectedTabButtonClick);
			btn.setAttribute("tiddler", title);
		}
		else
			createTiddlyText(place,title);
	}
}

story.coreCloseTiddler = story.coreCloseTiddler? story.coreCloseTiddler : story.closeTiddler;
story.coreDisplayTiddler = story.coreDisplayTiddler ? story.coreDisplayTiddler : story.displayTiddler;

story.closeTiddler = function(title,animate,unused) {
	if (title==config.macros.tiddlersBar.currentTiddler)
		config.macros.tiddlersBar.selectNextTab();
	story.coreCloseTiddler(title,false,unused); //disable animation to get it closed before calling tiddlersBar.refresh
	var e=document.getElementById("tiddlersBar");
	if (e) config.macros.tiddlersBar.refresh(e,null);
}

story.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle){
	story.coreDisplayTiddler(config.macros.tiddlersBar.tabsAnimationSource,tiddler,template,animate,unused,customFields,toggle);
	var title = (tiddler instanceof Tiddler)? tiddler.title : tiddler;  
	if (config.macros.tiddlersBar.isShown()) {
		story.forEachTiddler(function(t,e){
			if (t!=title) e.style.display="none";
			else e.style.display="";
		})
		config.macros.tiddlersBar.currentTiddler=title;
	}
	var e=document.getElementById("tiddlersBar");
	if (e) config.macros.tiddlersBar.refresh(e,null);
}

var coreRefreshPageTemplate = coreRefreshPageTemplate ? coreRefreshPageTemplate : refreshPageTemplate;
refreshPageTemplate = function(title) {
	coreRefreshPageTemplate(title);
	/*-- new --*/
	var e = document.getElementById("tiddlersBar");
	if (config.macros.tiddlersBar &amp;&amp; e) config.macros.tiddlersBar.refresh(e);

// !!MP!! old prevents a theme, which has no div id=tiddlersBar from loading.
//old	if (config.macros.tiddlersBar &amp;&amp; e) config.macros.tiddlersBar.refresh(document.getElementById("tiddlersBar"));
}

// !!MP!! removed this line because it causes a scroll to top if a popup opens.
// ensureVisible=function (e) {return 0}

config.shadowTiddlers.StyleSheetTiddlersBar = "/*{{{*/\n";
config.shadowTiddlers.StyleSheetTiddlersBar += "#tiddlersBar .button {border:0}\n";
config.shadowTiddlers.StyleSheetTiddlersBar += "#tiddlersBar .tab {white-space:nowrap}\n";
config.shadowTiddlers.StyleSheetTiddlersBar += "#tiddlersBar {padding : 1em 0.5em 2px 0.5em}\n";
config.shadowTiddlers.StyleSheetTiddlersBar += ".tabUnselected .tabButton, .tabSelected .tabButton {padding : 0 2px 0 2px; margin: 0 0 0 4px;}\n";
config.shadowTiddlers.StyleSheetTiddlersBar += ".tiddler, .tabContents {border:1px [[ColorPalette::TertiaryPale]] solid;}\n";
config.shadowTiddlers.StyleSheetTiddlersBar +="/*}}}*/";
store.addNotification("StyleSheetTiddlersBar", refreshStyles);

config.refreshers.none = function(){return true;}
config.shadowTiddlers.PageTemplate=config.shadowTiddlers.PageTemplate.replace(/&lt;div id='tiddlerDisplay'&gt;&lt;\/div&gt;/m,"&lt;div id='tiddlersBar' refresh='none' ondblclick='config.macros.tiddlersBar.onTiddlersBarAction(event)'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;");

//}}}</pre>
</div>
<div title="TiddlyHost" creator="AndreCarvalho" modifier="AndreCarvalho" created="202103121810" modified="202103121839" changecount="7">
<pre>This tiddler list modifications made on migrating from TiddlySpot to TiddlyHost

!Macros:
&lt;&lt;thostUpload&gt;&gt; for saving to TiddlyHost

!Plugins
*UnsavedChangesPlugin not working, does not detect save to tiddlyhost
*TspotSetupPlugin disabled as no longer used

!Shadows
-----
SideBarOptions
Removed :
&lt;&lt;saveChanges&gt;&gt;&lt;&lt;tiddler TspotSidebar&gt;&gt;
----
HoverMenu
Replaced: 
&lt;&lt;saveChanges&gt;&gt; with &lt;&lt;thostUpload&gt;&gt;
----
OptionsPanel
Removed:
&lt;&lt;tiddler TspotOptions&gt;&gt;These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser
----
UploadLog
is pointing to tiddlyspot

----
/%
@@color:#c4d6ed; ^^
Description: TiddlyHost customizations
^^@@
%/</pre>
</div>
<div title="TiddlySpotTweeks" creator="acarvalho" modifier="acarvalho" created="201610130850" modified="201610130907" changecount="2">
<pre>* Saving to web
** AdvancedOptions txtUploadStoreUrl shall not be the default (Url of the UploadService script (default: store.php)) but instead ''store.cgi''
** Upload password : copy/paste does not work, you must at least delete and enter by keyboard the last letter

TODO: convert from TiddlySpace to TiddlySpot

----
/%
@@color:#c4d6ed; ^^
Description: TODO
^^@@
%/</pre>
</div>
<div title="TiddlyWiki" modifier="YourName" created="201206161111" modified="202103231043" tags="System Tag excludeLists" server.title="TiddlyWiki" server.page.revision="201304161941" server.etag='"acarvalho_public/TiddlyWiki/1189170:17a3d145adaf5ee2a204a098977fa176edda27c5"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="d2ebb3ced9814cc659b9c8b896108bae89f0e5f3" changecount="3">
<pre>!!Sites
* [[Projectify|https://projectify.wiki/]] - Projectify brings project management to TiddlyWiki, interlinking task and knowledge management in one place. 

!!Guides
* [[TiddlyWiki Guides|http://tiddlywikiguides.org/index.php?title=TiddlyWiki_Guides]] - This is one of two collaborative documentation projects for TiddlyWiki. 

!!How To
!!! Formating images
* [[TWHelp|http://twhelp.tiddlyspot.com/#FormattingImages]]

!!Macros
|Type|Name|Code|Description|h
|Information|Version|{{{&lt;&lt;version&gt;&gt;}}}|Displays ~TiddlyWiki version|
|Information|Timeline|{{{&lt;&lt;timeline (created|modified) 5&gt;&gt;}}}|Displays last X tiddlers created or modified|

!!Creating macros
* BibRefMacro

!!Plugins
|Version|Name|Description|h
|Classic|||
|~|[[SlideShowPlugin|http://www.math.ist.utl.pt/~psoares/addons.html#SlideShowPlugin]]|Creates a slide show from any number of tiddlers.|
|~|[[LinkifyPlugin|http://linkify.tiddlyspot.com/#LinkifyPlugin]]|Automatically turns text into links, optionally using aliases.|
|TW 5|[[Projectify|https://projectify.wiki]]|Projectify is a project management app for TiddlyWiki, inspired by products like Todoist and Basecamp.|
|~|[[Relink|https://github.com/flibbles/tw5-relink]]|It expands on TW5's bulk updating to allow for any customizable fields to be updated, whether they're lists, filters, macros, or single-tiddler fields. In addition, relink parses through the text of all relevant tiddlers and updates prettyLinks, transclusions, widgets, and other syntax patterns to properly reflect the title change.|
----
See also [[TiddlyWiki Wish List|TiddlyWiki WishList]]
----
/%
@@color:#c4d6ed; ^^
Description: TiddlyWiki related issues. 
^^@@
%/</pre>
</div>
<div title="Tom DeMarco on the Software Analyst role" modifier="acarvalho" created="201306050847" modified="201306052023" tags="Content Quote" server.title="Tom DeMarco on the Software Analyst role" server.page.revision="201306052023" server.etag='"acarvalho_public/Tom%20DeMarco%20on%20the%20Software%20Analyst%20role/1248982:6b6de23b5316bbc53613b459c2814a2ca2b2a842"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c7f3278036ab59842c7e299420af5ad9d1ecd802">
<pre>"//''My final point (my loss of faith that “the customer is king”) is not just a change in my own thinking, but a sign of the maturing of IT in specific and of the business climate in general. In 1975, the typical commercial system we built was a first time automation of what had before been done manually. The customer, of course, was the only one who knew what this was all about and his/her sense of what the automated version would have to do was prime. 
Today we are building third and fourth generation automated systems, and IT personnel are often as well or better informed about how the existing system works as their business partners. More important, the meaningful successes of IT today are no longer to be achieved by simple automation or re-automation of existing process. We have moved on to a new era: Our challenge today is to combine improved information technology and market opportunity in order to create product that is radically different from what could have been achieved in a less connected world. This tells us that the new king is neither client nor technologist, but their partnership: the tightly merged amalgam of business and technological expertise. Companies that achieve and maintain such a partnership are the ones who will prosper.''//"

[[Structured Analysis: Beginnings of a New Discipline|http://cs.txstate.edu/~rp31/papersSP/TDMSpringer2002.pdf]]
[[Tom DeMarco|http://en.wikipedia.org/wiki/Tom_DeMarco]]
sd&amp;m Conference 2001, Software Pioneers
Eds.: M. Broy, E. Denert, Springer 2002
----
/%
@@color:#c4d6ed; ^^
Description: Quote of Tom DeMarco opinion on modern Software Analyst role
^^@@
%/</pre>
</div>
<div title="ToolbarCommands" modifier="acarvalho" created="201206231949" modified="201206252323" tags="excludeSearch" server.title="ToolbarCommands" server.page.revision="201206252323" server.etag='"acarvalho_public/ToolbarCommands/761000:0f01b0b0a7bc171b0fd3445c7314eac8a4a02700"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="990cb47a0acb729825b52924682bbd41eaf333c1">
<pre>|~ViewToolbar|+editTiddler cloneTiddler closeOthers closeTiddler &gt; fields refreshTiddler changeToPublic changeToPrivate syncing permalink references jump previousTiddler &lt; |
|~EditToolbar|+saveTiddler saveDraft -cancelTiddler deleteTiddler|
|~RevisionToolbar|&gt; fields revert|</pre>
</div>
<div title="Traceability" modifier="YourName" created="201207182057" modified="202007302035" tags="Concept Content EA Guideline" server.title="Traceability" server.page.revision="201502181516" server.etag='"acarvalho_public/Traceability/2097774:04a354b920d6596deca9340cd0fdbb68a8e0e6ea"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="34c4c1d17adba7589c04575ccf99ce65ae3eed8b" changecount="8">
<pre>Traceability is the ability to trace (forwards and backwards) a modelling element from its conception through its specification to its subsequent design, implementation and test.
&lt;&lt;Image "FR" "413" "Traceability-Concretisation.png" "https://dl.dropbox.com/" "s/5dmf76e8aankguz/" "?dl=1" "Traceability and Concretisation"&gt;&gt;
As a process, software development progresses through phases and, in each phase, a different level of information concretisation (and range) is achieved.
The diagram illustrates the main elements of each phase, their relationships and the concretisation traceability from Inception to Construction, this is, basically, a [[meta-model|http://en.wikipedia.org/wiki/Metamodeling]].
Pay attention that several other diagrams and elements may and shall be used, to detail and improve specification, like business models, use cases, state diagrams, etc. These auxiliary diagrams and elements, however, are not considered in our main traceability proposal.
For now we shall understand that traceability refers to the ability of locating related elements up in abstraction direction or down in concretisation direction or even horizontally as happens with test cases and tables.

As such a ''Requested [[Feature]]'' shall be traced (Abstraction) from one or more dependant ''Proposed Features''. A ''Requested Feature'' shall also be dependant from one or more ''Stakeholders'' (Customer person affected or/and with decision power over the feature).
''[[Requirements|Software Requirement]]'' shall trace (Abstraction) to features and shall also be associated with their correspondent ''Test Cases''. The architectural ''Components'' shall ''realize'' the requirements that, in that way, correspond to their responsibilities.
Composition of the ''Components'' shall be established by aggregation of the correspondent ''Classes'' that, in turn, shall trace their dependency from database ''Tables'' and establish their realizations of ''Interfaces''.

Notice that, although ''Interfaces'' and ''Tables'' appear at Construction level they may, and shall, be specified as soon as possible.

Traceability also implies unequivocal and ''unambiguous identification'' of each item. As Classes are naturally identified by namespace and name and Components and Tables are, usually, only identified by name, this means that you should number your Features, Requirements, Issues, Assumptions, Test Cases, and anything whose name is not unique in the system, in an unequivocal way. We strongly suggest to use hierarchical numbering with gaps and type prefixes. See [[Writing Good Requirements]] for more information on this.

&lt;&lt;Image "FL" "630" "ModelNavigability.png" "https://dl.dropbox.com/" "s/ycu8jb2frb5f3oz/" "?dl=1" "Model Navigability"&gt;&gt;
When using a [[CASE]] tool like [[EA|Sparx Enterprise Architect]], traceability relationships are also a condition for ''model navigability''. This is essential if you want a minimum of productivity and efficiency in tool usage.

Proper relationships give us model navigability with simple follow link action. 
As you surely understand, ''the ability to locate information in a set as large as Software Specifications tend to be is crucial and can not be underestimated''.

''Model Navigability'' is essential to :
* cope with information volume
* assess change impact and context
* assure [[coverage|Coverage]]
* protect scope

!!Traceability and Agile
Pay attention that most Agile approaches do not properly consider traceability and, when confronted with the need, propose (out of thin air) outdated solutions, very close to "//Excel traceability//", that will make you return to the stone age of software development. These immature and ill thought pseudo-solutions will require a lot of effort and produce near useless and unmaintainable results. This scenario is made worst when task management tools that "can also be used for anything else...", like Jira, are brought to the matter destroying the "single source of truth" characteristic of the model (you are not thinking in modelling in Jira are you?) and, in fact, rendering it almost useless and unmaintainable. You do not code in Notepad, although it would be possible to do so. So why (ab)use tools and use outdated inefficient methods when there are plenty professional [[CASE]] tools and solid methods that can do the job efficiently and effectively?
See, for instance, [[Lightning Cast: Non-Functional Requirements in Agile|https://masteringbusinessanalysis.com/lightning-cast-non-functional-requirements-in-agile/]] :
* the first approach (Backlog Item) destroys state management, and in fact all sprint concept, when a non-functional requirement applies to all or a big part of the system. Or you will need to create a different Backlog Item with the same content for each US in each sprint.
* the second and third approaches translate into non discrete attributes of other elements and, thus, are not traceable in a properly bidirectional and normalized fashion and you will be back into "//Excel traceability//" nightmare. 
----
''See also :''
* Additional recommended relationships in Requirements Diagrams : [[EA Usage - Requirements Diagram]]
----
!!Other references on the topic
* Rémy Fannader,  on [[Traceability|http://caminao.wordpress.com/system-engineering/project-management/traceability/]]
* Serge Thorn, on [[Redefining traceability in Enterprise Architecture and implementing the concept with TOGAF 9.1 and/or ArchiMate 2.0|http://sergethorn.blogspot.fr/2013/05/redefining-traceability-in-enterprise.html]]
*  Geert Bellekens, on [[Instant impact analyses in Enterprise Architect with SQL searches|http://bellekens.com/2015/02/15/instant-impact-analyses-in-enterprise-architect-with-sql-searches/]]
----
@@color:#c4d6ed; ^^
Description: traceability concept explanation and usage guideline.
^^@@</pre>
</div>
<div title="TravelPage" modifier="YourName" created="201210211333" modified="202103111542" tags="Content Travel" changecount="3" server.title="TravelPage" server.page.revision="201505040204" server.etag='"acarvalho_public/TravelPage/2207861:4c52cf00069335d91fc7687fd7dac404387d79d0"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="0dadbe6414a07c86b94326955ce5f7c5b077fea1">
<pre>*2012
** [[Mozambique and South Africa|2012 Mozambique and South Africa]]
*2014
** [[Mozambique|2014 Mozambique]]
** [[Brazil|2014 Brazil]]
*2015
** [[Brazil|2015 Brazil]]
*2018
** [[UK|2018 UK]]
** [[Morroco|2018 Morroco]]
*2019
** [[Morroco|2019 Morroco]]

----
@@color:#c4d6ed; ^^
Description: Travels page, photos and other things
^^@@</pre>
</div>
<div title="TspotSetupPlugin" modifier="AndreCarvalho" created="200808081041" modified="202103121832" tags="systemConfig systemConfigDisable" changecount="1">
<pre>/***
Description: Contains the stuff you need to use Tiddlyspot
Note, you also need UploadPlugin, PasswordOptionPlugin and LoadRemoteFileThroughProxy
from http://tiddlywiki.bidix.info for a complete working Tiddlyspot site.
***/
//{{{

// edit this if you are migrating sites or retrofitting an existing TW
config.tiddlyspotSiteId = 'acarvalho';

// make it so you can by default see edit controls via http
config.options.chkHttpReadOnly = false;
window.readOnly = false; // make sure of it (for tw 2.2)
window.showBackstage = true; // show backstage too

// disable autosave in d3
if (window.location.protocol != "file:")
	config.options.chkGTDLazyAutoSave = false;

// tweak shadow tiddlers to add upload button, password entry box etc
with (config.shadowTiddlers) {
	SiteUrl = 'http://'+config.tiddlyspotSiteId+'.tiddlyspot.com';
	SideBarOptions = SideBarOptions.replace(/(&lt;&lt;saveChanges&gt;&gt;)/,"$1&lt;&lt;tiddler TspotSidebar&gt;&gt;");
	OptionsPanel = OptionsPanel.replace(/^/,"&lt;&lt;tiddler TspotOptions&gt;&gt;");
	DefaultTiddlers = DefaultTiddlers.replace(/^/,"[[WelcomeToTiddlyspot]] ");
	MainMenu = MainMenu.replace(/^/,"[[WelcomeToTiddlyspot]] ");
}

// create some shadow tiddler content
merge(config.shadowTiddlers,{

'TspotOptions':[
 "tiddlyspot password:",
 "&lt;&lt;option pasUploadPassword&gt;&gt;",
 ""
].join("\n"),

'TspotControls':[
 "| tiddlyspot password:|&lt;&lt;option pasUploadPassword&gt;&gt;|",
 "| site management:|&lt;&lt;upload http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/store.cgi index.html . .  " + config.tiddlyspotSiteId + "&gt;&gt;//(requires tiddlyspot password)//&lt;br&gt;[[control panel|http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/controlpanel]], [[download (go offline)|http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/download]]|",
 "| links:|[[tiddlyspot.com|http://tiddlyspot.com/]], [[FAQs|http://faq.tiddlyspot.com/]], [[blog|http://tiddlyspot.blogspot.com/]], email [[support|mailto:support@tiddlyspot.com]] &amp; [[feedback|mailto:feedback@tiddlyspot.com]], [[donate|http://tiddlyspot.com/?page=donate]]|"
].join("\n"),

'WelcomeToTiddlyspot':[
 "This document is a ~TiddlyWiki from tiddlyspot.com.  A ~TiddlyWiki is an electronic notebook that is great for managing todo lists, personal information, and all sorts of things.",
 "",
 "@@font-weight:bold;font-size:1.3em;color:#444; //What now?// &amp;nbsp;&amp;nbsp;@@ Before you can save any changes, you need to enter your password in the form below.  Then configure privacy and other site settings at your [[control panel|http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/controlpanel]] (your control panel username is //" + config.tiddlyspotSiteId + "//).",
 "&lt;&lt;tiddler TspotControls&gt;&gt;",
 "See also GettingStarted.",
 "",
 "@@font-weight:bold;font-size:1.3em;color:#444; //Working online// &amp;nbsp;&amp;nbsp;@@ You can edit this ~TiddlyWiki right now, and save your changes using the \"save to web\" button in the column on the right.",
 "",
 "@@font-weight:bold;font-size:1.3em;color:#444; //Working offline// &amp;nbsp;&amp;nbsp;@@ A fully functioning copy of this ~TiddlyWiki can be saved onto your hard drive or USB stick.  You can make changes and save them locally without being connected to the Internet.  When you're ready to sync up again, just click \"upload\" and your ~TiddlyWiki will be saved back to tiddlyspot.com.",
 "",
 "@@font-weight:bold;font-size:1.3em;color:#444; //Help!// &amp;nbsp;&amp;nbsp;@@ Find out more about ~TiddlyWiki at [[TiddlyWiki.com|http://tiddlywiki.com]].  Also visit [[TiddlyWiki.org|http://tiddlywiki.org]] for documentation on learning and using ~TiddlyWiki. New users are especially welcome on the [[TiddlyWiki mailing list|http://groups.google.com/group/TiddlyWiki]], which is an excellent place to ask questions and get help.  If you have a tiddlyspot related problem email [[tiddlyspot support|mailto:support@tiddlyspot.com]].",
 "",
 "@@font-weight:bold;font-size:1.3em;color:#444; //Enjoy :)// &amp;nbsp;&amp;nbsp;@@ We hope you like using your tiddlyspot.com site.  Please email [[feedback@tiddlyspot.com|mailto:feedback@tiddlyspot.com]] with any comments or suggestions."
].join("\n"),

'TspotSidebar':[
 "&lt;&lt;upload http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/store.cgi index.html . .  " + config.tiddlyspotSiteId + "&gt;&gt;&lt;html&gt;&lt;a href='http://" + config.tiddlyspotSiteId + ".tiddlyspot.com/download' class='button'&gt;download&lt;/a&gt;&lt;/html&gt;"
].join("\n")

});
//}}}
</pre>
</div>
<div title="UnsavedChangesPlugin" creator="AndreCarvalho" modifier="AndreCarvalho" created="201701311149" modified="202103121800" tags="systemConfig" changecount="7">
<pre>/***
|Name|UnsavedChangesPlugin|
|Source|http://www.TiddlyTools.com/#UnsavedChangesPlugin|
|Version|3.3.6|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|show droplist of tiddlers that have changed since the last time the document was saved|
Display a list of tiddlers that have been changed since the last time the document was saved.  The list includes all new/modified tiddlers as well as those changed with "minor edits" enabled and any tiddlers that you import during the session, regardless of their modification date.
!!!!!Usage
&lt;&lt;&lt;
{{{
&lt;&lt;unsavedChanges panel&gt;&gt; or &lt;&lt;unsavedChanges&gt;&gt;
}}}
{{indent{
the ''panel'' keyword displays a 'control panel' interface containing a droplist of unsaved tiddlers and a 'goto' button, along with a command link to 'save changes'.  Depending upon what other plugins are installed, several additional elements will also be displayed: When [[NestedSlidersPlugin]] is installed, the entire control panel is contained within a ''SLIDER''.  When [[LoadTiddlersPlugin]] is installed, a ''REVERT'' button is added.  When [[SaveAsPlugin]] is installed, a ''SAVE AS'' link is added.  When [[UploadPlugin]] is installed, an ''UPLOAD'' (or ''save to web'') link is added.  When [[TrashPlugin]] is installed and there are tiddlers tagged with&lt;&lt;tag Trash&gt;&gt;, an ''EMPTY TRASH'' link is added.
}}}
{{{
&lt;&lt;unsavedChanges list separator&gt;&gt;
}}}
{{indent{
the ''list'' keyword displays a simple space-separated list of unsaved tiddlers without any other command links.  You can specify an optional ''separator'' value that can be used in place of the default space character.  For example, you can specify {{{"&lt;br&gt;"}}} as the separator in order to display each link, one per line.
}}}
{{{
&lt;&lt;unsavedChanges command label tip&gt;&gt;
}}}
{{indent{
the ''command'' keyword displays a single 'command link' that, when clicked, displays a ~TiddlyWiki popup containing the list of unsaved tiddlers, the 'save changes' command and, depending upon what other plugins are installed, additional commands for 'save as', 'upload', and 'empty trash' (similar to the panel display described above).

You can specify optional ''label'' and ''tip'' parameters in the macro to customize the command link text and tooltip.  The default label for the command link is: "There %1 %0 unsaved tiddler%2...", where:
* %0 is automatically replaced with the number of unsaved changes
* %1 is either "is" (if changes=1) or "are" (if changes&gt;1)
* %2 is either blank (if changes=1) or "s" (if changes&gt;1)
resulting in the text: //"There is 1 unsaved tiddler...", "There are 2 unsaved tiddlers...", etc.//
}}}
&lt;&lt;&lt;
!!!!!Examples
&lt;&lt;&lt;
^^//note: the following examples will not display any output unless you have already created/modified tiddlers in the current document.//^^
{{{&lt;&lt;unsavedChanges&gt;&gt;}}}
&lt;&lt;unsavedChanges&gt;&gt;
----
{{{&lt;&lt;unsavedChanges command&gt;&gt;}}}
&lt;&lt;unsavedChanges command&gt;&gt;
----
{{{&lt;&lt;unsavedChanges list&gt;&gt;}}}
&lt;&lt;unsavedChanges list&gt;&gt;
----
{{{&lt;&lt;unsavedChanges list "&lt;br&gt;"&gt;&gt;}}}
&lt;&lt;unsavedChanges list "&lt;br&gt;"&gt;&gt;
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2011.11.27 3.3.6 in panel(), command(), and list(), check for null 'place' (maybe caused if tiddlers are modified by a plugin during startup 'init' handling)
2011.04.29 3.3.5 in panel(), use custom label (if provided).  Also, removed "small" style from panel commands so surrounding CSS font size will be used.
2010.12.05 3.3.4 display 'save as...' command even if readOnly
2009.03.02 3.3.3 fix handling for titles that contain HTML special chars (lt,gt,quot,amp)
2008.09.02 3.3.2 cleanup popup list output generation and added timestamps/sizes to popup display
2008.08.23 3.3.1 added optional custom 'label' and 'tip' params to 'command' mode and defined default values for mode, label, tip, and separator as object properties for I18N/L10N-readiness.
2008.08.21 3.3.0 complete re-write of rendering and refresh processing to support multiple instances and automatic self-refresh (no longer depends upon core refresh notifications)
2008.08.21 3.2.0 added 'command' option for link+popup as alternative to 'control panel' interface
2008.04.22 3.1.2 use SaveAsPlugin instead of obsolete NewDocumentPlugin to add "save as" link
2007.12.22 3.1.1 hijack removeTiddler() instead of low-level deleteTiddler() to correct tracking and refresh handling issues.  in saveTiddler(), check for 'tiddler rename' (title!=newtitle) and adjust list accordingly.
2007.12.21 3.1.0 added support for {{{&lt;&lt;unsavedChanges list separator&gt;&gt;}}} usage to unsaved tiddlers as a simple list of links, embedded in tiddler content (e.g., [[MainMenu]])
2007.12.20 3.0.0 rewrite to track ALL changed tiddlers, including imports and minor edits, regardless of saved modification dates.  Also, rewrote display logic to directly refresh macro output instead of triggering a page refresh.  The entire process is MUCH more efficient now.
2007.08.02 2.0.0 converted from inline script
2007.01.01 1.0.0 initial release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.UnsavedChangesPlugin= {major: 3, minor: 3, revision: 6, date: new Date(2011,12,27)};

config.macros.unsavedChanges = {
	changed: [], // list of currently unsaved tiddler titles
	defMode: "panel",
	defSep: " ",
	defLabel: "There %1 %0 unsaved tiddler%2",
	defTip: "view a list of unsaved tiddler changes",
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		var wrapper=createTiddlyElement(place,"span",null,"unsavedChanges");
		wrapper.setAttribute("mode",params[0]||this.defMode);
		wrapper.setAttribute("sep",params[1]||this.defSep); // for 'list' mode
		wrapper.setAttribute("label",params[1]||this.defLabel); // for 'command' mode
		wrapper.setAttribute("tip",params[2]||this.defTip); // for 'command' mode
		this.render(wrapper);
	},
	render: function(wrapper) {
		removeChildren(wrapper); // make sure its empty
		if (!this.changed.length) return; // no changes = no output
		switch (wrapper.getAttribute("mode")) {
			case "command": this.command(wrapper); break;
			case "list": this.list(wrapper); break;
			case "panel": default: this.panel(wrapper); break;
		}
	},
	refresh: function() {
		var wrappers=document.getElementsByTagName("span");
		for (var w=0; w&lt;wrappers.length; w++)
			if (hasClass(wrappers[w],"unsavedChanges"))
				this.render(wrappers[w]);
	},
	list: function(place) { // show simple list of unsaved tiddlers
		if (!place) return;
		wikify("[["+this.changed.join("]]"+place.getAttribute("sep")+"[[")+"]]",place);
	},
	command: function(place) { // show command link with popup list
		if (!place) return;
		var c=this.changed.length;
		var txt=place.getAttribute("label").format([c,c==1?'is':'are',c==1?'':'s']);
		var tip=place.getAttribute("tip");
		var action=function(ev) { if (!ev) var ev=window.event;
			var p=Popup.create(this); if (!p) return false;
			var d=createTiddlyElement(p,"div");
			d.style.whiteSpace="normal"; d.style.width="auto"; d.style.padding="2px";
			// gather pretty links for changed tiddlers
			var list=[]; var item=" &amp;nbsp;[[%1 - %0 (%2 bytes)|%0]]&amp;nbsp; ";
			for (var i=config.macros.unsavedChanges.changed.length-1; i&gt;=0; i--) {
				var tid=store.getTiddler(config.macros.unsavedChanges.changed[i]);
				if (!tid) continue;
				var when=tid.modified.formatString('YYYY.0MM.0DD 0hh:0mm:0ss');
				list.push(item.format([tid.title,when,tid.text.length]));
			}
			wikify("@@white-space:nowrap;"+list.join("&lt;br&gt;")+"@@",d);
			var t="\n----\n";
			t+="@@white-space:nowrap;display:block;text-align:center; &amp;nbsp;";
			if (!readOnly) {
				t+="&lt;&lt;saveChanges&gt;&gt;";
				t+=config.macros.saveAs?" | &lt;&lt;saveAs&gt;&gt;":"";
				t+=config.macros.upload?" | &lt;&lt;upload&gt;&gt;":"";
				t+=(config.macros.emptyTrash&amp;&amp;store.getTaggedTiddlers("Trash").length)?" | &lt;&lt;emptyTrash&gt;&gt;":"";
			} else {
				t+=config.macros.saveAs?"&lt;&lt;saveAs&gt;&gt;":"";
			}
			t+="&amp;nbsp; @@";
			wikify(t,d);
			Popup.show();
			ev.cancelBubble=true; if(ev.stopPropagation)ev.stopPropagation();
			return(false);
		}
		createTiddlyButton(place,txt,tip,action,"button");
	},
	panel: function(place) { // show composite droplist+buttons+commands
		if (!place) return;
		// gather changed tiddlers (in reverse order by date - most recent first)
		var tids=[]; for (var i=this.changed.length-1; i&gt;=0; i--)
			{ var t=store.getTiddler(this.changed[i]); if (t) tids.push(t); }
		tids.sort(function(a,b){return a.modified&lt;b.modified?-1:(a.modified==b.modified?0:1);});
		// generate droplist items
 		var list=[]; var item='&lt;option value="%0"&gt;%1 - %0 (%2 bytes)&lt;/option&gt;';
		for (var i=tids.length-1; i&gt;=0; i--) {
			var when=tids[i].modified.formatString('YYYY.0MM.0DD 0hh:0mm:0ss');
			list.push(item.format([tids[i].title.htmlEncode(),when,tids[i].text.length]));
		}
		// display droplist, buttons, and command links
		var out=''; var c=this.changed.length;
		var NSP=config.formatters.findByField("name","nestedSliders");
		var summary=place.getAttribute("label").format([c,c==1?'is':'are',c==1?'':'s']);
		out+=NSP?'+++(unsaved)['+summary+'|'+this.defTip+']...':(summary+"\n");
		out+='&lt;html&gt;&lt;form style="display:inline"&gt;&lt;!--\
			--&gt;&lt;select size="1" name="list" \
				title="select a tiddler to view" \
				onchange="var v=this.value; if (v.length) story.displayTiddler(null,v);"&gt;&lt;!--\
			--&gt;'+list.join('')+'&lt;!--\
			--&gt;&lt;/select&gt;&lt;!--\
			--&gt;&lt;input type="button" value="goto" onclick="this.form.list.onchange();"&gt;';
		if (config.macros.loadTiddlers)  {
			out+='&lt;input type="button" value="revert" \
				title="import the last saved version of this tiddler" \
				onclick="var v=this.form.list.value; if (!v.length) return; \
					var t=\'&lt;\'+\'&lt;loadTiddlers [[tiddler:\'+v+\']] \'; \
					t+=document.location.href; \
					t+=\' confirm force noreport&gt;\'+\'&gt;\'; \
					var e=document.getElementById(\'executeRevert\'); \
					if (e) e.parentNode.removeChild(e); \
					e=document.createElement(\'span\'); \
					e.id=\'executeRevert\'; \
					wikify(t,e);"&gt;';
		}
		out+='&lt;/form&gt;&lt;/html&gt;';
		out+='\n{{nowrap{';
		if (!readOnly) {
			out+="&lt;&lt;saveChanges&gt;&gt;";
			out+=config.macros.saveAs?" | &lt;&lt;saveAs&gt;&gt;":"";
			out+=config.macros.upload?" | &lt;&lt;upload&gt;&gt;":"";
			out+=(config.macros.emptyTrash&amp;&amp;store.getTaggedTiddlers("Trash").length)?" | &lt;&lt;emptyTrash&gt;&gt;":"";
		} else {
			out+=config.macros.saveAs?"&lt;&lt;saveAs&gt;&gt;":"";
		}
		out+='}}}';
		out+=NSP?'===':'';
		wikify(out,place);
	}
};

// hijack store.saveTiddler() to track changes to tiddlers
if (store.showUnsaved_saveTiddler==undefined) {
	store.showUnsaved_saveTiddler=store.saveTiddler;
	store.saveTiddler=function(title,newtitle) {
		if (title!=newtitle) {
			var i=config.macros.unsavedChanges.changed.indexOf(title);
			if (i!=-1) config.macros.unsavedChanges.changed.splice(i,1); // remove old from list
		} 
		var i=config.macros.unsavedChanges.changed.indexOf(newtitle);
		if (i!=-1) config.macros.unsavedChanges.changed.splice(i,1); // remove new title from list
		config.macros.unsavedChanges.changed.push(newtitle); // add new title to END of list
		var t=this.showUnsaved_saveTiddler.apply(this,arguments);
		if (!this.notificationLevel) config.macros.unsavedChanges.refresh();
		return t;
	}
}

// hijack store.removeTiddler() to track changes to tiddlers
if (store.showUnsaved_removeTiddler==undefined) {
	store.showUnsaved_removeTiddler=store.removeTiddler;
	store.removeTiddler=function(title) {
		var i=config.macros.unsavedChanges.changed.indexOf(title);
		if (i!=-1) config.macros.unsavedChanges.changed.splice(i,1); // remove from list
		this.showUnsaved_removeTiddler.apply(this,arguments);
		if (!this.notificationLevel) config.macros.unsavedChanges.refresh();
	}
}

// hijack store.setDirty() function to reset change list after file save
// note: do NOT hijack the prototype function.  This hijack should only be applied to
// the main 'store' instance only (i.e., don't refresh when loading temporary store
// as part of ImportTiddlers processing)
if (store.showUnsaved_setDirty==undefined) {
	store.showUnsaved_setDirty=store.setDirty;
	store.setDirty = function(flag) {
		var refresh=this.isDirty() &amp;&amp; !flag; // 'dirty' to 'clean', force a refresh...
		this.showUnsaved_setDirty.apply(this,arguments); // but change the flag first.
		if (refresh) {
			config.macros.unsavedChanges.changed=[]; // clear changed list
			config.macros.unsavedChanges.refresh();
		}
	}
}
//}}}</pre>
</div>
<div title="UploadLog" modifier="YourName" created="201206131428" modified="202009171533">
<pre>| !date | !user | !location | !storeUrl | !uploadDir | !toFilename | !backupdir | !origin |
| 17/09/2020 13:26:26 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 13:56:46 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  |
| 17/09/2020 14:07:58 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 14:11:45 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  |
| 17/09/2020 14:12:35 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  |
| 17/09/2020 14:13:20 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 15:35:08 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 15:45:41 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 16:05:39 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  | ok |
| 17/09/2020 16:33:17 | YourName | [[/|http://acarvalho.tiddlyspot.com/]] | [[store.cgi|http://acarvalho.tiddlyspot.com/store.cgi]] | . | [[index.html | http://acarvalho.tiddlyspot.com/index.html]] |  |</pre>
</div>
<div title="UploadPlugin" modifier="YourName" created="200808080918" modified="201206131413" tags="systemConfig">
<pre>/***
|''Name:''|UploadPlugin|
|''Description:''|Save to web a TiddlyWiki|
|''Version:''|4.1.3|
|''Date:''|Feb 24, 2008|
|''Source:''|http://tiddlywiki.bidix.info/#UploadPlugin|
|''Documentation:''|http://tiddlywiki.bidix.info/#UploadPluginDoc|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0|
|''Requires:''|PasswordOptionPlugin|
***/
//{{{
version.extensions.UploadPlugin = {
	major: 4, minor: 1, revision: 3,
	date: new Date("Feb 24, 2008"),
	source: 'http://tiddlywiki.bidix.info/#UploadPlugin',
	author: 'BidiX (BidiX (at) bidix (dot) info',
	coreVersion: '2.2.0'
};

//
// Environment
//

if (!window.bidix) window.bidix = {}; // bidix namespace
bidix.debugMode = false;	// true to activate both in Plugin and UploadService
	
//
// Upload Macro
//

config.macros.upload = {
// default values
	defaultBackupDir: '',	//no backup
	defaultStoreScript: "store.php",
	defaultToFilename: "index.html",
	defaultUploadDir: ".",
	authenticateUser: true	// UploadService Authenticate User
};
	
config.macros.upload.label = {
	promptOption: "Save and Upload this TiddlyWiki with UploadOptions",
	promptParamMacro: "Save and Upload this TiddlyWiki in %0",
	saveLabel: "save to web", 
	saveToDisk: "save to disk",
	uploadLabel: "upload"	
};

config.macros.upload.messages = {
	noStoreUrl: "No store URL in parmeters or options",
	usernameOrPasswordMissing: "Username or password missing"
};

config.macros.upload.handler = function(place,macroName,params) {
	if (readOnly)
		return;
	var label;
	if (document.location.toString().substr(0,4) == "http") 
		label = this.label.saveLabel;
	else
		label = this.label.uploadLabel;
	var prompt;
	if (params[0]) {
		prompt = this.label.promptParamMacro.toString().format([this.destFile(params[0], 
			(params[1] ? params[1]:bidix.basename(window.location.toString())), params[3])]);
	} else {
		prompt = this.label.promptOption;
	}
	createTiddlyButton(place, label, prompt, function() {config.macros.upload.action(params);}, null, null, this.accessKey);
};

config.macros.upload.action = function(params)
{
		// for missing macro parameter set value from options
		if (!params) params = {};
		var storeUrl = params[0] ? params[0] : config.options.txtUploadStoreUrl;
		var toFilename = params[1] ? params[1] : config.options.txtUploadFilename;
		var backupDir = params[2] ? params[2] : config.options.txtUploadBackupDir;
		var uploadDir = params[3] ? params[3] : config.options.txtUploadDir;
		var username = params[4] ? params[4] : config.options.txtUploadUserName;
		var password = config.options.pasUploadPassword; // for security reason no password as macro parameter	
		// for still missing parameter set default value
		if ((!storeUrl) &amp;&amp; (document.location.toString().substr(0,4) == "http")) 
			storeUrl = bidix.dirname(document.location.toString())+'/'+config.macros.upload.defaultStoreScript;
		if (storeUrl.substr(0,4) != "http")
			storeUrl = bidix.dirname(document.location.toString()) +'/'+ storeUrl;
		if (!toFilename)
			toFilename = bidix.basename(window.location.toString());
		if (!toFilename)
			toFilename = config.macros.upload.defaultToFilename;
		if (!uploadDir)
			uploadDir = config.macros.upload.defaultUploadDir;
		if (!backupDir)
			backupDir = config.macros.upload.defaultBackupDir;
		// report error if still missing
		if (!storeUrl) {
			alert(config.macros.upload.messages.noStoreUrl);
			clearMessage();
			return false;
		}
		if (config.macros.upload.authenticateUser &amp;&amp; (!username || !password)) {
			alert(config.macros.upload.messages.usernameOrPasswordMissing);
			clearMessage();
			return false;
		}
		bidix.upload.uploadChanges(false,null,storeUrl, toFilename, uploadDir, backupDir, username, password); 
		return false; 
};

config.macros.upload.destFile = function(storeUrl, toFilename, uploadDir) 
{
	if (!storeUrl)
		return null;
		var dest = bidix.dirname(storeUrl);
		if (uploadDir &amp;&amp; uploadDir != '.')
			dest = dest + '/' + uploadDir;
		dest = dest + '/' + toFilename;
	return dest;
};

//
// uploadOptions Macro
//

config.macros.uploadOptions = {
	handler: function(place,macroName,params) {
		var wizard = new Wizard();
		wizard.createWizard(place,this.wizardTitle);
		wizard.addStep(this.step1Title,this.step1Html);
		var markList = wizard.getElement("markList");
		var listWrapper = document.createElement("div");
		markList.parentNode.insertBefore(listWrapper,markList);
		wizard.setValue("listWrapper",listWrapper);
		this.refreshOptions(listWrapper,false);
		var uploadCaption;
		if (document.location.toString().substr(0,4) == "http") 
			uploadCaption = config.macros.upload.label.saveLabel;
		else
			uploadCaption = config.macros.upload.label.uploadLabel;
		
		wizard.setButtons([
				{caption: uploadCaption, tooltip: config.macros.upload.label.promptOption, 
					onClick: config.macros.upload.action},
				{caption: this.cancelButton, tooltip: this.cancelButtonPrompt, onClick: this.onCancel}
				
			]);
	},
	options: [
		"txtUploadUserName",
		"pasUploadPassword",
		"txtUploadStoreUrl",
		"txtUploadDir",
		"txtUploadFilename",
		"txtUploadBackupDir",
		"chkUploadLog",
		"txtUploadLogMaxLine"		
	],
	refreshOptions: function(listWrapper) {
		var opts = [];
		for(i=0; i&lt;this.options.length; i++) {
			var opt = {};
			opts.push();
			opt.option = "";
			n = this.options[i];
			opt.name = n;
			opt.lowlight = !config.optionsDesc[n];
			opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
			opts.push(opt);
		}
		var listview = ListView.create(listWrapper,opts,this.listViewTemplate);
		for(n=0; n&lt;opts.length; n++) {
			var type = opts[n].name.substr(0,3);
			var h = config.macros.option.types[type];
			if (h &amp;&amp; h.create) {
				h.create(opts[n].colElements['option'],type,opts[n].name,opts[n].name,"no");
			}
		}
		
	},
	onCancel: function(e)
	{
		backstage.switchTab(null);
		return false;
	},
	
	wizardTitle: "Upload with options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "&lt;input type='hidden' name='markList'&gt;&lt;/input&gt;&lt;br&gt;",
	cancelButton: "Cancel",
	cancelButtonPrompt: "Cancel prompt",
	listViewTemplate: {
		columns: [
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'} 
			]}
};

//
// upload functions
//

if (!bidix.upload) bidix.upload = {};

if (!bidix.upload.messages) bidix.upload.messages = {
	//from saving
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to upload backup file",
	rssSaved: "RSS feed uploaded",
	rssFailed: "Failed to upload RSS feed file",
	emptySaved: "Empty template uploaded",
	emptyFailed: "Failed to upload empty template file",
	mainSaved: "Main TiddlyWiki file uploaded",
	mainFailed: "Failed to upload main TiddlyWiki file. Your changes have not been saved",
	//specific upload
	loadOriginalHttpPostError: "Can't get original file",
	aboutToSaveOnHttpPost: 'About to upload on %0 ...',
	storePhpNotFound: "The store script '%0' was not found."
};

bidix.upload.uploadChanges = function(onlyIfDirty,tiddlers,storeUrl,toFilename,uploadDir,backupDir,username,password)
{
	var callback = function(status,uploadParams,original,url,xhr) {
		if (!status) {
			displayMessage(bidix.upload.messages.loadOriginalHttpPostError);
			return;
		}
		if (bidix.debugMode) 
			alert(original.substr(0,500)+"\n...");
		// Locate the storeArea div's 
		var posDiv = locateStoreArea(original);
		if((posDiv[0] == -1) || (posDiv[1] == -1)) {
			alert(config.messages.invalidFileError.format([localPath]));
			return;
		}
		bidix.upload.uploadRss(uploadParams,original,posDiv);
	};
	
	if(onlyIfDirty &amp;&amp; !store.isDirty())
		return;
	clearMessage();
	// save on localdisk ?
	if (document.location.toString().substr(0,4) == "file") {
		var path = document.location.toString();
		var localPath = getLocalPath(path);
		saveChanges();
	}
	// get original
	var uploadParams = new Array(storeUrl,toFilename,uploadDir,backupDir,username,password);
	var originalPath = document.location.toString();
	// If url is a directory : add index.html
	if (originalPath.charAt(originalPath.length-1) == "/")
		originalPath = originalPath + "index.html";
	var dest = config.macros.upload.destFile(storeUrl,toFilename,uploadDir);
	var log = new bidix.UploadLog();
	log.startUpload(storeUrl, dest, uploadDir,  backupDir);
	displayMessage(bidix.upload.messages.aboutToSaveOnHttpPost.format([dest]));
	if (bidix.debugMode) 
		alert("about to execute Http - GET on "+originalPath);
	var r = doHttp("GET",originalPath,null,null,username,password,callback,uploadParams,null);
	if (typeof r == "string")
		displayMessage(r);
	return r;
};

bidix.upload.uploadRss = function(uploadParams,original,posDiv) 
{
	var callback = function(status,params,responseText,url,xhr) {
		if(status) {
			var destfile = responseText.substring(responseText.indexOf("destfile:")+9,responseText.indexOf("\n", responseText.indexOf("destfile:")));
			displayMessage(bidix.upload.messages.rssSaved,bidix.dirname(url)+'/'+destfile);
			bidix.upload.uploadMain(params[0],params[1],params[2]);
		} else {
			displayMessage(bidix.upload.messages.rssFailed);			
		}
	};
	// do uploadRss
	if(config.options.chkGenerateAnRssFeed) {
		var rssPath = uploadParams[1].substr(0,uploadParams[1].lastIndexOf(".")) + ".xml";
		var rssUploadParams = new Array(uploadParams[0],rssPath,uploadParams[2],'',uploadParams[4],uploadParams[5]);
		var rssString = generateRss();
		// no UnicodeToUTF8 conversion needed when location is "file" !!!
		if (document.location.toString().substr(0,4) != "file")
			rssString = convertUnicodeToUTF8(rssString);	
		bidix.upload.httpUpload(rssUploadParams,rssString,callback,Array(uploadParams,original,posDiv));
	} else {
		bidix.upload.uploadMain(uploadParams,original,posDiv);
	}
};

bidix.upload.uploadMain = function(uploadParams,original,posDiv) 
{
	var callback = function(status,params,responseText,url,xhr) {
		var log = new bidix.UploadLog();
		if(status) {
			// if backupDir specified
			if ((params[3]) &amp;&amp; (responseText.indexOf("backupfile:") &gt; -1))  {
				var backupfile = responseText.substring(responseText.indexOf("backupfile:")+11,responseText.indexOf("\n", responseText.indexOf("backupfile:")));
				displayMessage(bidix.upload.messages.backupSaved,bidix.dirname(url)+'/'+backupfile);
			}
			var destfile = responseText.substring(responseText.indexOf("destfile:")+9,responseText.indexOf("\n", responseText.indexOf("destfile:")));
			displayMessage(bidix.upload.messages.mainSaved,bidix.dirname(url)+'/'+destfile);
			store.setDirty(false);
			log.endUpload("ok");
		} else {
			alert(bidix.upload.messages.mainFailed);
			displayMessage(bidix.upload.messages.mainFailed);
			log.endUpload("failed");			
		}
	};
	// do uploadMain
	var revised = bidix.upload.updateOriginal(original,posDiv);
	bidix.upload.httpUpload(uploadParams,revised,callback,uploadParams);
};

bidix.upload.httpUpload = function(uploadParams,data,callback,params)
{
	var localCallback = function(status,params,responseText,url,xhr) {
		url = (url.indexOf("nocache=") &lt; 0 ? url : url.substring(0,url.indexOf("nocache=")-1));
		if (xhr.status == 404)
			alert(bidix.upload.messages.storePhpNotFound.format([url]));
		if ((bidix.debugMode) || (responseText.indexOf("Debug mode") &gt;= 0 )) {
			alert(responseText);
			if (responseText.indexOf("Debug mode") &gt;= 0 )
				responseText = responseText.substring(responseText.indexOf("\n\n")+2);
		} else if (responseText.charAt(0) != '0') 
			alert(responseText);
		if (responseText.charAt(0) != '0')
			status = null;
		callback(status,params,responseText,url,xhr);
	};
	// do httpUpload
	var boundary = "---------------------------"+"AaB03x";	
	var uploadFormName = "UploadPlugin";
	// compose headers data
	var sheader = "";
	sheader += "--" + boundary + "\r\nContent-disposition: form-data; name=\"";
	sheader += uploadFormName +"\"\r\n\r\n";
	sheader += "backupDir="+uploadParams[3] +
				";user=" + uploadParams[4] +
				";password=" + uploadParams[5] +
				";uploaddir=" + uploadParams[2];
	if (bidix.debugMode)
		sheader += ";debug=1";
	sheader += ";;\r\n"; 
	sheader += "\r\n" + "--" + boundary + "\r\n";
	sheader += "Content-disposition: form-data; name=\"userfile\"; filename=\""+uploadParams[1]+"\"\r\n";
	sheader += "Content-Type: text/html;charset=UTF-8" + "\r\n";
	sheader += "Content-Length: " + data.length + "\r\n\r\n";
	// compose trailer data
	var strailer = new String();
	strailer = "\r\n--" + boundary + "--\r\n";
	data = sheader + data + strailer;
	if (bidix.debugMode) alert("about to execute Http - POST on "+uploadParams[0]+"\n with \n"+data.substr(0,500)+ " ... ");
	var r = doHttp("POST",uploadParams[0],data,"multipart/form-data; ;charset=UTF-8; boundary="+boundary,uploadParams[4],uploadParams[5],localCallback,params,null);
	if (typeof r == "string")
		displayMessage(r);
	return r;
};

// same as Saving's updateOriginal but without convertUnicodeToUTF8 calls
bidix.upload.updateOriginal = function(original, posDiv)
{
	if (!posDiv)
		posDiv = locateStoreArea(original);
	if((posDiv[0] == -1) || (posDiv[1] == -1)) {
		alert(config.messages.invalidFileError.format([localPath]));
		return;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				store.allTiddlersAsHtml() + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = getPageTitle().htmlEncode();
	revised = revised.replaceChunk("&lt;title"+"&gt;","&lt;/title"+"&gt;"," " + newSiteTitle + " ");
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
};

//
// UploadLog
// 
// config.options.chkUploadLog :
//		false : no logging
//		true : logging
// config.options.txtUploadLogMaxLine :
//		-1 : no limit
//      0 :  no Log lines but UploadLog is still in place
//		n :  the last n lines are only kept
//		NaN : no limit (-1)

bidix.UploadLog = function() {
	if (!config.options.chkUploadLog) 
		return; // this.tiddler = null
	this.tiddler = store.getTiddler("UploadLog");
	if (!this.tiddler) {
		this.tiddler = new Tiddler();
		this.tiddler.title = "UploadLog";
		this.tiddler.text = "| !date | !user | !location | !storeUrl | !uploadDir | !toFilename | !backupdir | !origin |";
		this.tiddler.created = new Date();
		this.tiddler.modifier = config.options.txtUserName;
		this.tiddler.modified = new Date();
		store.addTiddler(this.tiddler);
	}
	return this;
};

bidix.UploadLog.prototype.addText = function(text) {
	if (!this.tiddler)
		return;
	// retrieve maxLine when we need it
	var maxLine = parseInt(config.options.txtUploadLogMaxLine,10);
	if (isNaN(maxLine))
		maxLine = -1;
	// add text
	if (maxLine != 0) 
		this.tiddler.text = this.tiddler.text + text;
	// Trunck to maxLine
	if (maxLine &gt;= 0) {
		var textArray = this.tiddler.text.split('\n');
		if (textArray.length &gt; maxLine + 1)
			textArray.splice(1,textArray.length-1-maxLine);
			this.tiddler.text = textArray.join('\n');		
	}
	// update tiddler fields
	this.tiddler.modifier = config.options.txtUserName;
	this.tiddler.modified = new Date();
	store.addTiddler(this.tiddler);
	// refresh and notifiy for immediate update
	story.refreshTiddler(this.tiddler.title);
	store.notify(this.tiddler.title, true);
};

bidix.UploadLog.prototype.startUpload = function(storeUrl, toFilename, uploadDir,  backupDir) {
	if (!this.tiddler)
		return;
	var now = new Date();
	var text = "\n| ";
	var filename = bidix.basename(document.location.toString());
	if (!filename) filename = '/';
	text += now.formatString("0DD/0MM/YYYY 0hh:0mm:0ss") +" | ";
	text += config.options.txtUserName + " | ";
	text += "[["+filename+"|"+location + "]] |";
	text += " [[" + bidix.basename(storeUrl) + "|" + storeUrl + "]] | ";
	text += uploadDir + " | ";
	text += "[[" + bidix.basename(toFilename) + " | " +toFilename + "]] | ";
	text += backupDir + " |";
	this.addText(text);
};

bidix.UploadLog.prototype.endUpload = function(status) {
	if (!this.tiddler)
		return;
	this.addText(" "+status+" |");
};

//
// Utilities
// 

bidix.checkPlugin = function(plugin, major, minor, revision) {
	var ext = version.extensions[plugin];
	if (!
		(ext  &amp;&amp; 
			((ext.major &gt; major) || 
			((ext.major == major) &amp;&amp; (ext.minor &gt; minor))  ||
			((ext.major == major) &amp;&amp; (ext.minor == minor) &amp;&amp; (ext.revision &gt;= revision))))) {
			// write error in PluginManager
			if (pluginInfo)
				pluginInfo.log.push("Requires " + plugin + " " + major + "." + minor + "." + revision);
			eval(plugin); // generate an error : "Error: ReferenceError: xxxx is not defined"
	}
};

bidix.dirname = function(filePath) {
	if (!filePath) 
		return;
	var lastpos;
	if ((lastpos = filePath.lastIndexOf("/")) != -1) {
		return filePath.substring(0, lastpos);
	} else {
		return filePath.substring(0, filePath.lastIndexOf("\\"));
	}
};

bidix.basename = function(filePath) {
	if (!filePath) 
		return;
	var lastpos;
	if ((lastpos = filePath.lastIndexOf("#")) != -1) 
		filePath = filePath.substring(0, lastpos);
	if ((lastpos = filePath.lastIndexOf("/")) != -1) {
		return filePath.substring(lastpos + 1);
	} else
		return filePath.substring(filePath.lastIndexOf("\\")+1);
};

bidix.initOption = function(name,value) {
	if (!config.options[name])
		config.options[name] = value;
};

//
// Initializations
//

// require PasswordOptionPlugin 1.0.1 or better
bidix.checkPlugin("PasswordOptionPlugin", 1, 0, 1);

// styleSheet
setStylesheet('.txtUploadStoreUrl, .txtUploadBackupDir, .txtUploadDir {width: 22em;}',"uploadPluginStyles");

//optionsDesc
merge(config.optionsDesc,{
	txtUploadStoreUrl: "Url of the UploadService script (default: store.php)",
	txtUploadFilename: "Filename of the uploaded file (default: in index.html)",
	txtUploadDir: "Relative Directory where to store the file (default: . (downloadService directory))",
	txtUploadBackupDir: "Relative Directory where to backup the file. If empty no backup. (default: ''(empty))",
	txtUploadUserName: "Upload Username",
	pasUploadPassword: "Upload Password",
	chkUploadLog: "do Logging in UploadLog (default: true)",
	txtUploadLogMaxLine: "Maximum of lines in UploadLog (default: 10)"
});

// Options Initializations
bidix.initOption('txtUploadStoreUrl','');
bidix.initOption('txtUploadFilename','');
bidix.initOption('txtUploadDir','');
bidix.initOption('txtUploadBackupDir','');
bidix.initOption('txtUploadUserName','');
bidix.initOption('pasUploadPassword','');
bidix.initOption('chkUploadLog',true);
bidix.initOption('txtUploadLogMaxLine','10');


// Backstage
merge(config.tasks,{
	uploadOptions: {text: "upload", tooltip: "Change UploadOptions and Upload", content: '&lt;&lt;uploadOptions&gt;&gt;'}
});
config.backstageTasks.push("uploadOptions");


//}}}

</pre>
</div>
<div title="Use Case Diagram" modifier="YourName" created="201310211011" modified="202309071109" tags="Concept Content TODO" changecount="1" server.title="Use Case Diagram" server.page.revision="201310212140" server.etag='"acarvalho_public/Use%20Case%20Diagram/1471753:c212759f2cc10569e69d8c369613c5daae09e6e3"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="004cc9422f2a6595956f3e7f5f3d4cb55f9388ff">
<pre>Use Case diagrams may be done in a structured or unstructured way. We will focus here in the unstructured way as it is simpler and more adequate to the Inception phases of the projects.
Use Case diagrams shall be considered alongside with [[Data Flow Diagram]]s but from the perspective of identifying the user interactions with the system, that is, the functionalities that the system offers to its users. While we are focusing on data flows to and from our system in [[DFD]]s, on Use Cases we focus on functionality blocks the user expects to use. Its an exploring and validation tool that is easily understood by non technical stakeholders, hence its usefulness on inception stages. They are also an aid in determining the screens we need to prototype and the roles the application will need.


TODO: add example, describe usage

!!References
* Ryan Languay, Nika Prairie, Jörg Kienzle, “[[Concern-Oriented Use Cases|https://www.jot.fm/contents/issue_2023_02/article13.html]]”, Journal of Object Technology, Volume 22, no. 2 (July 2023), pp. 2:1-14, doi:10.5381/jot.2023.22.2.a13. - Interesting proposal with reuse considerations

----
See also : [[Data Flow Diagram]]
----
@@color:#c4d6ed; ^^
Description: Use Case concept, usage and references
^^@@</pre>
</div>
<div title="Validation" modifier="YourName" created="201302142132" modified="202007171723" tags="Concept Content" server.title="Validation" server.page.revision="201412081343" server.etag='"acarvalho_public/Validation/1992065:7829b37bb3c1b34970d57a7fad094a52ce37ec5c"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="52153e8b670be9e92d3938c25644407202efbccb" changecount="1">
<pre>Validation &amp; [[Verification]] (V&amp;V) in software are the quality processes to assure that as system fulfils its intended purpose and performs as specified.
Validation is oriented to assure that "''we are building the right thing''". Verification gears towards assuring that "''we built it right''".

A very important quality attribute of any specification is its validation ability, that is, the degree to which it allows validation from your Customer and peers. This is achieved, mainly, through structure, context and clearness.  See [[Writing Good Requirements]] for more information.

Validation ability is an essential quality attribute of a [[Technical Proposal|Technical Proposal Production Guidelines]]. The ability you provide to your (prospective) Customer of judging the fitness of your understanding of his problem and the solution you propose to it is what will set you proposal apart from the rest.

Validation is also an essential step on other specification stages to prevent expensive mistakes and misunderstandings, that's why you want all of your specifications reviewed and approved by your Customer before you start developing.

//[[GUIDELINES FOR VERIFYING AND VALIDATING SOFTWARE REQUIREMENTS AND DESIGN SPECIFICATIONS|https://web.archive.org/web/20180721205319/http://csse.usc.edu/TECHRPTS/1979/usccse79-501/usccse79-501.pdf]]//
[[Barry W. Boehm|https://en.m.wikipedia.org/wiki/Barry_W._Boehm]]

----
@@color:#c4d6ed; ^^
Description: Software Validation concept
^^@@</pre>
</div>
<div title="ViewTemplate" modifier="AndreCarvalho" created="201304161624" modified="201602262135" _hash="6f694e7d98aa1415812aec724e5cff2e124fa1c1" changecount="1">
<pre>&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div macro="view title replyLink"&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;

</pre>
</div>
<div title="Writing Good Requirements" modifier="acarvalho" created="201302142102" modified="201602141805" tags="Content Guideline Requirements TODO" server.title="Writing Good Requirements" server.page.revision="201602141805" server.etag='"acarvalho_public/Writing%20Good%20Requirements/2468003:98986045aa26dd1540bf77f052f11fed12210601"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="c3c68a2789749582e9dac49dbbdc0ab65cb25317">
<pre>{{tw_ttoc{}}}
!Why writing good requirements is important
A good, validated, requirements catalogue is what assures your solution will meet Customer's expectations and Project Management's deadlines. 

&lt;&lt;quote 'Frederick P. Brooks on analysis relevance' 'Frederick P. Brooks on analysis relevance' 'open'&gt;&gt;

&lt;&lt;quote 'Mannion and Keepence on requirements effort' 'Mannion and Keepence on requirements effort' 'open'&gt;&gt;

I learned that ''you may build a bad solution over a good specification but you will never build a good solution over a bad specification''. [[Validation]] by the stakeholders plays a fundamental role in assuring you have a good specification this, however, requires that the stakeholders indeed read the proposed specification and, more, that they understand it, in order to provide valuable feed-back that you can use to improve it. "Garbage in - garbage out" processes are just a way to postpone problems to development or, worst, to acceptance.

Specification is a Software Engineering process just like coding, it can, and many times will, be late. Acknowledge it and act accordingly. Project Management will press you to "deliver something" to meet the deadline. They don't believe anyone will really read the specification anyway. This is the worst mistake, even if nobody else reads the specification, you did, and that is a very important success factor. ''Projects shall be late at their beginning, while you still can do something about it, not at their end.'' 
I also learned that ''stress at the beginning is motivation, at the end is  despair''. 

One very important aspect is that [[Requirements Specification|Software Requirements Specification Guidelines]] is a step in a process and is, definitely, not the first one. To be able to produce a good requirements specification you must have previous work done at [[RFP Analysis|RFP Analysis Guidelines]] and [[Technical Proposal|Technical Proposal Production Guidelines]]. Without this previous work, or if you disregard it, you will, most of the times, be engulfed in a scope and out of context detail nightmare and will, probably, build a very poor system.

!Anatomy of a requirement
A &lt;&lt;quote 'Software Requirement' 'Software Requirement'&gt;&gt; is composed of several parts, each one fulfilling specific goals. It is important to consider all these parts on each and every requirement you write.
!!Context
A requirement shall be as simple and short as possible therefore establishing a proper context for its statement is essential. 

&lt;&lt;Image "FR" "640" "Requirements_00.JPG" "https://dl.dropbox.com/" "s/xaxxtkwzahyfimk/" "?dl=1" "Package notes as context for requirements."&gt;&gt;
In [[EA|Sparx Enterprise Architect]] the first natural context provider is the Package element. Packages structure and group Requirements but they also provide a textual note where you shall describe the intent and the vision where the enclosed requirements fit. The purpose is to avoid having to repeat context information on each and every requirement. Here you can explain and guide your reader to allow him to perform a true [[Validation]] of the requirements. A good context provides a way to assure your reader understands the requirements and, more, understands them the same way you do : __this is crucial to avoid ambiguity__.

Other context providers are the [[traceability|Traceability]] relationships to &lt;&lt;quote 'Proposed Features' 'Feature'&gt;&gt;. You shall establish the scope of each topic in specification by identifying the related features it responds to. The Customer shall be able to clearly identify which features (requested and proposed) the requirements respond to in order to understand their impact, trade-offs and practical significance.
!!Title
Title is a very important part of a requirement. First it is the only visible part when you look at a requirements diagram, second it acts as a table of content and as a secondary structure by grouping and sorting the requirements, third, but not less important, it provides context and focus for the requirement statement. This last characteristic is the most important in what concerns validability of the requirement. The title is intended to define a clear scope and determine an unambiguous point of view for the statement, effectively leading the reader towards a common comprehension of the requirement statement.

&lt;&lt;Image "FR" "640" "Requirements_01.JPG" "https://dl.dropbox.com/" "s/qv9xohgby8anog7/" "?dl=1" "Structure, traceability and title as context providers for requirements."&gt;&gt;
A requirement's title is also very useful in assuring the requirement is &lt;&lt;quote 'specific' 'SMART Requirements'&gt;&gt; as it shall be short and direct and establish precisely what the statement is about. A short title for a specific statement is easier than for a complex, multi-targeted statement. As a rule of thumb, if you can not find a proper short title for your requirement then its statement is too complex and not specific.

A very good way of preparing and conducting a requirements specification meeting with the stakeholders is to produce a package structure and a set of requirements with just titles and use them as a topic roadmap and check list during the meeting. Better yet, you shall also identify the [[Proposed Features|Feature]] each requirement is addressing.

A requirement title shall be divided in two parts : Numbering and Name.
An example of a requirement title is : ''~SR-10.10.010 - Authentication''
!!!Numbering
Numbering is essential to make the requirement's reference unequivocal. We suggest that you use hierarchical numbering as it eases referencing and locating requirements in [[EA|Sparx Enterprise Architect]] in a great extent.
Numbering shall follow the format :
''{Prefix}-{Hierarchy Numbers}.{Requirement Number}'' - {Requirement Name}
*''Prefix'' shall be ''SR'' for Software Requirements
*''Hierarchy Numbers'' shall reflect package hierarchical placement of the requirement.
*''Requirement Number'' shall be a sequential, unique (in the hierarchy), gaped and zero padded number that, apart from uniquely identifying the requirement also assures its sort order in [[EA|Sparx Enterprise Architect]]'s Project Browser and generated documentation.
Numbering shall use gap numbering (10 steps) in order to ease renumbering and "in between" insertion.
Take notice that, after the first release of the specification for the stakeholders you shall not modify any requirement's number.
!!!Name

&lt;&lt;Image "FR" "" "Requirements_02.JPG" "https://dl.dropbox.com/" "s/alwsr88cd6cjbkg/" "?dl=1" "Document generated from the above structure"&gt;&gt;
The name of the requirement is the first thing your reader reads. It will condition and orient his understanding of the statement and focus its scope. Name is the subject of the statement and you shall use it to check if the statement is, or not, [[specific|SMART Requirements]]. If your statement says much more than the name's subject covers then you shall split your statement in several requirements.


The name may also be used to produce sub-grouping in the requirements, for instance you may use :
''~SR-10.10.020 - Login'' and ''~SR-10.10.030 - Login - Intrusion detection'' to group several related requirements without having to create too many sub-packages. Be sure to not abuse this technique, if you have several closely related requirements it is probably better to group them in a dedicated package.


Sub-grouping also leads us to another important topic : ''structure'' and ''order''. Do not forget that the validatable item for stakeholders will be a document. As in any other document, structure and sequence play a decisive role in readability. A clean, well structured and with proper sequence document promotes understanding and validation.

Think of names as topics in a table of content, this will help in preparing and conducting requirements specification meetings with the stakeholders. With time and experience you will also build a kind of standard template or check list of topics, in each common subject, that can be improved from project to project and that will greatly improve completeness of your specifications. You will be surprised with how much you can reuse from one project to another.





!!Statement
The fundamental reference for requirement's statement writing is &lt;&lt;quote 'SMART Requirements' 'SMART Requirements'&gt;&gt; by &lt;&lt;BibRef "Mannion,Keepence 1995"&gt;&gt;. Be sure to read it before anything else, it is a short, very well written paper that any practitioner should know.

A good starting guide for requirement statement expression may be found at &lt;&lt;quote 'Requirements Boilerplates' 'Requirement Boilerplate'&gt;&gt;. 

There are many guidelines for quality requirements. Experience will give you the main ones, the next topics, however, shall always be considered when writing requirements.
* keep it short and direct
** the reader must be able to remember the beginning of the statement when reading its end
** the statement's content must be contained in the title's subject
** use imperative mood
** remember context shall be established on package not on requirement's statement
* respect atomicity
** don't say two things that can change autonomously in the same requirement
** check that you can always answer in a Boolean manner to the question about if the system respects the requirement
** do not cross-relate requirements, this will lead to a status and dependency nightmare. Use Packages for aggregation of interdependent requirements and always evaluate a requirement in the context of its Package and sibling requirements.
* use proper vocabulary and be consistent
** use, and, when needed, establish, business concepts
** beware of synonymy traps (you are in a specific business context)
** build a complete glossary (business and technical)
* don't repeat yourself
** do not repeat statements in different requirements (that's the context's job)
* trace your requirements
** trace each and every requirement to your contractual proposal
** the ones you can not trace are inception mistakes or change requests

As with any other guideline take these with intelligence and consideration. For instance the example requirement ~SR-10.10.030 above could have been split in three different requirements but would that be more readable or maintainable?

The statement of a requirement does not have to be text only. You can use auxiliary diagrams enclosed in the statement if they help to understand it. A [[State Chart Diagram]] or a [[GUI mockup]] may be extremely useful to increase requirement understandability and [[validability|Validation]]. See [[EA Usage - User Interface diagram]] guideline for more details.

!!Other attributes
[[EA|Sparx Enterprise Architect]] provides many other attributes for requirement element and you shall take advantage of some of them :
* [[Status|EA Usage - Attribute Status]] : is a list of states that can be used to classify a requirement as Draft, Proposed, Validated, Implemented, Tested, etc.
* [[Dificulty|EA Usage - Attribute Difficulty]] : The difficulty attribute shall be used to identify areas (features, requirements, modules) that present major challenges to the project.
* [[Priority|EA Usage - Attribute Priority]] : shall be used to distinguish essential, required and nice-to-have elements (must, shall and nice-to-have).
* [[Type|EA Usage - Attribute Type]] : shall be used to denote an appropriate typology for each element.
* [[Version|EA Usage - Attribute Version]] : shall be used to denote changes to requirement after it is validated by stakeholders.
* [[Phase|EA Usage - Attribute Phase]] : can be used to define a staged delivery of the project

!Requirements Specification
Requirements Specification is an engineering process like any other. This means that, professionally, it shall be performed by a team where there are defined roles and that follows a defined process with the proper techniques and tools.

!!The Requirements Team
The team part of the above statement is very important. Requirements gathering is a very stressful task with huge amounts of information, not always coherent, that is obtained in a disperse and, many times, unstructured way. A single person can never grasp that volume of information alone. Requirements gathering shall always be performed by, at least, a two persons team. And I mean two analysts, not a PM and an analyst. This is an essential factor for correctness, completeness and readability of a Requirements Specification. It is also the best way to promote maturity in your company as these teams shall be composed by a more senior analyst and a more junior one.
Also one of the more common problems in requirements is ambiguity and there is no better weapon against it than a discussed, shared and agreed expression and this means that the requirement expression shall be produced, not only reviewed, by more than one person.

!!The Requirements Gathering Process
!!!Preparation
The Requirements Process involves Customer interaction and access to scarce resources (the Customer's experts) and, as such, it shall be planed and prepared with all the care possible to not waste opportunities and to optimize each and every interaction.

Remember that, during Requirements Specification you must also protect the proposed scope in order to keep focus and not risk project's success. To do this you must prepare the list of subjects to address in each meeting and with each stakeholder. A good way of doing this is by creating a specification structure (Packages in EA) to address each subject of the Proposed Features. The [[Technical Proposal|Technical Proposal Production Guidelines]] shall be your initial roadmap, although you'll need to add more detail and refinement to its structure and, probably, add some more technical subjects not explicitly on the Proposal, you must remember that scope was established on Proposal and shall not be modified on Requirements without a formal Change Procedure.

Start by creating your package structure (an evolution of the one in your Proposal, don't worry, you will refactor it more than a couple of times during this phase), then drag your Proposed Features to it and start asking yourself : "What information will I need to develop this Feature?". Create a Software Requirement with only a title for each one of your questions or answers and [[trace|Traceability]] it to the correspondent Proposed Feature. 
On a second iteration try to add some content to the proposed requirements you have. This content is your preliminary view and shall be confirmed or refuted by the stakeholders but will serve as a starting point and checklist. This is also a very good time to access reusable requirements sets, or even solutions, that you may have.

Depending on the size of the project this phase shall take from some days to some weeks. Be careful to not take too much time without validating your view with the Customer, you may be completely wrong. But also consider that jumping directly to stakeholder interview at the beginning of a project without proper preparation is foolish and involves the risk of loosing control of the specification process and project's scope as well as Customer's respect.

Again, remember this shall be a team effort and that this is extremely difficult to perform alone as most of the information shall be obtained, clarified and detailed in a dialog process inside the team. 

After some iterations and lots of brainstorming you shall have a fairly decent structure of topics to be addressed and also some insight on which stakeholders you need to interview for each subject. Build an interview plan, with detailed schedule, and propose it to the Customer remember to include Interview and Consolidation time. After obtaining agreement on the schedule prepare meeting invites with detailed explanation of the subjects to be addressed, also include all information requests (Customer's documents, other systems specifications, etc.) you can anticipate you will need. This will allow the stakeholders to prepare themselves (possibly aligning their own team views and gathering needed information) prior to the meeting and make this one much more effective. Be prepared to face some stakeholders that  will not prepare the meeting. That's life and they are the Customer...

!!!Interview
Interview time shall not go on for more than 4 hours a day. In my experience, more than this is a waste of time and jeopardizes consolidation efforts.
When you have to travel to Customer's premises, your management will pressure to do all the interviews in the shortest time possible and then return home and consolidate. This is a severe mistake, you will loose half of the information gathered and will be sure of none.

Start the interview by explaining your methodology and its goals then ask the stakeholders to briefly address their view of the subject to handle. Be ready to adjust, on the fly, the structure and information you prepared. Then start, on a topic by topic approach, to detail, validate and complete your prepared information. When you reach a statement on a subject be sure to clearly state it for all the attendees to understand and validate.

Be sure to update and correct your Glossary in every opportunity. Every time a new concept emerges don't be afraid to ask what it means and record its meaning.

I prefer to record most of the information in my [[CASE]] tool directly (it offers a lot of functionality like relationship, state, atomic elements, etc. that help the recording process) but you may use other methods if you want. The point here is to effectively and completely record the information. Don't waste time in giving it a final form, you will have Consolidation for that, but also do not postpone important issues and make sure you understand the stakeholders point. Your questions are not dumb nor are the Customer's representatives, they are experts in their fields and they understand that you are not, and most people likes to teach things they are good at. Show that you are good at learning and that you preserve the information they give you and you will earn their respect. That's the first step for project's success.

!!!Consolidation
Consolidation means to structure, persist, normalize, disambiguate, discuss, understand and establish the requirements.

After stakeholder interview a consolidation meeting within the analysis team is essential. These meetings shall take place as soon as possible after the interview and shall persist the information gathered in the requirements tool. The consolidation meeting shall take, at least, as many time as the interview, most of the times it will take more. You shall review the statements expression and complement them with auxiliary diagrams (a business process, an improved [[DFD|Data Flow Diagram]] or a [[GUI mockup]] for instance). You shall also take the time to make the requirements [[SMART|SMART Requirements]] and to assure they are coherent in the full system.

As soon as possible after the consolidation meeting, its results, in a draft form, shall be informally [[validated|Validation]] with the stakeholders from the interview. The subject will be fresh in their minds and they can immediately correct any errors or omissions on your interpretation. Also the information volume will be more manageable in small chunks of 10 pages than when you only present a final 200 pages document that nobody has the time, or will, to fully and deeply validate. This will assure an informal preliminary acceptance of the analysis team view and also assure you are preventing rolling errors. It is also very important in aligning expectations when you have to compatibilize different views of the system from different stakeholders.

!!!Review
A peer review is essential in any professionally produced product. It is even more important in Requirements Specification. But not less important is Customer validation of the proposed specification. For this to happen your specification must be readable. If it is not, you'll get a "postponed agreement" that, you may be sure, will get on you as soon as anything goes wrong and, as soon as it starts, rest assured it will not stop and you'll be in "scope hell" and will spend most of your time discussing, justifying and arguing about scope.

!The analyst role
Finally you should always take good notice on what says &lt;&lt;quote 'Tom DeMarco on the Software Analyst role' 'Tom DeMarco on the Software Analyst role' 'open'&gt;&gt;

----
See also : [[Software Requirement]] [[SMART Requirements]] [[EA Usage - Requirements Diagram]]
----
&lt;&lt;TiddlerToC min-entries:1&gt;&gt;
@@color:#c4d6ed; ^^
Description: Writing Good Requirements guideline
^^@@</pre>
</div>
<div title="easyFormat" modifier="acarvalho" created="201401171122" modified="201401171122" tags="systemConfig" server.title="easyFormat" server.page.revision="201401171122" server.etag='"acarvalho_public/easyFormat/1626900:905c7f5d8842664b759c4fd2123b9082ab1697e5"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="" _hash="b26e2e9121f936ab312425ad8751b894b51e469d">
<pre>/***
|!''Name:''|!easyFormat|
|''Description:''|the format command format selection according to your choice|
|''Version:''|0.1.0|
|''Date:''|13/01/2007|
|''Source:''|[[TWkd|http://yann.perrin.googlepages.com/twkd.html#easyFormat]]|
|''Author:''|[[Yann Perrin|YannPerrin]]|
|''License:''|[[BSD open source license]]|
|''~CoreVersion:''|2.x|
|''Browser:''|Firefox 1.0.4+; Firefox 1.5; InternetExplorer 6.0|
|''Requires:''|@@color:red;''[[E.A.S.E]]''@@|
***/
//{{{
config.commands.format = new TWkd.Ease('Format','format selection accordingly to chosen mode');
config.commands.format.addMode({
 name:'Bold',
 tooltip:'turns selection into bold text',
 operation:function(){
 config.commands.format.putInPlace("''"+TWkd.context.selection.content+"''",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Italic',
 tooltip:'turns selection into italic text',
 operation:function(){
 config.commands.format.putInPlace("//"+TWkd.context.selection.content+"//",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Underlined',
 tooltip:'turns selection into underlined text',
 operation:function(){
 config.commands.format.putInPlace("__"+TWkd.context.selection.content+"__",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Strikethrough',
 tooltip:'turns selection into striked text',
 operation:function(){
 config.commands.format.putInPlace("--"+TWkd.context.selection.content+"--",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Superscript',
 tooltip:'turns selection into superscript',
 operation:function(){
 config.commands.format.putInPlace("^^"+TWkd.context.selection.content+"^^",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Subscript',
 tooltip:'turns selection into subscript',
 operation:function(){
 config.commands.format.putInPlace("~~"+TWkd.context.selection.content+"~~",TWkd.context.selection);
 }
});
config.commands.format.addMode({
 name:'Highlight',
 tooltip:'highlight selection',
 operation:function(){
 config.commands.format.putInPlace("@@"+TWkd.context.selection.content+"@@",TWkd.context.selection);
 }
});
//}}}</pre>
</div>
<div title="easyInsert" modifier="AndreCarvalho" created="201401171122" modified="201702101050" tags="systemConfig" _hash="41e319ae48ee63adb2a0d285b9386d01546e71dc" changecount="1">
<pre>/***
|!''Name:''|!easyInsert|
|''Description:''|insert text template at caret position|
|''Version:''|0.0.4|
|''Date:''|10/02/2017|
|''Source:''|[[easyInsert|http://acarvalho.tiddlyspot.com/#easyInsert]]|
|''Author:''|André de Carvalho|
|''License:''|[[BSD open source license]]|
|''~CoreVersion:''|2.x|
|''Browser:''|Firefox 1.0.4+; Firefox 1.5; InternetExplorer 6.0|
|''Requires:''|@@color:red;''[[E.A.S.E]]''@@|

!!History
''0.0.4 10/02/2017 : Added insert file reference''
''0.0.3 02/02/2017 : corrected image parameters''
''0.0.2 19/05/2013''

***/
//{{{
config.commands.insert = new TWkd.Ease('Insert','insert template text at caret position');
config.commands.insert.addMode({
 name:'Image',
 tooltip:'image template',
 operation:function(){
config.commands.format.putInPlace(""+TWkd.context.selection.content+"&lt;&lt;Image \"FR\" \"320\" \"filename\" \".\" \"\\filepath\\\"&gt;&gt;",TWkd.context.selection);
 }
});
config.commands.insert.addMode({
 name:'Image with caption',
 tooltip:'image with caption template',
 operation:function(){
config.commands.format.putInPlace(""+TWkd.context.selection.content+"&lt;&lt;Image \"FR\" \"320\" \"filename\" \".\" \"\\filepath\\\" \"\" \"caption\"&gt;&gt;",TWkd.context.selection);
 }
});
config.commands.insert.addMode({
 name:'Bib reference',
 tooltip:'bibliographical reference template',
 operation:function(){
config.commands.format.putInPlace(""+TWkd.context.selection.content+"&lt;&lt;BibRef \"reference\"&gt;&gt;",TWkd.context.selection);
 }
});
config.commands.insert.addMode({
 name:'Popnote',
 tooltip:'selection to inline popnote',
 operation:function(){
config.commands.format.putInPlace("&lt;&lt;quote \'"+TWkd.context.selection.content+"\' \'targettiddler\'&gt;&gt;",TWkd.context.selection);
 }
});
config.commands.insert.addMode({
 name:'File reference',
 tooltip:'Local relative file reference',
 operation:function(){
config.commands.format.putInPlace("[["+TWkd.context.selection.content+"|file:.\\]]",TWkd.context.selection);
 }
});

//}}}</pre>
</div>
<div title="favicon.ico" modifier="YourName" created="201206131739" modified="202103251746" changecount="2" server.title="shiplogoC.gif" server.page.revision="201206131825" server.etag='"acarvalho_public/shiplogoC.gif/745305:fecc5c32f2a8201382949cfb794c16f82985a977"' server.workspace="bags/acarvalho_public" server.type="file" server.host="http://acarvalho.tiddlyspace.com" server.recipe="acarvalho_public" server.bag="acarvalho_public" server.permissions="read" server.content-type="image/gif" _hash="bcd89d20f05499713206f7df15cca1cea1b28748">
<pre>R0lGODlhUABQAPcAAAAAAIx7LWRbOczMZiEcMdPR00xmjJGImxcYGI5vhcTExkZkfjFJR1mCoaCaP0RbZJiosT4/NhEIB/foTWWRpXN1jUpMZuDVz4ptcTMfIaGFi/Pw6WtefnVfaoJsOoyanwEIB1hCNVuQtLuiRFxIQO/idkIrMp2yy//5hJeHX66loaCYiHSElEJbWVZnijozGHNsfh8bImJdaGFOZ+DVTD0+W5GCeubf3VVzg7+2aEJOWniMoRcPH419Tr27n1dFaZ2hbHpoVjMzM4Okwfj09GRQW4NrjK6mgX1tZldDV5SDi0lIUaCUpf/2Ul9kelBwlMO7v4t8dNPGx6einz47TIBohLCFi1tLUxAOD2uDk21dQEY3LHJqVP32dSgfIqqerb6xVufceLWgjDYfKZV3fiQYC21Xc4FibVNOQsrIbVJASJmFO2xWcnBffk4pN7W1mV2JrbOnSFNdbIJ2SpChsNzV1wkBCJaHspiLU21dVn1wjebi5mR7in+DWLy2tjc5Qx0oPreuvoaJlzApOszMzIp5k5uOaFVRZaGOYPDlbW6euCIaGNqQl+bcanNxh0tQPkU/U4OEkPj28U1slLFwcoR8k4Z8cjoeG3pRYmRPM46FlqmhcGZmZgcQCxoQD29nQXFvbXVgOyktJntrR1tCQv///2R3hHt8X9vMWFxrfPjxdsimtVN4n8qzRZFbQbSmo0lBTXpigXB7mZ+bkf//ZnBLUWeDnZmDTc6KkK2nXh4gIs/MvzovK/Drw09nhce6ZiknPBQQCWNbU5CQnTkoK359gauNm7awrufaZX52VwkCAO3k6d3Oz1SErIOxxUYtQU9QKmpjciIRGm6MnVAtQJmZmVBOWDUzP6CKkFx0jX+Uq6+usggICNnLap5Waox6jWdza9/d38q9Wkk6OmWbuoloeVlaTJ6crMG3saCRf3uGnFdQbmmDi7euYiQlF1tXb1VNUraYUmFGTKWjrkhohjAqHmN9kkA9Qcqysu/u7ykpMmyZr6yilVVsjJKUrP///yH5BAUUAP8ALAAAAABQAFAAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKPAmBHaRo4Nqc4RTuw8yHRNT5YyKo6IFvSL99ERSJKZSfChPoQVqoaKVYWKtUKWTESKVI+aAahCKlgzFNmgo5csSBw6G3ZszMmPFtGBQ/YgfmI6XhnB497GC0MbPuHQcz7yzos2PHixklVwrk/WfJDDZNf9uyGYTFBBsj0YBhAQECAJZrsa7kfUVtmKZYemKxaeMFgDRiXgYN4mFCHxY7AACoYRMFajg15ZhcjWWGQ6x799TUDo4lgxcs3LgBWJTgCt6ZoK58/6lUqYqZNm3uxarCCziA7MGDa89QBAaaZTKhbOlLHmuhJQCQEoMy72Vn4IHSYAHLGcbEJAkXpPjBQiUVcGCEDFgsQop8B3ZooAmxKBHTMhFEQkcFlcCQGgIAeCEDN9h56OEYzyBxA0z8mBDIhJVwwEYwAMTwzD0wytghAJ5wQ8oqMGVyhj9oVdKGCQBIgMkZBxZ4YIwGAjDGKvmEc8MyRKiUTwavfIAWC7HU40kZpGyopZEdSuMHNtbkYcM8Kq0wjh+uoWVEElvUI4EnHNLZIRYK2CCHL77IUYE2NohhEhcYzKNJJXrMQEUSmFCTqKLcECgfKB3YAsckvhjwhBPFQP9QzQUFECKZR5KQ8MUBaF0BnDRJUKMdqQYKoctoVZpgyzR8ZLEPHNAugAAZH7BQARQK4CcREURIIkk++WwA7hHjHFPIAdjUEx+MXJKqTAVZyMEAAgiYkIo99piSBR8NNLMDFhYo8oQvk+iDi0Q3+PDKJpbkEcQc5twTQgjzVDMMGZ6AoN2o7joyxD4U4JuKDteok00D9hgwyTTcWCBCNjjAocvBDkHxhg9AJJPHKCGQEEQQwnASgjzzDHMOEhKAgN2cdMYIQCpwTDPNEIpkgcMiTjSQCiuswGELNw+IYA875MTAyEKlhLMLIX30wcUoyWCQThQr+IHOMXVwIc8xB8z/A4p2SpuABdMyxpeKIvZkwQIffOzDgD4PmFADPct2YoHXOwyhCyU3bIDQHrus8EkyoxyBRBSeH4RGHscYXQw3niyyiDCdvEc4fKbpoos1jE+DrykN4OBJBvpcQ8Uh4GBxSCpyOMKCLrXYgE0d4aQuUD6GzLHJHHOks0E4eyQUASZ8H2CMF1vkwc0ipL43yDoV7KCPNEJE8wQrwKeyyCH99C+HENyAhw7oFQMscMAXM1gHDPhRpn/4QBiIcEAodnEBbSkkD7U4xwEO8AUYeCEC0pDA7QYHAH0cYlKygAQWPHGoa2RjGg2QQwwi4QILMOAaIsRdcNYxCRZwzRSceIUP//rggUasYQyEcEgySKDBYQyjGFhAgBcQZSQAXAMGslCHE3gAAAIC4g9qsAc5WoCFJcTAPcEJxiK2oAVoKOMHiqDDPugBiBhQIhMeUIUq5qCFdNShAAqoww3CdxB+hOAcmjhHJEQBgAyIgk4AAAYLtJGNSSQBC9XxghxYMYlr3GMHC4iPMmDnjlCsYQSo6AIqggGJVFjjD4vwghqsQApXJKIb3UBGO1LAhRAkwxI2GNMelhGWgYxjHn2LxOAQQIzbcQMYtrAFH1KxAFPYAxaXcELKVKaPJPAhOO4IwClRMYEmmLMJrQiGgZThBSWQSQGgmAMYVNEFZAzgF+3YxCnmkP+CDswgCDa41T+E8IptGNQLXmCMHYrUJX1oQxv9kIMcqACLaXDgHXzwBQcq0I8FjEENAKhHKyZQTnPSIhEOCMALSoOkM6DDggrARhRSgIdudEEVJehGDsAABkTg4RajyMMs+PEGXhQhEsWoBjCecQV9sHRjwbnGCT6QChc4gR7XgIUL+kcPF2TDAM14AKKg0QVaNIEGIwiAB6BRBhECgBhomMINSlGQUihSGIbIhTjCUAKcluCvYcjFHHqAiFzcQgtROIUlYAELG8gAAb8BgB0giwBd1IAKg6iBE+DwB2U9wRT9M4DKcECaeuQiDmuAxgugGpwxaOACC9lGMfLQg1//pAGXuG1EIxKRiC70tgRh6MYvcpCLXCAiGT0IBTQ+YYgUAOET7khSMMYBjwzcgw9y0AEkIIHZa+jDQJhkbYEA4I2GEGEPdYBBHgSAiBzgFhWoQEYikIEK3iaiEapAAQr0qN/99le/YcjBKbSQAU94ApOQxYIyTGUaHRaIXjlkBkQKEIhjULAXvTgCEJ7LXEMgYg6mjANPeZqDX9g2DShux07jkYxHeEECg5NGKpj3gBpbIxWM3Bg3xgCPDsg2OMKgq0UU4Ac/COIbgQjEK64wiCgEYWJBKEMM6kHlF1gZoWXIcicS3KIhnOAEzgizM07ASADoIg/FMIYCbhQOYeRh/xdC7gie/HGHIhBAVPHJs57lQ0IdcMAJpjgZHNjBUnk0cCCgO7RHlsGFJdBhCuPYzjg0Riz4ZMe6VICEE+6hDCxIwworQYcJqDAPFVgDALxQWqVxlw4FHAMJSCAGMfJABuulRAXwKEKF76HgYVUaAFeQxD9KwYxdTOEYzLB1SkqBjgwkwQ8qKEIz6eXMLnkCH5MpxhjacA58RIIHuCENpY0kj8n8Ix9KGMMhmLANTmRANwgAjpG2IGFzS8IS47jiNiLAjVkLYRF7DhC2zS2QG/ADFDKAAYDckIAl1AMLPBicBHgBD3zEmeD/IMIrzNABNZznGu54xjvyMI48iKGYGC03yDG+EZhnGFUJ2HhFymdO85rb/OY4z7nOd87znvv850APutCHTvSiG90gAQEAOw==</pre>
</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->
<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[
//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */
//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

// Adaptors
config.adaptors = {};
config.defaultAdaptor = null;

// Backstage tasks
config.tasks = {};

// Annotations
config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

// Messages
config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkIncrementalSearch: true,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	chkDisplayInstrumentation: false,
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30",
	txtFileSystemCharSet: "UTF-8",
	txtTheme: ""
	};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

// Backstage tasks
config.backstageTasks = ["save","sync","importTask","tweak","upgrade","plugins"];

// Extensions
config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {defaultView: "text"},
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "http://tiddlywiki-releases.tiddlyspace.com/upgrade",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {type: "popup"},
	jump: {type: "popup"},
	syncing: {type: "popup"},
	fields: {type: "popup"}
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern = "(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	ieVersion: /MSIE (\d.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isChrome: config.userAgent.indexOf('chrome') > -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs,{
	browsers: [
		function() {return config.browser.isIE;},
		function() {return true;}
		],
	codes: {
		downTriangle: ["\u25BC","\u25BE"],
		downArrow: ["\u2193","\u2193"],
		bentArrowLeft: ["\u2190","\u21A9"],
		bentArrowRight: ["\u2192","\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.tasks,{
	save: {text: "save", tooltip: "Save your changes to this TiddlyWiki"},
	sync: {text: "sync", tooltip: "Synchronise changes with other TiddlyWiki files and servers", content: '<<sync>>'},
	importTask: {text: "import", tooltip: "Import tiddlers and plugins from other TiddlyWiki files and servers", content: '<<importTiddlers>>'},
	tweak: {text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>'},
	upgrade: {text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>'},
	plugins: {text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>'}
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc,{
	txtUserName: "Username for signing your edits",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkAnimate: "Enable animations",
	chkSaveBackups: "Keep backup file when saving changes",
	chkAutoSave: "Automatically save changes",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkOpenInNewWindow: "Open external links in a new window",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	txtBackupFolder: "Name of folder to use for backups",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	txtTheme: "Name of the theme to use",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.backstage = {
	open: {text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks"},
	close: {text: "close", tooltip: "Close the backstage area"},
	prompt: "backstage: ",
	decal: {
		edit: {text: "edit", tooltip: "Edit the tiddler '%0'"}
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = ["st","nd","rd","th","th","th","th","th","th","th",
		"th","th","th","th","th","th","th","th","th","th",
		"st","nd","rd","th","th","th","th","th","th","th",
		"st"];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup,{
	});

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.messages,{
	sizeTemplates:
		[
		{unit: 1024*1024*1024, template: "%0\u00a0GB"},
		{unit: 1024*1024, template: "%0\u00a0MB"},
		{unit: 1024, template: "%0\u00a0KB"},
		{unit: 1, template: "%0\u00a0B"}
		]});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.options,{
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'}
			]}
	});

merge(config.macros.plugins,{
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]},
	listViewTemplateReadOnly: {
		columns: [
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]}
	});

merge(config.macros.toolbar,{
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	errorGettingTiddlerListHttp404: "Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.",
	errorGettingTiddlerListHttp: "Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled",
	errorGettingTiddlerListFile: "Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\nThis tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			]}
	});

merge(config.macros.upgrade,{
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
	});

merge(config.macros.sync,{
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Server Type', field: 'serverType', title: "Server type", type: 'String'},
			{name: 'Server Host', field: 'serverHost', title: "Server host", type: 'String'},
			{name: 'Server Workspace', field: 'serverWorkspace', title: "Server workspace", type: 'String'},
			{name: 'Status', field: 'status', title: "Synchronisation status", type: 'String'},
			{name: 'Server URL', field: 'serverUrl', title: "Server URL", text: "View", type: 'Link'}
			],
		rowClasses: [
			],
		buttons: [
			{caption: "Sync these tiddlers", name: 'sync'}
			]},
	wizardTitle: "Synchronize with external servers and files",
	step1Title: "Choose the tiddlers you want to synchronize",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	syncLabel: "sync",
	syncPrompt: "Sync these tiddlers",
	hasChanged: "Changed while unplugged",
	hasNotChanged: "Unchanged while unplugged",
	syncStatusList: {
		none: {text: "...", display:'none', className:'notChanged'},
		changedServer: {text: "Changed on server", display:null, className:'changedServer'},
		changedLocally: {text: "Changed while unplugged", display:null, className:'changedLocally'},
		changedBoth: {text: "Changed while unplugged and on server", display:null, className:'changedBoth'},
		notFound: {text: "Not found on server", display:null, className:'notFound'},
		putToServer: {text: "Saved update on server", display:null, className:'putToServer'},
		gotFromServer: {text: "Retrieved update from server", display:null, className:'gotFromServer'}
		}
	});

merge(config.macros.annotations,{
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.commands.syncing,{
	text: "syncing",
	tooltip: "Control synchronisation of this tiddler with a server or external file",
	currentlySyncing: "<div>Currently syncing via <span class='popupHighlight'>'%0'</span> to:</"+"div><div>host: <span class='popupHighlight'>%1</span></"+"div><div>workspace: <span class='popupHighlight'>%2</span></"+"div>", // Note escaping of closing <div> tag
	notCurrentlySyncing: "Not currently syncing",
	captionUnSync: "Stop synchronising this tiddler",
	chooseServer: "Synchronise this tiddler with another server:",
	currServerMarker: "\u25cf ",
	notCurrServerMarker: "  "});

merge(config.commands.fields,{
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{name: 'Field', field: 'field', title: "Field", type: 'String'},
			{name: 'Value', field: 'value', title: "Value", type: 'String'}
			],
		rowClasses: [
			],
		buttons: [
			]}});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
	});

merge(config.annotations,{
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "This tiddler is used to store configuration options for this TiddlyWiki document",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
	});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Whether to use the JavaSaver applet
var useJavaSaver = (config.browser.isSafari || config.browser.isOpera) && (document.location.toString().substr(0,4) != "http");

if(!window || !window.console) {
	console = {tiddlywiki:true,log:function(message) {displayMessage(message);}};
}

// Starting up
function main()
{
	var t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki({config:config});
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	var s;
	for(s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea","store",true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params,"onload");
	t4 = new Date();
	readOnly = (window.location.protocol == "file:") ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params,"onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	var m;
	for(m in config.macros) {
		if(config.macros[m].init)
			config.macros[m].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2-t1) + " ms");
		displayMessage("LoadFromDiv " + (t3-t2) + " ms");
		displayMessage("LoadPlugins " + (t5-t4) + " ms");
		displayMessage("Macro init " + (t7-t6) + " ms");
		displayMessage("Notify " + (t8-t7) + " ms");
		displayMessage("Restart " + (t9-t8) + " ms");
		displayMessage("Total: " + (t10-t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. All functions called conditionally since they themselves may have been unloaded.
function unload()
{
	if(window.checkUnsavedChanges)
		checkUnsavedChanges();
	if(window.scrubNodes)
		scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0,0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea","shadows",true);
	shadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	var i;
	for(i=0; i<nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n)
			map[n] = p;
		n = p.Source;
		if(n)
			map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done)
			return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			var i;
			for(i=0; i<reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i=0; i<nPlugins; i++)
		visit(installedPlugins[i]);
	for(i=0; i<toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","Requires","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0],10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1],10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2],10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	var p = null;
	if(window.location.hash) {
		p = decodeURIComponent(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
	}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	var i;
	for(i=1; i<params.length; i++) {
		var p = config.paramifiers[params[i].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[i].value);
		else {
			var h = config.optionHandlers[params[i].name.substr(0,3)];
			if(h && h.set instanceof Function)
				h.set(params[i].name,params[i].value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(v) {
		if(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))
			story.displayTiddler("bottom",v,null,false,null);
	}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
	}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
	}
};

config.paramifiers.tag = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers("[tag["+v+"]]"),null,false,null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;
		if(!readOnly) {
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);
			story.focusTiddler(title,"text");
			var i,tags = args.tag || [];
			for(i=0;i<tags.length;i++) {
				story.setTiddlerTag(title,tags[i],+1);
			}
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly) {
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
		}
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(v) {
		story.switchTheme(v);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent= {
	onstart: function(v) {
		var titles=[];
		var i,tiddlers=store.getTiddlers("modified","excludeLists").reverse();
		for(i=0; i<v && i<tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null,titles);
	}
};

config.paramifiers.filter = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers(v),null,false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	var n;
	this.formatters = [];
	var pattern = [];
	for(n=0; n<formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s,v;
			if(lookaheadMatch[1]) {
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
			} else {
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
			}
			if(s=="bgcolor")
				s = "backgroundColor";
			if(s=="float")
				s = "cssFloat";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		var t;
		for(t=0; t< styles.length; t++) {
			try {
				e.style[styles[t].style] = styles[t].value;
			} catch (ex) {
			}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE)
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1 || link.indexOf("#")!=-1) {
			return true;
		}
		return false;
	}

};

//--
//-- Standard formatters
//--

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},
	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table",null,"twtable");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		var onmouseover = function() {jQuery(this).addClass("hoverRow");};
		var onmouseout = function() {jQuery(this).removeClass("hoverRow");};
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k") {
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
			} else {
				if(nextRowType != currRowType) {
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
				}
				if(currRowType == "c") {
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
				} else {
					var theRow = createTiddlyElement(rowContainer,"tr",null,rowCount%2?"oddRow":"evenRow");
					theRow.onmouseover = onmouseover;
					theRow.onmouseout = onmouseout;
					this.rowHandler(w,theRow,prevColumns);
					rowCount++;
				}
			}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch) {
			if(cellMatch[1] == "~") {
				// Rowspan
				var last = prevColumns[col];
				if(last) {
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					if(colSpanCount > 1) {
						last.element.setAttribute("colspan",colSpanCount);
						last.element.setAttribute("colSpan",colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
				}
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[1] == ">") {
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[2]) {
				// End of row
				if(prevCell && colSpanCount > 1) {
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
				}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
			} else {
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ") {
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
				}
				var cell;
				if(chr == "!") {
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
				} else {
					cell = createTiddlyElement(e,"td");
				}
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1,element:cell};
				if(colSpanCount > 1) {
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
				}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
			}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
		}
	}
},

{
	name: "heading",
	match: "^!{1,6}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:[\\*#;:]+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType, baseType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			if(lookaheadMatch[1]) {
				listType = "ul";
				itemType = "li";
			} else if(lookaheadMatch[2]) {
				listType = "ol";
				itemType = "li";
			} else if(lookaheadMatch[3]) {
				listType = "dl";
				itemType = "dt";
			} else if(lookaheadMatch[4]) {
				listType = "dl";
				itemType = "dd";
			}
			if(!baseType)
				baseType = listType;
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			var t;
			if(listLevel > currLevel) {
				for(t=currLevel; t<listLevel; t++) {
					var target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;
					stack.push(createTiddlyElement(target,listType));
				}
			} else if(listType!=baseType && listLevel==1) {
				w.nextMatch -= lookaheadMatch[0].length;
				return;
			} else if(listLevel < currLevel) {
				for(t=currLevel; t>listLevel; t--)
					stack.pop();
			} else if(listLevel == currLevel && listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t,matched;
		do {
			if(newLevel > currLevel) {
				for(t=currLevel; t<newLevel; t++)
					stack.push(createTiddlyElement(stack[stack.length-1],this.element));
			} else if(newLevel < currLevel) {
				for(t=currLevel; t>newLevel; t--)
					stack.pop();
			}
			currLevel = newLevel;
			w.subWikifyTerm(stack[stack.length-1],this.termRegExp);
			createTiddlyElement(stack[stack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched) {
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
			}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?|<hr ?/?>\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
	element: "pre",
	handler: function(w)
	{
		switch(w.matchText) {
		case "/*{{{*/\n": // CSS
			this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
			break;
		case "{{{\n": // monospaced block
			this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
			break;
		case "//{{{\n": // plugin
			this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
			break;
		case "<!--{{{-->\n": //template
			this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
			break;
		default:
			break;
		}
		config.formatterHelpers.enclosedTextHelper.call(this,w);
	}
},

{
	name: "wikifyComment",
	match: "^(?:/\\*\\*\\*|<!---)\\n",
	handler: function(w)
	{
		var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
		w.subWikifyTerm(w.output,termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
		}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3]) {
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?
						createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
			} else {
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);
			}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.unWikiLink+"?"+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {
			w.outputText(w.output,w.matchStart+1,w.nextMatch);
			return;
		}
		if(w.matchStart > 0) {
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1) {
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
			}
		}
		if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);
			w.outputText(link,w.matchStart,w.nextMatch);
		} else {
			w.outputText(w.output,w.matchStart,w.nextMatch);
		}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e = w.output;
			if(lookaheadMatch[5]) {
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
				jQuery(e).addClass("imageLink");
			}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3]) {
				img.title = lookaheadMatch[3];
				img.setAttribute("alt",lookaheadMatch[3]);
			}
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "characterFormat",
	match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "''":
			w.subWikifyTerm(w.output.appendChild(document.createElement("strong")),/('')/mg);
			break;
		case "//":
			w.subWikifyTerm(createTiddlyElement(w.output,"em"),/(\/\/)/mg);
			break;
		case "__":
			w.subWikifyTerm(createTiddlyElement(w.output,"u"),/(__)/mg);
			break;
		case "^^":
			w.subWikifyTerm(createTiddlyElement(w.output,"sup"),/(\^\^)/mg);
			break;
		case "~~":
			w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(~~)/mg);
			break;
		case "--":
			w.subWikifyTerm(createTiddlyElement(w.output,"strike"),/(--)/mg);
			break;
		case "{{{":
			var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
				w.nextMatch = lookaheadRegExp.lastIndex;
			}
			break;
		}
	}
},

{
	name: "customFormat",
	match: "@@|\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "@@":
			var e = createTiddlyElement(w.output,"span");
			var styles = config.formatterHelpers.inlineCssHelper(w);
			if(styles.length == 0)
				e.className = "marked";
			else
				config.formatterHelpers.applyCssHelper(e,styles);
			w.subWikifyTerm(e,/(@@)/mg);
			break;
		case "{{":
			var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch) {
				w.nextMatch = lookaheadRegExp.lastIndex;
				e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
				w.subWikifyTerm(e,/(\}\}\})/mg);
			}
			break;
		}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
	}
}

];

//--
//-- Wikifier
//--

function getParser(tiddler,format)
{
	if(tiddler) {
		if(!format)
			format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers) {
				if(format == config.parsers[i].format)
					return config.parsers[i];
			}
		} else {
			for(i in config.parsers) {
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
			}
		}
	}
	return formatter;
}

function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output,terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place,this.source.substring(startPos,endPos));
	}
};

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		var t0 = new Date();
		wikifier.subWikify(output);
		if(tiddler && config.options.chkDisplayInstrumentation)
			displayMessage("wikify:" +tiddler.title+ " in " + (new Date()-t0) + " ms");
	}
}

function wikifyStatic(source,highlightRegExp,tiddler,format)
{
	var e = createTiddlyElement(document.body,"pre");
	e.style.display = "none";
	var html = "";
	if(source && source != "") {
		if(!tiddler)
			tiddler = new Tiddler("temp");
		var wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikify(e);
		html = e.innerHTML;
		jQuery(e).remove();
	}
	return html;
}

function wikifyPlainText(text,limit,tiddler)
{
	if(limit > 0)
		text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);
		wikifier.outputText(output,0,source.length);
	}
}

//--
//-- Macro definitions
//--

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);
			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;
			var allowEval = true;
			if(config.evaluateMacroParameters=="system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);
		} else {
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place,macroName,params,wikifier,paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list) {
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	jQuery(list).empty().addClass("list list-" + type);
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	if(this[type].prompt)
		createTiddlyElement(list,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	var t;
	for(t = 0; t < results.length; t++) {
		var li = document.createElement("li");
		list.appendChild(li);
		var tiddler = results[t];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
				tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	var results = [];
	if(filter) {
		var tiddlers = store.filterTiddlers(filter);
		var t;
		for(t=0; t<tiddlers.length; t++)
			results.push(tiddlers[t].title);
	}
	return results;
};

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(ul,"li",null,"listTitle",this.noTags);
	var t;
	for(t=0; t<tags.length; t++) {
		var title = tags[t][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul,"li");
		var btn = createTiddlyButton(li,title + " (" + tags[t][1] + ")",this.tooltip.format([title]),onClickTag,info.classes);
		btn.setAttribute("tag",title);
		btn.setAttribute("refresh","link");
		btn.setAttribute("tiddlyLink",title);
		if(params[1]) {
			btn.setAttribute("sortby",params[1]);
		}
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place,macroName,params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var dateFormat = params[2] || this.dateFormat;
		var groupTemplate = macro.groupTemplate.format(field, dateFormat);
		groupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :
			groupTemplate;

		var itemTemplate = macro.itemTemplate;
		itemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :
			itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var lastGroup = "", ul;
		var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;
		var t;
		for(t=tiddlers.length-1; t>=last; t--) {
			var tiddler = tiddlers[t];
			var theGroup = wikifyPlainText(groupTemplate,0,tiddler);
			if(typeof(ul) == "undefined" || theGroup != lastGroup) {
				ul = document.createElement("ul");
				jQuery(ul).addClass("timeline");
				container.appendChild(ul);
				createTiddlyElement(ul,"li",null,"listTitle",theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul,"li",null,"listLink");
			wikify(itemTemplate,item,null,tiddler);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>", 
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length-1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0,pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name",null,allowEval,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className,null,{
		refresh: "content", tiddler: tiddlerName
	});
	if(args!==undefined)
		wrapper.setAttribute("args","[["+args.join("]] [[")+"]]");
	this.transclude(wrapper,tiddlerName,args);
};

config.macros.tiddler.transclude = function(wrapper,tiddlerName,args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text)
		return;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1)
		return;
	stack.push(tiddlerName);
	try {
		if(typeof args == "string")
			args = args.readBracketedList();
		var n = args ? Math.min(args.length,9) : 0;
		var i;
		for(i=0; i<n; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
			text = text.replace(placeholderRE,args[i]);
		}
		config.macros.tiddler.renderText(wrapper,text,tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place,text,tiddlerName)
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	var btn = createTagButton(place,params[0],null,params[1],params[2]);
	if(params[3]) {
		btn.setAttribute('sortby',params[3]);
	}
};

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var label = null;
	var t;
	for(t=0; t<tiddler.tags.length; t++) {
		var tag = store.getTiddler(tiddler.tags[t]);
		if(!tag || !tag.tags.contains("excludeLists")) {
			if(!label)
				label = createTiddlyElement(ul,"li",null,"listTitle",lingo.labelTags.format([tiddler.title]));
			createTagButton(createTiddlyElement(ul,"li"),tiddler.tags[t],tiddler.title);
			if(t<tiddler.tags.length-1)
				createTiddlyText(ul,sep);
		}
	}
	if(!label)
		createTiddlyElement(ul,"li",null,"listTitle",lingo.labelNoTags.format([tiddler.title]));
};

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	ul.setAttribute("title",this.tooltip.format([title]));
	var sortby = getParam(params,"sortBy",false);
	var tagged = store.getTaggedTiddlers(title,sortby);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(ul,"li",null,"listTitle",prompt.format([title,tagged.length]));
	var t;
	for(t=0; t<tagged.length; t++) {
		createTiddlyLink(createTiddlyElement(ul,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(ul,sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place,macroName,params)
{
	if(!readOnly)
		createTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n,!isOpen,null,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh","content");
	panel.setAttribute("tiddler",params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var panel = wikifier ? createTiddlyElement(place,"div",null,"gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
	}
	params = paramString.parseParams("color");
	var locolors = [], hicolors = [];
	var t;
	for(t=2; t<params.length; t++) {
		var c = params[t].value;
		if(params[t].name == "snap") {
			hicolors[hicolors.length-1] = c;
		} else {
			locolors.push(c);
			hicolors.push(c);
		}
	}
	drawGradient(panel,params[1].value != "vert",locolors,hicolors);
	if(wikifier)
		wikifier.subWikify(panel,">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0]) {
		var names = params[0].split(".");
		var lookupMessage = function(root,nameIndex) {
				if(root[names[nameIndex]]) {
					if(nameIndex < names.length-1)
						return (lookupMessage(root[names[nameIndex]],nameIndex+1));
					else
						return root[names[nameIndex]];
				} else
					return null;
			};
		var m = lookupMessage(config,0);
		if(m == null)
			m = lookupMessage(window,0);
		createTiddlyText(place,m.toString().format(params.splice(1)));
	}
};


config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value,place,params,wikifier,paramString,tiddler) {
		highlightify(value,place,highlightHack,tiddler);
	},
	link: function(value,place,params,wikifier,paramString,tiddler) {
		createTiddlyLink(place,value,true);
	},
	wikified: function(value,place,params,wikifier,paramString,tiddler) {
		if(config.macros.view.depth>50)
			return;
		if(config.macros.view.depth>0) {
			if (value==config.macros.view.values[config.macros.view.depth-1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value=params[2].unescapeLineBreaks().format([value]);
		wikify(value,place,highlightHack,tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value,place,params,wikifier,paramString,tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0]) {
		var value = store.getValue(tiddler,params[0]);
		if(value) {
			var type = params[1] || config.macros.view.defaultView;
			var handler = config.macros.view.views[type];
			if(handler)
				handler(value,place,params,wikifier,paramString,tiddler);
		}
	}
};

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defVal = params[2] || '';
	if((tiddler instanceof Tiddler) && field) {
		story.setDirty(tiddler.title,true);
		var e,v;
		if(field != "text" && !rows) {
			e = createTiddlyElement(null,"input",null,null,null,{
				type: "text", edit: field, size: "40", autocomplete: "off"
			});
			e.value = store.getValue(tiddler,field) || defVal;
			place.appendChild(e);
		} else {
			var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
			var wrapper2 = createTiddlyElement(wrapper1,"div");
			e = createTiddlyElement(wrapper2,"textarea");
			e.value = v = store.getValue(tiddler,field) || defVal;
			rows = rows || 10;
			var lines = v.match(/\n/mg);
			var maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);
			if(lines != null && lines.length > rows)
				rows = lines.length + 5;
			rows = Math.min(rows,maxLines);
			e.setAttribute("rows",rows);
			e.setAttribute("edit",field);
			place.appendChild(wrapper1);
		}
		if(tiddler.isReadOnly()) {
			e.setAttribute("readOnly","readOnly");
			jQuery(e).addClass("readOnly");
		}
		return e;
	}
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));
	if(tags.length == 0)
		jQuery("<li/>").text(lingo.popupNone).appendTo(popup);
	var t;
	for(t=0; t<tags.length; t++) {
		var tag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag",tags[t][0]);
		tag.setAttribute("tiddler",this.getAttribute("tiddler"));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return false;
};

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler) {
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler",tiddler.title);
		btn.setAttribute("tags",params[0]);
	}
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var a = title ? config.annotations[title] : null;
	if(!tiddler || !title || !a)
		return;
	var text = a.format([title]);
	wikify(text,createTiddlyElement(place,"div",null,"annotation"),null,tiddler);
};
//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	var t;
	for(t=1; t<params.length; t++) {
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	}
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var customFields = getParam(params,"fields","");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal ? "true" : "false");
	if(tags.length > 0)
		btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	if(customFields !== "")
		btn.setAttribute("customFields",customFields);
	var text = getParam(params,"text");
	if(text !== undefined)
		btn.setAttribute("newText",text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	story.displayTiddler(null,title,template,false,null,null);
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem,customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title,"text"))
		story.getTiddlerField(title,"text").value = text.format([title]);
	var t;
	for(t=0;t<tags.length;t++)
		story.setTiddlerTag(title,tags[t],+1);
	story.focusTiddler(title,focus);
	return false;
};

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
	}
};

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
	}
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,false,false,false);
	createTiddlyButton(place,this.label,this.prompt,this.onClick,"searchButton");
	var txt = createTiddlyElement(null,"input",null,"txtOptionInput searchField");
	txt.value = getParam(params,"anon","");
	if(config.browser.isSafari) {
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
	} else {
		txt.setAttribute("type","text");
	}
	place.appendChild(txt);
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",getParam(params,"accesskey",this.accessKey));
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	txt.setAttribute("placeholder",getParam(params,"placeholder",this.placeholder));
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0) {
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
	}
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) {
					clearTimeout(me.timeout);
				}
				var txt = this;
				me.timeout = setTimeout(function() {me.doSearch(txt);},500);
			}
		} else {
			if(me.timeout) {
				clearTimeout(me.timeout);
			}
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,"tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	var t;
	for(t=0; t<numTabs; t++) {
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	var t;
	for(t=0; t<nodes.length; t++) {
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab) {
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
		} else {
			nodes[t].className = "tab tabUnselected";
		}
	}
	if(theTab) {
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			jQuery(tabset.nextSibling).remove();
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie) {
			config.options[cookie] = tab;
			saveOption(cookie);
		}
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string") {
		var c = null;
		var t;
		for(t in config.commands) {
			if(config.commands[t] == commandName)
				c = t;
		}
		commandName = c;
	}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string")) {
		var command = config.commands[commandName];
		if(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {
			var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
			var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
			var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
			var btn = createTiddlyButton(null,text,tooltip,cmd);
			btn.setAttribute("commandName",commandName);
			btn.setAttribute("tiddler",tiddler.title);
			jQuery(btn).addClass("command_" + commandName);
			if(className)
				jQuery(btn).addClass(className);
			place.appendChild(btn);
		}
	}
};

config.macros.toolbar.isCommandEnabled = function(command,tiddler)
{
	var title = tiddler.title;
	var ro = tiddler.isReadOnly();
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	return (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);
};

config.macros.toolbar.getCommandText = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var command = config.commands[this.getAttribute("commandName")];
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler",title);
	command.handlePopup(popup,title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,className,event)
{
	var children = place.getElementsByTagName("a");
	var t;
	for(t=0; t<children.length; t++) {
		var c = children[t];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var t;
	for(t=0; t<params.length; t++) {
		var btn;
		var c = params[t];
		switch(c) {
		case "!":
			createTiddlyText(place,this.separator);
			break;
		case "*":
			createTiddlyElement(place,"br");
			break;
		case "<":
			btn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);
			jQuery(btn).addClass("lessCommand");
			break;
		case ">":
			btn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);
			jQuery(btn).addClass("moreCommand");
			var e = createTiddlyElement(place,"span",null,"moreCommand");
			e.style.display = "none";
			place = e;
			break;
		default:
			var className = "";
			switch(c.substr(0,1)) {
			case "+":
				className = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				className = "cancelCommand";
				c = c.substr(1);
				break;
			}
			if(config.commands[c]) {
				this.createCommand(place,c,tiddler,className);
			} else {
				this.customCommand(place,c,wikifier,tiddler);
			}
			break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event,src,title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.closeTiddler(title,true);
	return false;
};

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);
	var e = story.getTiddlerField(title,config.options.txtEditorFocus||"text");
	if(e) {
		setCaretPosition(e,0);
	}
	return false;
};

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
		story.displayTiddler(null,newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
};

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if(deleteIt) {
		store.removeTiddler(title);
		story.closeTiddler(title,true);
		autoSaveChanges();
	}
	return false;
};

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
};

config.commands.references.handlePopup = function(popup,title)
{
	var references = store.getReferringTiddlers(title);
	var c = false;
	var r;
	for(r=0; r<references.length; r++) {
		if(references[r].title != title && !references[r].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
			c = true;
		}
	}
	if(!c)
		createTiddlyElement(popup,"li",null,"disabled",this.popupNone);
};

config.commands.jump.handlePopup = function(popup,title)
{
	story.forEachTiddler(function(title,element) {
		createTiddlyLink(createTiddlyElement(popup,"li"),title,true,null,false,null,true);
		});
};

config.commands.syncing.handlePopup = function(popup,title)
{
	var me = config.commands.syncing;
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var serverType = tiddler.getServerType();
	var serverHost = tiddler.fields["server.host"];
	var serverWorkspace = tiddler.fields["server.workspace"];
	if(!serverWorkspace)
		serverWorkspace = "";
	if(serverType) {
		var e = createTiddlyElement(popup,"li",null,"popupMessage");
		e.innerHTML = me.currentlySyncing.format([serverType,serverHost,serverWorkspace]);
	} else {
		createTiddlyElement(popup,"li",null,"popupMessage",me.notCurrentlySyncing);
	}
	if(serverType) {
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var btn = createTiddlyButton(createTiddlyElement(popup,"li"),this.captionUnSync,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type","");
	}
	createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
	createTiddlyElement(popup,"li",null,"popupMessage",me.chooseServer);
	var feeds = store.getTaggedTiddlers("systemServer","title");
	var t;
	for(t=0; t<feeds.length; t++) {
		var f = feeds[t];
		var feedServerType = store.getTiddlerSlice(f.title,"Type");
		if(!feedServerType)
			feedServerType = "file";
		var feedServerHost = store.getTiddlerSlice(f.title,"URL");
		if(!feedServerHost)
			feedServerHost = "";
		var feedServerWorkspace = store.getTiddlerSlice(f.title,"Workspace");
		if(!feedServerWorkspace)
			feedServerWorkspace = "";
		var caption = f.title;
		if(serverType == feedServerType && serverHost == feedServerHost && serverWorkspace == feedServerWorkspace) {
			caption = me.currServerMarker + caption;
		} else {
			caption = me.notCurrServerMarker + caption;
		}
		btn = createTiddlyButton(createTiddlyElement(popup,"li"),caption,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type",feedServerType);
		btn.setAttribute("server.host",feedServerHost);
		btn.setAttribute("server.workspace",feedServerWorkspace);
	}
};

config.commands.syncing.onChooseServer = function(e)
{
	var tiddler = this.getAttribute("tiddler");
	var serverType = this.getAttribute("server.type");
	if(serverType) {
		store.addTiddlerFields(tiddler,{
			"server.type": serverType,
			"server.host": this.getAttribute("server.host"),
			"server.workspace": this.getAttribute("server.workspace")
			});
	} else {
		store.setValue(tiddler,"server",null);
	}
	return false;
};

config.commands.fields.handlePopup = function(popup,title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var items = [];
	store.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);
	items.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});
	if(items.length > 0)
		ListView.create(popup,items,this.listViewTemplate);
	else
		createTiddlyElement(popup,"div",null,null,this.emptyText);
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	var i;
	for(i in this.fields) {
		if(i=="server.host" || i=="server.workspace" || i=="wikiformat"|| i=="server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c,10) : 0;
	this.fields['changecount'] = String(c+1);
};

// Clear the changeCount of a tiddler
Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)
{
	this.assign(title,text,modifier,modified,tags,created,fields,creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(creator != undefined)
		this.creator = creator;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g,"").
		replace(/\{{3}((?:.|\n)*?)\}{3}/g,"").
		replace(/"""((?:.|\n)*?)"""/g,"").
		replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g,"").
		replace(/<html\>((?:.|\n)*?)<\/html\>/g,"").
		replace(/<script((?:.|\n)*?)<\/script\>/g,"");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier;
	if(!modifier)
		modifier = config.messages.subtitleUnknown || "";
	var modified = this.modified;
	if(modified)
		modified = modified.toLocaleString();
	else
		modified = config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title,modifier,modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = null;
	if(this.fields['server.type'])
		serverType = this.fields['server.type'];
	if(!serverType)
		serverType = this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType])
		serverType = null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki(params)
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	if(params && params.config) {
		this.config = config;
	}
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		var t;
		for(t in tiddlers) {
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return t != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	if(typeof config.shadowTiddlers[title] == "string")
		return config.shadowTiddlers[title];
	else
		return "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0,pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
	}
	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(text) {
		if(!section)
			return text;
		var re = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)","mg");
		re.lastIndex = 0;
		var match = re.exec(text);
		if(match) {
			var t = text.substr(match.index+match[1].length);
			var re2 = /^!/mg;
			re2.lastIndex = 0;
			match = re2.exec(t); //# search for the next heading
			if(match)
				t = t.substr(0,match.index-1);//# don't include final \n
			return t;
		}
		return defaultText;
	}
	if(defaultText != undefined)
		return defaultText;
	return null;
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var match,lastPos = 0;
	do {
		match = bracketRegExp.exec(text);
		if(match) {
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"",depth-1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]*)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\|\n]*)[\t\x20]*\|$)/gm;
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	var m = this.slicesRE.exec(text);
	while(m) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
		m = this.slicesRE.exec(text);
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var t,r = {};
	for(t=0; t<sliceNames.length; t++) {
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
		}
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
		}
	}
};

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	var i;
	for(i=0; i<this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({name: title, notify: fn});
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		tiddler.incChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.addTiddlerFields = function(title,fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		return;
	merge(tiddler.fields,fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title,true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		title = tiddler.title;
		newTitle = title;
	} else {
		tiddler = this.fetchTiddler(title);
		if(tiddler) {
			created = created || tiddler.created; // Preserve created date
			creator = creator || tiddler.creator;
			this.deleteTiddler(title);
		} else {
			created = created || modified;
			tiddler = new Tiddler();
		}
		fields = merge(merge({},fields),config.defaultCustomFields,true);
		tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);
	}
	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	if(window.location.protocol == "file:")
		this.setDirty(true);
	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem)
		return;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		var i;
		for(i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv)
		return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var candidates = this.reverseLookup("tags",excludeTag,!!match);
	var t,results = [];
	for(t=0; t<candidates.length; t++) {
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
	}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
};

// Returns a list of all tags in use
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
	    var g,c;
		for(g=0; g<tiddler.tags.length; g++) {
			var tag = tiddler.tags[g];
			var n = true;
			for(c=0; c<results.length; c++) {
				if(results[c][0] == tag) {
					n = false;
					results[c][1]++;
				}
			}
			if(n && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					n = false;
			}
			if(n)
				results.push([tag,1]);
		}
	});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)
{
	return this.reverseLookup(field,value,true,sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
};

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			if(accessor) {
				values = [ accessor.get(tiddler) ];
			} else {
				values = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];
			}
		}
		var lookup;
		for(lookup=0; lookup<values.length; lookup++) {
			if(values[lookup] == lookupValue)
				f = lookupMatch;
		}
		if(f)
			results.push(tiddler);
	});
	if(!sortField)
		sortField = "title";
	return this.sortTiddlers(results,sortField);
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;
		var n;
		for(n=0; n<tiddler.links.length;n++) {
			var link = tiddler.links[n];
			if(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t,results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
		});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)
{
	var asc = +1;
	switch(field.substr(0,1)) {
	case "-":
		asc = -1;
		field = field.substr(1);
		break;
	case "+":
		field = field.substr(1);
		break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field=="title") {
			tiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});
		} else {
			tiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});
		}
	} else {
		tiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results,match) {
		var title = match[1]||match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title,this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results,match) {
		var m,matched = this.getTaggedTiddlers(match[3]);
		for(m=0; m<matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	},
	sort: function(results,match) {
		return this.sortTiddlers(results,match[3]);
	},
	limit: function(results,match) {
		return results.slice(0,parseInt(match[3],10));
	},
	field: function(results,match) {
		var m,matched = this.getValueTiddlers(match[2],match[3]);
		for (m = 0; m < matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	var results = [];
	if(filter) {
		var match = re.exec(filter);
		while(match) {
			var handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';
			results = config.filters[handler].call(this,results,match);
			match = re.exec(filter);
		}
	}
	return results;
};
// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(n,readOnly)
{
	this.set = readOnly ?
			function(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :
			function(t,v) {if(v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n)
{
	this.set = function(t,v) {
		var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);
		if(d != t[n]) {
			t[n] = d; return true;
		}
	};
	this.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};
}

function LinksFieldAccess(n)
{
	this.set = function(t,v) {
		var s = (typeof v == "string") ? v.readBracketedList() : v;
		if(s.toString() != t[n].toString()) {
			t[n] = s; return true;
		}
	};
	this.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title",true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title",true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler,fieldName)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {
		var sliceType = fieldName.substr(0, 2);
		var sliceName = fieldName.substring(2);
		return store.getTiddlerText("%0%1%2".format(t.title,sliceType,sliceName));
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) {
			return accessor.get(t);
		}
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler,fieldName,value).
TiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	var n,result;
	for(n in t.fields) {
		result = callback(t,n,t.fields[n]);
		if(result)
			return result;
		}
	if(onlyExtendedFields)
		return undefined;
	for(n in TiddlyWiki.standardFieldAccess) {
		if(n != "tiddler") {
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			result = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));
			if(result)
				return result;
		}
	}
	return undefined;
};

//--
//-- Story functions
//--

function Story(containerId,idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		title = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + title;
		return id==this.container ? this.idPrefix + "_" + title : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(fn)
{
	var place = this.getContainer();
	if(!place)
		return;
	var e = place.firstChild;
	while(e) {
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		if(title) {
			fn.call(this,title,e);
		}
		e = n;
	}
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)
{
	var t;
	for(t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);
};

Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title,true);
		} else {
			this.refreshTiddler(title,template,false,customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template,customFields);
	}
	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
		case "top":
			before = place.firstChild;
			break;
		case "bottom":
			before = null;
			break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place,before,title,template,customFields)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.tiddlerId(title),"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields",customFields);
	place.insertBefore(tiddlerElem,before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title,customFields);
	this.refreshTiddler(title,template,false,customFields,defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title,fields,callback)
{
	var getTiddlerCallback = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			if(!t.created)
				t.created = new Date();
			if(!t.modified)
				t.modified = t.created;
			context.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title,null,true);
		}
		context.adaptor.close();
		if(callback) {
			callback(context);
		}
	};
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields||{};
	var context = {serverType:tiddler.getServerType()};
	if(!context.serverType)
		return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();
	adaptor.getTiddler(title,context,null,getTiddlerCallback);
	return config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
};

Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force) {
			var tiddler = store.getTiddler(title);
			if(!tiddler) {
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title)) {
					var tags = [];
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);
				} else {
					var text = template=="EditTemplate" ?
								config.views.editor.defaultText.format([title]) :
								config.views.wikified.defaultText.format([title]);
					text = defaultText || text;
					var fields = customFields ? customFields.decodeHashMap() : null;
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);
				}
			}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			tiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				jQuery(tiddlerElem).addClass("isTag");
			else
				jQuery(tiddlerElem).removeClass("isTag");
			if(store.tiddlerExists(title)) {
				jQuery(tiddlerElem).removeClass("shadow");
				jQuery(tiddlerElem).removeClass("missing");
			} else {
				jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
			}
			if(customFields)
				this.addCustomFields(tiddlerElem,customFields);
		}
	}
	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place,customFields)
{
	var fields = customFields.decodeHashMap();
	var w = createTiddlyElement(place,"div",null,"customFields");
	w.style.display = "none";
	var t;
	for(t in fields) {
		var e = document.createElement("input");
		e.setAttribute("type","text");
		e.setAttribute("value",fields[t]);
		w.appendChild(e);
		e.setAttribute("edit",t);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	var e = this.getContainer().firstChild;
	while(e) {
		var template = e.getAttribute("template");
		if(template && e.getAttribute("dirty") != "true") {
			this.refreshTiddler(e.getAttribute("tiddler"),force ? null : template,true);
		}
		e = e.nextSibling;
	}
};

Story.prototype.onTiddlerMouseOver = function(e)
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function(e)
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(target && target.nodeName.toLowerCase() != "input" && target.nodeName.toLowerCase() != "textarea") {
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if(e.stopPropagation) e.stopPropagation();
		return true;
	}
	return false;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" && ed.value==config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera) {
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		}
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = this.getTiddler(title);
	var e = null;
	if(tiddlerElem) {
		var t,children = tiddlerElem.getElementsByTagName("*");
		for(t=0; t<children.length; t++) {
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea") {
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
			}
		}
	}
	return e;
};

Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = this.getTiddlerField(title,field);
	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	this.setTiddlerField(title,tag,mode,"tags");
};

Story.prototype.closeTiddler = function(title,animate,unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(config.options.chkAnimate && animate && anim && typeof Slider == "function")
			anim.startAnimating(new Slider(tiddlerElem,false,null,"all"));
		else {
			jQuery(tiddlerElem).remove();
		}
	}
};

Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
};

Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0,ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	this.displayTiddlers(null,matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(e)
{
	while(e && !jQuery(e).hasClass("tiddler")) {
		e = jQuery(e).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;
	}
	return e;
};

Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute) {
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");
		if(e.hasChildNodes()) {
			var t,c = e.childNodes;
			for(t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields);
		}
	}
};

Story.prototype.hasChanges = function(title)
{
	var e = this.getTiddler(title);
	if(e) {
		var fields = {};
		this.gatherSaveFields(e,fields);
		if(store.fetchTiddler(title)) {
		    var n;
			for(n in fields) {
				if(store.getValue(title,n) != fields[n]) //# tiddler changed
					return true;
			}
		} else {
			if(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags
				return false;
			} else { //# changed shadow or new tiddler
				return true;
			}
		}
	}
	return false;
};

Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title || title;
		if(!store.tiddlerExists(newTitle)) {
			newTitle = newTitle.trim();
			var creator = config.options.txtUserName;
		}
		if(store.tiddlerExists(newTitle) && newTitle != title) {
			if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				return null;
				title = newTitle;
		}
		if(newTitle != title)
			this.closeTiddler(newTitle,false);
		tiddlerElem.id = this.tiddlerId(newTitle);
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		if(!store.tiddlerExists(newTitle))
			minorUpdate = false;
		var newDate = new Date();
		if(store.tiddlerExists(title)) {
			var t = store.fetchTiddler(title);
			var extendedFields = t.fields;
			creator = t.creator;
		} else {
			extendedFields = merge({},config.defaultCustomFields);
		}
		var n;
		for(n in fields) {
			if(!TiddlyWiki.isStandardField(n))
				extendedFields[n] = fields[n];
		}
		var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
		autoSaveChanges(null,[tiddler]);
		return newTitle;
	}
	return null;
};

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
	});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode)
		return;

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};

	var getSlice = function(theme,slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme,slice+"ReadOnly") || store.getTiddlerSlice(theme,"Web"+slice);
		r = r || store.getTiddlerSlice(theme,slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)
			r = theme + r;
		return isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i,name,theme,slice) {
		var newName = getSlice(theme,slice);
		if(name!=newName && store.namedNotifications[i].name==name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	var i;
	for(i=0; i<config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
		case "PageTemplate":
			config.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);
			break;
		case "StyleSheet":
			removeStyleSheet(config.refresherData.styleSheet);
			config.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);
			break;
		case "ColorPalette":
			config.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);
			break;
		default:
			break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme,"ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme,"EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,"",10),config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var t = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,
						function(e) {backstage.show(); return false;},null,"backstageShow");
		t = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,
						function(e) {backstage.hide(); return false;},null,"backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel,"div",null,"backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel,"div",null,"backstagePanelBody");
		this.cloak.onmousedown = function(e) {backstage.switchTab(null);};
		createTiddlyText(this.toolbar,cmb.prompt);
		for(t=0; t<config.backstageTasks.length; t++) {
			var taskName = config.backstageTasks[t];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,"backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
			}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			var p = [{style: "left", start: findWindowWidth(), end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			this.switchTab(null);
		} else {
			backstage.toolbar.style.left = "0px";
			if(anim && config.options.chkAnimate) {
				var p = [{style: "left", start: 0, end: findWindowWidth(), template: "%0px"}];
				var c = function(element,properties) {backstage.area.style.display = "none";};
				anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));
			} else {
				this.area.style.display = "none";
			}
			this.showButton.style.display = "block";
			this.hideButton.style.display = "none";
			config.options.chkBackstage = false;
			saveOption("chkBackstage");
			jQuery(this.content).removeClass("backstageVisible");
		}
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == backstage.currTabName) {
			backstage.hidePanel();
			return;
		}
		if(backstage.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			backstage.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content,backstage.panelBody,null,null);
			backstage.showPanel();
		} else if(backstage.currTabElem) {
			backstage.hidePanel();
		}
		backstage.currTabName = tabName;
		backstage.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findWindowHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			var p = [{style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var p = [
				{style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px"},
				{style: "display", atEnd: "none"}
			];
			var c = function(element,properties) {backstage.cloak.style.display = "none";};
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));
		} else {
			jQuery([backstage.panel,backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place,macroName,params)
{
	var backstageTask = config.tasks[params[0]];
	if(backstageTask)
		createTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly) {
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title,this.step1Html);
	var t,s = wizard.getElement("selTypes");
	for(t in config.adaptors) {
		var e = createTiddlyElement(s,"option",null,null,config.adaptors[t].serverLabel || t);
		e.value = t;
	}
	if(config.defaultAdaptor)
		s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(t in feeds) {
		e = createTiddlyElement(s,"option",null,null,t);
		e.value = t;
	}
	wizard.setValue("feeds",feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen}]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var t,tagged = store.getTaggedTiddlers("systemServer","title");
	for(t=0; t<tagged.length; t++) {
		var title = tagged[t].title;
		var serverType = store.getTiddlerSlice(title,"Type");
		if(!serverType)
			serverType = "file";
		feeds[title] = {title: title,
						url: store.getTiddlerSlice(title,"URL"),
						workspace: store.getTiddlerSlice(title,"Workspace"),
						workspaceList: store.getTiddlerSlice(title,"WorkspaceList"),
						tiddlerFilter: store.getTiddlerSlice(title,"TiddlerFilter"),
						serverType: serverType,
						description: store.getTiddlerSlice(title,"Description")};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName",f.serverType);
		wizard.setValue("feedHost",f.url);
		wizard.setValue("feedWorkspace",f.workspace);
		wizard.setValue("feedWorkspaceList",f.workspaceList);
		wizard.setValue("feedTiddlerFilter",f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	var file = this.value;
	if(this.files && this.files[0]) {
		file = this.files[0].fileName;
		try {
			if(typeof(netscape) !== "undefined") {
				netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
			}
		} catch (ex) {
			showException(ex);
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(file);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(v)
{
	if(!v || !v.length)
		return v;
	v = v.replace(/\\/g,"/"); // use "/" for cross-platform consistency
	var u;
	var t = v.split(":");
	var p = t[1] || t[0]; // remove drive letter (if any)
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		u = v;
	} else if(p.substr(0,1)=="/") {
		u = document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + v;
	} else {
		var c = document.location.href.replace(/\\/g,"/");
		var pos = c.lastIndexOf("/");
		if(pos!=-1)
			c = c.substr(0,pos); // remove filename
		u = c + "/" + p;
	}
	return u;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor",adaptor);
	wizard.setValue("serverType",serverType);
	wizard.setValue("host",url);
	adaptor.openHost(url,null,wizard,me.onOpenHost);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context,wizard,me.onGetWorkspaceList);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context",context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length==1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
		wizard.setValue("workspace",workspace);
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title,me.step2Html);
	var t,s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(t=0; t<context.workspaces.length; t++) {
		var e = createTiddlyElement(s,"option",null,null,context.workspaces[t].title);
		e.value = context.workspaces[t].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var n,list = workspaceList.parseParams("workspace",null,false,true);
		for(n=1; n<list.length; n++) {
			if(context.workspaces.findByField("title",list[n].value) == null) {
				e = createTiddlyElement(s,"option",null,null,list[n].value);
				e.value = list[n].value;
			}
		}
	}
	if(workspace) {
		t = wizard.getElement("txtWorkspace");
		t.value = workspace;
	}
	wizard.setButtons([{caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace}]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	var t = wizard.getElement("txtWorkspace");
	t.value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace",workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	adaptor.getTiddlerList(context,wizard,me.onGetTiddlerList,wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		var error = context.statusText||me.errorGettingTiddlerList;
		if(context.host.indexOf("file://") === 0) {
			error = me.errorGettingTiddlerListFile;
		} else {
			error = context.xhr && context.xhr.status == 404 ? me.errorGettingTiddlerListHttp404 :
				me.errorGettingTiddlerListHttp;
		}
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],"");
		jQuery("span.status", wizard.footerEl).html(error); // so error message can be html
		return;
	}
	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		var n;
		for(n=0; n<context.tiddlers.length; n++) {
			var tiddler = context.tiddlers[n];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text,100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	// Display the listview
	wizard.addStep(me.step3Title,me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	var listView = ListView.create(listWrapper,listedTiddlers,me.listViewTemplate);
	wizard.setValue("listView",listView);
	wizard.setValue("context",context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel},
			{caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport}
		]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType,host,workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType,host,workspace]);
	store.saveTiddler(txtSaveTiddler,txtSaveTiddler,text,me.serverSaveModifier,new Date(),["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync",chkSync);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	var t;
	for(t=0; t<rowNames.length; t++) {
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}
	wizard.addStep(me.step4Title.format([rowNames.length]),me.step4Html);
	for(t=0; t<rowNames.length; t++) {
		var link = document.createElement("div");
		createTiddlyLink(link,rowNames[t],true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(link,place);
	}
	wizard.setValue("remainingImports",rowNames.length);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}
		],me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(t=0; t<rowNames.length; t++) {
		var context = {
			allowSynchronous:true,
			tiddler:tiddlers[tiddlers.findByField("title",rowNames[t])]
		};
		adaptor.getTiddler(rowNames[t],context,wizard,me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title,'server',null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous)
		store.notify(tiddler.title,true);
	var remainingImports = wizard.getValue("remainingImports")-1;
	wizard.setValue("remainingImports",remainingImports);
	if(remainingImports == 0) {
		if(context.isSynchronous) {
			store.notifyAll();
			refreshDisplay();
		}
		wizard.setButtons([
				{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
			],me.statusDoneImport);
		autoSaveChanges();
	}
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	w.addStep(this.step1Title,this.step1Html.format([this.source,this.source]));
	w.setButtons([{caption: this.upgradeLabel, tooltip: this.upgradePrompt, onClick: this.onClickUpgrade}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(window.location.protocol != "file:") {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath,me.backupExtension);
	w.setValue("backupPath",backupPath);
	w.setButtons([],me.statusPreparingBackup);
	var original = loadOriginal(localPath);
	w.setButtons([],me.statusSavingBackup);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(!backup) {
		w.setButtons([],me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setButtons([],me.statusLoadingCore);
	var options = {
		type:"GET",
		url:me.source,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			me.onLoadCore(true,w,jqXHR.responseText,me.source,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			me.onLoadCore(false,w,null,me.source,jqXHR);
		}
	};
	ajaxReq(options);
	return false;
};

config.macros.upgrade.onLoadCore = function(status,params,responseText,url,xhr)
{
	var me = config.macros.upgrade;
	var w = params;
	var errMsg;
	if(!status)
		errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer)
		errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([],errMsg);
		alert(errMsg);
		return;
	}
	var onStartUpgrade = function(e) {
		w.setButtons([],me.statusSavingCore);
		var localPath = getLocalPath(document.location.toString());
		saveFile(localPath,responseText);
		w.setButtons([],me.statusReloadingCore);
		var backupPath = w.getValue("backupPath");
		var newLoc = document.location.toString() + "?time=" + new Date().convertToYYYYMMDDHHMM() + "#upgrade:[[" + encodeURI(backupPath) + "]]";
		window.setTimeout(function () {window.location = newLoc;},10);
	};
	var step2 = [me.step2Html_downgrade,me.step2Html_restore,me.step2Html_upgrade][compareVersions(version,newVer) + 1];
	w.addStep(me.step2Title,step2.format([formatVersion(newVer),formatVersion(version)]));
	w.setButtons([{caption: me.startLabel, tooltip: me.startPrompt, onClick: onStartUpgrade},{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}]);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title,me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /^var version = \{title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return m ? {title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])} : null;
};

function upgradeFrom(path)
{
	var importStore = new TiddlyWiki();
	var tw = loadFile(path);
	if(window.netscape !== undefined)
		tw = convertUTF8ToUnicode(tw);
	importStore.importTiddlyWiki(tw);
	importStore.forEachTiddler(function(title,tiddler) {
		if(!store.getTiddler(title)) {
			store.addTiddler(tiddler);
		}
	});
	refreshDisplay();
	saveChanges(); //# To create appropriate Markup* sections
	alert(config.messages.upgradeDone.format([formatVersion()]));
	window.location = window.location.toString().substr(0,window.location.toString().lastIndexOf("?"));
}

//--
//-- Sync macro
//--

// Synchronisation handlers
config.syncers = {};

// Sync state.
var currSync = null;

// sync macro
config.macros.sync.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(!wikifier.isStatic)
		this.startSync(place);
};

config.macros.sync.cancelSync = function()
{
	currSync = null;
};

config.macros.sync.startSync = function(place)
{
	if(currSync)
		config.macros.sync.cancelSync();
	currSync = {};
	currSync.syncList = this.getSyncableTiddlers();
	currSync.syncTasks = this.createSyncTasks(currSync.syncList);
	this.preProcessSyncableTiddlers(currSync.syncList);
	var wizard = new Wizard();
	currSync.wizard = wizard;
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	currSync.listView = ListView.create(listWrapper,currSync.syncList,this.listViewTemplate);
	this.processSyncableTiddlers(currSync.syncList);
	wizard.setButtons([{caption: this.syncLabel, tooltip: this.syncPrompt, onClick: this.doSync}]);
};

config.macros.sync.getSyncableTiddlers = function()
{
	var list = [];
	store.forEachTiddler(function(title,tiddler) {
		var syncItem = {};
		syncItem.serverType = tiddler.getServerType();
		syncItem.serverHost = tiddler.fields['server.host'];
		if(syncItem.serverType && syncItem.serverHost) {
			syncItem.adaptor = new config.adaptors[syncItem.serverType]();
			syncItem.serverHost = syncItem.adaptor.fullHostName(syncItem.serverHost);
			syncItem.serverWorkspace = tiddler.fields['server.workspace'];
			syncItem.tiddler = tiddler;
			syncItem.title = tiddler.title;
			syncItem.isTouched = tiddler.isTouched();
			syncItem.selected = syncItem.isTouched;
			syncItem.syncStatus = config.macros.sync.syncStatusList[syncItem.isTouched ? "changedLocally" : "none"];
			syncItem.status = syncItem.syncStatus.text;
			list.push(syncItem);
		}
		});
	list.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	return list;
};

config.macros.sync.preProcessSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		si.serverUrl = si.adaptor.generateTiddlerInfo(si.tiddler).uri;
	}
};

config.macros.sync.processSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		if(si.syncStatus.display)
			si.rowElement.style.display = si.syncStatus.display;
		if(si.syncStatus.className)
			si.rowElement.className = si.syncStatus.className;
	}
};

config.macros.sync.createSyncTasks = function(syncList)
{
	var i,syncTasks = [];
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		var j,r = null;
		for(j=0; j<syncTasks.length; j++) {
			var cst = syncTasks[j];
			if(si.serverType == cst.serverType && si.serverHost == cst.serverHost && si.serverWorkspace == cst.serverWorkspace)
				r = cst;
		}
		if(r) {
			si.syncTask = r;
			r.syncItems.push(si);
		} else {
			si.syncTask = this.createSyncTask(si);
			syncTasks.push(si.syncTask);
		}
	}
	return syncTasks;
};

config.macros.sync.createSyncTask = function(syncItem)
{
	var st = {};
	st.serverType = syncItem.serverType;
	st.serverHost = syncItem.serverHost;
	st.serverWorkspace = syncItem.serverWorkspace;
	st.syncItems = [syncItem];

	var getTiddlerListCallback = function(context,sycnItems) {
		var me = config.macros.sync;
		if(!context.status) {
			displayMessage(context.statusText);
			return false;
		}
		syncItems = context.userParams;
		var i,tiddlers = context.tiddlers;
		for(i=0; i<syncItems.length; i++) {
			var si = syncItems[i];
			var f = tiddlers.findByField("title",si.title);
			if(f !== null) {
				if(tiddlers[f].fields['server.page.revision'] > si.tiddler.fields['server.page.revision']) {
					si.syncStatus = me.syncStatusList[si.isTouched ? 'changedBoth' : 'changedServer'];
				}
			} else {
				si.syncStatus = me.syncStatusList.notFound;
			}
			me.updateSyncStatus(si);
		}
		return true;
	};

	var openWorkspaceCallback = function(context,syncItems) {
		if(context.status) {
			context.adaptor.getTiddlerList(context,syncItems,getTiddlerListCallback);
			return true;
		}
		displayMessage(context.statusText);
		return false;
	};

	var context = {host:st.serverHost,workspace:st.serverWorkspace};
	syncItem.adaptor.openHost(st.serverHost);
	syncItem.adaptor.openWorkspace(st.serverWorkspace,context,st.syncItems,openWorkspaceCallback);
	return st;
};

config.macros.sync.updateSyncStatus = function(syncItem)
{
	var e = syncItem.colElements["status"];
	jQuery(e).empty();
	createTiddlyText(e,syncItem.syncStatus.text);
	syncItem.rowElement.style.display = syncItem.syncStatus.display;
	if(syncItem.syncStatus.className)
		syncItem.rowElement.className = syncItem.syncStatus.className;
};

config.macros.sync.doSync = function(e)
{
	var me = config.macros.sync;
	var getTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			var tiddler = context.tiddler;
			store.saveTiddler(tiddler.title,tiddler.title,tiddler.text,tiddler.modifier,tiddler.modified,tiddler.tags,tiddler.fields,true,tiddler.created);
			syncItem.syncStatus = me.syncStatusList.gotFromServer;
			me.updateSyncStatus(syncItem);
		}
	};
	var putTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			store.resetTiddler(context.title);
			syncItem.syncStatus = me.syncStatusList.putToServer;
			me.updateSyncStatus(syncItem);
		}
	};

	var rowNames = ListView.getSelectedRows(currSync.listView);
	var i,sl = me.syncStatusList;
	for(i=0; i<currSync.syncList.length; i++) {
		var si = currSync.syncList[i];
		if(rowNames.indexOf(si.title) != -1) {
			var errorMsg = "Error in doSync: ";
			try {
				var r = true;
				switch(si.syncStatus) {
				case sl.changedServer:
					var context = {"workspace": si.serverWorkspace};
					r = si.adaptor.getTiddler(si.title,context,si,getTiddlerCallback);
					break;
				case sl.notFound:
				case sl.changedLocally:
				case sl.changedBoth:
					r = si.adaptor.putTiddler(si.tiddler,null,si,putTiddlerCallback);
					break;
				default:
					break;
				}
				if(!r)
					displayMessage(errorMsg + r);
			} catch(ex) {
				if(ex.name == "TypeError")
					displayMessage("sync operation unsupported: " + ex.message);
				else
					displayMessage(errorMsg + ex.message);
			}
		}
	}
	return false;
};

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	listWrapper.setAttribute("refresh","macro");
	listWrapper.setAttribute("macroName","plugins");
	listWrapper.setAttribute("params",paramString);
	this.refresh(listWrapper,paramString);
};

config.macros.plugins.refresh = function(listWrapper,params)
{
	var me = config.macros.plugins;
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	jQuery(listWrapper).empty();
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++) {
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null) {
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
		}
	}
	for(t=0; t<plugins.length; t++) {
		p = plugins[t];
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
	}
	if(plugins.length == 0) {
		createTiddlyElement(listWrapper,"em",null,null,this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);
		wizard.setValue("listView",listView);
		if(!readOnly) {
			wizard.setButtons([
				{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},
				{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		var t;
		for(t=0; t<rowNames.length; t++) {
			store.setTiddlerTag(rowNames[t],false,"systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			var t;
			for(t=0; t<rowNames.length; t++) {
				store.removeTiddler(rowNames[t]);
				story.closeTiddler(rowNames[t],true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(linkText) {
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
	} else {
		e.appendChild(document.createTextNode(text));
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{name: "SystemSettings", notify: onSystemSettingsChange},
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "WindowTitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
];

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},

	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.getAttribute("args");
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e,title,args);
			return true;
		} else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root,changeList)
{
	var c,nodes = root.childNodes;
	for(c=0; c<nodes.length; c++) {
		var e = nodes[c], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
	}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
				}
				invokeMacro(e,macro,params,null,tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes,t;
	if(display) {
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
	}
	var wrapper = document.getElementById("contentWrapper");

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};
	if(!title || !isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable
	wrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper,"div",story.containerId());
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e,hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e,hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle",""),null,tiddler);
}

function refreshStyles(title,doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title,doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) {return encodeCookie(config.options[name].toString());},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	},
	'chk': {
		get: function(name) {return config.options[name] ? 'true' : 'false';},
		set: function(name,value) {config.options[name] = value == 'true';}
	}
};

function setOption(name,value)
{
	var optType = name.substr(0,3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name,value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substr(0,3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode)
		return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i,cookies = {};
	for(i=0; i<cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = cookieList[i].substr(0,p).trim();
			var value = cookieList[i].substr(p+1).trim();
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i,cookies = getCookies();
	if(cookies['TiddlyWiki']) {
		cookies = cookies['TiddlyWiki'].decodeHashMap();
	}
	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i,cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key,settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key,settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode)
		return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}
	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name,true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key,cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';
	cookies = getCookies();
	var c;
	for(c in cookies) {
		var optType = c.substr(0,3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		if(storeWasDirty == false && story.areAnyDirty() == false) {
			saveChanges(null,[tiddler]);
		} else {
			autoSaveChanges(null,[tiddler]);
		}
	}, 1000);
}

function saveSystemSetting(name,saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title,name);
	if(readOnly || slice === getOption(name)) {
		return; //# don't save if read-only or the option hasn't changed
	}
	var slices = store.calcAllSlices(title);
	var key;
	for(key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}
	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key,slices[key]]));
	}
	text = text.sort().join('\n');
	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});
}

config.macros.option.genericCreate = function(place,type,opt,className,desc)
{
	var typeInfo = config.macros.option.types[type];
	var c = document.createElement(typeInfo.elementType);
	if(typeInfo.typeValue)
		c.setAttribute('type',typeInfo.typeValue);
	c[typeInfo.eventName] = typeInfo.onChange;
	c.setAttribute('option',opt);
	c.className = className || typeInfo.className;
	if(config.optionsDesc[opt])
		c.setAttribute('title',config.optionsDesc[opt]);
	place.appendChild(c);
	if(desc != 'no')
		createTiddlyText(place,config.optionsDesc[opt] || opt);
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substr(0,3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)
{
	config.options[opt] = value;
	saveOption(opt);
	var t,nodes = document.getElementsByTagName(elementType);
	for(t=0; t<nodes.length; t++) {
		var optNode = nodes[t].getAttribute('option');
		if(opt == optNode && nodes[t]!=elem)
			nodes[t][valueField] = value;
	}
};

config.macros.option.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);
	var desc = getParam(params,'desc','no');
	var type = opt.substr(0,3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place,type,opt,className,desc);
};

config.macros.options.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var showUnknown = getParam(params,'showUnknown','no');
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper,markList);
	wizard.setValue('listWrapper',listWrapper);
	this.refreshOptions(listWrapper,showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper,showUnknown)
{
	var n,opts = [];
	for(n in config.options) {
		var opt = {};
		opt.option = '';
		opt.name = n;
		opt.lowlight = !config.optionsDesc[n];
		opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
		if(!opt.lowlight || showUnknown)
			opts.push(opt);
	}
	opts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});
	ListView.create(listWrapper,opts,this.listViewTemplate);
	for(n=0; n<opts.length; n++) {
		var type = opts[n].name.substr(0,3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[n].colElements['option'],type,opts[n].name,null,'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper,this.checked);
	return false;
};

//--
//-- Saving
//--

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(config.locale) {
		var mRE = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/;
		var m = mRE.exec(s);
		if(m) {
			var t = m[1];
			if(m[2])
				t += ' xml:lang="' + config.locale + '"';
			if(m[3])
				t += ' lang="' + config.locale + '"';
			t += ">";
			s = s.substr(0,m.index) + t + s.substr(m.index+m[0].length);
		}
	}
	return s;
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + convertUnicodeToFileFormat(store.getRecursiveTiddlerText(tiddlerName,"")) + "\n");
}

function updateOriginal(original,posDiv,localPath)
{
	if(!posDiv)
		posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				convertUnicodeToFileFormat(store.allTiddlersAsHtml()) + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = convertUnicodeToFileFormat(getPageTitle()).htmlEncode();
	revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original)
		return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<"+"!--POST-STOREAREA--"+">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<"+"!--POST-BODY-START--"+">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea,start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps,start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv,posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty,tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty,tiddlers);
}

function loadOriginal(localPath)
{
	return loadFile(localPath);
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty,tiddlers)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	var originalPath = document.location.toString();
	if(originalPath.substr(0,5) != "file:") {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var localPath = getLocalPath(originalPath);
	var original = loadOriginal(localPath);
	if(original == null) {
		alert(msg.cantSaveError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(msg.invalidFileError.format([localPath]));
		return;
	}
	saveMain(localPath,original,posDiv);
	if(config.options.chkSaveBackups)
		saveBackup(localPath,original);
	if(config.options.chkSaveEmptyTemplate)
		saveEmpty(localPath,original,posDiv);
	if(config.options.chkGenerateAnRssFeed && saveRss instanceof Function)
		saveRss(localPath);
	if(config.options.chkDisplayInstrumentation)
		displayMessage("saveChanges " + (new Date()-t0) + " ms");
}

function saveMain(localPath,original,posDiv)
{
	var save;
	try {
		var revised = updateOriginal(original,posDiv,localPath);
		save = saveFile(localPath,revised);
	} catch (ex) {
		showException(ex);
	}
	if(save) {
		displayMessage(config.messages.mainSaved,"file://" + localPath);
		store.setDirty(false);
	} else {
		alert(config.messages.mainFailed);
	}
}

function saveBackup(localPath,original)
{
	var backupPath = getBackupPath(localPath);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(backup)
		displayMessage(config.messages.backupSaved,"file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath,original,posDiv)
{
	var emptyPath,p;
	if((p = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0,p) + "/";
	else if((p = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0,p) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";
	var empty = original.substr(0,posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath,empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved,"file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

function getLocalPath(origPath)
{
	var originalPath = convertUriToUTF8(origPath,config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath,title,extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + slash + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + ".";
	if(title)
		backupPath += title.replace(/[\\\/\*\?\":<> ]/g,"_") + ".";
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath,convertUnicodeToFileFormat(generateRss())))
		displayMessage(config.messages.rssSaved,"file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler,uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text,null,tiddler).htmlEncode() + "</description>\n";
	var i;
	for(i=0; i<tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s +="<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle",""),null,tiddler).htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle",""),null,tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var i,n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for(i=tiddlers.length-1; i>=n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i],u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

function copyFile(dest,source)
{
	return config.browser.isIE ? ieCopyFile(dest,source) : false;
}

function saveFile(fileUrl,content)
{
	var r = mozillaSaveFile(fileUrl,content);
	if(!r)
		r = ieSaveFile(fileUrl,content);
	if(!r)
		r = javaSaveFile(fileUrl,content);
	return r;
}

function loadFile(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return r;
}

function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	var pos = path.lastIndexOf("\\");
	if(pos==-1)
		pos = path.lastIndexOf("/");
	if(pos!=-1)
		path = path.substring(0,pos+1);

	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	for(i=scan.length-1;i>=0;i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath,content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest,source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath,content)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				file.create(0,0x01B4);// 0x01B4 = 0664
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file,0x22,0x04,null);
			out.write(content,content.length);
			out.flush();
			out.close();
			return true;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				return null;
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file,0x01,0x04,null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			var contents = sInputStream.read(sInputStream.available());
			sInputStream.close();
			inputStream.close();
			return contents;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i-1) : url;
}

function javaSaveFile(filePath,content)
{
	try {
		if(document.applets["TiddlySaver"])
			return document.applets["TiddlySaver"].saveFile(javaUrlToFilename(filePath),"UTF-8",content);
	} catch(ex) {
	}
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	try {
		if(document.applets["TiddlySaver"]) {
			var ret = document.applets["TiddlySaver"].loadFile(javaUrlToFilename(filePath),"UTF-8");
			if(!ret)
				return null;
			return String(ret);
		}
	} catch(ex) {
	}
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

//--
//-- Filesystem utilities
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}


function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s+fin : s;
}

function convertUnicodeToFileFormat(s)
{
	return config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re,function($0) {return "&#" + $0.charCodeAt(0).toString() + ";";});
}

function convertUnicodeToUTF8(s)
{
// return convertUnicodeToFileFormat to allow plugin migration
	return convertUnicodeToFileFormat(s);
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUriToUTF8(uri,charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"].getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri,charSet);
}
//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host)
		return '';
	host = host.trim();
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length-1) == '/')
		host = host.substr(0,host.length-1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context,userParams,callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
AdaptorBase.prototype.openHost = function(host,context,userParams,callback)
{
	this.host = host;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {context.callback(context,userParams);},10);
	return true;
};

// Open the specified workspace
AdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)
{
	this.workspace = workspace;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context,jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context,context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context,jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context,context.userParams);
};

// Get the list of workspaces on a given server
FileAdaptor.prototype.getWorkspaceList = function(context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.workspaces = [{title:"(default)"}];
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

// Gets the list of tiddlers within a given workspace
FileAdaptor.prototype.getTiddlerList = function(context,userParams,callback,filter)
{
	context = this.setContext(context,userParams,callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			context.xhr = jqXHR;
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context,userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title,tiddler) {context.tiddlers.push(tiddler);});
		}
		var i;
		for(i=0; i<context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	var info = {};
	info.uri = tiddler.fields['server.host'] + "#" + tiddler.title;
	return info;
};

// Retrieve a tiddler from a given workspace on a given server
FileAdaptor.prototype.getTiddler = function(title,context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context,userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context,userParams);
	} else {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

function ajaxReq(args)
{
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(args);
}

function httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type:type,
		url:url,
		processData:false,
		data:data,
		cache:!!allowCache,
		beforeSend: function(xhr) {
			var i;
			for(i in headers)
				xhr.setRequestHeader(i,headers[i]);
			xhr.setRequestHeader("X-Requested-With", "TiddlyWiki " + formatVersion());
		}
	};

	if(callback) {
		options.complete = function(xhr,textStatus) {
			if(httpSuccess(xhr))
				callback(true,params,xhr.responseText,url,xhr);
			else
				callback(false,params,null,url,xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Returns TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1,v2)
{
	var x1,x2,i,a = ["major","minor","revision"];
	for(i = 0; i<a.length; i++) {
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1<x2)
			return 1;
		if(x1>x2)
			return -1;
	}
	x1 = v1.beta || 9999;
	x2 = v2.beta || 9999;
	if(x1<x2)
		return 1;
	return x1 > x2 ? -1 : 0;
}

function merge(dst,src,preserveExisting)
{
	var i;
	for(i in src) {
		if(!preserveExisting || dst[i] === undefined)
			dst[i] = src[i];
	}
	return dst;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if(e.target)
		obj = e.target;
	else if(e.srcElement)
		obj = e.srcElement;
	if(obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return obj;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e,message)
{
	var s = e.description || e.toString();
	return message ? "%0:\n%1".format([message,s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e,message)
{
	alert(exceptionText(e,message));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	var b = g.currBrowser;
	if(b == null) {
		b = 0;
		while(b < g.browsers.length-1 && !g.browsers[b]())
			b++;
		g.currBrowser = b;
	}
	if(!g.codes[name])
		return "";
	return g.codes[name][b];
}

function createTiddlyText(parent,text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,parent);
	return cb;
}

function createTiddlyElement(parent,element,id,className,text,attribs)
{
	var n,e = document.createElement(element);
	if(className != null)
		e.className = className;
	if(id != null)
		e.setAttribute("id",id);
	if(text != null)
		e.appendChild(document.createTextNode(text));
	if(attribs) {
		for(n in attribs) {
			e.setAttribute(n,attribs[n]);
		}
	}
	if(parent != null)
		parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)
{
	var i,btn = document.createElement("a");
	btn.setAttribute("href","javascript:;");
	if(action) {
		btn.onclick = action;
	}
	if(tooltip)
		btn.setAttribute("title",tooltip);
	if(text)
		btn.appendChild(document.createTextNode(text));
	btn.className = className || "button";
	if(id)
		btn.id = id;
	if(attribs) {
		for(i in attribs) {
			btn.setAttribute(i,attribs[i]);
		}
	}
	if(parent)
		parent.appendChild(btn);
	if(accessKey)
		btn.setAttribute("accessKey",accessKey);
	return btn;
}

function createExternalLink(place,url,label)
{
	var link = document.createElement("a");
	link.className = "externalLink";
	link.href = url;
	var f = config.messages.externalLinkTooltip;
	link.title = f ? f.format([url]) : url;
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	place.appendChild(link);
	if(label)
		createTiddlyText(link, label);
	return link;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title]=="string")
		subTitle = config.annotations[title];
	return {classes: classes.join(" "),subTitle: subTitle};
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target,title,null,true,null,fields,toggling);
	}
	clearMessage();
	return false;
}

function createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)
{
	var title = jQuery.trim(title);
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,className);
	var btn = isStatic ? createExternalLink(place,store.getTiddlerText("SiteUrl",null) + "#" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	if(noToggle)
		btn.setAttribute("noToggle","true");
	if(linkedFromTiddler) {
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields",fields);
	}
	return btn;
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function createTiddlyDropDown(place,onchange,options,defaultValue)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	var t;
	for(t=0; t<options.length; t++) {
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		if(options[t].name == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby&&sortby.length) {
		store.sortTiddlers(tiddlers,sortby);
	}
	story.displayTiddlers(this,tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby&&sortby.length) {
			store.sortTiddlers(tagged,sortby);
		}
		var titles = [];
		var r;
		for(r=0;r<tagged.length;r++) {
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			openAll.setAttribute("sortby",sortby);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++) {
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
			}
		} else {
			createTiddlyElement(popup,"li",null,"disabled",lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler,title,tooltip)
{
	var btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);
	btn.setAttribute("tag",tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler",excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this,"div","popupTiddler");
		wikify(tiddler.text,popup,null,tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place,caption,tooltip,tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place,caption,true);
		var btn = createTiddlyButton(place,glyph("downArrow"),tooltip,onClickTiddlyPopup,"tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place,caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	var t;
	for(t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if(text) btn.setAttribute("errorText",text);
}
//-
//- Animation engine
//-

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	var t;
	for(t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length) {
		var animation = me.animations[a];
		if(animation.tick()) {
			a++;
		} else {
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element,duration,properties,callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element,style,value)
{
	switch(style) {
	case "-tw-vertScroll":
		window.scrollTo(findScrollX(),value);
		break;
	case "-tw-horizScroll":
		window.scrollTo(value,findScrollY());
		break;
	default:
		element.style[style] = value;
		break;
	}
};

Morpher.prototype.stop = function()
{
	var t;
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element,p.style,p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element,this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
			case undefined:
			case "style":
				var v = p.start + (p.end-p.start) * progress;
				this.assignStyle(this.element,p.style,template.format([v]));
				break;
			case "color":
				break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text,startElement,targetElement,unused)
{
	var e = createTiddlyElement(document.body,"div",null,"zoomer");
	createTiddlyElement(e,"div",null,null,text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},
		{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},
		{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},
		{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},
		{style: 'fontSize', start: 8, end: 24, template: '%0pt'}
	];
	var c = function(element,properties) {jQuery(element).remove();};
	return new Morpher(e,config.animDuration,p,c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	var p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];
	return new Morpher(targetElement,config.animDuration,p);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,unused,deleteMode)
{
	element.style.overflow = 'hidden';
	if(opening)
		element.style.height = '0px'; // Resolves a Firefox flashing bug
	element.style.display = 'block';
	var height = element.scrollHeight;
	var p = [];
	var c = null;
	if(opening) {
		p.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});
		p.push({style: 'opacity', start: 0, end: 1, template: '%0'});
		p.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});
	} else {
		p.push({style: 'height', start: height, end: 0, template: '%0px'});
		p.push({style: 'display', atEnd: 'none'});
		p.push({style: 'opacity', start: 1, end: 0, template: '%0'});
		p.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});
		switch(deleteMode) {
		case "all":
			c = function(element,properties) {jQuery(element).remove();};
			break;
		case "children":
			c = function(element,properties) {jQuery(element).empty();};
			break;
		}
	}
	return new Morpher(element,config.animDuration,p,c);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root,elem,className)
{
	var stackPosition = this.find(root,"popup");
	Popup.remove(stackPosition+1);
	var popup = createTiddlyElement(document.body,elem || "ol","popup",className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({root: root, popup: popup});
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign,halign,offset)
{
	var curr = Popup.stack[Popup.stack.length-1];
	this.place(curr.root,curr.popup,valign,halign,offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
};

Popup.place = function(root,popup,valign,halign,offset)
{
	if(!offset)
		offset = {x:0,y:0};
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth*0.75)
		popup.style.width = winWidth*0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var t,pos = -1;
	for(t=this.stack.length-1; t>=0; t--) {
		if(isDescendant(e,this.stack[t].popup))
			pos = t;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	var t;
	for(t=Popup.stack.length-1; t>=from; t--) {
		var p = Popup.stack[t];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0,from);
};

//--
//-- Wizard support
//--

function Wizard(elem)
{
	if(elem) {
		this.formElem = findRelated(elem,"wizard","className");
		this.bodyElem = findRelated(this.formElem.firstChild,"wizardBody","className","nextSibling");
		this.footElem = findRelated(this.formElem.firstChild,"wizardFooter","className","nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name,value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place,title)
{
	this.formElem = createTiddlyElement(place,"form",null,"wizard");
	createTiddlyElement(this.formElem,"h1",null,null,title);
	this.bodyElem = createTiddlyElement(this.formElem,"div",null,"wizardBody");
	this.footElem = createTiddlyElement(this.formElem,"div",null,"wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo,status)
{
	jQuery(this.footElem).empty();
	var t;
	for(t=0; t<buttonInfo.length; t++) {
		createTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);
		insertSpacer(this.footElem);
		}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem,"span",null,"status",status);
	}
};

Wizard.prototype.addStep = function(stepTitle,html)
{
	jQuery(this.bodyElem).empty();
	var w = createTiddlyElement(this.bodyElem,"div");
	createTiddlyElement(w,"h2",null,null,stepTitle);
	var step = createTiddlyElement(w,"div",null,"wizardStep");
	step.innerHTML = html;
	applyHtmlMacros(step,tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className || "listView twtable");
	var thead = createTiddlyElement(table,"thead");
	var t,r = createTiddlyElement(thead,"tr");
	for(t=0; t<listTemplate.columns.length; t++) {
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(c,columnTemplate,t);
			if(columnTemplate.className)
				jQuery(c).addClass(columnTemplate.className);
		}
	}
	var rc,tbody = createTiddlyElement(table,"tbody");
	for(rc=0; rc<listObject.length; rc++) {
		var rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(c=0; c<listTemplate.rowClasses.length; c++) {
			if(rowObject[listTemplate.rowClasses[c].field])
				jQuery(r).addClass(listTemplate.rowClasses[c].className);
		}
		rowObject.rowElement = r;
		rowObject.colElements = {};
		var cc;
		for(cc=0; cc<listTemplate.columns.length; cc++) {
			c = createTiddlyElement(r,"td");
			columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
				if(columnTemplate.className)
					jQuery(c).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = c;
		}
	}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons) {
		for(t=0; t<listTemplate.buttons.length; t++) {
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view,name,tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var t,hadOne = false;
	for(t=0; t<checkboxes.length; t++) {
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox") {
			var rn = cb.getAttribute("rowName");
			if(rn) {
				callback(cb,rn);
				hadOne = true;
			}
		}
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view,function(e,rowName) {
				if(e.checked)
					rowNames.push(rowName);
				});
	return rowNames;
};

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				wikify(v,place,null,null);
		}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined && v.title)
				createTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);
		}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var msg = config.messages.sizeTemplates;
			var v = listObject[field];
			if(v != undefined) {
				var t = 0;
				while(t<msg.length-1 && v<msg[t].unit)
					t++;
				createTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));
			}
		}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			var c = columnTemplate.text;
			if(v != undefined)
				createExternalLink(place,v,c || v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var t;
				for(t=0; t<v.length; t++) {
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
				}
			}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
			}
		}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// Add indexOf function if browser does not support it
if(!Array.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	var i;
	for(i=from; i<this.length; i++) {
		if(this[i] === item)
			return i;
	}
	return -1;
};}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field,value)
{
	var t;
	for(t=0; t<this.length; t++) {
		if(this[t][field] === value)
			return t;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1)
			this.push(value);
	} else if(mode == -1) {
		if(p != -1)
			this.splice(p,1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	var i;
	for(i=0; i<items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	var i;
	for(i = 0; i<items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique === false) {
		this.push(item);
	} else {
		if(this.indexOf(item) == -1)
			this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
};

if(!Array.prototype.map) {
Array.prototype.map = function(fn,thisObj)
{
	var scope = thisObj || window;
	var i,j,a = [];
	for(i=0, j=this.length; i < j; ++i) {
		a.push(fn.call(scope,this[i],i,this));
	}
	return a;
};}

//--
//-- Augmented methods for the JavaScript String() object
//--

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length-n) : this;
};

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
};

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var t,s = this.split("-");
	if(s.length > 1) {
		for(t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	}
	return s.join("");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match,r = [];
	do {
		match = subRegExp.exec(this);
		if(match && match[1]) {
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1],10)]);
			currPos = subRegExp.lastIndex;
		}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var t,c = this;
	for(t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval && config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) {
							n = window.restrictedEval(n);
						}
					} else {
						n = window.eval(n);
					}
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({name:"",value:n});
			} else {
				var v = parseToken(match,8);
				if(v == null && defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null && defaultValue) {
					v = defaultValue;
				}
				r.push({name:n,value:v});
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	// Summarise parameters into first element
	var t;
	for(t=1; t<r.length; t++) {
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	}
	return r;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list",null,!notAllowEval,true);
	var t,n = [];
	for(t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var t,n = [];
	for(t=1; t<p.length; t++) {
		if(p[t].value)
			n.pushUnique(p[t].value,unique);
	}
	return n;
};

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end)
{
	var s = this.indexOf(start);
	if(s != -1) {
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s,e];
	}
};

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;
};

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if(r)
		return this.substring(r[0],r[1]);
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list) {
		var t,results = [];
		for(t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
	} else {
		return "";
	}
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon","",false);
	var t,r = {};
	for(t=1; t<fields.length; t++)
		r[fields[t].name] = fields[t].value;
	return r;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var t,r = [];
	for(t in hashmap)
		r.push(t + ':"' + hashmap[t] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0,prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params,name,defaultValue)
{
	if(!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params,name,defaultValue)
{
	return !!getParam(params,name,defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	t = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));
	t = t.replace(/\\/g,"");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);
	return Math.floor(n/7)+1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate()-1];
};

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);
};

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);
};

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +"0";
};

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0,4),10),
			parseInt(d.substr(4,2),10)-1,
			parseInt(d.substr(6,2),10),
			parseInt(d.substr(8,2)||"00",10),
			parseInt(d.substr(10,2)||"00",10),
			parseInt(d.substr(12,2)||"00",10),
			parseInt(d.substr(14,3)||"000",10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0,1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
			} else {
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var clamp = function(x,min,max) {
		return x < min ? min : (x > max ? max : x);
	};
	return "#" +
			("0" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place,horiz,locolors,hicolors)
{
	if(!hicolors)
		hicolors = locolors;
	var t;
	for(t=0; t<= 100; t+=2) {
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var p = t/100*(locolors.length-1);
		var hc = hicolors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = locolors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();
	}
}

function addEvent(obj,type,fn)
{
	if(obj.attachEvent) {
		obj["e"+type+fn] = fn;
		obj[type+fn] = function(){obj["e"+type+fn](window.event);};
		obj.attachEvent("on"+type,obj[type+fn]);
	} else {
		obj.addEventListener(type,fn,false);
	}
}

function removeEvent(obj,type,fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on"+type,obj[type+fn]);
		obj[type+fn] = null;
	} else {
		obj.removeEventListener(type,fn,false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e,text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0,e.selectionStart).split("\n").length-1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) {
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e,pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) {
		// IE support
		e.focus ();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character',pos);
		sel.moveEnd('character',0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = "";
	while(e && e.nodeName == "#text") {
		t += e.nodeValue;
		e = e.nextSibling;
	}
	return t;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e,ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE)
		return;
	var att = e.attributes;
	if(att) {
		var t;
		for(t=0; t<att.length; t++) {
			var n = att[t].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s,id,doc)
{
	jQuery.twStylesheet(s,{id:id,doc:doc});
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({id:id});
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store,node,tiddlers)
{
	var title = this.getTitle(store,node);
	if(safeMode && store.isShadowTiddler(title))
		return;
	if(title) {
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store,tiddler,title,node);
		tiddlers.push(tiddler);
	}
};

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var t,tiddlers = [];
	for(t = 0; t < nodes.length; t++) {
		try {
			this.loadTiddler(store,nodes[t],tiddlers);
		} catch(ex) {
			showException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var t,tiddlers = store.getTiddlers("title");
	for(t = 0; t < tiddlers.length; t++) {
		if(!tiddlers[t].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[t]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store,node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title");
		if(!title)
			title = node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var lenPrefix = store.idPrefix.length;
		if(node.id.substr(0,lenPrefix) == store.idPrefix)
			title = node.id.substr(lenPrefix);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName!="PRE" && e.nodeName!="pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg,"").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i,attrs = node.attributes;
	for(i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created,fields,creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store,tiddler)
{
	try {
		var extendedAttributes = "";
		var usePre = config.options.chkUsePreForStorage;
		store.forEachField(tiddler,
			function(tiddler,fieldName,value) {
				// don't store stuff from the temp namespace
				if(typeof value != "string")
					value = "";
				if(!fieldName.match(/^temp\./))
					extendedAttributes += ' %0="%1"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);
			},true);
		var created = tiddler.created;
		var modified = tiddler.modified;
		var attributes = tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "";
		attributes += tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "";
		attributes += (usePre && created == version.date) ? "" :' created="' + created.convertToYYYYMMDDHHMM() + '"';
		attributes += (usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() +'"';
		var tags = tiddler.getTags();
		if(!usePre || tags)
			attributes += ' tags="' + tags.htmlEncode() + '"';
		return ('<div %0="%1"%2%3>%4</'+'div>').format([
				usePre ? "title" : "tiddler",
				tiddler.title.htmlEncode(),
				attributes,
				extendedAttributes,
				usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
			]);
	} catch (ex) {
		throw exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};

//]]>
</script>
<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,unused3)
{
	story.displayTiddlers(srcElement,titles,template,animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,unused3)
{
	story.displayTiddler(srcElement,title,template,animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"' : '\\"',
		'\\': '\\\\'
		};
	var replaceFn = function(a,b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
		};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g,replaceFn) + '"';
	return '"' + this + '"';
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all it's children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e,className)
{
	jQuery(e).addClass(className);
}

function removeClass(e,className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e,className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}

//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*! jQuery v1.6.4 http://jquery.com/ | http://jquery.org/license */
(function(a,b){function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cr(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cq(a,b){var c={};f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a});return c}function cp(){cn=b}function co(){setTimeout(cp,0);return cn=f.now()}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bW(a,c,d,e,"*",g));return l}function bV(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function by(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bt:bu;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bv(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bd,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bk(a){f.nodeName(a,"input")?bj(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bj)}function bj(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bi(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bh(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bg(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bf(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function V(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(Q.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function U(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function M(a,b){return(a&&a!=="*"?a+".":"")+b.replace(y,"`").replace(z,"&")}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(w,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function J(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function D(){return!0}function C(){return!1}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!B){B=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(I)return I.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())});return e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+"With"](this===b?d:this,[h])}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i=f.expando,j=typeof c=="string",k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&&f.expando;if((!m||e&&m&&l[m]&&!l[m][i])&&j&&d===b)return;m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c);g=l[m],e&&(g[i]||(g[i]={}),g=g[i]),d!==b&&(g[f.camelCase(c)]=d);if(c==="events"&&!g[c])return g[i]&&g[i].events;j?(h=g[c],h==null&&(h=g[f.camelCase(c)])):h=g;return h}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;if(!h[i])return;if(b){d=c?h[i][e]:h[i];if(d){d[b]||(b=f.camelCase(b)),delete d[b];if(!l(d))return}}if(c){delete h[i][e];if(!l(h[i]))return}var j=h[i][e];f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");j[1]=j[1]?"."+j[1]:"";if(c===b){d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&&j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return typeof d=="string"?d.replace(p,""):d==null?"":d}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}if(g&&!d.length&&e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&&(i=u)));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&&"set"in i&&j&&(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,""+d);return d}if(i&&"get"in i&&j&&(h=i.get(a,c))!==null)return h;h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.attr(a,b,""),a.removeAttribute(b),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(u&&f.nodeName(a,"button"))return u.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(u&&f.nodeName(a,"button"))return u.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);i&&(c=f.propFix[c]||c,h=f.propHooks[c]);return d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==null?g:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d;return f.prop(a,c)===!0||(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=C;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=C);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),B).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete 
t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if(!!e&&!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result}},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,M(a.origType,a.selector),f.extend({},a,{handler:L,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,M(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?D:C):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=D;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};var E=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},F=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?F:E,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?F:E)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="submit"||c==="image")&&f(b).closest("form").length&&J("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&J("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var G,H=function(a){var b=f.nodeName(a,"input")?a.type:"",c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex);return c},I=function(c){var d=c.target,e,g;if(!!x.test(d.nodeName)&&!d.readOnly){e=f._data(d,"_change_data"),g=H(d),(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",g);if(e===b||g===e)return;if(e!=null||g)c.type="change",c.liveFired=b,f.event.trigger(c,arguments[1],d)}};f.event.special.change={filters:{focusout:I,beforedeactivate:I,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&I.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&I.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",H(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in G)f.event.add(this,c+".specialChange",G[c]);return x.test(this.nodeName)},teardown:function(a){f.event.remove(this,".specialChange");return x.test(this.nodeName)}},G=f.event.special.change.filters,G.focus=G.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){f(this).unbind(a,g);return e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var K={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)==="."){n.unbind(g);return this}if(d===!1||f.isFunction(d))e=d||C,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=w.exec(h),k="",j&&(k=j[0],h=h.replace(w,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,K[h]?(a.push(K[h]+k),h=h+k):h=(K[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+M(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+M(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);o&&(k(o,h,f,g),k.uniqueSort(f));return f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var N=/Until$/,O=/^(?:parents|prevUntil|prevAll)/,P=/,/,Q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,S=f.expr.match.POS,T={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(V(this,a,!1),"not",a)},filter:function(a){return this.pushStack(V(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=S.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=S.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(U(c[0])||U(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=R.call(arguments);N.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!T[a]?f.unique(e):e,(this.length>1||P.test(d))&&O.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|object|embed|option|style)/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,bc=/\/(java|ecma)script/i,bd=/^\s*<!(?:\[CDATA\[|\-\-)/,be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,f.support.htmlSerialize||(be._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!be[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bb.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bf(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bl)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!ba.test(a[0])&&(f.support.checkClone||!bb.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean
(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bh(a,d),e=bi(a),g=bi(d);for(h=0;e[h];++h)g[h]&&bh(e[h],g[h])}if(b){bg(a,d);if(c){e=bi(a),g=bi(d);for(h=0;e[h];++h)bg(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=be[l]||be._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bk(k[i]);else bk(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bc.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bm=/alpha\([^)]*\)/i,bn=/opacity=([^)]*)/,bo=/([A-Z]|^ms)/g,bp=/^-?\d+(?:px)?$/i,bq=/^-?\d/,br=/^([\-+])=([\-+.\de]+)/,bs={position:"absolute",visibility:"hidden",display:"block"},bt=["Left","Right"],bu=["Top","Bottom"],bv,bw,bx;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bv(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=br.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bv)return bv(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return by(a,b,d);f.swap(a,bs,function(){e=by(a,b,d)});return e}},set:function(a,b){if(!bp.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bn.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bm,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bm.test(g)?g.replace(bm,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bv(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bw=function(a,c){var d,e,g;c=c.replace(bo,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bx=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bp.test(d)&&bq.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bv=bw||bx,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bz=/%20/g,bA=/\[\]$/,bB=/\r?\n/g,bC=/#.*$/,bD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bE=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bF=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bG=/^(?:GET|HEAD)$/,bH=/^\/\//,bI=/\?/,bJ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bK=/^(?:select|textarea)/i,bL=/\s+/,bM=/([?&])_=[^&]*/,bN=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bO=f.fn.load,bP={},bQ={},bR,bS,bT=["*/"]+["*"];try{bR=e.href}catch(bU){bR=c.createElement("a"),bR.href="",bR=bR.href}bS=bN.exec(bR.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bO)return bO.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bJ,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bK.test(this.nodeName)||bE.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bB,"\r\n")}}):{name:b.name,value:c.replace(bB,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?bX(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),bX(a,b);return a},ajaxSettings:{url:bR,isLocal:bF.test(bS[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bT},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bV(bP),ajaxTransport:bV(bQ),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?bZ(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=b$(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bD.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bC,"").replace(bH,bS[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bL),d.crossDomain==null&&(r=bN.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bS[1]&&r[2]==bS[2]&&(r[3]||(r[1]==="http:"?80:443))==(bS[3]||(bS[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bW(bP,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bG.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bI.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bM,"$1_="+x);d.url=y+(y===d.url?(bI.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bT+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bW(bQ,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bz,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cq("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cr(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cq("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cq("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cr(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0})},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),f.each({slideDown:cq("show",1),slideUp:cq("hide",1),slideToggle:cq("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function g(a){return d.step(a)}var d=this,e=f.fx;this.startTime=cn||co(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&f.timers.push(g)&&!cl&&(cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||co(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cs=/^t(?:able|d|h)$/i,ct=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cu(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!cs.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=ct.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!ct.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cu(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cu(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNaN(j)?i:j}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->
</body>
</html>
